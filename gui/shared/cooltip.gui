container = {
	alwaystransparent = no
	name = "DefaultTooltipWidget"
	using = DefaultTooltipWidget
}

container = {
	name = "GameConceptTooltipDefault"
	alwaystransparent = no

	object_tooltip_pop_out = {

		blockoverride "header_additions" {
			hbox = {
				visible = "[GameConceptTooltip.HasIcon]"
				margin_right = 10
				margin_top = 8
				margin_left = -4

				icon = {
					size = { 52 52 }
					texture = "[GameConceptTooltip.GetIcon]"
					tintcolor = "[TooltipInfo.GetTintColor]"
					frame = "[GameConceptTooltip.GetFrame]"
					framesize = "[GameConceptTooltip.GetFrameSize]"
				}
			}
		}

		blockoverride "title_text" {
			margin = { 0 8 }
			text = "[GameConceptTooltip.GetOriginalAliasName]"
		}

		blockoverride "concept_link" {
			text = "[GameConceptTooltip.GetParentText]"
		}

		blockoverride "description_text" {
			text = "[GameConceptTooltip.GetDescription]"
			max_width = 400
		}

		blockoverride "bg_texture"
		{
			texture = "gfx/interface/tooltips/tooltip_bg_gameconcept.dds"
		}
	}
}

template character_opinion_tooltip {
	widget = {
		using = GeneralTooltipSetup
		using = DefaultTooltipBackground
		alwaystransparent = no

		vbox = {
			set_parent_size_to_minimum = yes
			margin = { 8 8 }
			spacing = 2

			hbox = {
				name = "heading"
				layoutpolicy_horizontal = expanding

				margin = { 8 8 }

				spacing = 6 #ugly hack to get a space between label and value

				background = {
					using = Background_Area
				}

				text_single = {
					block "ott_heading_text"
					{
						raw_text = "@opinion_icon! [Character.GetOpinionHeadingText( GetPlayer )]"
					}

					using = Font_Size_Medium
					align = nobaseline
				}

				text_single = {
					background = {
						name = "portrait_opinion_bg"
						texture = "gfx/interface/component_tiles/solid_black_label.dds"
						spritetype = Corneredtiled
						spriteborder = { 20 20 }
						texture_density = 2
						margin = { 3 1 }
					}

					max_width = 45
					align = nobaseline

					block "ott_opinion_value_text"
					{
						text = "[Character.GetOpinionOf( GetPlayer )|=]"
						fonttintcolor = "[Character.GetOpinionOfTint( GetPlayer )]"
					}

					default_format = "#true_white"
					using = Font_Size_Medium
				}

				expand = {}
			}

			hbox = {
				layoutpolicy_horizontal = expanding
				margin = { 8 0 }
				visible = "[Character.IsPlayer]"

				text_multi = {
					datacontext = "[Character]"
					visible = "[Not( Character.IsLocalPlayer )]"

					autoresize = yes
					max_width = 400
					text = "PLAYER_OPINION_UNIMPORTANT"
					default_format = "#weak"
				}

				text_multi = {
					datacontext = "[Character]"
					visible = "[Character.IsLocalPlayer]"

					autoresize = yes
					max_width = 400
					text = "PLAYER_OPINION_UNIMPORTANT_SELF"
					default_format = "#weak"
				}

				expand = {}
			}


			hbox = {
				layoutpolicy_horizontal = expanding
				margin = { 8 0 }

				text_multi = {
					block "ott_opinion_breakdown_text"
					{
						text = "[Character.GetOpinionBreakdownText( GetPlayer )]"
					}

					autoresize = yes
					max_width = 400
				}

				expand = {}
			}
		}
	}
}

template character_trait_tooltip {
	object_tooltip_pop_out = {

		blockoverride "header_additions" {
			hbox = {
				margin_right = 10
				margin_top = 8
				margin_left = -4

				trait_icon_texture = {
					blockoverride "icon_size"
					{
						size = { 52 52 }
						tintcolor = "[TooltipInfo.GetTintColor]"
					}
				}
			}
		}

		blockoverride "title_text" {
			margin = { 0 8 }
			text = "[Trait.GetNameNoTooltipWithDefault( Character.Self )]"
		}

		blockoverride "concept_link" {
			text = "[Trait.GetTraitCategoryLabel]"
		}

		blockoverride "description_text" {
			block "actual_description_text" {
				text = "[Trait.GetFullDescription( Character.Self, Faith.Self )]"
			}
		}

		blockoverride "extra_data_after_description"
		{
			vbox = {
				name = "trait_level_tracks"
				layoutpolicy_horizontal = expanding
				visible = "[DataModelHasItems( Trait.GetLevelTracks )]"
				allow_outside = yes

				spacer = {
					size = { 10 10 }
				}

				text_label_left = {
					layoutpolicy_horizontal = expanding
					text = "TRAIT_LEVEL_TRACKS_HEADER"
				}

				vbox = {
					layoutpolicy_horizontal = expanding
					datamodel = "[Trait.GetLevelTracks]"
					spacing = 5
					allow_outside = yes

					item = {
						hbox = {
							layoutpolicy_horizontal = expanding
							allow_outside = yes
							spacing = 5
							margin_right = 20

							vbox = {
								margin_top = 6

								icon = {
									size = { 30 30 }
									texture = "[TraitLevelTrack.GetIcon( Trait.Self, Character.Self )]"
								}
							}

							vbox = {
								layoutpolicy_horizontal = expanding
								spacing = 5

								text_single = {
									layoutpolicy_horizontal = expanding
									text = "[TraitLevelTrack.GetName]"
								}

								widget = {
									size = { 0 15 }
									layoutpolicy_horizontal = expanding
									allow_outside = yes

									datacontext = "[Character.GetTraitTrackProgressBar( Trait.Self, TraitLevelTrack.Self )]"

									hbox_complex_bar_progress_next = {
										size = { 0 15 }
										layoutpolicy_horizontal = expanding
										tooltip = "TRAIT_LEVEL_TRACK_PROGRESS_TOOTLIP"
										using = tooltip_se
									}

									hbox_complex_bar_levels = {
										size = { 0 15 }
										layoutpolicy_horizontal = expanding

										blockoverride "marker"
										{
											widget_level_marker = {
												scale = 0.75
												datacontext = "[TraitLevelTrack.GetEntryForXp( ComplexBarItem.GetValue )]"
												visible = "[GreaterThanOrEqualTo_int32( TraitLevelTrackEntry.GetLevel, '(int32)0' )]"

												blockoverride "visible_active"
												{
													visible = "[EqualTo_int32( Character.GetTraitTrackLevel( Trait.Self, TraitLevelTrack.Self ), TraitLevelTrackEntry.GetLevel )]"
												}

												blockoverride "visible_inactive"
												{
													visible = "[Not( EqualTo_int32( Character.GetTraitTrackLevel( Trait.Self, TraitLevelTrack.Self ), TraitLevelTrackEntry.GetLevel ) )]"
												}

												blockoverride "marker_tooltip"
												{
													tooltip = "TRAIT_LEVEL_TRACK_TT"
													using = tooltip_se
												}

												blockoverride "marker_text"
												{
													text = "[TraitLevelTrackEntry.GetLevel]"
												}
											}
										}
									}
								}
							}
						}
					}
				}
			}
		}
	}
}

container = {
	alwaystransparent = no
	name = "TraitTooltipDefault"
	datacontext = "[Character.GetFaith]"
	using = character_trait_tooltip
}

container = {
	name = "FaithDoctrineTooltipDefault"
	alwaystransparent = no

	object_tooltip_pop_out = {
		blockoverride "title_text" {
			margin = { 0 8 }
			text = "[FaithDoctrine.GetBaseNameNoTooltip]"
			default_format = "#T"
		}

		blockoverride "description_text" {
			text = "FAITH_DOCTRINE_GENERAL_TOOLTIP"
		}

		blockoverride "concept_link" {
			text = [doctrine|E]
		}
	}
}

container = {
	name = "LifestyleTooltipDefault"
	alwaystransparent = no

	object_tooltip_pop_out = {
		blockoverride "title_text" {
			margin = { 0 8 }
			text = "[Lifestyle.GetNameNoTooltip]"
		}

		blockoverride "description_text" {
			text = "[Lifestyle.GetDescription]"
		}

		blockoverride "concept_link" {
			text = [lifestyle|E]
		}

		blockoverride "header_additions" {
			hbox = {
				margin_right = 10
				margin_top = 8
				margin_left = -4

				icon = {
					size = { 52 52 }
					texture = "[Lifestyle.GetIcon]"
					framesize = { 160 160 }
					tintcolor = "[TooltipInfo.GetTintColor]"
				}
			}
		}
	}
}

container_focus_cooltip = {
	name = "FocusTooltipDefault"
}

template perk_tooltip_contents {
	object_tooltip_pop_out = {

		blockoverride "title_text" {
			margin = { 0 8 }
			text = "[Perk.GetNameNoTooltip( GetPlayer )]"
		}

		blockoverride "description_text" {
			text = "[Perk.GetEffectDescription( GetPlayer )]"
		}

		blockoverride "concept_link" {
			text = [perk|E]
		}
	}
}

container = {
	alwaystransparent = no
	name = "PerkTooltipDefault"

	using = perk_tooltip_contents
}

template perk_tooltip_selection {
	container = {
		alwaystransparent = no
		name = "PerkTooltipSelection"

		using = perk_tooltip_contents

		blockoverride "input_info_text" {
			visible = "[CharacterLifestyleWindow.CanSelectPerk( Perk.Self )]"
			text = "CHOOSE_PERK_UNLOCK_TEXT"
		}

		blockoverride "above_description_text" {
			text = "[CharacterLifestyleWindow.CanSelectPerkDesc( Perk.Self )]"
		}
	}
}

container = {
	name = "DynastyPerkTooltipDefault"
	alwaystransparent = no

	object_tooltip_pop_out = {
		blockoverride "title_text" {
			margin = { 0 8 }
			text = "[DynastyPerk.GetNameNoTooltip]"
		}

		blockoverride "description_text" {
			text = "[DynastyPerk.GetEffectDescription( GetPlayer )]"
		}

		blockoverride "concept_link" {
			text = [dynasty_perk|E]
		}
	}
}


container = {
	name = CharacterTooltip

	alwaystransparent = no

	container_character_tooltip = {}
}


types GameTooltipTypes
{
	type object_tooltip_pop_out = widget {
		name = "ObjectTooltipDefault"
		using = GeneralTooltipSetup
		alwaystransparent = no

		using = DefaultTooltipBackground

		vbox = {
			set_parent_size_to_minimum = yes
			margin = { 20 5 }

			hbox = {
				layoutpolicy_horizontal = expanding
				spacing = 10

				background = {
					name = "header"
					texture = "gfx/interface/component_tiles/tile_title_big_top_01.dds"
					spriteType = Corneredstretched
					margin = { 15 0 }
					texture_density = 2

					modify_texture = {
						name = "mask"
						texture = "gfx/interface/component_masks/mask_title_big_top.dds"
						spriteType = Corneredstretched
						spriteborder = { 160 0 }
						blend_mode = alphamultiply
						alpha = 0.5
					}
				}

				block "header_tt" {
					margin_bottom = 12
				}

				hbox = {
					layoutpolicy_horizontal = expanding

					block "header_additions" {
						hbox = {}
					}

					vbox = {
						name = "FancyHeader"
						layoutpolicy_horizontal = expanding
						alwaystransparent = no

						text_single = {
							layoutpolicy_horizontal = expanding
							autoresize = yes
							name = "title"

							fontsize_min = 14
							using = Font_Size_Medium

							block "title_text" {
								margin = { 0 8 }
							}
							fonttintcolor = "[TooltipInfo.GetTintColor]"
						}

						# use subtitle_text blockoverride or replace this entire block
						block "subheading"
						{
							text_single = {
								layoutpolicy_horizontal = expanding
								autoresize = yes
								fontsize_min = 14
								using = Font_Size_Small
								block "subtitle_text" {
									text = ""
								}
								fonttintcolor = "[TooltipInfo.GetTintColor]"
								max_width = 400
							}
						}
					}
				}

				expand = {}

				vbox = {
					layoutpolicy_vertical = expanding

					text_single = {
						name = "concept_link"
						layoutpolicy_horizontal = expanding
						block "concept_link" {
							raw_text = "#D Missing concept link!#!"
						}

						fonttintcolor = "[TooltipInfo.GetTintColor]"
					}
				}
			}

			# Override main_description if you plan to build a fully custom pop out, otherwise override the components
			block "main_description"
			{
				block "extra_data" {}

				textbox = {
					name = "warning_description"

					using = DefaultTooltipText
					layoutpolicy_horizontal = expanding
					multiline = yes
					block "warning_description_text" {}
					fonttintcolor = "[TooltipInfo.GetTintColor]"
					alwaystransparent = no
				}

				textbox = {
					name = "above_description"

					max_width = 400
					using = DefaultTooltipText
					layoutpolicy_horizontal = expanding
					multiline = yes
					block "above_description_text" {}
					fonttintcolor = "[TooltipInfo.GetTintColor]"
					alwaystransparent = no
				}

				# NOTE: This edit box is filled by TooltipInfo.GetTintColor from code in order to set the correct size when the tooltip is created and positioned and then it uses the text property specified here in the next frames
				textbox = {
					name = "Description"
					layoutpolicy_horizontal = expanding
					max_width = 400
					using = DefaultTooltipText
					multiline = yes
					block "description_text" {}
					fonttintcolor = "[TooltipInfo.GetTintColor]"
					alwaystransparent = no
				}

				block "extra_data_after_description" {}

				# Things like "click to X", hotkeys etc
				textbox = {
					name = "input_info"
					layoutpolicy_horizontal = expanding
					margin_top = 10
					using = DefaultTooltipText
					multiline = yes
					block "input_info_text" {}
					fonttintcolor = "[TooltipInfo.GetTintColor]"
				}
			}

			textbox = {
				name = "TooltipTextShortcut"
				layoutpolicy_horizontal = expanding
				using = DefaultTooltipText
				margin = { 10 5 }
				margin_top = 10
			}
		}
	}

	type header_icon = hbox
	{
		margin_right = 13
		margin_top = 8
		margin_left = -4

		icon = {
			size = { 32 32 }
			tintcolor = "[TooltipInfo.GetTintColor]"
			
			block "header_texture"
			{
			}
		}	
	}

	type cooltip_type = widget {
		name = "character_tooltip"
		alwaystransparent = no
		using = GeneralTooltipSetup

		widget = {
			name = "background"
			using = DefaultTooltipBackground
			size = { 100% 100% }
			alwaystransparent = no
			block "bg_visible" {
				visible = yes
			}
		}

		vbox = {
			set_parent_size_to_minimum = yes
			margin = { 15 15 }
			margin_top = 3
			maximumsize = { 600 -1 }

			## REAL CHARACTERS
			vbox = {
				visible = "[Character.IsValid]"
				layoutpolicy_horizontal = expanding

				vbox = {
					name = "personal"
					layoutpolicy_horizontal = expanding

					hbox = {
						layoutpolicy_horizontal = expanding

						vbox = {
							name = "name_etc"
							layoutpolicy_horizontal = expanding
							minimumsize = { 0 35 }

							## Name
							hbox = {
								layoutpolicy_horizontal = expanding
								margin_top = 8
								margin_right = 7

								background = {
									using = Background_Area
									margin = { 15 0 }
									margin_bottom = 7
								}

								vbox = {
									layoutpolicy_vertical = expanding
									margin_top = 3

									portrait_opinion = {
										visible = "[And( Character.IsAlive, Not( Character.IsPlayer ) )]"
									}

									expand = {}
								}

								spacer = {
									visible = "[And( Character.IsAlive, Not( Character.IsPlayer ) )]"
									size = { 8 5 }
								}

								text_multi = {
									name = "character_name"
									text = "CHARACTER_TT_NAME_AGE"
									default_format = "#high"
									using = Font_Size_Medium
									max_width = 350
									autoresize = yes
								}

								vbox = {
									layoutpolicy_vertical = expanding
									margin_left = 5

									icon = {
										visible = "[Not(Character.IsDeadAndValid)]"
										size = { 23 23 }
										framesize = { 60 60 }
										frame = "[Character.GetHealthIconFrame]"
										texture = "gfx/interface/icons/character_status/icon_health.dds"
										tooltip = "[Character.GetHealthInfo]"
									}

									expand = {}
								}

								expand = {}
							}
						}
					}

					hbox = {
						layoutpolicy_horizontal = expanding

						text_multi = {
							name = "character_relation_to_you"
							margin_top = 10
							max_width = 308
							text = "[Character.GetRelationToString( GetPlayer )]"
							tooltip = "EXTENDED_RELATIONS_TOOLTIP"
							default_format = "#high"
							align = nobaseline
							autoresize = yes
						}

						expand = {}
					}

					vbox = {
						layoutpolicy_horizontal = expanding
						margin_top = 10
						margin_bottom = 10

						hbox = {
							name = "AI_personality"
							layoutpolicy_horizontal = expanding
							spacing = 2

							text_single = {
								visible = "[Not( Character.IsPlayer )]"
								text = "[Character.GetAIPersonalityNoTooltip]"
								default_format = "#L"
								tooltip = "AI_PERSONALITY_TT"
								align = nobaseline
							}

							hbox = {
								layoutpolicy_horizontal = expanding

								icon = {
									visible = "[Not(Character.IsFemale)]"
									size = { 20 20 }
									framesize = { 40 40 }
									frame = "[Character.GetSexualityFrame]"
									texture = "gfx/interface/icons/character_status/sexuality_icons_male.dds"
									tooltip = "SEXUALITY_TT"
								}

								icon = {
									visible = "[Character.IsFemale]"
									size = { 20 20 }
									framesize = { 40 40 }
									frame = "[Character.GetSexualityFrame]"
									texture = "gfx/interface/icons/character_status/sexuality_icons_female.dds"
									tooltip = "SEXUALITY_TT"
								}

								portrait_status_icons = {
									blockoverride "direction"
									{
										direction = horizontal
									}
								}

								expand = {}
							}

							expand = {}
						}

						hbox = {
							layoutpolicy_horizontal = expanding

							text_single = {
								visible = "[Character.IsAlive]"
								text = "[Character.Custom('CooltipSpouseListing')]"
								layoutpolicy_horizontal = expanding
								align = nobaseline
								max_width = 350
							}

							expand = {}
						}

						text_single = {
							visible = "[And( Character.IsAlive, Not( Character.IsImprisoned ) )]"
							layoutpolicy_horizontal = expanding
							text = "CHARACTER_LOCATION_TOOLTIP"
							align = nobaseline

						}

						text_single = {
							visible = "[And( Character.IsAlive, Character.IsImprisoned )]"
							layoutpolicy_horizontal = expanding
							text = "CHARACTER_IMPRISONED_TOOLTIP"
							align = nobaseline
						}
					}

					hbox = {
						layoutpolicy_horizontal = expanding
						spacing = 10

						background = {
							using = Background_Area
							margin = { 15 0 }
						}

						hbox = {
							name = "faith_and_culture"

							button_religion_icon = {
								name = "faith_button"
								datacontext = "[Character.GetFaith]"
								size = { 45 45 }
							}

							vbox = {
								margin_right = 10
								margin_left = 3

								text_single = {
									datacontext = "[Character.GetFaith]"
									layoutpolicy_horizontal = expanding
									text = "FAITH_COOLTIP_WINDOW"
									align = nobaseline

									tooltipwidget = { faith_tooltip_click = {} }

									button_normal = {
										size = { 100% 100% }
										onclick = "[OpenGameViewData( 'faith', Faith.GetID )]"
									}

								}

								text_single = {
									datacontext = "[Character.GetCulture]"
									layoutpolicy_horizontal = expanding
									text = "CULTURE_COOLTIP_WINDOW"
									align = nobaseline

									button_normal = {
										size = { 100% 100% }
										onclick = "[OpenGameViewData( 'culture_window', Culture.GetID )]"
										# shortcut = "innovations_window"
									}
								}
							}
						}

						hbox = {
							name = "house"
							datacontext = "[Character.GetHouse]"
							margin = { 10 5 }

							coa_house_small = {
								container = {
									name = "characters_status_in_house"
									parentanchor = bottom|right

									icon = {
										name = "bastard"
										visible = "[Not(Character.IsLegitimateMemberOfHouse)]"
										framesize = { 40 40 }
										frame = 4
										size = { 25 25 }
										texture = "gfx/interface/icons/portraits/relation.dds"
										tooltip = "CV_TT_BASTARD"
									}

									icon = {
										name = "head_icon"
										size = { 20 20 }
										visible = "[LessThan_int32(Character.GetDynastyHeadRelationFrame('(bool)no'), '(int32)9')]"

										texture = "gfx/interface/icons/portraits/relation.dds"
										framesize = { 40 40 }
										frame = "[Character.GetDynastyHeadRelationFrame('(bool)no')]"
										tooltip = "[Character.GetDynastyHeadTooltip]"
									}
								}
							}

							text_multi = {
								visible = "[Character.HasDynasty]"
								margin = { 5 0 }
								text = "HOUSE_VIEW_NAME_WITH_HOUSE"
								max_width = 100
								autoresize = yes
							}
						}
					}
				}

				hbox = {
					layoutpolicy_horizontal = expanding
					visible = "[Character.HasLandedTitles]"
					margin = { 0 5 }
					spacing = 5

					coa_realm_small_crown = {
						name = "realm_flag"

						blockoverride "coa_hover_glow_visible"
						{
							visible = no
						}
					}

					realm_name_and_type_vbox = {
						datacontext = "[Character.GetPrimaryTitle]"
					}
				}


				block "extra_info" { }

				# Keep this here for now, may want something in character view
				cooltip_paragraph = {
					layoutpolicy_horizontal	= expanding
					text = "[Character.GetHeirToDesc]"
				}

				# mostly for pope
				cooltip_paragraph = {
					layoutpolicy_horizontal	= expanding
					text = "CHARACTER_BIRTH_NAME_TOOLTIP"
					visible = "[Character.HasRegnalName]"
				}

				spacer = {
					size = { 10 10 }
				}

				cooltip_paragraph = {
					layoutpolicy_horizontal	= expanding
					block "interaction_info" { }
				}

				cooltip_paragraph = {
					layoutpolicy_horizontal	= expanding
					text = "[Character.GetDebugTooltip]"
					visible = "[InDebugMode]"
				}

				cooltip_paragraph = {
					layoutpolicy_horizontal	= expanding
					text = "CHARACTER_KILLER_TOOLTIP"
					visible = "[And( InDebugMode, Character.GetKiller.IsValid )]"
				}

				cooltip_paragraph = {
					layoutpolicy_horizontal	= expanding
					raw_text = "[GetAnimationTooltip( PdxGuiWidget.Self, Character.Self )]"
					visible = "[ShouldShowAnimationInfo]"
				}
			}

			## NULL CHARACTER
			vbox = {
				visible = "[Not( Character.IsValid )]"

				cooltip_paragraph = {
					block "portrait_button_no_character_text"
					{
						text = "CHARACTER_TOOLTIP_NO_PORTRAIT"
					}
				}
			}
		}
	}

	type royal_court_character_tooltip = widget
	{
		name = "royal_court_character_tooltip"
		alwaystransparent = no
		using = GeneralTooltipSetup

		widget = {
			name = "background"
			using = DefaultTooltipBackground
			size = { 100% 100% }
			alwaystransparent = no
			alpha = 0.8

			block "bg_visible"
			{
				visible = yes
			}
		}

		vbox = {
			set_parent_size_to_minimum = yes
			margin = { 15 15 }
			margin_top = 3
			maximumsize = { 600 -1 }

			vbox = {
				name = "personal_info"
				visible = "[Character.IsValid]"
				layoutpolicy_horizontal = expanding

				hbox =  {
					layoutpolicy_horizontal = expanding
					margin_top = 5

					#### NAME ####
					text_multi = {
						name = "character_name"
						text = "CHARACTER_TT_NAME"
						default_format = "#high"
						using = Font_Size_Medium
						max_width = 335
						autoresize = yes
					}

					expand = {}
				}

				hbox = {
					layoutpolicy_horizontal = expanding

					#### RELATION ####
					text_single = {
						name = "character_relation_to_you"
						max_width = 335
						text = "[Character.GetRelationToString( GetPlayer )]"
						tooltip = "EXTENDED_RELATIONS_TOOLTIP"
						align = nobaseline
						autoresize = yes
					}

					expand = {}
				}

				hbox = {
					layoutpolicy_horizontal = expanding
					margin_bottom = 10

					#### AGE ####
					text_single = {
						name "character_age"
						max_width = 335
						text = "CHARACTER_TT_AGE"
						align = nobaseline
						autoresize = yes

					}

					expand = {}
				}


				hbox = {
					layoutpolicy_horizontal = expanding
					margin_bottom = 10
					visible = "[ShouldShowAnimationInfo]"

					#### Animation ####
					text_single = {
						name = "debug_animation_info"
						max_width = 335
						raw_text = "[RoyalCourtWindow.GetAnimationInfo]"
						align = nobaseline
						autoresize = yes
					}

					expand = {}
				}

				cooltip_paragraph = {
					layoutpolicy_horizontal	= expanding
					block "interaction_info" { }
				}
			}
		}
	}

	type cooltip_paragraph = textbox {

		name = "cooltip_paragraph"
		layoutpolicy_horizontal = expanding
		using = DefaultTooltipText
		fonttintcolor = "[TooltipInfo.GetTintColor]"
		multiline = yes
		alwaystransparent = no
		max_width = 400
	}

	type container_character_tooltip = container
	{
		alwaystransparent = no

		using = DefaultTooltipBackground

		flowcontainer = {
			direction = vertical

			widget = {
				name = "portrait area"
				size = { 100% 210 }

				background = {
					using = Background_Area_Dark
					margin = { -3 -3 }
					margin_bottom = 10

					modify_texture = {
						name = "mask"
						texture = "gfx/interface/component_masks/mask_fade_vertical.dds"
						blend_mode = alphamultiply
						mirror = vertical
					}
				}
				datacontext = "[GetIllustration( 'character_view_bg' )]"
				background = {
					texture = "[Illustration.GetTexture( Character.MakeScope )]"
					fittype = centercrop
					#alpha = 0.7

					using = Mask_Rough_Edges

					modify_texture = {
						texture = "gfx/interface/component_masks/mask_fade_vertical.dds"
						blend_mode = alphamultiply
					}

					modify_texture = {
						texture = "gfx/interface/component_masks/mask_fade_vertical.dds"
						blend_mode = alphamultiply
						mirror = vertical
						alpha = 0.7
					}
				}

				portrait_torso = {
					name = "char"
					parentanchor = bottom|hcenter

					blockoverride "portrait_button_template_tooltip" {}
				}
			}

			container = {
				cooltip_type = {
					blockoverride "bg_visible" {
						visible = no
					}

					blockoverride "char_tooltip_opinion"
					{
						# don't show opinion again
					}
				}
			}
		}
	}

	type container_focus_cooltip = container {
		alwaystransparent = no

		object_tooltip_pop_out = {
			blockoverride "title_text" {
				margin = { 0 8 }
				text = "[FocusType.GetNameNoTooltip]"
			}

			blockoverride "description_text" {
				text = "FOCUS_TOOLTIP_TEXT_PLAYER"
			}

			blockoverride "concept_link" {
				text = [focus|E]
			}

			blockoverride "header_additions" {
				hbox = {
					margin_right = 10
					margin_top = 8
					margin_left = -4

					icon = {
						texture = "[FocusType.GetIcon]"
						size = { 35 35 }

						using = Master_Button_Modify_Texture
					}
				}
			}
		}
	}
}

template maa_type_container_tooltip
{
	widget = {
		alwaystransparent = no
		using = GeneralTooltipSetup

		widget = {
			name = "background"
			using = DefaultTooltipBackground
			size = { 100% 100% }
			alwaystransparent = no
		}

		vbox = {
			set_parent_size_to_minimum = yes
			margin = { 8 8 }
			margin_bottom = 16
			spacing = 4

			vbox = {
				layoutpolicy_horizontal = expanding
				margin = { 10 4 }

				background = {
					name = "header"
					using = Background_Area_Dark
					margin = { 5 5 }
				}

				hbox = {
					layoutpolicy_horizontal = expanding

					icon = {
						size = { 40 40 }
						texture = "[MenAtArmsType.GetIcon]"
					}

					text_single = {
						layoutpolicy_horizontal = expanding
						name = "header"
						align = top|hcenter
						text = "[MenAtArmsType.GetNameNoTooltip]"
						maximumsize = { 400 -1 }

						using = Font_Type_Flavor
						using = Font_Size_Big
					}

					spacer = {
						size = { 40 40 }
					}
				}
			}

			widget = {
				minimumsize = { 294 174 }
				layoutpolicy_horizontal = expanding

				vbox = {
					layoutpolicy_horizontal = expanding
					margin = { 0 5 }

					background = {
						name = "image"
						texture = "[MenAtArmsType.GetHorizontalImage]"

						using = Mask_Rough_Edges
					}

					expand = {}

					hbox = {
						layoutpolicy_horizontal = expanding

						margin = { 0 2 }

						margin_left = 10
						tooltip = "MV_CREATE_REGIMENT_MAX_SIZE_TT"
						using = tooltip_ne

						icon = {
							name = "icon_soldier"
							texture = "gfx/interface/icons/icon_soldier.dds"
							size = { 30 30 }
						}

						text_label_left = {
							name = "soldier count"
							text = "MV_CREATE_REGIMENT_SIZE"
							default_format = "#high"
							using = Font_Size_Medium

						}

						expand = {}

					}

				}
			}

			vbox = {
				layoutpolicy_horizontal = growing
				vbox = {
					layoutpolicy_horizontal = expanding
					margin = { 20 10 }
					spacing = 2

					### INFO TEXT
					hbox = {
						layoutpolicy_horizontal = expanding

						text_single = {
							text = "MEN_AT_ARMS_TYPE_TOOLTIP_CREATION_COST"
						}
						expand = {}
					}
					hbox = {
						layoutpolicy_horizontal = expanding

						text_single = {
							text = "[MenAtArmsType.GetReinforcementCostString( GetPlayer )]"
						}
						expand = {}
					}


					hbox = {
						layoutpolicy_horizontal = expanding

						text_single = {
							text = "[MenAtArmsType.GetFullStrengthMaintenanceCostForPlayerString]"
						}
						expand = {}
					}
				}

				divider_light = {
					layoutpolicy_horizontal = expanding
				}
				vbox_maa_stats_numbers = {
					layoutpolicy_horizontal = expanding
				}

				hbox_maa_type_text = {
					layoutpolicy_horizontal = expanding
				}


				vbox_maa_info = {
					layoutpolicy_horizontal = expanding
				}
			}
		}

	}
}

widget = {
	alwaystransparent = no
	name = "MaaTypeTooltipDefault"
	using = GeneralTooltipSetup

	widget = {
		name = "background"
		using = DefaultTooltipBackground
		size = { 100% 100% }
		alwaystransparent = no
	}

	vbox = {
		set_parent_size_to_minimum = yes
		margin = { 8 8 }
		margin_bottom = 16
		spacing = 4

		vbox = {
			layoutpolicy_horizontal = expanding
			margin = { 10 4 }

			background = {
				name = "header"
				using = Background_Area_Dark
				margin = { 5 5 }
			}

			hbox = {
				layoutpolicy_horizontal = expanding

				icon = {
					size = { 40 40 }
					texture = "[MenAtArmsType.GetIcon]"
				}

				text_single = {
					layoutpolicy_horizontal = expanding
					name = "header"
					align = top|hcenter
					text = "[MenAtArmsType.GetNameNoTooltip]"
					maximumsize = { 400 -1 }

					using = Font_Type_Flavor
					using = Font_Size_Big

				}

				spacer = {
					size = { 40 40 }
				}
			}
		}

		widget = {
			minimumsize = { 294 174 }
			layoutpolicy_horizontal = expanding

			vbox = {
				margin = { 0 5 }

				background = {
					name = "image"
					texture = "[MenAtArmsType.GetHorizontalImage]"

					using = Mask_Rough_Edges
				}

				expand = {}


				hbox = {
					layoutpolicy_horizontal = expanding

					margin = { 0 2 }

					margin_left = 10
					tooltip = "MV_CREATE_REGIMENT_MAX_SIZE_TT"
					using = tooltip_ne

					icon = {
						name = "icon_soldier"
						texture = "gfx/interface/icons/icon_soldier.dds"
						size = { 30 30 }
					}

					text_label_left = {
						name = "soldier count"
						text = "MV_CREATE_REGIMENT_SIZE"
						default_format = "#high"
						using = Font_Size_Medium

					}

					expand = {}

				}

			}
		}

		vbox = {
			layoutpolicy_horizontal = growing
			vbox = {
				layoutpolicy_horizontal = expanding
				margin = { 20 10 }
				spacing = 2

				### INFO TEXT
				hbox = {
					layoutpolicy_horizontal = expanding

					text_single = {
						text = "MEN_AT_ARMS_TYPE_TOOLTIP_CREATION_COST"
					}
					expand = {}
				}
				hbox = {
					layoutpolicy_horizontal = expanding

					text_single = {
						text = "[MenAtArmsType.GetReinforcementCostString( GetPlayer )]"
					}
					expand = {}
				}


				hbox = {
					layoutpolicy_horizontal = expanding

					text_single = {
						text = "[MenAtArmsType.GetFullStrengthMaintenanceCostForPlayerString]"
					}

					expand = {}
				}
			}

			divider_light = {
				layoutpolicy_horizontal = expanding
			}

			vbox_maa_stats_numbers = {
				layoutpolicy_horizontal = expanding
			}

			hbox_maa_type_text = {
				layoutpolicy_horizontal = expanding
			}

			vbox_maa_info = {
				layoutpolicy_horizontal = expanding
			}
		}
	}

	datacontext = "[GetPlayer]"
}

container = {
	alwaystransparent = no
	name = "MaaTypeTooltipSpecific"
	using = regiment_container_tooltip
	datacontext = "[Regiment.GetMAAType]"
	datacontext = "[Regiment.GetOwner]"
}

template regiment_container_tooltip
{
	widget = {
		alwaystransparent = no
		using = GeneralTooltipSetup

		widget = {
			name = "background"
			using = DefaultTooltipBackground
			size = { 100% 100% }
			alwaystransparent = no
		}

		vbox = {
			set_parent_size_to_minimum = yes
			margin = { 8 8 }
			margin_bottom = 16
			spacing = 4

			vbox = {
				layoutpolicy_horizontal = expanding
				margin = { 10 4 }

				background = {
					name = "header"
					using = Background_Area_Dark
					margin = { 5 5 }
				}

				hbox = {
					layoutpolicy_horizontal = expanding

					icon = {
						size = { 40 40 }
						texture = "[Regiment.GetMAAType.GetIcon]"
					}
					text_single = {
						layoutpolicy_horizontal = expanding
						name = "header"
						align = top|hcenter
						text = "[Regiment.GetNameNoTooltip]"
						maximumsize = { 400 -1 }

						using = Font_Type_Flavor
						using = Font_Size_Big

					}
					spacer = {
						size = { 40 40 }
					}
				}
			}

			vbox = {
				layoutpolicy_horizontal = expanding

				widget = {
					minimumsize = { 294 174 }
					datacontext = "[Regiment.GetMAAType]"

					vbox = {
						margin = { 0 5 }

						background = {
							name = "image"
							texture = "[MenAtArmsType.GetHorizontalImage]"
							using = Mask_Rough_Edges
						}

						hbox = {
							layoutpolicy_horizontal = expanding
							expand = {}

							text_label_right = {
								text = "[SelectLocalization(Regiment.IsRaised, 'MAA_RAISED', 'MAA_UNRAISED')]"
								using = Font_Size_Medium
							}

							spacer = {
								size = {10 0}
							}
						}

						expand = {}

						hbox = {
							layoutpolicy_horizontal = expanding
							spacing = 6
							margin = { 0 2 }

							hbox = {
								margin_left = 10

								icon = {
									name = "icon_soldier"
									texture = "gfx/interface/icons/icon_soldier.dds"
									size = { 30 30 }
								}

								text_label_left = {
									text = "[Regiment.BuildCurrentRegimentCountString]"
									default_format = "#high"
									using = Font_Size_Medium
								}
							}

							expand = {}

							text_label_right = {
								text = "REGIMENT_CURRENT_SIZE"

								default_format = "#high"
								using = Font_Size_Medium
							}

							spacer = {
								size = {10 0}
							}

						}
					}
				}
			}

			vbox = {
				datacontext = "[Regiment.GetMAAType]"
				layoutpolicy_horizontal = growing

				hbox_maa_location = {
					layoutpolicy_horizontal = expanding
				}

				vbox = {
					layoutpolicy_horizontal = expanding
					visible = "[Regiment.IsRegular]"
					margin = { 20 10 }
					spacing = 2

					### INFO TEXT
					text_single = {
						layoutpolicy_horizontal = expanding
						text = "MAA_REINFORCEMENT_COST_ENTRY"
					}

					text_single = {
						layoutpolicy_horizontal = expanding
						text = "MAA_MAINTENANCE"
					}
				}

				divider_light = {
					layoutpolicy_horizontal = expanding
				}

				vbox_maa_active_regiment_stats_numbers = {
					layoutpolicy_horizontal = expanding
				}

				hbox_maa_type_text = {
					layoutpolicy_horizontal = expanding
				}

				vbox_maa_info = {
					layoutpolicy_horizontal = expanding
				}
			}

			block "extra_info" {}
		}
	}
}

template regiment_container_text_tooltip
{
	widget = {
		alwaystransparent = no
		using = GeneralTooltipSetup
		datacontext = "[Regiment.GetMAAType]"
		datacontext = "[Regiment.GetOwner]"

		widget = {
			name = "background"
			using = DefaultTooltipBackground
			size = { 100% 100% }
			alwaystransparent = no
		}

		vbox = {
			set_parent_size_to_minimum = yes
			margin = { 8 8 }
			margin_bottom = 16
			spacing = 4

			vbox = {
				layoutpolicy_horizontal = expanding
				margin = { 10 4 }

				background = {
					name = "header"
					using = Background_Area_Dark
					margin = { 5 5 }
				}

				hbox = {
					layoutpolicy_horizontal = expanding

					icon = {
						size = { 40 40 }
						texture = "[Regiment.GetMAAType.GetIcon]"
					}
					text_single = {
						layoutpolicy_horizontal = expanding
						name = "header"
						align = top|hcenter
						text = "[Regiment.GetNameNoTooltip]"
						maximumsize = { 400 -1 }

						using = Font_Type_Flavor
						using = Font_Size_Big

					}
					spacer = {
						size = { 40 40 }
					}
				}
			}

			vbox = {
				layoutpolicy_horizontal = expanding
				margin = { 15 0 }
				margin_top = 5
				spacing = 10

				hbox = {
					layoutpolicy_horizontal = expanding

					text_label_left = {
						text = "[SelectLocalization(Regiment.IsRaised, 'MAA_RAISED', 'MAA_UNRAISED')]"
						using = Font_Size_Medium
						align = right
					}

					expand = {}
				}

				hbox = {
					layoutpolicy_horizontal = expanding

					hbox = {
						icon = {
							name = "icon_maa"
							texture = [MenAtArmsType.GetIcon]
							size = { 30 30 }
						}
						text_single = {
							text = "[Regiment.BuildCurrentRegimentCountString]"
							default_format = "#high"
							# using = Font_Size_Medium
						}


					}

					# expand = {}
					text_single = {
						raw_text = ",  "

						default_format = "#high"
						# using = Font_Size_Medium
					}

					text_single = {
						text = "REGIMENT_CURRENT_SIZE"

						default_format = "#high"
						# using = Font_Size_Medium
					}

					expand = {}

				}
			}

			vbox = {
				datacontext = "[Regiment.GetMAAType]"
				layoutpolicy_horizontal = growing

				hbox_maa_location = {
					layoutpolicy_horizontal = expanding
				}

				vbox = {
					layoutpolicy_horizontal = expanding
					visible = "[Regiment.IsRegular]"
					spacing = 2
					margin = { 15 5 }

					### INFO TEXT
					text_single = {
						layoutpolicy_horizontal = expanding
						text = "MAA_REINFORCEMENT_COST_ENTRY"
					}

					text_single = {
						layoutpolicy_horizontal = expanding
						text = "MAA_MAINTENANCE"
					}
				}

				divider_light = {
					layoutpolicy_horizontal = expanding
				}

				vbox_maa_active_regiment_stats_numbers = {
					layoutpolicy_horizontal = expanding
				}
				hbox_maa_type_text = {
					layoutpolicy_horizontal = expanding
				}

				vbox_maa_info = {
					layoutpolicy_horizontal = expanding
				}
			}

			block "extra_info" {}
		}
	}
}

template unit_icon_item_tooltip {

	widget = {
		alwaystransparent = no
		using = GeneralTooltipSetup
		datacontext = "[UnitItem.GetArmy]"

		widget = {
			name = "background"
			using = DefaultTooltipBackground
			size = { 100% 100% }
			alwaystransparent = no
		}

		vbox = {
			set_parent_size_to_minimum = yes
			margin = { 12 8 }
			margin_bottom = 16
			spacing = 4

			hbox = {
				name = "FancyHeader"
				alwaystransparent = no
				layoutpolicy_horizontal = expanding

				coa_realm_small = {
					datacontext = "[UnitItem.GetOwner]"
					tintcolor = "[TooltipInfo.GetTintColor]"
				}

				text_single = {
					layoutpolicy_vertical = expanding
					name = "title"
					align = top|left
					margin_top = 6
					margin_right = 20
					text = "[UnitItem.GetTooltipHeader]"
					fonttintcolor = "[TooltipInfo.GetTintColor]"
				}
			}

			hbox = {
				name="troops_summary"
				layoutpolicy_horizontal = expanding

				soldiers_and_quality_small = {
					datacontext = [Army.GetComposition]
				}
				expand = {}
			}

			hbox = {
				name = "troop_breakdown"
				layoutpolicy_vertical = expanding
				layoutpolicy_horizontal = expanding

				dynamicgridbox = {
					name = "troops"
					datamodel = "[CalculateBreakdownItems(Army.Self)]"

					datamodel_wrap = 5
					flipdirection = yes
					maxverticalslots = 2

					item = {
						widget = {
							hbox = {
								margin_right = 4
								set_parent_size_to_minimum = yes
								tooltip = "ARMY_VIEW_TROOP_TT"

								highlight_icon = {
									name = "men_at_arms_icon"
									visible = "[TroopItem.IsMaa]"
									size = { 35 35 }
									texture = "[TroopItem.GetRegiment.GetRegiment.GetMAAType.GetIcon]"
								}

								highlight_icon = {
									name = "levies_icon"
									visible = "[TroopItem.IsLevies]"
									size = { 35 35 }
									texture = "gfx/interface/icons/icon_soldier.dds"
								}

								highlight_icon = {
									name = "knight_icon"
									visible = "[TroopItem.IsKnight]"
									size = { 35 35 }
									texture = "gfx/interface/icons/icon_knight_small.dds"
								}
								text_single = {
									layoutpolicy_horizontal = growing
									text = "[TroopItem.GetCount|*]"
								}

							}
						}
					}
				}
				expand = {
					layoutpolicy_vertical = expanding
				}
			}
			divider_light =
			{
				layoutpolicy_horizontal = expanding
			}

			hbox = {
				name="troop_commander"
				datacontext = "[Army.GetCommander]"
				visible = "[Character.IsValid]"
				layoutpolicy_horizontal = expanding

				text_single = {
					layoutpolicy_horizontal = expanding
					text = "ARMY_TOOLTIP_COMMANDER"
				}

				hbox = {
					tooltip = "[Character.GetCommanderAdvantageDesc]"
					icon = {
						name = "skill_icon"
						texture = "gfx/interface/icons/icon_commander_advantage.dds"
						size = { 30 30 }
					}
					text_single = {
						text = "ARMY_TOOLTIP_COMMANDER_ADVANTAGE"
					}
				}
			}

			text_single = {
				name = "no_troop_commander"
				visible = "[Not( Army.GetCommander.IsValid )]"
				layoutpolicy_horizontal = expanding
				text = "ARMY_TOOLTIP_NO_COMMANDER"
			}

			expand = {}

			hbox = {
				layoutpolicy_horizontal = expanding
				visible = "[UnitItem.IsRulerCommander]"
				margin_left = 4

				icon = {
					texture = "gfx/interface/icons/map_icons/commander_is_leader.dds"
				}
				text_single = {
					layoutpolicy_horizontal = expanding
					datacontext = "[UnitItem.GetUnitPortraitCharacter]"
					text = "COMMANDER_IS_LEADER"
					align = nobaseline
				}
			}

			hbox = {
				visible = "[UnitItem.HasDisembarkPenalty]"
				layoutpolicy_horizontal = expanding
				margin_left = 4

				icon = {
					name = "sea_sickness_icon"
					size = { 24 24 }
					texture = "gfx/interface/icons/map_icons/army_icon_disembarked.dds"
				}
				text_single = {
					layoutpolicy_horizontal = expanding
					text = "[Army.GetEmbarkInfoForTooltip]"
					align = nobaseline
				}
			}

			hbox = {
				visible = "[UnitItem.IsGathering]"
				layoutpolicy_horizontal = expanding
				margin_left = 4

				icon = {
					texture = "gfx/interface/icons/map_icons/army_icon_gathering.dds"
				}
				text_single = {
					layoutpolicy_horizontal = expanding
					text = "ARMY_TOOLTIP_IS_GATHERING"
					align = nobaseline
				}
			}

			# #--------------------------------------
			# |  ¤ Attrition: 1%/month
			# |  & Well supplied (100) -10/month
			# | -> Province, 17 days left (29 May yyyy)
			# | () Movement locked
			# #--------------------------------------
			vbox = {
				name = "involved_army_details"
				visible = "[Not(Army.IsNeutralToPlayer)]"
				layoutpolicy_horizontal = expanding
				spacing = 4

				hbox = {
					name = "involved_army_attrition_warning"
					visible = "[Army.IsArmySufferingFromAttrition]"
					layoutpolicy_horizontal = expanding
					margin_left = 4
					tooltip = "ARMY_ATTRITION_TT"

					icon = {
						texture = "gfx/interface/icons/map_icons/attrition_icon.dds"
						size = { 24 24 }
					}

					text_single = {
						layoutpolicy_horizontal = expanding
						name = "attrition"
						text = "ARMY_TOOLTIP_ATTRITION"
						align = nobaseline
					}
				}

				hbox = {
					name = "involved_army_supply_status"
					layoutpolicy_horizontal = expanding
					margin_left = 4

					text_single = {
						layoutpolicy_horizontal = expanding
						text = "[Army.GetSupplyInfoForTooltip]"
						tooltip = "[Army.GetSupplyStateTooltip]"
						align = nobaseline
					}
				}

				hbox = {
					name = "involved_army_movement"
					visible = "[Army.IsMoving]"
					layoutpolicy_horizontal = expanding
					margin_left = 4

					icon = {
						name = "unit_retreating"
						visible = "[UnitItem.IsRetreating]"
						texture = "gfx/interface/icons/map_icons/army_icon_retreating.dds"
					}

					icon = {
						name = "unit_moving"
						visible = "[Not(UnitItem.IsRetreating)]"
						texture = "gfx/interface/icons/combat_effects/moving_army.dds"
						size = { 24 24 }
					}

					text_single = {
						layoutpolicy_horizontal = expanding
						text = "[Army.GetMovementInfoForTooltip]"
						align = nobaseline
					}
				}

				hbox = {
					name = "involved_army_movement_lock"
					visible = "[UnitItem.IsMovementLocked]"
					layoutpolicy_horizontal = expanding
					margin_left = 4

					icon = {
						texture = "gfx/interface/icons/map_icons/movement_locked.dds"
						size = { 24 24 }
					}

					text_single = {
						layoutpolicy_horizontal = expanding
						text = "ARMY_TOOLTIP_IS_MOVEMENT_LOCKED"
						align = nobaseline
					}
				}
			} # vbox "involved_army_details"

			hbox = {
				visible = "[UnitItem.GetArmy.IsRaidArmy]"
				layoutpolicy_horizontal = expanding
				margin_left = 4

				hbox = {
					visible = "[UnitItem.GetArmy.IsRaidLootCapped]"
					tooltip = ARMY_AT_LOOT_CAP_TOOLTIP
					layoutpolicy_horizontal = expanding

					icon = {
						texture = "gfx/interface/icons/map_icons/army_icon_at_loot_cap.dds"
						size = { 24 24 }
					}
					text_single = {
						layoutpolicy_horizontal = expanding
						text = "ARMY_AT_LOOT_CAP"
						align = nobaseline
					}
				}

				text_single = {
					layoutpolicy_horizontal = expanding
					visible = "[Not(UnitItem.GetArmy.IsRaidLootCapped)]"
					text = "ARMY_LOOT_INFO"
					align = nobaseline
				}
			}

			block "extra_unit_info" {}

			text_single = {
				visible = "[And( InDebugMode, Not(ReleaseMode) )]"
				# Deliberately unlocalized since this is debug functionality
				layoutpolicy_horizontal = expanding
				raw_text = "Army: [Army.GetArmyId] Unit: [Army.GetUnitId]"
				align = nobaseline
			}

			text_single = {
				visible = "[And( InDebugMode, Not(ReleaseMode) )]"
				# Deliberately unlocalized since this is debug functionality
				layoutpolicy_horizontal = expanding
				raw_text = "#E AI Coordinator: [Army.GetAiCoordinatorId]#!"
				align = nobaseline
				raw_tooltip = "Stack: [Army.GetAiUnitStackId] Sub: [Army.GetAiSubUnitStackId]"
			}

			text_multi = {
				visible = "[And( InDebugMode, Not(ReleaseMode) )]"
				# Deliberately unlocalized since this is debug functionality
				layoutpolicy_horizontal = expanding
				autoresize = yes
				text = "[Army.GetAIInfo]"
				align = nobaseline
			}
		}
	}
}

template unit_icon_tooltip {
	container = {
		using = GeneralTooltipSetup

		widget = {
			name = "background"
			using = DefaultTooltipBackground
			size = { 100% 100% }
			alwaystransparent = no
		}

		alwaystransparent = no

		flowcontainer = {
			datamodel = "[UnitMapIcon.GetUnitItems]"
			visible = "[GreaterThan_int32(GetDataModelSize(UnitMapIcon.GetUnitItems), '(int32)1')]"
			direction = vertical
			spacing = 5
			margin = { 30 15 }
			margin_right = 20


			text_single = {
				text = "ARMY_ICON_HEADER"
			}

			item = {
				flowcontainer = {
					spacing = 5
					ignoreinvisible = yes

					container_allied_unit_icon_item = {
						blockoverride "unit_items" {}
						blockoverride "multi_select" {}
						blockoverride "onclick" {
							onclick = "[UnitMapIcon.OnClickArmy( Army.Self )]"
						}
						min_width = 120
					}
					container_hostile_unit_icon_item = {
						blockoverride "unit_items" {}
						blockoverride "multi_select" {}
						min_width = 120
					}

					text_single = {
						text = "ARMY_UNIT_COOLTIP_NAME"
					}

					tooltipwidget = {
						using = unit_icon_item_tooltip
					}

					using = tooltip_es
				}
			}
		}
		container = {
			visible = "[EqualTo_int32(GetDataModelSize(UnitMapIcon.GetUnitItems), '(int32)1')]"
			datamodel = "[UnitMapIcon.GetUnitItems]"

			item = {
				using = unit_icon_item_tooltip
			}
		}
	}
}

container = {
	name = "UnitTooltipWidget"
	using = unit_icon_item_tooltip
}

template faith_tooltip_click_default_extra_info
{
	divider_light = {
		layoutpolicy_horizontal = expanding
	}

	text_single = {
		layoutpolicy_horizontal = expanding
		text = "FAITH_ITEM_TOOLTIP"
		margin = { 10 0 }
	}
}

template faith_tooltip_core_tenents_extra_info
{
	divider_light = {
		layoutpolicy_horizontal = expanding
	}

	text_label_center = {
		text = "FAITH_CORE_TENETS_HEADING"
	}

	hbox = {
		name = "doctrines"
		datamodel = "[Faith.GetDoctrines]"
		spacing = 10

		item = {
			name = "doctrine_item"

			container_tenet_item = {
				visible = "[EqualTo_string( FaithDoctrine.GetGroup.GetGroupingKey, 'core_tenets' )]"
				tooltip = FAITH_WINDOW_DOCTRINE_TOOLTIP_WITH_FAITH
			}
		}
	}
}

template faith_tooltip_ruler_designer_extra_info
{
	spacer = {
		size = { 0 4 }
	}

	divider_light = {
		layoutpolicy_horizontal = expanding
	}

	text_single = {
		text = RULER_DESIGNER_LIST_FAITH_ENTRY_SELECT_TOOLTIP
	}
}

types HoldingTooltips
{
	type holding_tooltip = widget
	{
		alwaystransparent = no
		using = GeneralTooltipSetup

		widget = {
			name = "background"
			using = DefaultTooltipBackground
			size = { 100% 100% }
			alwaystransparent = no
		}

		vbox = {
			set_parent_size_to_minimum = yes
			margin = { 12 8 }
			margin_bottom = 16
			spacing = 4

			vbox = {
				layoutpolicy_horizontal = expanding
				layoutpolicy_vertical = expanding
				margin = { 0 4 }

				background = {
					name = "header"
					texture = "gfx/interface/component_tiles/tile_title_big_top_01.dds"
					spriteType = Corneredstretched
					align = vcenter|left
					texture_density = 2
					margin = { 4 4 }

					modify_texture = {
						name = "mask"
						texture = "gfx/interface/component_masks/mask_title_big_top.dds"
						spriteType = Corneredstretched
						spriteborder = { 160 0 }
						blend_mode = alphamultiply
						alpha = 0.5
					}

					modify_texture = {
						name = "overlay"
						texture = "gfx/interface/component_overlay/overlay_title_big_top.dds"
						spriteType = Corneredstretched
						spriteborder = { 0 0 }
						blend_mode = overlay
					}
				}

				hbox = {
					layoutpolicy_horizontal = expanding
					margin = { 6 4 }

					text_single = {
						layoutpolicy_horizontal = expanding
						name = "header"
						text = "[Holding.GetNameNoTooltip]"
						align = top
						using = Font_Type_Flavor
						using = Font_Size_Big
						min_width = 300
					}

					text_single = {
						text = "[holding|E]"
						align = top
					}
				}
			}

			vbox = {
				spacing = 2
				margin = { 8 0 }
				layoutpolicy_horizontal = expanding

				vbox = {
					visible = "[Not(Holding.IsEmpty)]"
					spacing = 4
					layoutpolicy_horizontal = expanding

					text_single = {
						layoutpolicy_horizontal = expanding
						text = "HOLDING_TT_TYPE"
					}

					text_single = {
						layoutpolicy_horizontal = expanding
						text = "HOLDING_TT_TITLE"
					}

					text_single = {
						layoutpolicy_horizontal = expanding
						text = "HOLDING_TT_HOLDER"
					}

					text_single = {
						visible = "[Holding.GetProvince.GetTitle.IsLeasedOut]"
						layoutpolicy_horizontal = expanding
						text = "HOLDING_TT_LEASED"
					}
				}

				text_single = {
					visible = "[Holding.IsEmpty]"
					layoutpolicy_horizontal = expanding
					text = "HOLDING_TT_EMPTY"
				}

				text_single = {
					layoutpolicy_horizontal = expanding
					text = [Holding.GetTooltip]
				}

				hbox = {
					layoutpolicy_horizontal = growing
					spacing = 12
					datacontext = "[Holding.GetProvince.GetTerrain]"
					tooltipwidget = terrain_tooltip
					using = tooltip_ws

					text_single = {
						text = "HOLDING_TT_TERRAIN"
					}

					icon = {
						name = "terrain"
						texture = "[Terrain.GetIcon]"
						size = { 35 35 }
					}

					expand = {}
				}

				text_single = {
					layoutpolicy_horizontal = expanding
					text = "HOLDING_TT_SUPPLY"
				}

				block "extra_info" {}
			}
		}
	}

	type holding_tooltip_click = holding_tooltip
	{
		blockoverride "extra_info" {
			text_single = {
				layoutpolicy_horizontal = expanding
				text = "HOLDING_CLICK_TOOLTIP"
				margin = { 0 10 }
			}
		}
	}
}

types FaithTooltips
{
	type faith_tooltip = widget
	{
		alwaystransparent = no
		using = GeneralTooltipSetup

		widget = {
			name = "background"
			using = DefaultTooltipBackground
			size = { 100% 100% }
			alwaystransparent = no
		}

		vbox = {
			set_parent_size_to_minimum = yes
			margin = { 12 8 }
			margin_bottom = 16
			spacing = 4

			vbox = {
				layoutpolicy_horizontal = expanding
				layoutpolicy_vertical = expanding
				margin = { 0 4 }

				background = {
					name = "header"
					texture = "gfx/interface/component_tiles/tile_title_big_top_01.dds"
					spriteType = Corneredstretched
					texture_density = 2
					margin = { 15 0 }

					modify_texture = {
						name = "mask"
						texture = "gfx/interface/component_masks/mask_title_big_top.dds"
						spriteType = Corneredstretched
						spriteborder = { 160 0 }
						blend_mode = alphamultiply
						alpha = 0.5
					}

					modify_texture = {
						name = "overlay"
						texture = "gfx/interface/component_overlay/overlay_title_big_top.dds"
						spriteType = Corneredstretched
						spriteborder = { 0 0 }
						blend_mode = overlay
					}
				}

				hbox = {
					layoutpolicy_horizontal = expanding
					margin_bottom = 4

					icon = {
						size = { 60 60 }
						texture = "[Faith.GetIcon]"
					}

					vbox = {
						layoutpolicy_vertical = expanding
						text_single = {
							layoutpolicy_horizontal = expanding
							name = "header"
							text = "[Faith.GetNameNoTooltip]"
							align = top
							using = Font_Type_Flavor
							using = Font_Size_Big

						}
						text_single = {
							visible = "[And( Not( Faith.GetReligion.HasPaganRoots ), Not( Faith.IsUnreformed ) )]"
							layoutpolicy_horizontal = expanding
							text = "FAITH_VIEW_SUBHEADING"
							align = top
						}
						text_single = {
							visible = "[Faith.IsUnreformed]"
							layoutpolicy_horizontal = expanding
							text = "FAITH_VIEW_UNREFORMED_SUBHEADING"
							align = top
						}
						text_single = {
							visible = "[And( Faith.GetReligion.HasPaganRoots, Not( Faith.IsUnreformed ) )]"
							layoutpolicy_horizontal = expanding
							text = "FAITH_VIEW_REFORMED_SUBHEADING"
							align = top
						}
						expand = {
							layoutpolicy_vertical = growing
						}
					}
					expand = {
						layoutpolicy_horizontal = growing
					}
				}
			}

			vbox = {
				spacing = 4
				margin = { 8 0 }
				vbox = {
					layoutpolicy_horizontal = expanding

					visible = "[And( GetPlayer.IsValid, Not(ObjectsEqual( GetPlayer.GetFaith, Faith.Self )))]"

					text_single = {
						name = "our_view"
						layoutpolicy_horizontal = expanding
						text = FAITH_VIEW_OUR_VIEW
						align = top
					}

					text_single = {
						name = "their_view"
						layoutpolicy_horizontal = expanding
						text = FAITH_VIEW_THEIR_VIEW
						align = top
					}
				}

				hbox = {
					layoutpolicy_horizontal = expanding
					fervor_container_vbox = {}

					expand = {}
				}



				text_single = {
					layoutpolicy_horizontal = growing
					visible = "[Faith.HasDoctrineByKey( 'doctrine_no_head' )]"
					text = "FAITH_TOOLTIP_DOCTRINE_NO_HEAD_OF_FAITH"
				}

				text_single = {
					layoutpolicy_horizontal = growing
					visible = "[And( Not(Faith.HasDoctrineByKey( 'doctrine_no_head' )), Not( Faith.GetReligiousHead.IsValid ) ) ]"
					text = "FAITH_TOOLTIP_DOCTRINE_VACANT_HEAD_OF_FAITH"
				}

				text_single = {
					layoutpolicy_horizontal = growing
					visible = "[And( Not(Faith.HasDoctrineByKey( 'doctrine_no_head' )), Faith.GetReligiousHead.IsValid ) ]"
					text = "FAITH_TOOLTIP_DOCTRINE_HEAD_OF_FAITH"
				}

				spacer = {
					size = { 0 4 }
				}

				divider_light = {
					layoutpolicy_horizontal = growing
				}

				text_multi = {
					max_width = 400
					margin = { 0 4 }
					text = "[Faith.GetFlavorDesc]"
					autoresize = yes
				}

				block "extra_info" {}
			}
		}
	}

	type faith_tooltip_click = faith_tooltip
	{
		blockoverride "extra_info"
		{
			using = faith_tooltip_click_default_extra_info
		}
	}

	type faith_tooltip_core_tenents = faith_tooltip
	{
		blockoverride "extra_info"
		{
			using = faith_tooltip_core_tenents_extra_info
		}
	}

	type faith_tooltip_ruler_designer = faith_tooltip
	{
		blockoverride "extra_info"
		{
			using = faith_tooltip_core_tenents_extra_info
			using = faith_tooltip_ruler_designer_extra_info
		}
	}
}

container = {
	alwaystransparent = no
	name = "FaithTooltip"
	faith_tooltip = {}
}

template religion_tooltip {
	object_tooltip_pop_out = {
		blockoverride "title_text" {
			text = "RELIGION_TITLE_TEXT"
		}

		blockoverride "concept_link" {
			text = [religion|E]
		}

		blockoverride "description_text" {
			text = "[Religion.GetFlavorDesc]"
		}
	}
}

container = {
	alwaystransparent = no
	name = "ReligionTooltip"
	using = religion_tooltip
}

container = {
	name = "ReligionFamilyTooltip"
	alwaystransparent = no

	object_tooltip_pop_out = {

		blockoverride "title_text" {
			margin = { 0 8 }
			text = "[ReligionFamily.GetNameNoTooltip]"
		}

		blockoverride "concept_link" {
			text = [religious_family|E]
		}

		blockoverride "description_text" {
			text = "RELIGION_FAMILY_TOOLTIP"
		}
	}
}

container = {
	name = "SchemeTooltip"
	alwaystransparent = no

	object_tooltip_pop_out = {
		blockoverride "title_text" {
			margin = { 0 8 }
			text = "[Scheme.GetNameNoTooltip]"
		}

		blockoverride "concept_link" {
			text = [scheme|E]
		}

		blockoverride "description_text" {
			text = "[Scheme.GetTypeDescription]"
		}
	}
}

container = {
	name = "FactionTooltip"
	alwaystransparent = no

	object_tooltip_pop_out = {
		blockoverride "title_text" {
			margin = { 0 8 }
			text = "[Faction.GetNameNoTooltip]"
		}

		blockoverride "concept_link" {
			text = [faction|E]
		}

		blockoverride "description_text" {
			text = "[Faction.GetDescription]"
		}
	}
}


container = {
	alwaystransparent = no
	name = "DynastyTooltip"
	using = DynastyTooltip
}

template DynastyTooltip {
	object_tooltip_pop_out = {

		blockoverride "header_additions" {
			margin_top = 6
			margin_bottom = -10

			coa_dynasty_small = {
				blockoverride "coa_tooltip" {}
			}
		}

		blockoverride "title_text" {
			#margin = { 0 8 }
			margin_right = 16
			text = "[dynasty|E] [Dynasty.GetNameNoTooltip]"
			align = nobaseline
		}

		blockoverride "concept_link" {
			text = [dynasty|E]
		}

		blockoverride "extra_data" {
			cooltip_paragraph = {
				text = "DYNASTY_VIEW_MY_DYNASTY"
				visible = "[Dynasty.IsMyDynasty(GetPlayer)]"
			}

			cooltip_paragraph = {
				datacontext = [Dynasty]
				text = "DYNASTY_TT_DYNAST"
			}

			cooltip_paragraph = {
				datacontext = [Dynasty]
				text = "DYNASTY_TT_MEMBERS"
			}

			cooltip_paragraph = {
				datacontext = [Dynasty]
				text = "DYNASTY_TT_SPLENDOR_LEVEL"
			}

			cooltip_paragraph = {
				text = "DYNASTY_VIEW_PRESTIGE"
			}
		}
	}
}

container = {
	alwaystransparent = no
	name = "BuildingTooltip"

	object_tooltip_pop_out = {
		blockoverride "title_text" {
			margin = { 0 8 }
			text = "[Building.GetNameNoTooltip]"
		}
		blockoverride "subtitle_text" {
			text = "[Building.GetTypeName]"
			default_format = "#weak"
		}
		blockoverride "concept_link" {
			text = "[building|E]"
		}
		blockoverride "description_text" {
			text = "BUILDING_TOOLTIP_TEXT"
		}
	}
}

container = {
	name = "ArmyTooltip"
	using = unit_icon_item_tooltip
}

container = {
	alwaystransparent = no
	name = "HoldingTooltipDefault"
	holding_tooltip = {}
}

types Cooltips
{
	type LandedTitleTooltipBase = object_tooltip_pop_out {
		blockoverride "header_additions" {
			margin_top = -4

			coa_title_small_crown = {
				size = { 40 50 }
				blockoverride "coa_tooltip" {}
				blockoverride "coa_hover_glow_visible"
				{
					visible = no
				}
			}
		}

		blockoverride "title_text" {
			text = "[Title.GetNameWithUnderlyingNoTooltip|U]"
		}

		blockoverride "subheading" {
			margin_left = 6

			vbox_title_type_text = {
				layoutpolicy_horizontal = expanding
			}
		}

		blockoverride "description_text" {
			text = "[Title.GetCOADefaultTooltip]"
		}

		blockoverride "concept_link" {
			text = [title|E]
		}

		blockoverride "extra_data" {
			textbox = {
				using = DefaultTooltipText
				layoutpolicy_horizontal = expanding
				multiline = yes
				fonttintcolor = "[TooltipInfo.GetTintColor]"
				block "highlight_text" {}
			}
		}
	}
}

template LandedTitleTooltip {
	LandedTitleTooltipBase = {
		blockoverride "input_info_text" {
			text = "[Title.GetClickInfo]"
		}
	}
}

template LandedTitleTooltipTextLink {
	LandedTitleTooltipBase = {
		blockoverride "input_info_text" {
			text = "CLICK_TO_VIEW"
		}
	}
}

template ProvinceTooltip {
	LandedTitleTooltipBase = {
		datacontext = "[Province.GetCoATitle]"
		blockoverride "input_info_text" {
			text = "CLICK_TO_VIEW_HOLDING"
		}
	}
}

template CountyTitleTooltipLanguage
{
	using = LandedTitleTooltip
	blockoverride "highlight_text"
	{
		text = "COUNTY_LANGUAGE_TOOLTIP"
	}
}

container = {
	alwaystransparent = no
	name = "LandedTitleTooltip"
	using = LandedTitleTooltipTextLink
}

container = {
	alwaystransparent = no
	name = "ProvinceTooltip"
	using = ProvinceTooltip
}

container = {
	name = "GovernmentTypeTooltip"
	alwaystransparent = no

	object_tooltip_pop_out = {
		blockoverride "title_text" {
			margin = { 0 8 }
			text = "[GovernmentType.GetNameNoTooltip]"
		}

		blockoverride "concept_link" {
			text = [government|E]
		}
		blockoverride "description_text" {
			text = GOVERNMENT_TYPE_DESCRIPTION
		}
	}
}

container = {
	name = "ObligationlevelTooltip"
	alwaystransparent = no

	object_tooltip_pop_out = {
		blockoverride "title_text" {
			margin = { 0 8 }
			text = "[ObligationLevel.GetName]"
		}

		blockoverride "concept_link" {
			text = [contract|E]
		}

		blockoverride "description_text" {
			text = "[ObligationLevel.GetEffectText]"
		}
	}
}

types StaticModifierTooltipTypes
{
	type static_modifier_tooltip = object_tooltip_pop_out {
		blockoverride "header_additions" {
			hbox = {
				margin_right = 10
				margin_top = 8
				margin_left = -4

				icon = {
					size = { 32 32 }
					texture = "[StaticModifier.GetIcon]"
					tintcolor = "[TooltipInfo.GetTintColor]"
				}
			}
		}

		blockoverride "title_text" {
			margin = { 0 8 }
			text = "[StaticModifier.GetName]"
		}

		blockoverride "concept_link" {
			text = ""
		}

		blockoverride "description_text" {
			block "description_text_data" {
				text = "[StaticModifier.GetDescWithEffects]"
			}
		}
	}

	type scaled_static_modifier_tooltip = object_tooltip_pop_out {
		blockoverride "header_additions" {
			hbox = {
				margin_right = 10
				margin_top = 8
				margin_left = -4

				icon = {
					size = { 32 32 }
					texture = "[StaticModifier.GetIcon]"
					tintcolor = "[TooltipInfo.GetTintColor]"
				}
			}
		}

		blockoverride "title_text" {
			margin = { 0 8 }
			text = "[StaticModifier.GetName]"
		}

		blockoverride "concept_link" {
			text = ""
		}

		blockoverride "main_description" {
			vbox = {
				layoutpolicy_horizontal = expanding
				textbox = {
					layoutpolicy_horizontal = expanding
					max_width = 400
					using = DefaultTooltipText
					multiline = yes
					block "description_text_data" {
						text = "[StaticModifier.GetDescOnly(StaticModifierTooltipData.GetMainLocalizationKey, StaticModifierTooltipData.GetMultiplier)]"
					}
					fonttintcolor = "[TooltipInfo.GetTintColor]"
					alwaystransparent = no
				}

				vbox = {
					layoutpolicy_horizontal = expanding
					block "effects_datamodel" {
						datamodel = "[StaticModifier.GetEffectsDesc(StaticModifierTooltipData.GetEffectLocaizationKey, StaticModifierTooltipData.GetMultiplier)]"
					}
					item = {
						textbox = {
							layoutpolicy_horizontal = expanding
							margin_top = 5
							margin_left = 10
							margin_right = 5
							margin_bottom = 10
							using = DefaultTooltipText
							using = Background_Area
							text = "[CString.GetString]"
							fonttintcolor = "[TooltipInfo.GetTintColor]"
							alwaystransparent = no
						}
					}
				}

				block "expiration_date" {}

				# Things like "click to X", hotkeys etc
				textbox = {
					name = "input_info"
					layoutpolicy_horizontal = expanding
					margin_top = 10
					using = DefaultTooltipText
					multiline = yes
					block "input_info_text" {}
					fonttintcolor = "[TooltipInfo.GetTintColor]"
				}
			}
		}
	}
}

container = {
	name = "StaticModifierTooltip"
	alwaystransparent = no

	static_modifier_tooltip = {}
}

container = {
	name = "ScaledStaticModifierTooltip"
	alwaystransparent = no

	scaled_static_modifier_tooltip = {}
}

types LawTooltipTypes
{
	type law_tooltip_header_additions = hbox {
		margin_right = 5

		icon = {
			size = { 60 60 }
			visible = "[Law.HasIcon]"
			texture = "[Law.GetIcon]"
			using = Master_Button_Modify_Texture
			tintcolor = "[TooltipInfo.GetTintColor]"
		}
	}

	type pass_law_tooltip = container {
		alwaystransparent = no

		object_tooltip_pop_out = {
			blockoverride "header_additions" {
				law_tooltip_header_additions = {}
			}

			blockoverride "title_text" {
				margin = { 0 8 }
				text = "PASS_LAW_TOOLTIP_TITLE"
			}

			blockoverride "subtitle_text" {
				text = "LAW_TOOLTIP_SUBTITLE"
			}

			blockoverride "concept_link" {
				text = [law|E]
			}

			blockoverride "extra_data" {
				cooltip_paragraph = {
					text = "[GuiLaw.GetCanEnactDescription]"
				}

				cooltip_paragraph = {
					text = "[Law.GetEffectDescription]"
				}

				cooltip_paragraph = {
					text = "[GuiLaw.GetEnactEffectDescription]"
				}

				cooltip_paragraph = {
					text = "LAW_COST"
					visible = "[And( GuiLaw.HasCost, Not( GuiLaw.IsEnacted ) )]"
					tooltip = "[GuiLaw.GetCostDescription]"
				}

				cooltip_paragraph = {
					visible = "[GuiLaw.CanEnact]"
					text = "CLICK_TO_PASS_LAW"
				}
			}
		}
	}

	type general_law_tooltip = object_tooltip_pop_out {
		blockoverride "header_additions" {
			law_tooltip_header_additions = {}
		}

		blockoverride "title_text" {
			margin = { 0 8 }
			text = "LAW_TOOLTIP_TITLE"
		}

		blockoverride "subtitle_text" {
			text = "LAW_TOOLTIP_SUBTITLE"
		}

		blockoverride "concept_link" {
			text = [law|E]
		}

		blockoverride "extra_data" {
			cooltip_paragraph = {
				text = "[Law.GetEffectDescription]"
			}
		}
	}
}

container = {
	alwaystransparent = no
	name = "LawTooltip"
	general_law_tooltip = {}
}

template terrain_tooltip {
	object_tooltip_pop_out = {
		blockoverride "title_text" {
			margin = { 0 8 }
			text = "[Terrain.GetNameNoTooltip]"
		}

		blockoverride "concept_link" {
			text = [terrain|E]
		}

		blockoverride "description_text" {
			text = "TERRAIN_DESCRIPTION"
		}
	}
}
container = {
	alwaystransparent = no
	name = "TerrainTooltip"
	using = terrain_tooltip
}


template dynasty_house_tooltip {
	object_tooltip_pop_out = {
		datacontext = "[DynastyHouse]"

		blockoverride "header_additions" {
			margin_right = 10
			margin_top = 8
			margin_left = -4

			coa_house_small = {
				blockoverride "coa_tooltip" {}
			}
		}

		blockoverride "title_text" {
			text = "HOUSE_TT_NAME"
		}

		blockoverride "subtitle_text" {
			margin_top = -4
			text = "HOUSE_VIEW_MOTTO"
			default_format = "#weak"
		}

		blockoverride "concept_link" {
			text = [house|E]
		}
		blockoverride "extra_data" {

			cooltip_paragraph = {
				name = "my_house"
				visible = "[DynastyHouse.IsPlayerMember]"
				text = "HOUSE_VIEW_PLAYER_IS_MEMBER"
			}

			cooltip_paragraph = {
				name = "house_head"
				text = "DYNASTY_HOUSE_TT_HEAD_OF_HOUSE"
			}
			cooltip_paragraph = {
				name = "living_members"
				text = "DYNASTY_HOUSE_TT_LIVING_MEMBERS"
			}

			cooltip_paragraph = {
				name = "dynasty"
				text = "DYNASTY_HOUSE_TT_DYNASTY"
			}
			cooltip_paragraph = {
				name = "dynasty_level"
				text = "DYNASTY_HOUSE_TT_DYNASTY_LEVEL"
			}
			
			hbox = {
				layoutpolicy_horizontal = expanding

				datacontext = "[DynastyHouse.GetCurrentHouseUnityStage]"
				
				visible = "[DynastyHouse.HasHouseUnity]"

				spacing = 5

				text_single = {
					text = "HOUSE_UNITY_VALUE_TT_TITLE"
				}

				icon = {
					size = { 30 30 }
					texture = "[HouseUnityStage.GetIcon]"

					tooltipwidget = {
						house_unity_stage_tooltip = {
							blockoverride "decisions_visibility" {
								visible = "[DynastyHouse.IsPlayerMember]"
							}

							blockoverride "decisions_datamodel" {
								datamodel = "[GetDecisionsForCharacter(GetPlayer)]"
							}
						}
					}
				}

				text_single = {
					text = "[DynastyHouse.GetHouseUnityValue|0]"
				}

				expand = {}
			}

			cooltip_paragraph = {
				name = "click"
				text = "VIEW_CLICK"
				default_format = "#I"
			}
		}
	}
}

container = {
	alwaystransparent = no
	name = "DynastyHouseTooltip"
	using = dynasty_house_tooltip
}

### These templates can very likely be extended to most custom tooltips with header, blocker, effects, flavor, etc

local_template era_innov_blockers
{
	minimumsize = { 100% 0 }

	block "eib_visible"
	{
		visible = yes
	}

	text_multi = {
		block "eib_text"
		{
			text = "..."
		}

		autoresize = yes
		fonttintcolor = "[TooltipInfo.GetTintColor]"
		using = DefaultTooltipText
	}
}

local_template era_innov_effects
{
	flowcontainer = {
		name = "effects"

		minimumsize = { 100% 0 }

		direction = vertical
		ignoreinvisible = yes

		text_single = {
			text = "INNOVATION_ERA_TOOLTIP_EFFECTS"
		}

		textbox = {
			autoresize = yes
			fonttintcolor = "[TooltipInfo.GetTintColor]"
			using = DefaultTooltipText

			block "eie_effects"
			{
				text = "..."
			}
		}
	}
}

# progress

local_template era_innov_flavor
{
	textbox = {
		name = "description"

		autoresize = yes
		fonttintcolor = "[TooltipInfo.GetTintColor]"
		using = DefaultTooltipText
		multiline = yes
		default_format = "#F"

		block "eif_text"
		{
			text = "..."
		}
	}
}

template culture_innovation_tooltip_no_context {
	container = {
		using = GeneralTooltipSetup
		alwaystransparent = no
		widget = {
			name = "background"
			using = DefaultTooltipBackground
			size = { 100% 100% }
			alwaystransparent = no
		}

		flowcontainer = {
			margin = { 20 20 }
			spacing = 15
			direction = vertical
			ignoreinvisible = yes

			widget = {
				name = "header"
				size = { 500 60 }

				background = {
					using = Background_Area_Dark
					margin = { 15 10 }
				}

				hbox = {
					layoutpolicy_horizontal = expanding
					minimumsize = { 500 0 }
					set_parent_size_to_minimum = yes

					widget = {
						size = { 90 60 }
						icon = {
							texture = "[CultureInnovationType.GetIcon]"
							size = { 90 60 }

							using = Mask_Rough_Edges
						}
					}

					text_single = {
						layoutpolicy_horizontal = expanding
						margin = { 10 0 }
						text = "[CultureInnovationType.GetName|T]"
					}

					expand = {}

					vbox = {
						text_single = {
							layoutpolicy_horizontal = expanding
							align = right
							text = "INNOVATION_TOOLTIP_TYPE"
						}
					}
				}
			}

			container = {
				using = era_innov_effects

				blockoverride "eie_label_visible"
				{
					visible = "[CultureInnovationType.HasEffects( GetPlayer.GetCulture, GetPlayer )]"
					minimumsize = { 500 30 }
				}


				blockoverride "eie_effects"
				{
					text = "[CultureInnovationType.GetEffectsDesc( GetPlayer.GetCulture, GetPlayer )]"
				}
			}

			container = {
				using = era_innov_flavor

				blockoverride "eif_text" {
					text = "[CultureInnovationType.GetDescription]"
					max_width = 500
				}
			}
		}
	}
}

template culture_innovation_tooltip {
	container = {
		using = GeneralTooltipSetup
		alwaystransparent = no

		widget = {
			name = "background"
			using = DefaultTooltipBackground
			size = { 100% 100% }
			alwaystransparent = no
		}

		flowcontainer = {
			margin = { 20 20 }
			spacing = 15
			direction = vertical
			ignoreinvisible = yes
			datacontext = "[CultureInnovation.GetType]"

			widget = {
				name = "header"
				size = { 500 60 }

				background = {
					using = Background_Area_Dark
					margin = { 15 10 }
				}

				hbox = {
					minimumsize = { 500 0 }
					set_parent_size_to_minimum = yes

					widget = {
						size = { 90 60 }
						icon = {
							texture = "[CultureInnovationType.GetIcon]"
							size = { 90 60 }

							using = Mask_Rough_Edges
						}

						icon = {
							visible = "[Not(CultureInnovation.CanGainProgress)]"
							texture = "[CultureInnovationType.GetIcon]"
							tintcolor = { 0 0 0 0.5 }
							size = { 90 60 }

							using = Mask_Rough_Edges
						}
					}

					text_single = {
						layoutpolicy_horizontal = expanding
						margin = { 10 0 }
						text = "[CultureInnovation.GetNameNoTooltip|T]"
					}

					expand = {}

					vbox = {
						text_single = {
							layoutpolicy_horizontal = expanding
							align = right
							text = "INNOVATION_TOOLTIP_TYPE"
						}

						spacer = {
							size = { 5 5 }
						}

						text_single = {
							layoutpolicy_horizontal = expanding
							align = right
							text = "INNOVATION_TOOLTIP_ERA"
						}
					}
				}
			}

			container = {
				name = "fascination"
				using = era_innov_blockers
				visible = "[CultureInnovation.IsFascination]"
				minimumsize = { 500 0 }

				background = {
					using = Background_Area_Dark
					margin = { 15 5 }
					alpha = 0.6
				}

				blockoverride "eib_text"
				{
					text = "INNOVATION_FASCINATION_MARKER_TOOLTIP"
				}
			}

			container = {
				name = "exposure"
				using = era_innov_blockers
				visible = "[CultureInnovation.HasExposureMarker]"
				minimumsize = { 500 0}

				background = {
					using = Background_Area_Dark
					margin = { 15 5 }
					alpha = 0.6
				}

				blockoverride "eib_text"
				{
					text = "INNOVATION_EXPOSURE_MARKER_TOOLTIP"
				}
			}

			container = {
				name = "blocked_for_government"
				using = era_innov_blockers

				blockoverride "eib_visible"
				{
					visible = "[CultureInnovation.GetCultureEra.GetType.IsInvalidForPlayerGovernment]"
				}

				blockoverride "eib_text"
				{
					text = "CULTURE_WINDOW_ERA_INNOVATION_BLOCKED_FOR_PLAYER_GOVERNMENT"
				}
			}

			container = {
				name = "blocker"
				using = era_innov_blockers

				blockoverride "eib_visible"
				{
					visible = "[Not(CultureInnovation.CanGainProgress)]"
				}

				blockoverride "eib_text"
				{
					text = "[CultureInnovation.GetCantGainProgressReason]"
				}
			}

			container = {
				using = era_innov_effects

				blockoverride "eie_label_visible"
				{
					visible = "[CultureInnovationType.HasEffects( CultureInnovation.GetCulture, GetPlayer )]"
					minimumsize = { 500 30 }
				}


				blockoverride "eie_effects"
				{
					text = "[CultureInnovationType.GetEffectsDesc( CultureInnovation.GetCulture, GetPlayer )]"
				}
			}

			flowcontainer = {
				minimumsize = { 100% 0 }
				direction = vertical
				ignoreinvisible = yes

				text_single = {
					text = "[CultureInnovation.GetInnovationState]"
				}

				progressbar_standard = {
					visible = "[And(CultureInnovation.CanGainProgress, Not(CultureInnovation.IsActive))]"
					size = { 300 25 }

					min = 0
					max = 100
					value = "[FixedPointToFloat(CultureInnovation.GetProgress)]"

					text_single = {
						parentanchor = hcenter|vcenter
						widgetanchor = hcenter|vcenter
						position = { 0 -2 }
						text = "[CultureInnovation.GetProgress|%/0]"

						background = {
							using = Background_Area
							margin = { 10 0 }
						}
					}
				}

				text_single = {
					visible = "[And(CultureInnovation.CanGainProgress, Not(CultureInnovation.IsActive))]"
					text = "INNOVATION_TOOLTIP_PROGRESS"
					autoresize = yes
					max_width = 500
				}
			}

			flowcontainer = {
				minimumsize = { 500 0 }
				direction = vertical
				ignoreinvisible = yes
				name = "progress"
				visible = "[And(CultureInnovation.CanGainProgress, Not(CultureInnovation.IsActive))]"

				background = {
					using = Background_Area
					margin = { 10 10 }
				}

				widget = { size = { 0 5 } }

				text_multi = {
					text = "INNOVATION_TOOLTIP_GAIN"
					autoresize = yes
					max_width = 500

				}
				textbox = {
					text = "[CultureInnovation.GetProgressGainBreakdownString]"
					autoresize = yes
					max_width = 500
					fonttintcolor = "[TooltipInfo.GetTintColor]"
					using = DefaultTooltipText
				}

				widget = { size = { 0 5 } }

				textbox = {
					text = "[CultureInnovation.GetProgressChanceBreakdownString]"
					autoresize = yes
					fonttintcolor = "[TooltipInfo.GetTintColor]"
					using = DefaultTooltipText
				}
			}

			container = {
				using = era_innov_flavor

				blockoverride "eif_text" {
					text = "[CultureInnovationType.GetDescription]"
					max_width = 500
				}
			}

			block "AfterDescription" {}
		}
	}
}

container = {
	alwaystransparent = no
	name = "CultureInnovationTooltip"
	using = culture_innovation_tooltip
}

template culture_era_tooltip {
	container = {
		using = GeneralTooltipSetup
		alwaystransparent = no

		widget = {
			name = "background"
			using = DefaultTooltipBackground
			size = { 100% 100% }
			alwaystransparent = no
		}

		flowcontainer = {
			margin = { 20 20 }
			spacing = 15
			direction = vertical
			ignoreinvisible = yes
			datacontext = "[CultureEra.GetType]"

			widget = {
				size = { 500 50}

				background = {
					using = Background_Area_Dark
					margin = { 15 0 }
					margin_top = 10
				}

				text_single = {
					parentanchor = vcenter|left
					text = "[CultureEra.GetNameNoTooltip]"
					default_format = "#T"
				}

				text_single = {
					parentanchor = vcenter|right
					text = "[era|E]"
				}
			}

			text_single = {
				visible = "[Not(CultureEra.IsActive)]"
				text = "CULTURE_ERA_BLOCKED_BLOCKED_TILE"
			}

			container = {
				name = "blockers"
				using = era_innov_blockers
				blockoverride "eib_visible"
				{
					visible = "[And(Not(CultureEra.IsActive), Not(CultureEra.CanGainProgress))]"
				}
				blockoverride "eib_text"
				{
					text = "[CultureEra.GetCantGainProgressReason]"
				}
			}


			flowcontainer = {
				name = "progress"
				visible = "[And(Not(CultureEra.IsActive), CultureEra.CanGainProgress)]"
				minimumsize = { 100% 0 }
				direction = vertical
				ignoreinvisible = yes

				text_single = {
					text = "[CultureEra.GetProgressAndGainBreakdown]"
				}
			}

			text_single = {
				visible = "[CultureEra.IsActive]"
				text = "CULTURE_ERA_TOOLTIP_REACHED"
			}

			container = {
				using = era_innov_effects

				blockoverride "eie_label_visible"
				{
					visible = "[CultureEraType.HasEffects( CultureEra.GetCulture, GetPlayer )]"
					minimumsize = { 500 30 }
				}


				blockoverride "eie_effects"
				{
					text = "[CultureEraType.GetEffectsDesc( CultureEra.GetCulture, GetPlayer )]"
				}
			}

			container = {
				using = era_innov_flavor

				blockoverride "eif_text" {
					text = "[CultureEraType.GetDescription]"
					max_width = 500
				}
			}

			block "cet_click_text"
			{
				text_single = {
					default_format = "#I"
					text = "VIEW_CLICK"
				}
			}
		}
	}
}
container = {
	alwaystransparent = no
	name = "CultureEraTooltip"
	using = culture_era_tooltip

	blockoverride "cet_click_text"
	{
		#no text
	}
}

types CultureTooltips
{
	type culture_tooltip = widget
	{
		using = GeneralTooltipSetup
		alwaystransparent = no

		widget = {
			name = "background"
			using = DefaultTooltipBackground
			size = { 100% 100% }
			alwaystransparent = no
		}

		vbox = {
			set_parent_size_to_minimum = yes
			margin = { 15 5 }
			margin_bottom = 16

			vbox = {
				layoutpolicy_horizontal = expanding
				layoutpolicy_vertical = expanding
				margin = { 6 4 }
				margin_bottom = 12

				background = {
					name = "header"
					texture = "gfx/interface/component_tiles/tile_title_big_top_01.dds"
					spriteType = Corneredstretched
					align = vcenter|left
					margin = { 15 0 }
					texture_density = 2

					modify_texture = {
						name = "mask"
						texture = "gfx/interface/component_masks/mask_title_big_top.dds"
						spriteType = Corneredstretched
						spriteborder = { 160 0 }
						blend_mode = alphamultiply
						alpha = 0.5
					}

					modify_texture = {
						name = "overlay"
						texture = "gfx/interface/component_overlay/overlay_title_big_top.dds"
						spriteType = Corneredstretched
						spriteborder = { 0 0 }
						blend_mode = overlay
					}
				}
				hbox = {
					layoutpolicy_horizontal = expanding

					vbox = {
						layoutpolicy_horizontal = expanding
						layoutpolicy_vertical = expanding

						hbox = {
							layoutpolicy_horizontal = expanding

							text_single = {
								layoutpolicy_horizontal = expanding
								name = "header"
								text = "CULTURE_COOLTIP_GETNAME"
								fonttintcolor = "[TooltipInfo.GetTintColor]"
								align = top

								using = Font_Type_Flavor
								using = Font_Size_Big
							}

							expand = {}

							text_single = {
								layoutpolicy_horizontal = expanding
								layoutpolicy_vertical = expanding
								text = "[culture|E]"
								fonttintcolor = "[TooltipInfo.GetTintColor]"
								align = vcenter|right
							}
						}

						text_single = {
							layoutpolicy_horizontal = expanding
							fonttintcolor = "[TooltipInfo.GetTintColor]"
							text = "[Culture.GetPlayerRelationString]"
						}

						expand = {
							layoutpolicy_vertical = growing
						}

						hbox = {
							margin_top = 1
							margin_bottom = 3
							visible = "[Not( ObjectsEqual( Culture.Self, GetPlayer.GetCulture ) )]"
							layoutpolicy_horizontal = expanding
							spacing = 5
							tooltip = "CULTURE_ACCEPTANCE_TOOLTIP"

							text_single = {
								fonttintcolor = "[TooltipInfo.GetTintColor]"
								text = "CULTURE_VIEW_ACCEPTANCE"
							}

							text_single = {
								fonttintcolor = "[TooltipInfo.GetTintColor]"
								text = "CULTURE_VIEW_ACCEPTANCE_DIFF_BRACKETS"
							}

							expand = {}
						}
					}
				}
			}

			vbox = {
				layoutpolicy_horizontal = expanding
				spacing = 4
				margin = { 8 0 }

				hbox = {
					layoutpolicy_horizontal = growing
					spacing = 4

					icon_doctrine = {
						visible = "[ObjectsEqual( Culture.GetHeritage, GetPlayer.GetCulture.GetHeritage )]"
						size = { 30 30 }
						texture = "gfx/interface/icons/culture_pillars/heritage.dds"
					}

					icon_doctrine = {
						visible = "[Not(ObjectsEqual( Culture.GetHeritage, GetPlayer.GetCulture.GetHeritage ))]"
						size = { 30 30 }
						texture = "gfx/interface/icons/culture_pillars/heritage_diverge.dds"
					}

					text_single = {
						datacontext = "[Culture.GetHeritage]"
						layoutpolicy_horizontal = growing
						text = "CULTURE_VIEW_HERITAGE_TEXT"

						tooltipwidget = {
							using = culture_pillar_tooltip
						}
					}

					expand = {}
				}

				hbox = {
					layoutpolicy_horizontal = growing
					spacing = 4

					icon_doctrine = {
						visible = "[ObjectsEqual( Culture.GetLanguage, GetPlayer.GetCulture.GetLanguage )]"
						size = { 30 30 }
						texture = "gfx/interface/icons/culture_pillars/language.dds"
					}

					icon_doctrine = {
						visible = "[Not(ObjectsEqual( Culture.GetLanguage, GetPlayer.GetCulture.GetLanguage ))]"
						size = { 30 30 }
						texture = "gfx/interface/icons/culture_pillars/language_diverge.dds"
					}

					text_single = {
						datacontext = "[Culture.GetLanguage]"
						layoutpolicy_horizontal = growing
						text = "CULTURE_VIEW_LANGUAGE_TEXT"

						tooltipwidget = {
							using = culture_pillar_tooltip
						}
					}

					expand = {}
				}

				text_single = {
					layoutpolicy_horizontal = growing
					text = "CULTURE_COOLTIP_ERA"
					fonttintcolor = "[TooltipInfo.GetTintColor]"

					using = DefaultTooltipText
				}

				spacer = {
					size = { 0 4 }
				}

				divider_light = {
					layoutpolicy_horizontal = growing
				}

				hbox = {
					datacontext = "[Culture.GetFascination]"
					visible = "[Culture.HasFascination]"
					layoutpolicy_horizontal = expanding

					tooltipwidget = culture_innovation_tooltip

					widget = {
						size = { 65 45 }
						icon_innovation = {
							scale = 0.7
						}
					}

					vbox = {
						layoutpolicy_horizontal = growing
						spacing = 8
						margin_left = 8

						text_single = {
							layoutpolicy_horizontal = growing
							fonttintcolor = "[TooltipInfo.GetTintColor]"
							using = DefaultTooltipText
							text = "CULTURE_COOLTIP_FASCINATION"
						}

						hbox = {
							layoutpolicy_horizontal = growing

							progressbar_standard = {
								size = { 150 15 }
								min = 0
								max = 100
								value = "[FixedPointToFloat(CultureInnovation.GetProgress)]"
							}

							expand = {}
						}

						expand = {}
					}
				}

				text_single = {
					visible = "[And( Culture.IsPlayerCultureHead, And( ObjectsEqual( GetPlayer.GetCulture, Culture.Self ), Culture.HasAvailableInnovation ) )]"
					layoutpolicy_horizontal = growing
					fonttintcolor = "[TooltipInfo.GetTintColor]"
					text = "INGAME_TOPBAR_CULTURE_HEAD"
					default_format = "#weak"

					using = DefaultTooltipText
				}

				text_single = {
					visible = "[And( ObjectsEqual( GetPlayer.GetCulture, Culture.Self ), Not( Culture.HasAvailableInnovation ) )]"
					layoutpolicy_horizontal = growing
					text = "CULTURE_COOLTIP_NO_AVAILABLE_INNOVATION"
					fonttintcolor = "[TooltipInfo.GetTintColor]"

					using = DefaultTooltipText
				}

				divider_light = {
					layoutpolicy_horizontal = growing
				}

				hbox = {
					datacontext = "[Culture.GetCultureHead]"
					layoutpolicy_horizontal = growing
					spacing = 10

					vbox = {
						layoutpolicy_vertical = expanding
						expand = {}

						portrait_head_small = {
							name = "culture_head_portrait"
						}
					}

					text_single = {
						visible = "[Culture.GetCultureHead.IsValid]"
						layoutpolicy_horizontal = growing
						layoutpolicy_vertical = growing
						fonttintcolor = "[TooltipInfo.GetTintColor]"
						text = "CULTURE_COOLTIP_HEAD"
						align = top
						max_width = 320

						using = DefaultTooltipText
					}

					text_single = {
						visible = "[Not( Culture.GetCultureHead.IsValid )]"
						layoutpolicy_horizontal = growing
						layoutpolicy_vertical = growing
						text = "CULTURE_COOLTIP_NO_HEAD"
						fonttintcolor = "[TooltipInfo.GetTintColor]"
						align = top

						using = DefaultTooltipText
					}
				}


				block "extra_info"
				{
					text_single = {
						layoutpolicy_horizontal = growing
						layoutpolicy_vertical = growing
						text = "CLICK_TO_VIEW"
						#fonttintcolor = "[TooltipInfo.GetTintColor]"
						align = top

						using = DefaultTooltipText
					}
				}
			}
		}
	}

	type ruler_designer_culture_tooltip = widget
	{
		using = GeneralTooltipSetup
		alwaystransparent = no

		widget = {
			name = "background"
			using = DefaultTooltipBackground
			size = { 100% 100% }
			alwaystransparent = no
		}

		vbox = {
			layoutpolicy_horizontal = expanding
			layoutpolicy_vertical = expanding
			set_parent_size_to_minimum = yes
			margin = { 15 5 }
			margin_bottom = 12

			vbox = {
				layoutpolicy_horizontal = expanding
				layoutpolicy_vertical = expanding
				margin = { 6 4 }
				margin_bottom = 12

				background = {
					name = "header"
					texture = "gfx/interface/component_tiles/tile_title_big_top_01.dds"
					spriteType = Corneredstretched
					align = vcenter|left
					margin = { 15 0 }
					texture_density = 2

					modify_texture = {
						name = "mask"
						texture = "gfx/interface/component_masks/mask_title_big_top.dds"
						spriteType = Corneredstretched
						spriteborder = { 160 0 }
						blend_mode = alphamultiply
						alpha = 0.5
					}

					modify_texture = {
						name = "overlay"
						texture = "gfx/interface/component_overlay/overlay_title_big_top.dds"
						spriteType = Corneredstretched
						spriteborder = { 0 0 }
						blend_mode = overlay
					}
				}

				hbox = {
					layoutpolicy_horizontal = expanding

					vbox = {
						layoutpolicy_horizontal = expanding
						layoutpolicy_vertical = expanding

						hbox = {
							layoutpolicy_horizontal = expanding

							text_single = {
								layoutpolicy_horizontal = expanding
								name = "header"
								text = "CULTURE_COOLTIP_GETNAME"
								fonttintcolor = "[TooltipInfo.GetTintColor]"
								align = top
								using = Font_Type_Flavor
								using = Font_Size_Big
							}

							expand = {}

							text_single = {
								layoutpolicy_horizontal = expanding
								layoutpolicy_vertical = expanding
								text = "[culture|E]"
								fonttintcolor = "[TooltipInfo.GetTintColor]"
								align = vcenter|right
							}
						}
					}
				}
			}

			vbox = {
				spacing = 0
				margin = { 8 0 }
				layoutpolicy_horizontal = expanding

				spacer = {
					size = { 0 4 }
				}

				text_single = {
					layoutpolicy_horizontal = expanding
					text = "CULTURE_RD_TOOLTIP_ETHOS"
					align = left
				}

				spacer = {
					size = { 0 10 }
				}

				divider_light = {
					layoutpolicy_horizontal = expanding
				}

				vbox = {
					layoutpolicy_horizontal = expanding
					margin_top = 6
					margin_bottom = 6

					text_label_center = {
						margin = { 10 2 }
						text = "[culture_pillars|E]"
						align = center|nobaseline
						default_format = "#low"
					}

					hbox = {
						name = "cultural_pillars_block"
						layoutpolicy_horizontal = expanding
						layoutpolicy_vertical = expanding
						spacing = 60
						margin_top = 4

						vbox = {
							name = "cultural_pillars_collumn_one"
							layoutpolicy_vertical = expanding
							layoutpolicy_horizontal = expanding

							hbox = {
								name = "heritage"
								layoutpolicy_horizontal = expanding
								datacontext = "[Culture.GetHeritage]"

								hbox = {
									spacing = 4

									tooltipwidget = {
										using = culture_pillar_tooltip
									}

									icon_doctrine = {
										visible = "[ObjectsEqual( Culture.GetHeritage, GetPlayer.GetCulture.GetHeritage )]"
										size = { 44 44 }
										texture = "gfx/interface/icons/culture_pillars/heritage.dds"
									}

									icon_doctrine = {
										visible = "[Not( ObjectsEqual( Culture.GetHeritage, GetPlayer.GetCulture.GetHeritage ))]"
										size = { 44 44 }
										texture = "gfx/interface/icons/culture_pillars/heritage_diverge.dds"
									}

									text_multi = {
										datacontext = "[Culture.GetHeritage]"
										text = "CULTURE_VIEW_HERITAGE_TEXT"
										autoresize = yes
										max_width = 160

									}
								}

								expand = {}
							}

							hbox = {
								name = "martial"
								datacontext = "[Culture.GetMartial]"
								layoutpolicy_horizontal = expanding

								hbox = {
									spacing = 4

									tooltipwidget = {
										using = culture_pillar_tooltip
									}

									icon_doctrine = {
										size = { 44 44 }
										texture = "[CulturePillar.GetIcon]"
									}

									text_multi = {
										text = "CULTURE_VIEW_MARTIAL_CUSTOM_TEXT"
										autoresize = yes
										max_width = 160
									}
								}

								expand = {}
							}
						}

						vbox = {
							name = "cultural_pillars_collumn_two"
							layoutpolicy_horizontal = expanding
							layoutpolicy_vertical = expanding
							margin_left = 10

							hbox = {
								name = "language"
								datacontext = "[Culture.GetLanguage]"
								layoutpolicy_horizontal = expanding

								hbox = {
									spacing = 4

									tooltipwidget = {
										using = culture_pillar_tooltip
									}

									icon_culture_pillar = {
										visible = "[ObjectsEqual( Culture.GetLanguage, GetPlayer.GetCulture.GetLanguage )]"
										texture = "gfx/interface/icons/culture_pillars/language.dds"
									}

									icon_culture_pillar = {
										visible = "[Not( ObjectsEqual( Culture.GetLanguage, GetPlayer.GetCulture.GetLanguage ))]"
										texture = "gfx/interface/icons/culture_pillars/language_diverge.dds"
									}

									text_multi = {
										datacontext = "[Culture.GetLanguage]"
										text = "CULTURE_VIEW_LANGUAGE_TEXT"
										autoresize = yes
										max_width = 160
									}
								}

								expand = {}
							}

							hbox = {
								layoutpolicy_horizontal = expanding

								hbox = {
									spacing = 4

									tooltip = "CULTURE_AESTHETICS_TOOLTIP"

									icon_culture_pillar = {
										texture = "gfx/interface/icons/culture_pillars/aesthetics.dds"
									}

									text_multi = {
										text = "CULTURE_AESTHETICS"
										autoresize = yes
										max_width = 160
									}
								}

								expand = {}
							}

						}
					}
				}

				divider_light = {
					layoutpolicy_horizontal = expanding
				}

				spacer = {
					size = { 0 6 }
				}

				text_label_center = {
					margin = { 10 2 }
					text = "[traditions|E]"
					align = center|nobaseline
					default_format = "#low"
				}

				spacer = {
					size = { 0 10 }
				}

				vbox = {
					margin_left = 20

					fixedgridbox = {
						name = "traditions_holder"
						datamodel = "[Culture.GetTraditions]"
						flipdirection = yes
						addcolumn = 200
						addrow = 124
						datamodel_wrap = 2

						item = {
							container = {
								using = tooltip_se

								tooltipwidget = {
									using = culture_tradition_tooltip
								}

								widget_tradition_icon = {
									block "icon_size" {
										size = { 178 89 }
									}
								}

								text_label_center = {
									name = "name"
									parentanchor = bottom|hcenter
									widgetanchor = center
									position = { 0 14 }
									maximumsize = { 144 44 } #x 5 smaller y 4 bigger
									fontsize_min = 10
									multiline = yes
									align = center
									elide = right
									text = "[CultureTradition.GetNameNoTooltip]"
									default_format = "#medium"
								}
							}
						}
					}
				}
			}
		}
	}

	type culture_tooltip_click = culture_tooltip
	{
		blockoverride "extra_info" {
			spacer = {
				size = { 0 4 }
			}
			divider_light = {
				layoutpolicy_horizontal = growing
			}

			text_single = {
				layoutpolicy_horizontal = growing
				text = "CULTURE_COOLTIP_CLICK"
				margin = { 10 0 }
			}

		}
	}
}

container = {
	alwaystransparent = no
	name = "CultureTooltip"
	culture_tooltip = {}
}

container = {
	alwaystransparent = no
	name = "SecretTooltip"

	object_tooltip_pop_out = {
		blockoverride "header_additions" {
			hbox = {
				margin_right = 10
				margin_top = 8
				margin_left = -4

				icon = {
					size = { 52 52 }
					texture = "[Secret.GetType.GetIcon]"
					tintcolor = "[TooltipInfo.GetTintColor]"
				}
			}
		}

		blockoverride "title_text" {
			margin = { 0 8 }
			text = "[Secret.GetNameNoTooltip]"
		}

		blockoverride "concept_link" {
			text = [secret|E]
		}

		blockoverride "description_text" {
			text = "[Secret.GetTooltipDesc]"
		}
	}
}

container = {
	alwaystransparent = no
	name = "SecretTypeTooltip"

	object_tooltip_pop_out = {
		blockoverride "header_additions" {
			hbox = {
				margin_right = 10
				margin_top = 8
				margin_left = -4

				icon = {
					size = { 52 52 }
					texture = "[SecretType.GetIcon]"
					tintcolor = "[TooltipInfo.GetTintColor]"
				}
			}
		}

		blockoverride "title_text" {
			margin = { 0 8 }
			text = "[SecretType.GetNameNoTooltip]"
		}

		blockoverride "concept_link" {
			text = [secret|E]
		}

		blockoverride "description_text" {
			text = "[SecretType.GetDesc]"
		}
	}
}

container = {
	alwaystransparent = no
	name = "GeographicalRegionTooltip"

	object_tooltip_pop_out = {
		blockoverride "title_text" {
			margin = { 0 8 }
			text = "[GeographicalRegion.GetNameNoTooltip]"
		}

		blockoverride "concept_link" {
			text = [region|E]
		}

		blockoverride "description_text" {
			text = VIEW_CLICK
			default_format = "#I"
		}
	}
}

template culture_pillar_tooltip {
	container = {
		alwaystransparent = no
		block "datacontext" {}

		object_tooltip_pop_out = {
			blockoverride "title_text" {
				margin = { 0 8 }
				text = "[CulturePillar.GetNameNoTooltip]"
				default_format = "#T"
			}

			blockoverride "extra_data" {
				vbox = {
					visible = "[ObjectsEqual( Culture.GetHeritage, CulturePillar.Self )]"

					cooltip_paragraph = {
						text = "CULTURE_PILLAR_TOOLTIP_HERITAGE_SAME"
						visible = "[ObjectsEqual( GetPlayer.GetCulture.GetHeritage, CulturePillar.Self )]"
					}

					cooltip_paragraph = {
						text = "CULTURE_PILLAR_TOOLTIP_HERITAGE_DIFF"
						visible = "[Not(ObjectsEqual( GetPlayer.GetCulture.GetHeritage, CulturePillar.Self ))]"
					}

					cooltip_paragraph = {
						text = "CULTURE_PILLAR_TOOLTIP_HERITAGE_EFFECT"

					}

				}

				vbox = {
					visible = "[ObjectsEqual( Culture.GetLanguage, CulturePillar.Self )]"

					cooltip_paragraph = {
						text = "CULTURE_PILLAR_TOOLTIP_LANGUAGE_SAME"
						visible = "[ObjectsEqual( GetPlayer.GetCulture.GetLanguage, CulturePillar.Self )]"
					}

					cooltip_paragraph = {
						text = "CULTURE_PILLAR_TOOLTIP_LANGUAGE_DIFF"
						visible = "[Not(ObjectsEqual( GetPlayer.GetCulture.GetLanguage, CulturePillar.Self ))]"
					}

					cooltip_paragraph = {
						text = "CULTURE_PILLAR_TOOLTIP_COURT_LANGUAGE"
						visible = "[ObjectsEqual( GetPlayer.GetCourtLanguage, CulturePillar.Self )]"
					}

					cooltip_paragraph = {
						text = "CULTURE_PILLAR_TOOLTIP_LANGUAGE_EFFECT"

					}

				}

			}
			blockoverride "description_text" {
				text = "CULTURE_PILLAR_GENERAL_TOOLTIP"
			}
			blockoverride "concept_link" {
				text = "[CulturePillar.GetTypeName]"
			}
		}
	}
}

template culture_pillar_tooltip_establishing {
	container = {
		alwaystransparent = no
		datacontext = "[CultureReformation.GetNewPillar]"
		using = culture_pillar_tooltip

		blockoverride "main_description"
		{
			textbox = {
				name = "establishment_description"
				layoutpolicy_horizontal = expanding
				max_width = 400
				using = DefaultTooltipText
				multiline = yes
				text = "CULTURE_PILLAR_ESTABLISHING_PROGRESS_HEADER"
				fonttintcolor = "[TooltipInfo.GetTintColor]"
				alwaystransparent = no
			}

			textbox = {
				name = "effect_description"
				layoutpolicy_horizontal = expanding
				max_width = 400
				using = DefaultTooltipText
				multiline = yes
				text = "CULTURE_PILLAR_ESTABLISHING_TOOLTIP"
				fonttintcolor = "[TooltipInfo.GetTintColor]"
				alwaystransparent = no
				margin_bottom = 20
			}
		}
	}
}

container = {
	alwaystransparent = no
	name = "CulturePillarTooltip"
	datacontext = "[GetPlayer.GetCulture]"
	using = culture_pillar_tooltip
}

template culture_tradition_tooltip {
	container = {
		alwaystransparent = no

		object_tooltip_pop_out = {
			blockoverride "title_text" {
				margin = { 0 8 }
				text = "[CultureTradition.GetNameNoTooltip]"
				default_format = "#T"
			}

			blockoverride "description_text" {
				text = "CULTURE_TRADITION_GENERAL_TOOLTIP"
			}

			blockoverride "concept_link" {
				text = "[culture_tradition|E]"
			}

			blockoverride "input_info_text" {
				text = "CULTURE_TRADITION_TOOLTIP_CLICKINFO"
			}
		}
	}
}


template culture_tradition_tooltip_clickable {
	using = culture_tradition_tooltip
	blockoverride "input_info_text" {
		text = CLICK_TO_SELECT
	}
}

template culture_tradition_tooltip_establishing {
	container = {
		alwaystransparent = no
		datacontext = "[CultureReformation.GetNewTradition]"
		using = culture_tradition_tooltip

		blockoverride "main_description"
		{
			textbox = {
				name = "establishment_description"
				layoutpolicy_horizontal = expanding
				max_width = 400
				using = DefaultTooltipText
				multiline = yes
				text = "CULTURE_TRADITION_ESTABLISHING_PROGRESS_HEADER"
				fonttintcolor = "[TooltipInfo.GetTintColor]"
				alwaystransparent = no
			}

			textbox = {
				name = "effect_description"
				layoutpolicy_horizontal = expanding
				max_width = 400
				using = DefaultTooltipText
				multiline = yes
				text = "CULTURE_TRADITION_ESTABLISHING_TOOLTIP"
				fonttintcolor = "[TooltipInfo.GetTintColor]"
				alwaystransparent = no
				margin_bottom = 20
			}
		}
	}
}

container = {
	alwaystransparent = no
	name = "CultureTraditionTooltip"
	datacontext = "[GetPlayer.GetCulture]"
	using = culture_tradition_tooltip
}

template inspiration_tooltip {
	container = {
		alwaystransparent = no

		object_tooltip_pop_out = {
			blockoverride "title_text" {
				margin = { 0 8 }
				text = "[Inspiration.GetNameNoTooltip]"
				default_format = "#T"
			}

			blockoverride "description_text" {
				text = "INSPIRATION_GENERAL_TOOLTIP"
			}

			blockoverride "concept_link" {
				text = "[inspiration|E]"
			}
		}
	}
}

container = {
	alwaystransparent = no
	name = "InspirationTooltip"
	using = inspiration_tooltip
}

template court_type_tooltip {
	container = {
		alwaystransparent = no

		object_tooltip_pop_out = {
			blockoverride "title_text" {
				margin = { 0 8 }
				text = "[CourtType.GetNameNoTooltip]"
				default_format = "#T"
			}
			blockoverride "description_text" {
				text = "COURT_TYPE_GENERAL_TOOLTIP"
			}

			blockoverride "concept_link" {
				text = "[court_type|E]"
			}
		}
	}
}

container = {
	alwaystransparent = no
	name = "CourtTypeTooltip"
	using = court_type_tooltip
}

container = {
	alwaystransparent = no
	name = "CourtAmenitiesTooltip"
	court_amenity_setting_tooltip_contents = {}

}

types CourtAmenitiesTooltips {
	type court_amenity_setting_tooltip_contents = object_tooltip_pop_out {
		blockoverride "title_text" {
			margin = { 0 8 }
			text = "[CourtAmenitiesSetting.GetNameNoTooltip]"
		}

		blockoverride "header_additions" {
			hbox = {
				margin_right = 10
				margin_top = 8
				margin_left = -4

				icon = {
					size = { 52 52 }
					texture = "[CourtAmenitiesSetting.GetIcon]"
				}
			}
		}

		blockoverride "above_description_text" {
			text = "COURT_AMENITIES_COOLTIP_ABOVE_DESCRIPTION"
		}

		blockoverride "concept_link" {
			text = [court_amenities|E]
		}

		blockoverride "description_text" {
			text = "[CourtAmenitiesSetting.GetDescription|F]"
		}
	}
}

container = {
	alwaystransparent = no
	name = "ArtifactTooltip"
	artifact_tooltip = {}
}

types InventoryTooltips
{
	type artifact_tooltip = widget
	{
		using = GeneralTooltipSetup
		alwaystransparent = no

		widget = {
			name = "background"
			using = DefaultTooltipBackground
			size = { 100% 100% }
			alwaystransparent = no
		}

		vbox = {
			set_parent_size_to_minimum = yes
			margin = { 20 10 }
			margin_bottom = 16

			vbox = {
				layoutpolicy_horizontal = expanding
				layoutpolicy_vertical = expanding
				margin = { 6 4 }
				margin_bottom = 12

				background = {
					name = "header"
					texture = "gfx/interface/component_tiles/tile_title_big_top_01.dds"
					spriteType = Corneredstretched
					align = vcenter|left
					margin = { 15 0 }
					texture_density = 2

					modify_texture = {
						name = "mask"
						texture = "gfx/interface/component_masks/mask_title_big_top.dds"
						spriteType = Corneredstretched
						spriteborder = { 160 0 }
						blend_mode = alphamultiply
						alpha = 0.5
					}

					modify_texture = {
						name = "overlay"
						texture = "gfx/interface/component_overlay/overlay_title_big_top.dds"
						spriteType = Corneredstretched
						spriteborder = { 0 0 }
						blend_mode = overlay
					}
				}

				hbox = {
					layoutpolicy_horizontal = expanding

					vbox = {
						text_single = {
							layoutpolicy_horizontal = expanding
							name = "rarity"
							text = "[Artifact.GetRarityAndSlotType]"
							align = top
							using = Font_Size_Medium
						}

						text_single = {
							layoutpolicy_horizontal = expanding
							name = "title"
							text = "[Artifact.GetNameNoTooltip]"
							align = top
							using = Font_Size_Big
						}
					}

					expand = {}

					vbox = {
						layoutpolicy_vertical = expanding

						text_single = {
							name = "artifact_category"
							text = "[Artifact.GetCategory]"
							align = right
							fonttintcolor = "[TooltipInfo.GetTintColor]"
						}

						expand = {}
					}
				}
			}

			vbox = {
				layoutpolicy_horizontal = expanding
				layoutpolicy_vertical = expanding
				spacing = 10

				hbox = { #icon, durability and effects
					layoutpolicy_horizontal = expanding
					spacing = 10

					background = {
						layoutpolicy_horizontal = expanding
						using = Background_Area
						margin = { 15 5 }
						margin_top = 5
					}

					vbox = {
						layoutpolicy_vertical = expanding

						icon_artifact = {
							size = { 160 160 }
							blockoverride "tooltipwidget" {}
						}


						hbox_artifact_durability = {}

						expand = {}
					}

					vbox = {
						name = "main_text"
						layoutpolicy_horizontal = expanding
						layoutpolicy_vertical = expanding
						spacing = 5

						hbox = {
							name = "modifiers"
							layoutpolicy_horizontal = expanding

							text_multi = {
								visible = "[Artifact.CanBenefitPlayer]"
								max_width = 300
								autoresize = yes
								text = ARTIFACT_EFFECT
							}

							text_multi = {
								visible = "[Not( Artifact.CanBenefitPlayer )]"
								max_width = 300
								autoresize = yes
								text = ARTIFACT_EFFECT
								default_format = "#low"
								format_override = { P low }
								#format_override = { L X }
								format_override = { E low }
								#format_override = { S low }
							}

							expand = {}
						}

						hbox = {
							name = "fallback"
							layoutpolicy_horizontal = expanding

							visible = "[Not( Artifact.CanBenefitPlayer )]"

							text_multi = {
								max_width = 300
								autoresize = yes
								text = "ARTIFACT_FALLBACK_EFFECT"
							}
							expand = {}
						}
						expand = {}
					}

					expand = {}
				}

				vbox = {
					layoutpolicy_horizontal = expanding
					layoutpolicy_vertical = expanding
					spacing = 3

					hbox = {
						name = "current_holder"
						layoutpolicy_horizontal = expanding
						text_single = {
							name = "imminent_claim"
							visible = "[Artifact.HasImminentHouseClaim( Artifact.GetOwner.Self )]"
							text = "IMMINENT_HOUSE_CLAIMANT"
							max_width = 230
						}
						expand = {}
					}

					hbox = {
						layoutpolicy_horizontal = expanding
						text_single = {
							name = "owner"
							text = "ARTIFACT_CURRENT_HOLDER"
							max_width = 350
						}
						expand = {}
					}

					hbox = {
						name = "artifact_creator"
						visible = "[Artifact.HasCreator()]"
						layoutpolicy_horizontal = expanding

						text_single = {
							name = "creator"
							text = "ARTIFACT_CREATOR"
							max_width = 350
						}

						expand = {}
					}

					hbox = {
						datacontext = "[Artifact.GetAssociatedTitle]"
						visible = "[Title.IsValid]"
						layoutpolicy_horizontal = expanding

						coa_title_tiny_crown = {
							size = { 40 50 }
							blockoverride "coa_tooltip" {}
							blockoverride "coa_hover_glow_visible"
							{
								visible = no
							}
						}

						text_single = {
							name = "association"
							text = "ARTIFACT_TITLE_ASSOCIATION"
						}
						expand = {}
					}

					text_multi = {
						layoutpolicy_horizontal = expanding
						layoutpolicy_vertical = expanding
						max_width = 490
						margin_bottom = 4
						align = left
						autoresize = yes

						text = "[Artifact.GetDesc]"
						default_format = "#F"
					}

					expand = {}
				}
			} # vbox

			hbox = {
				layoutpolicy_horizontal = expanding
				block "extra_information"
				{
					text_multi = {
						visible = "[Not( Artifact.CanPlayerEquip )]"
						text = "[Artifact.GetCanPlayerEquipDesc]"
						max_width = 300
						autoresize = yes
					}
				}
				expand = {}
			}
		}
	} # type artifact_tooltip = widget
}

container = {
	alwaystransparent = no
	name = "CourtPositionTypeTooltip"
	court_position_type_tooltip = {}
}

types CourtPositionTooltips {
	# Tooltip when examining the court position type.
	type court_position_type_tooltip = object_tooltip_pop_out {

		blockoverride "title_text" {
			margin = { -6 8 }
			text = "[CourtPositionType.GetNameNoTooltip]"
		}

		blockoverride "concept_link" {
			text = [court_position|E]
		}

		blockoverride "header_additions"
		{
			header_icon = {
				blockoverride "header_texture"
				{
					texture = "[CourtPositionType.GetIcon]"
				}
			}
		}

		blockoverride "extra_data" {
			vbox = {
				layoutpolicy_vertical = expanding
				layoutpolicy_horizontal = expanding
				spacing = 10

				### Salary
				vbox = {
					layoutpolicy_vertical = expanding
					layoutpolicy_horizontal = expanding
					margin_top = -5

					text_single = {
						layoutpolicy_horizontal = expanding
						text = COURT_POSITION_TYPE_TOOLTIP_SALARY
					}
				}

				### Liege effects
				vbox = {
					layoutpolicy_vertical = expanding
					layoutpolicy_horizontal = expanding
					visible = "[CourtPositionType.HasLiegeModifiers]"
					spacing = 2

					### Liege Modifiers
					vbox = {
						name = "liege_modifiers"
						layoutpolicy_vertical = expanding
						layoutpolicy_horizontal = expanding
						margin_bottom = 10

						background = {
							layoutpolicy_horizontal = expanding
							using = Background_Area
							margin = { 15 0 }
							margin_top = 5
						}

						vbox = {
							layoutpolicy_vertical = expanding
							layoutpolicy_horizontal = expanding

							text_single = {
								layoutpolicy_horizontal = expanding
								default_format = "#S"
								text = COURT_POSITION_TOOLTIP_EFFECT_ON_LIEGE
							}

							vbox = {
								layoutpolicy_vertical = expanding
								layoutpolicy_horizontal = expanding
								margin = { 10 0 }

								textbox = {
									name = "liege_static_modifiers_description"
									using = DefaultTooltipText
									layoutpolicy_horizontal = expanding
									multiline = yes
									text = "[CourtPositionType.GetEmployerModifierDescription]"
									fonttintcolor = "[TooltipInfo.GetTintColor]"
									alwaystransparent = no
								}
							}
						}
					}

					### Liege Court Modifiers
					vbox = {
						name = "liege_court_modifiers"
						visible = "[CourtPositionType.HasLiegeCourtModifiers]"
						layoutpolicy_vertical = expanding
						layoutpolicy_horizontal = expanding
						margin_bottom = 10

						background = {
							layoutpolicy_horizontal = expanding
							using = Background_Area
							margin = { 15 0 }
							margin_top = 5
						}

						textbox = {
							name = "liege_court_modifiers_description"
							using = DefaultTooltipText
							layoutpolicy_horizontal = expanding
							multiline = yes
							text = "COURT_POSITION_TYPE_EMPLOYER_COURT_EFFECTS"
							fonttintcolor = "[TooltipInfo.GetTintColor]"
							alwaystransparent = no
						}
					}

					### Liege Requirements
					vbox = {
						name = "liege_requirements"
						layoutpolicy_vertical = expanding
						layoutpolicy_horizontal = expanding
						visible = "[CourtPositionType.HasLiegeRequirements]"

						text_single = {
							layoutpolicy_horizontal = expanding
							default_format = "#S"
							text = COURT_POSITION_TOOLTIP_LIEGE_REQUIREMENT
						}

						vbox = {
							layoutpolicy_vertical = expanding
							layoutpolicy_horizontal = expanding
							margin = { 10 0 }

							textbox = {
								name = "liege_requirements_description"
								using = DefaultTooltipText
								layoutpolicy_horizontal = expanding
								multiline = yes
								text = "[CourtPositionType.GetLiegeRequirementDescriptionText]"
								fonttintcolor = "[TooltipInfo.GetTintColor]"
								alwaystransparent = no
							}
						}
					}
				}

				### Revocation effects
				vbox = {
					layoutpolicy_vertical = expanding
					layoutpolicy_horizontal = expanding
					margin_bottom = 10

					background = {
						layoutpolicy_horizontal = expanding
						using = Background_Area
						margin = { 15 0 }
						margin_top = 5
					}

					text_single = {
						layoutpolicy_horizontal = expanding
						default_format = "#S"
						text = COURT_POSITION_TOOLTIP_REVOKE_EFFECT_HEADER
					}

					vbox = {
						layoutpolicy_vertical = expanding
						layoutpolicy_horizontal = expanding

						text_single = {
							layoutpolicy_horizontal = expanding
							text = COURT_POSITION_TYPE_TOOLTIP_REVOKE_COST
						}
					}
				}

				## Employee info
				vbox = {
					layoutpolicy_vertical = expanding
					layoutpolicy_horizontal = expanding
					spacing = 5
					margin_bottom = 10

					background = {
						layoutpolicy_horizontal = expanding
						using = Background_Area
						margin = { 15 0 }
						margin_top = 5
					}

					### Employee Modifiers
					vbox = {
						name = "employee_modifiers"
						visible = "[CourtPositionType.HasEmployeeModifiers]"
						layoutpolicy_vertical = expanding
						layoutpolicy_horizontal = expanding

						text_single = {
							text = COURT_POSITION_TYPE_TOOLTIP_EFFECT_ON_EMPLOYEE
							layoutpolicy_horizontal = expanding
							default_format = "#S"
						}

						vbox = {
							layoutpolicy_vertical = expanding
							layoutpolicy_horizontal = expanding
							margin = { 10 0 }

							textbox = {
								name = "employee_effects"
								using = DefaultTooltipText
								layoutpolicy_horizontal = expanding
								multiline = yes
								text = "[CourtPositionType.GetEmployeeModifierDescription]"
								fonttintcolor = "[TooltipInfo.GetTintColor]"
								alwaystransparent = no
							}
						}
					}

					### Employee Requirements
					vbox = {
						name = "employee_requirements"
						layoutpolicy_vertical = expanding
						layoutpolicy_horizontal = expanding
						visible = "[CourtPositionType.HasEmployeeRequirements]"
						spacing = 2

						text_single = {
							layoutpolicy_horizontal = expanding
							default_format = "#S"
							text = COURT_POSITION_TOOLTIP_EMPLOYEE_REQUIREMENT
						}

						vbox = {
							layoutpolicy_vertical = expanding
							layoutpolicy_horizontal = expanding

							textbox = {
								name = "employee_requirements_description"
								using = DefaultTooltipText
								layoutpolicy_horizontal = expanding
								multiline = yes
								text = "[CourtPositionType.GetEmployeeRequirementDescriptionText]"
								fonttintcolor = "[TooltipInfo.GetTintColor]"
								alwaystransparent = no
							}
						}
					}
				}

				hbox = {
					datamodel = "[CourtPositionType.GetTasks]"
					visible = "[Not( IsDataModelEmpty( CourtPositionType.GetTasks ) )]"
					layoutpolicy_horizontal = expanding
					spacing = 8
					margin_bottom = 4

					background = {
						layoutpolicy_horizontal = expanding
						using = Background_Area
						margin = { 15 0 }
						margin_top = 5
					}

					text_multi = {
						layoutpolicy_vertical = expanding
						layoutpolicy_horizontal = expanding

						margin = { 8 4 }
						margin_left = 0

						text = "COURT_POSITION_TASK_HINT"
						align = nobaseline
					}

					expand = {}

					item = {
						court_position_task_button = {
							blockoverride "button" {
								using = tooltip_nw
								tooltipwidget = {
									court_position_task_icon_tooltip_widget = {
										using = DefaultTooltipBackground
										using = GeneralTooltipSetup
										alwaystransparent = no

										blockoverride "header" {
											text = "COURT_POSITION_TASK_GENERIC_TT"
										}

										blockoverride "employer_modifier_description" {
											visible = "[Not( StringIsEmpty( CourtPositionTaskType.GetEmployerModifierGenericDescription ) )]"
											text = COURT_POSITION_TASK_EMPLOYER_GENERIC_EFFECTS
										}

										blockoverride "employer_court_modifier_description" {
											visible = "[CourtPositionTaskType.HasEmployerCourtModifiers]"
											text = COURT_POSITION_TASK_EMPLOYER_COURT_GENERIC_EFFECTS
										}

										blockoverride "on_start_description" {
											visible = "[Not( StringIsEmpty( CourtPositionTaskType.GetOnStartEffectGenericDesc() ) )]"
											text = COURT_POSITION_TASK_START_GENERIC_EFFECTS
										}

										blockoverride "on_end_description" {
											visible = "[Not( StringIsEmpty( CourtPositionTaskType.GetOnEndEffectGenericDesc() ) )]"
											text = COURT_POSITION_TASK_END_GENERIC_EFFECTS
										}

										blockoverride "cost_description" {
											text = COURT_POSITION_TASK_GENERIC_COST
										}
									}
								}
							}

							blockoverride "button_icon" {
								texture = "[CourtPositionTaskType.GetIcon]"
							}
						}
					}
				}
			}
		}

		blockoverride "description_text" {
			default_format = "#F"
			text = "[CourtPositionType.GetDescription]"
			max_width = 450
			margin_top = 5
			margin_bottom = -10
		}
	}

	type court_position_tooltip = object_tooltip_pop_out {

		blockoverride "title_text" {
			margin = { -6 8 }
			text = "[CourtPosition.GetNameNoTooltip]"
		}

		blockoverride "concept_link" {
			text = [court_position|E]
		}

		blockoverride "extra_data" {
			vbox = {
				layoutpolicy_vertical = expanding
				layoutpolicy_horizontal = expanding
				spacing = 10

				### Salary
				vbox = {
					layoutpolicy_vertical = expanding
					layoutpolicy_horizontal = expanding
					spacing = 2
					margin_top = -5

					text_single = {
						layoutpolicy_horizontal = expanding
						text = COURT_POSITION_TOOLTIP_SALARY
					}
				}

				### Liege effects
				vbox = {
					layoutpolicy_vertical = expanding
					layoutpolicy_horizontal = expanding
					visible = "[CourtPosition.GetPositionType.HasLiegeModifiers]"

					spacing = 2

					# Liege Modifiers
					vbox = {
						name = "liege_modifiers"
						layoutpolicy_vertical = expanding
						layoutpolicy_horizontal = expanding
						margin_bottom = 10

						background = {
							layoutpolicy_horizontal = expanding
							using = Background_Area
							margin = { 15 0 }
							margin_top = 5
						}

						text_single = {
							layoutpolicy_horizontal = expanding
							default_format = "#S"
							text = "[SelectLocalization(CourtPosition.GetEmployee.IsLocalPlayer, 'COURT_POSITION_TOOLTIP_EFFECT_ON_YOUR_LIEGE', 'COURT_POSITION_TOOLTIP_EFFECT_ON_YOU')]"
						}

						vbox = {
							layoutpolicy_vertical = expanding
							layoutpolicy_horizontal = expanding
							margin = { 10 0 }

							textbox = {
								name = "liege_modifiers_description"
								using = DefaultTooltipText
								layoutpolicy_horizontal = expanding
								multiline = yes
								text = "[CourtPosition.GetEmployerBonuses]"
								fonttintcolor = "[TooltipInfo.GetTintColor]"
								alwaystransparent = no
							}
						}
					}
				}

				### Revocation effects
				vbox = {
					layoutpolicy_vertical = expanding
					layoutpolicy_horizontal = expanding
					margin_bottom = 10

					visible = "[CourtPosition.GetEmployer.IsLocalPlayer]"

					background = {
						layoutpolicy_horizontal = expanding
						using = Background_Area
						margin = { 15 0 }
						margin_top = 5
					}

					text_single = {
						layoutpolicy_horizontal = expanding
						default_format = "#S"
						text = COURT_POSITION_TOOLTIP_REVOKE_EFFECT_HEADER
					}

					vbox = {
						layoutpolicy_vertical = expanding
						layoutpolicy_horizontal = expanding
						margin = { 10 0 }

						# Revoke cost
						text_single = {
							layoutpolicy_horizontal = expanding
							text = COURT_POSITION_TOOLTIP_REVOKE_COST
						}

						# Revoke effects
						vbox = {
							name = "revoke_effects"
							layoutpolicy_vertical = expanding
							layoutpolicy_horizontal = expanding

							textbox = {
								name = "revoke_effect_description"
								text = "[CourtPosition.GetOnRevokeDescription]"
								layoutpolicy_horizontal = expanding
								using = DefaultTooltipText
								multiline = yes
								fonttintcolor = "[TooltipInfo.GetTintColor]"
								alwaystransparent = no
							}
						}
					}
				}

				### Employee effects
				vbox = {
					layoutpolicy_vertical = expanding
					layoutpolicy_horizontal = expanding
					spacing = 2
					margin_bottom = 10

					background = {
						layoutpolicy_horizontal = expanding
						using = Background_Area
						margin = { 15 0 }
						margin_top = 5
					}

					# Employee Modifiers
					vbox = {
						name = "employee_modifiers"
						layoutpolicy_vertical = expanding
						layoutpolicy_horizontal = expanding
						visible = "[CourtPosition.GetPositionType.HasEmployeeModifiers]"

						text_single = {
							layoutpolicy_horizontal = expanding
							default_format = "#S"

							text = "[SelectLocalization(CourtPosition.GetEmployee.IsLocalPlayer, 'COURT_POSITION_TOOLTIP_EFFECT_ON_YOU', 'COURT_POSITION_TOOLTIP_EFFECT_ON_EMPLOYEE')]"
						}

						vbox = {
							layoutpolicy_vertical = expanding
							layoutpolicy_horizontal = expanding
							margin = { 10 0 }

							textbox = {
								name = "employee_effects"
								using = DefaultTooltipText
								layoutpolicy_horizontal = expanding
								multiline = yes
								text = "[CourtPosition.GetEmployeeBonuses]"
								fonttintcolor = "[TooltipInfo.GetTintColor]"
								alwaystransparent = no
							}
						}
					}
				}
			}
		}

		blockoverride "description_text" {
			default_format = "#F"
			text = "[CourtPosition.GetDesc]"
			max_width = 450
			margin_top = 5
			margin_bottom = -10
		}
	}
}

container = {
	name = "SchemeTypeTooltip"
	alwaystransparent = no

	object_tooltip_pop_out = {
		blockoverride "title_text" {
			margin = { 0 8 }
			text = "[SchemeType.GetTypeNameNoTooltip]"
		}

		blockoverride "description_text" {
			text = "[SchemeType.GetDetailedDescription]"
		}

		blockoverride "concept_link" {
			text = "[SelectLocalization(SchemeType.IsHostile, hostile_scheme, personal_scheme)|E]"
		}

		blockoverride "header_additions" {
			hbox = {
				margin_right = 10
				margin_top = 8
				margin_left = -4

				icon = {
					size = { 52 52 }
					texture = "[SchemeType.GetIcon]"
					framesize = { 160 160 }
					tintcolor = "[TooltipInfo.GetTintColor]"
				}
			}
		}
	}
}

template nickname_tooltip {
	container = {
		alwaystransparent = no

		object_tooltip_pop_out = {
			blockoverride "title_text" {
				margin = { 0 8 }
				text = "[Character.GetNicknameNoTooltip()|U]"
				default_format = "#T"
			}

			blockoverride "description_text" {
				text = "[Nickname.GetDescription( Character.Self )]"
			}

			blockoverride "concept_link" {
				text = "[nickname|E]"
			}
		}
	}
}

container = {
	alwaystransparent = no
	name = "NicknameTooltip"
	using = nickname_tooltip
}

types StruggleTooltipTypes {

	type struggle_catalyst_history = vbox {
		name = "catalyst_history"
		layoutpolicy_horizontal = expanding
		margin_top = 10
		spacing = 10

		background = {
			using = Background_Area
			margin_left = 16
			margin_right = 16
			margin_bottom = 16
		}

		text_single = {
			layoutpolicy_horizontal = expanding
			text = "STRUGGLE_TOOLTIP_CATALYST_HISTORY_HEADER"
		}

		vbox = {
			layoutpolicy_horizontal = expanding
			block "catalyst_datamodel"
			{
				datamodel = "[Struggle.GetLatestCatalystHistory]"
			}
			spacing = 3

			item = {
				hbox = {
					layoutpolicy_horizontal = expanding
					spacing = 20
					margin_bottom = 5

					icon = {
						size = { 50 20 }

						background = {
							visible = "[ObjectsEqual( Struggle.GetCurrentLeadingPhase, CatalystHistory.GetStrugglePhase )]"
							using = Background_Frame
							using = Color_Green
							alpha = 0.3
							margin_left = 4
							margin_right = 16
							margin_top = 1
							margin_bottom = 3
						}

						background = {
							visible = "[ObjectsEqual( Struggle.GetCurrentLeadingPhase, CatalystHistory.GetStrugglePhase )]"
							using = Background_Area_Dark
							using = Color_Green
							alpha = 0.1
							margin_left = 4
							margin_right = 16
							margin_top = 1
							margin_bottom = 3
						}

						background = {
							visible = "[Not( ObjectsEqual( Struggle.GetCurrentLeadingPhase, CatalystHistory.GetStrugglePhase ) )]"
							using = Background_Frame
							using = Color_Grey
							alpha = 0.5
							margin_left = 4
							margin_right = 16
							margin_top = 1
							margin_bottom = 3
						}

						background = {
							visible = "[Not( ObjectsEqual( Struggle.GetCurrentLeadingPhase, CatalystHistory.GetStrugglePhase ) )]"
							using = Background_Area_Light
							alpha = 0.4
							margin_left = 4
							margin_right = 16
							margin_top = 1
							margin_bottom = 3
						}

						hbox = {
							icon = {
								size = { 25 25 }
								texture = "[CatalystHistory.GetStrugglePhase.GetIcon]"
							}

							spacer = {
								size { 10 0 }
							}

							text_single = {
								text = "[CatalystHistory.GetProgress|+=]"
								align = nobaseline
								margin_bottom = 5
							}
						}
					}

					text_single = {
						text = STRUGGLE_TOOLTIP_CATALYST_HISTORY_ENTRY
						align = top
					}

					expand = {}
				}
			}
		}
	}

	type StrugglePhaseEffectWar = vbox {
		container = {
			name = "war_effect"

			tooltipwidget = phase_effect_tooltip_war

			icon = {
				parentanchor = center
				size = { 55 55 }
				texture = "gfx/interface/icons/struggle_banners/icon_background_01.dds"
			}

			icon = {
				parentanchor = center
				size = { 40 40 }
				texture = "gfx/interface/icons/struggle_effects/war.dds"
			}
		}

		text_single = {
			layoutpolicy_horizontal = expanding
			align = center
			text = "STRUGGLE_EFFECT_LABEL_WAR"
		}
	}

	type StrugglePhaseEffectCulture = vbox {
		container = {
			name = "culture_effect"

			tooltipwidget = phase_effect_tooltip_culture

			icon = {
				parentanchor = center
				size = { 55 55 }
				texture = "gfx/interface/icons/struggle_banners/icon_background_01.dds"
			}

			icon = {
				parentanchor = center
				size = { 40 40 }
				texture = "gfx/interface/icons/struggle_effects/culture.dds"
			}
		}

		text_single = {
			layoutpolicy_horizontal = expanding
			align = center
			text = "STRUGGLE_EFFECT_LABEL_CULTURE"
		}
	}

	type StrugglePhaseEffectFaith = vbox {
		container = {
			name = "faith_effect"

			tooltipwidget = phase_effect_tooltip_faith

			icon = {
				parentanchor = center
				size = { 55 55 }
				texture = "gfx/interface/icons/struggle_banners/icon_background_01.dds"
			}

			icon = {
				parentanchor = center
				size = { 40 40 }
				texture = "gfx/interface/icons/struggle_effects/faith.dds"
			}
		}

		text_single = {
			layoutpolicy_horizontal = expanding
			align = center
			text = "STRUGGLE_EFFECT_LABEL_FAITH"
		}
	}

	type StrugglePhaseEffectOther = vbox {
		container = {
			name = "other_effect"

			tooltipwidget = phase_effect_tooltip_other

			icon = {
				parentanchor = center
				size = { 55 55 }
				texture = "gfx/interface/icons/struggle_banners/icon_background_01.dds"
			}

			icon = {
				parentanchor = center
				size = { 40 40 }
				texture = "gfx/interface/icons/struggle_effects/other.dds"
			}
		}

		text_single = {
			layoutpolicy_horizontal = expanding
			align = center
			text = "STRUGGLE_EFFECT_LABEL_OTHER"
		}
	}
}

template phase_effect_tooltip_war {
	object_tooltip_pop_out = {
		blockoverride "header_additions"
		{
			hbox = {
				margin_right = 10
				margin_top = 8
				margin_left = -4

				container = {
					icon = {
						parentanchor = center
						size = { 55 55 }
						texture = "gfx/interface/icons/struggle_banners/icon_background_01.dds"
					}

					icon = {
						parentanchor = center
						size = { 40 40 }
						texture = "gfx/interface/icons/struggle_effects/war.dds"
					}
				}
			}
		}

		blockoverride "title_text" {
			margin = { 0 8 }
			text = "STRUGGLE_PHASE_EFFECTS_WAR_TT_HEADER"
			default_format = "#T"
		}

		blockoverride "concept_link" {}

		blockoverride "main_description" {
			vbox = {

				textbox = {
					layoutpolicy_horizontal = expanding
					text = "[Struggle.GetWarEffect(StrugglePhase.Self, Character.Self)]"
					using = StruggleEffectTooltipText
					multiline = yes
					fonttintcolor = "[TooltipInfo.GetTintColor]"
					alwaystransparent = no
				}
			}
		}
	}
}

template phase_effect_tooltip_culture {
	object_tooltip_pop_out = {
		blockoverride "header_additions"
		{
			hbox = {
				margin_right = 10
				margin_top = 8
				margin_left = -4

				container = {
					icon = {
						parentanchor = center
						size = { 55 55 }
						texture = "gfx/interface/icons/struggle_banners/icon_background_01.dds"
					}

					icon = {
						parentanchor = center
						size = { 40 40 }
						texture = "gfx/interface/icons/struggle_effects/culture.dds"
					}
				}
			}
		}

		blockoverride "title_text" {
			margin = { 0 8 }
			text = "STRUGGLE_PHASE_EFFECTS_CULTURE_TT_HEADER"
			default_format = "#T"
		}

		blockoverride "concept_link" {}

		blockoverride "main_description" {
			vbox = {

				textbox = {
					layoutpolicy_horizontal = expanding
					text = "[Struggle.GetCultureEffect(StrugglePhase.Self, Character.Self)]"
					using = StruggleEffectTooltipText
					multiline = yes
					fonttintcolor = "[TooltipInfo.GetTintColor]"
					alwaystransparent = no
				}
			}
		}
	}
}

template phase_effect_tooltip_faith {
	object_tooltip_pop_out = {
		blockoverride "header_additions"
		{
			hbox = {
				margin_right = 10
				margin_top = 8
				margin_left = -4

				container = {
					icon = {
						parentanchor = center
						size = { 55 55 }
						texture = "gfx/interface/icons/struggle_banners/icon_background_01.dds"
					}

					icon = {
						parentanchor = center
						size = { 40 40 }
						texture = "gfx/interface/icons/struggle_effects/faith.dds"
					}
				}
			}
		}

		blockoverride "title_text" {
			margin = { 0 8 }
			text = "STRUGGLE_PHASE_EFFECTS_FAITH_TT_HEADER"
			default_format = "#T"
		}

		blockoverride "concept_link" {}

		blockoverride "main_description" {
			vbox = {

				textbox = {
					layoutpolicy_horizontal = expanding
					text = "[Struggle.GetFaithEffect(StrugglePhase.Self, Character.Self)]"
					using = StruggleEffectTooltipText
					multiline = yes
					fonttintcolor = "[TooltipInfo.GetTintColor]"
					alwaystransparent = no
				}
			}
		}
	}
}

template phase_effect_tooltip_other {
	object_tooltip_pop_out = {
		blockoverride "header_additions"
		{
			hbox = {
				margin_right = 10
				margin_top = 8
				margin_left = -4

				container = {
					icon = {
						parentanchor = center
						size = { 55 55 }
						texture = "gfx/interface/icons/struggle_banners/icon_background_01.dds"
					}

					icon = {
						parentanchor = center
						size = { 40 40 }
						texture = "gfx/interface/icons/struggle_effects/other.dds"
					}
				}
			}
		}

		blockoverride "title_text" {
			margin = { 0 8 }
			text = "STRUGGLE_PHASE_EFFECTS_OTHER_TT_HEADER"
			default_format = "#T"
		}

		blockoverride "concept_link" {}

		blockoverride "main_description" {
			vbox = {

				textbox = {
					layoutpolicy_horizontal = expanding
					text = "[Struggle.GetOtherEffect(StrugglePhase.Self, Character.Self)]"
					using = StruggleEffectTooltipText
					multiline = yes
					fonttintcolor = "[TooltipInfo.GetTintColor]"
					alwaystransparent = no
				}
			}
		}
	}
}

template phase_effect {
	vbox = {
		layoutpolicy_horizontal = expanding
		spacing = 12
		margin_bottom = 15

		background = {
			using = Background_Area_With_Header
			margin_left = 16
			margin_right = 16
		}

		text_single = {
			max_width = 400
			margin = { 0 5 }
			text = "STRUGGLE_TOOLTIP_EFFECTS_HEADER"
		}

		hbox = {
			name = "phase_effects"
			layoutpolicy_vertical = expanding
			spacing = 15

			StrugglePhaseEffectWar = {}

			StrugglePhaseEffectCulture = {}

			StrugglePhaseEffectFaith = {}

			StrugglePhaseEffectOther = {}
		}
	}
}

template struggle_tooltip {
	container = {
		alwaystransparent = no
		block "datacontext" {}

		object_tooltip_pop_out = {
			blockoverride "header_additions"
			{
				hbox = {
					margin_right = 10
					margin_top = 8
					margin_left = -4

					icon = {
						size = { 52 52 }
						texture = "[Struggle.GetCurrentPhase.GetIcon]"
					}
				}
			}

			blockoverride "title_text" {
				margin = { 0 5 }
				text = "[Struggle.GetNameNoTooltip]"
				default_format = "#T"
			}

			blockoverride "main_description" {

				vbox = {
					name = "current_phase_information"
					datacontext = "[Struggle.GetCurrentPhase]"
					layoutpolicy_horizontal = expanding

					textbox = {
						name = "main_description"
						layoutpolicy_horizontal = expanding
						max_width = 400
						margin = { 0 5 }
						using = DefaultTooltipText
						multiline = yes
						text = "STRUGGLE_TOOLTIP_INVOLVEMENT"
						fonttintcolor = "[TooltipInfo.GetTintColor]"
						alwaystransparent = no
					}

					textbox = {
						layoutpolicy_horizontal = expanding
						max_width = 400
						margin = { 0 5 }

						using = DefaultTooltipText
						multiline = yes
						fonttintcolor = "[TooltipInfo.GetTintColor]"
						alwaystransparent = no

						text = "STRUGGLE_TOOLTIP_CURRENT_PHASE"
					}

					spacer = {
						size = { 0 10 }
					}

					vbox = {
						layoutpolicy_horizontal = expanding
						using = phase_effect
					}
				}

				spacer = {
					size = { 0 15 }
				}

				vbox = { # Next Phases Progress
					name = "next_phases_progress"
					visible = "[Not( Struggle.IsInTransitionPhase )]"
					layoutpolicy_horizontal = expanding
					spacing = 10

					text_single = {
						layoutpolicy_horizontal = expanding
						using = DefaultTooltipText
						text = STRUGGLE_NEXT_PHASE_PROGRESS_LABEL
					}

					vbox = {
						datamodel = "[Struggle.GetNextPhasesSorted]"
						layoutpolicy_horizontal = expanding
						spacing = 10

						item = {
							hbox = {
								layoutpolicy_horizontal = expanding

								background = {
									using = Background_Area
									margin = { 16 5 }
								}

								text_single = {
									margin_right = 20
									align = top
									text = "STRUGGLE_TT_PHASE_PROGRESS"

									tooltipwidget = {
										struggle_phase_tooltip = {}
									}
								}

								expand = {}

								# TODO [CF] progress bar color should depend on leading struggle phase
								progressbar_standard = {
									size = { 120 18 }
									value = "[CurrentAndMaxToProgressbarValueInt32(Struggle.GetPhaseValue(StrugglePhase.Self), Struggle.GetPhaseDurationValue)]"
									progresstexture = "gfx/interface/progressbars/progress_orange.dds"
								}
							}
						}
					}
				}

				vbox = { # Next Phase Transition
					name = "next_phase_transition"
					visible = "[Struggle.IsInTransitionPhase]"
					datacontext = "[Struggle.GetNextPhase]"

					layoutpolicy_horizontal = expanding
					spacing = 5

					text_single = {
						layoutpolicy_horizontal = expanding
						using = DefaultTooltipText
						text = STRUGGLE_NEXT_PHASE_PROGRESS_LABEL
					}

					hbox = {
						layoutpolicy_horizontal = expanding

						background = {
							using = Background_Area
							margin = { 16 5 }
						}

						text_single = {
							margin_right = 20
							align = top
							using = DefaultTooltipText
							text = STRUGGLE_TT_PHASE_TRANSITION
						}

						expand = {}

						progressbar_standard = {
							size = { 120 18 }
							value = "[CurrentAndMaxToProgressbarValueInt32(Struggle.GetPhaseValue(StrugglePhase.Self), Struggle.GetPhaseDurationValue)]"
							progresstexture = "gfx/interface/progressbars/progress_orange.dds"
						}
					}

					spacer = {
						size { 0 2 }
					}

					hbox = {
						layoutpolicy_horizontal = expanding

						icon = {
							size = { 30 30 }
							texture = "gfx/interface/icons/icon_time.dds"
						}

						text_single = {
							align = top
							using = DefaultTooltipText
							text = STRUGGLE_TT_PHASE_TRANSITION_TIME_TO
						}

						expand = {}
					}
				}

				spacer = {
					size = { 0 15 }
				}

				struggle_catalyst_history = {}
			}

			blockoverride "concept_link" {}
		}
	}
}


template struggle_tooltip_light {
	container = {
		alwaystransparent = no
		block "datacontext" {}

		object_tooltip_pop_out = {
			blockoverride "header_additions"
			{
				hbox = {
					margin_right = 10
					margin_top = 8
					margin_left = -4

					icon = {
						size = { 52 52 }
						texture = "[Struggle.GetCurrentPhase.GetIcon]"
					}
				}
			}

			blockoverride "title_text" {
				margin = { 0 5 }
				text = "[Struggle.GetCurrentPhase.GetNameNoTooltip]"
				default_format = "#T"
			}

			blockoverride "main_description" {

				vbox = {
					name = "current_phase_information"
					datacontext = "[Struggle.GetCurrentPhase]"
					layoutpolicy_horizontal = expanding

					textbox = {
						name = "main_description"
						layoutpolicy_horizontal = expanding
						max_width = 400
						margin = { 0 5 }
						using = DefaultTooltipText
						multiline = yes
						text = "[Struggle.GetPhaseDescription(StrugglePhase.Self)]"
						fonttintcolor = "[TooltipInfo.GetTintColor]"
						alwaystransparent = no
					}

					spacer = {
						size = { 0 10 }
					}

					vbox = {
						layoutpolicy_horizontal = expanding
						using = phase_effect
					}
				}

				spacer = {
					size = { 0 15 }
				}

				struggle_catalyst_history = {}
			}

			blockoverride "concept_link" {}
		}
	}
}


container = {
	name = "StruggleTooltip"
	alwaystransparent = no
	datacontext = "[GetPlayer]"
	using = struggle_tooltip
}

types StrugglePhaseTypes
{
	type struggle_phase_tooltip = object_tooltip_pop_out {
		blockoverride "header_additions"
		{
			hbox = {
				margin_right = 10
				margin_top = 8
				margin_left = -4

				icon = {
					size = { 52 52 }
					texture = "[StrugglePhase.GetIcon]"
				}
			}
		}

		blockoverride "title_text" {
			margin = { 0 8 }
			text = "[StrugglePhase.GetNameNoTooltip]"
			default_format = "#T"
		}

		blockoverride "main_description" {
			textbox = {
				name = "main_description"
				layoutpolicy_horizontal = expanding
				max_width = 400
				margin_top = 5
				using = DefaultTooltipText
				multiline = yes
				text = STRUGGLE_PHASE_DESCRIPTION
				fonttintcolor = "[TooltipInfo.GetTintColor]"
				alwaystransparent = no
			}

			vbox = {
				layoutpolicy_horizontal = expanding

				visible = "[StrugglePhase.IsContentVisible( GetDefine( 'NStruggle', 'ENDING_PHASE_WIDGET_CONTENT' ) )]"

				hbox = {
					layoutpolicy_horizontal = expanding
					spacing = 5
					margin = { 5 5 }
					
					background = {
						using = Background_Area_Light
						tintcolor = { 0.8 0.5 0.5 2.0 }
						margin = { -2 -2 }
					}

					background = {
						using = Background_Frame
						tintcolor = { 0.8 0.5 0.5 2.0 }
					}

					icon = {
						size = { 30 30 }
						texture = "gfx/interface/icons/struggle_types/ending_phase_icon.dds"
					}

					text_multi = {
						layoutpolicy_horizontal = expanding
						max_width = 330
						margin_top = 5
						margin_bottom = 15
						using = DefaultTooltipText
						text = STRUGGLE_ENDING_PHASE_WARNING_MESSAGE
						fonttintcolor = "[TooltipInfo.GetTintColor]"
						alwaystransparent = no
					}
				}

				vbox = {
					visible = "[Not( StringIsEmpty( Struggle.GetEndingPhaseEffectDesc( StrugglePhase.Self, Character.Self ) ) )]"
					layoutpolicy_horizontal = expanding

					background = {
						using = Background_Area
						margin = { 16 4 }
					}

					hbox = {
						layoutpolicy_horizontal = expanding
						margin = { 0 10}

						background = {
							using = Background_Area
							margin = { 16 0 }
						}

						text_single = {
						text = STRUGGLE_ENDING_PHASE_EFFECTS_TITLE
						max_width = 400
						fonttintcolor = "[TooltipInfo.GetTintColor]"
						alwaystransparent = no
						}
					}

					text_multi = {
						layoutpolicy_horizontal = expanding
						max_width = 400
						margin_top = 5
						margin_bottom = 15
						using = DefaultTooltipText
						text = "[Struggle.GetEndingPhaseEffectDesc( StrugglePhase.Self, Character.Self )]"
						fonttintcolor = "[TooltipInfo.GetTintColor]"
						alwaystransparent = no
					}			
				}
			}

			vbox = {
				visible = "[Not( StrugglePhase.IsContentVisible( GetDefine( 'NStruggle', 'ENDING_PHASE_WIDGET_CONTENT' ) ) )]"
				layoutpolicy_horizontal = expanding
				using = phase_effect
			}

			vbox = {
				name = "leading_next_phase"
				layoutpolicy_horizontal = expanding

				margin = { 0 10 }

				text_single = {
					layoutpolicy_horizontal = expanding

					text = STRUGGLE_PHASE_TOOLTIP_TOTAL_PROGRESS
					align = left
				}

				spacer = { size = { 0 10 } }

				struggle_catalyst_history = {
					blockoverride "catalyst_datamodel" {
						datamodel = "[Struggle.GetCatalystHistoryForPhase( StrugglePhase.Self )]"
					}
				}
			}

			vbox = {
				layoutpolicy_horizontal = expanding
				visible = "[DataModelHasItems( StrugglePhase.GetEndingDecisions )]"

				text_label_left  = {
					layoutpolicy_horizontal = expanding
					text = "STRUGGLE_STAGE_DECISIONS_TITLE"
				}

				vbox = {
					layoutpolicy_horizontal = expanding
					datamodel = "[StrugglePhase.GetEndingDecisions]"
					margin_bottom = 10

					item = {
						hbox = {
							layoutpolicy_horizontal = expanding
							datacontext = "[DeferredDecision.GetDecision]"

							text_single = {
								visible = "[Decision.IsValid]"
								text = "DECISION_TOOLTIP_TITLE"
								align = nobaseline
								layoutpolicy_horizontal = expanding
							}
						}
					}
				}
			}
		}

		blockoverride "concept_link" {}
	}
}

container = {
	name = "StrugglePhaseTooltip"
	alwaystransparent = no
	datacontext = "[GetPlayer]"
	datacontext = "[StrugglePhase.GetStruggle]"
	struggle_phase_tooltip = {}
}

template house_unity_stage_tooltip {
	object_tooltip_pop_out = {
		blockoverride "header_additions"
		{
			hbox = {
				margin_right = 10
				margin_top = 8
				margin_left = -4

				icon = {
					size = { 52 52 }
					texture = "[HouseUnityStage.GetIcon]"
				}
			}
		}

		blockoverride "title_text" {
			margin = { 0 8 }
			text = "[HouseUnityStage.GetNameNoTooltip]"
			default_format = "#T"
		}

		blockoverride "main_description" {
			textbox = {
				name = "main_description"
				layoutpolicy_horizontal = expanding
				max_width = 400
				margin_top = 5
				using = DefaultTooltipText
				multiline = yes
				text = "[HouseUnityStage.GetDescription]"
				fonttintcolor = "[TooltipInfo.GetTintColor]"
				alwaystransparent = no
			}
		}

		blockoverride "concept_link" {
			text = "[house_unity_level|E]"
		}
	}
}

container = {
	name = "HouseUnityStageTooltip"
	alwaystransparent = no
	datacontext = "[GetPlayer]"
	using = house_unity_stage_tooltip
}

types DecisionTypes
{
	type decision_tooltip = object_tooltip_pop_out {
		blockoverride "header_additions" {}

		blockoverride "title_text" {
			margin = { 0 8 }
			text = "[Decision.GetTitleForPlayer]"
			default_format = "#T"
		}

		blockoverride "main_description" {
			text_multi = {
				visible = "[Not(StringIsEmpty(Decision.GetCommandDescForPlayer))]"
				layoutpolicy_horizontal = expanding
				max_width = 400
				margin_top = 5
				margin_bottom = 15
				using = DefaultTooltipText
				text = "[Decision.GetCommandDescForPlayer]"
				fonttintcolor = "[TooltipInfo.GetTintColor]"
				alwaystransparent = no
			}

			text_multi = {
				layoutpolicy_horizontal = expanding
				max_width = 400
				margin_top = 5
				margin_bottom = 15
				using = DefaultTooltipText
				text = "[Decision.GetShortDescForPlayer]"
				fonttintcolor = "[TooltipInfo.GetTintColor]"
				alwaystransparent = no
			}

			block "custom_decision_data" {}

			textbox = {
				layoutpolicy_horizontal = expanding
				max_width = 400
				margin_top = 5
				margin_bottom = 15
				using = DefaultTooltipText
				multiline = yes
				text = "CLICK_TO_SELECT"
				fonttintcolor = "[TooltipInfo.GetTintColor]"
				alwaystransparent = no
			}
		}

		blockoverride "concept_link" {}
	}
}

container = {
	name = "DecisionTooltip"
	alwaystransparent = no
	datacontext = "[GetPlayer]"
	decision_tooltip = {}
}

template activity_tooltip {
	container = {
		alwaystransparent = no
		datacontext = "[Activity.GetType]"

		object_tooltip_pop_out = {
			blockoverride "title_text" {
				margin = { 0 8 }
				raw_text = "[Activity.GetNameNoTooltip|U]"
				default_format = "#T"
			}

			blockoverride "subtitle_text" {
				text = "[Activity.GetType.GetName]"
				default_format = "#weak"
			}

			blockoverride "description_text" {
				text = "[Activity.GetInvolvementText( GetPlayer.Self, 'tooltip' )]"
			}

			blockoverride "concept_link" {
				text = "ACTIVITY_TYPE_CONCEPT_SELECTOR"
			}

			blockoverride "header_additions" {
				hbox = {
					margin_right = 10
					margin_top = 8
					margin_left = -4

					icon = {
						size = { 52 52 }
						texture = "[ActivityType.GetIcon]"
						framesize = { 160 160 }
						tintcolor = "[TooltipInfo.GetTintColor]"
					}
				}
			}
		}
	}
}

container = {
	alwaystransparent = no
	name = "ActivityTooltip"
	using = activity_tooltip
}

template activity_type_tooltip {
	container = {
		alwaystransparent = no

		object_tooltip_pop_out = {
			blockoverride "title_text" {
				margin = { 0 8 }
				raw_text = "[ActivityType.GetNameNoTooltip]"
				default_format = "#T"
			}

			blockoverride "description_text" {
				text = "[ActivityType.GetDescription]"
			}

			blockoverride "concept_link" {
				text = "ACTIVITY_TYPE_CONCEPT_SELECTOR"
			}
		}
	}
}

container = {
	alwaystransparent = no
	name = "ActivityTypeTooltip"
	using = activity_type_tooltip
}

template activity_locale_tooltip {
	container = {
		alwaystransparent = no
		
		object_tooltip_pop_out = {
			blockoverride "title_text" {
				margin = { 0 8 }
				raw_text = "[ActivityLocale.GetName]"
				default_format = "#T"
			}

			blockoverride "description_text" {
				text = "[ActivityLocaleWindow.EnterLocaleTooltip( ActivityLocale.Self )]"
			}

			blockoverride "concept_link" {
				text = ""
			}
		}
	}
}

container = {
	alwaystransparent = no
	name = "ActivityLocaleTooltip"
	using = activity_locale_tooltip
}

template travel_option_tooltip {
	container = {
		alwaystransparent = no

		object_tooltip_pop_out = {

			blockoverride "concept_link" {}

			blockoverride "title_text" {
				margin = { 0 8 }
				text = "[TravelOption.GetNameNoTooltip]"
				default_format = "#T"
			}

			blockoverride "description_text" {
				text = "[TravelOption.GetTooltipWithBlocker(TravelPlanData.Self)]"
			}

			blockoverride "extra_data_after_description" {
				textbox = {
					name = "effects"
					layoutpolicy_horizontal = expanding
					max_width = 400
					margin_top = 10
					using = DefaultTooltipText
					multiline = yes
					text = "[TravelOption.GetDesc]"
					fonttintcolor = "[TooltipInfo.GetTintColor]"
					alwaystransparent = no
				}
			}

			blockoverride "input_info_text"
			{
				visible = "[IsGameViewOpen('travel_option_selection_window')]"
				text_single = {
					name = "click_add"
					visible = "[And(Not(TravelOptionSelectionWindow.HasOptionSelected(TravelOption.Self)), TravelOptionSelectionWindow.CanSelect(TravelOption.Self)))]"
					text = "TRAVEL_OPTION_TT_CLICK_TO_ADD"
					default_format = "#I"
				}

				text_single = {
					name = "click_remove"
					visible = "[TravelOptionSelectionWindow.HasOptionSelected(TravelOption.Self)]"
					text = "TRAVEL_OPTION_TT_CLICK_TO_REMOVE"
					default_format = "#I"
				}
			}
		}
	}
}

container = {
	alwaystransparent = no
	name = "TravelOptionTooltip"
	using = travel_option_tooltip
	datacontext = "[GetPlayer.GetTravelPlan.GetData]"
}

template vassal_stance_tooltip
{
	container = {
		alwaystransparent = no

		object_tooltip_pop_out = {
			blockoverride "title_text" {
				margin = { 0 8 }
				raw_text = "[VassalStance.GetTextIconNoFormat][VassalStance.GetNameNoTooltip]"
				default_format = "#T"
			}

			blockoverride "description_text" {
				text = "[VassalStance.GetDescription]"
			}

			blockoverride "concept_link" {
				text = "[vassal_stance|E]"
			}
		}
	}
}

container = {
	name = "VassalStanceTooltip"
	alwaystransparent = no
	using = vassal_stance_tooltip
}

template ai_personality_tooltip
{
	container = {
		alwaystransparent = no

		object_tooltip_pop_out = {
			blockoverride "title_text" {
				margin = { 0 8 }
				text = "[Character.GetAIPersonalityNoTooltip]"
				default_format = "#T"
			}

			blockoverride "description_text" {
				text = "[Character.GetAIPersonalityExplanation]"
			}

			blockoverride "concept_link" {
				text = "[personality|E]"
			}
		}
	}
}

container = {
	name = "AiPersonalityTooltip"
	alwaystransparent = no
	using = ai_personality_tooltip
}

template travel_plan_tooltip {
	container = {
		alwaystransparent = no

		object_tooltip_pop_out = {
			blockoverride "title_text" {
				margin = { 0 8 }
				raw_text = "[TravelPlan.GetNameNoTooltip]"
				default_format = "#T"
			}

			blockoverride "description_text" {
				text = "TRAVEL_PLAN_TOOLTIP_DESC"
			}

			blockoverride "concept_link" {
				text = "[travel|E]"
			}
		}
	}
}

container = {
	alwaystransparent = no
	name = "TravelPlanTooltip"
	using = travel_plan_tooltip
}

template accolade_tooltip {
	container = {
		alwaystransparent = no

		object_tooltip_pop_out = {
			blockoverride "title_text" {
				margin = { 0 8 }
				text = "[Accolade.GetNameNoTooltip]"
				default_format = "#T"
			}

			blockoverride "subtitle_text" {
				text = "ACCOLADE_GLORY_AND_LEVEL"
			}

			blockoverride "main_description" {
				vbox = {
					hbox = {
						layoutpolicy_horizontal = expanding

						text_single = {
							text = "ACCOLADE_PRIMARY_TYPE_NAME"
							align = left
						}

						expand = {}
					}

					hbox = {
						layoutpolicy_horizontal = expanding

						text_single = {
							text = "ACCOLADE_SECONDARY_TYPE_NAME"
							align = left
						}

						expand = {}
					}

					hbox = {
						layoutpolicy_horizontal = expanding

						text_single = {
							text = "ACCOLADE_ACCLAIMED_KNIGHT_NAME"
							align = left
						}

						expand = {}
					}

					hbox = {
						layoutpolicy_horizontal = expanding
						visible = "[Accolade.GetSuccessor.IsValid]"

						text_single = {
							text = "ACCOLADE_SUCCESSOR_NAME"
							align = left
						}

						expand = {}
					}

					hbox = {
						margin_top = 20
						layoutpolicy_horizontal = expanding
						layoutpolicy_vertical = expanding
						visible = "[Accolade.HasActiveEffects]"

						text_multi = {
							text = "[Accolade.BuildActiveRankEffects]"
							autoresize = yes
							max_width = 500
						}

						expand = {}
					}
				}
			}

			blockoverride "concept_link" {
				text = "[accolade|E]"
			}
		}
	}
}

container = {
	alwaystransparent = no
	name = "AccoladeTooltip"
	using = accolade_tooltip
}

template accolade_type_tooltip {
	container = {
		alwaystransparent = no

		object_tooltip_pop_out = {
			blockoverride "title_text" {
				margin = { 0 8 }
				text = "[AccoladeType.GetNameNoTooltip]"
				default_format = "#T"
			}

			blockoverride "subheading" {
			}

			blockoverride "main_description" {
				text_single = {
					layoutpolicy_horizontal = expanding
					autoresize = yes
					max_width = 500
					fontsize_min = 14
					using = Font_Size_Small

					visible = "[And(Accolade.IsValid, Accolade.IsPrimaryType( AccoladeType.Self ))]"
					fonttintcolor = "[TooltipInfo.GetTintColor]"
					text = "ACCOLADE_PRIMARY_TYPE"
				}

				text_single = {
					layoutpolicy_horizontal = expanding
					autoresize = yes
					max_width = 500
					fontsize_min = 14
					using = Font_Size_Small

					visible = "[And(Accolade.IsValid, Accolade.IsSecondaryType( AccoladeType.Self ))]"
					fonttintcolor = "[TooltipInfo.GetTintColor]"
					text = "ACCOLADE_SECONDARY_TYPE"
				}

				vbox = {
					visible = "[Not(Accolade.IsValid)]"
					layoutpolicy_horizontal = expanding
					datamodel = "[DataModelFirst( AccoladeType.GetRanks, '(int32)1' )]"
					spacing = 5

					item = {
						vbox = {
							layoutpolicy_horizontal = expanding

							hbox = {
								layoutpolicy_horizontal = expanding
								text_single = {
									layoutpolicy_horizontal = expanding
									text = "[AccoladeType.GetLevelAndGloryOfRank( AccoladeRank.Self )]"
									align = nobaseline
								}
								text_single = {
									text = "ACCOLADE_PRIMARY_TYPE"
									align = nobaseline
									default_format = "#low;italic"
								}
							}
							text_multi = {
								layoutpolicy_horizontal = expanding
								text = "[AccoladeRank.GetEffects]"
								align = nobaseline
								autoresize = yes
								margin_top = 5
								margin_left = 20
							}
						}
					}
				}

				# breakdown of all effects, not tied to an accolade
				vbox = {
					visible = "[Not(Accolade.IsValid)]"
					layoutpolicy_horizontal = expanding
					datamodel = "[DataModelSkipLast( DataModelSkipFirst( AccoladeType.GetRanks, '(int32)1' ), '(int32)1' )]"
					margin_bottom = 10
					spacing = 5

					item = {
						widget = {
							size = { 300 40 }
							layoutpolicy_horizontal = expanding
							tooltip = "ACCOLADE_RANK_HEADER_AND_EFFECTS_TT"
							using = tooltip_se

							background = {
								using = Background_Frame
								margin = { 10 0 }
							}

							hbox = {
								text_single = {
									layoutpolicy_horizontal = expanding
									text = "[AccoladeType.GetLevelAndGloryOfRank( AccoladeRank.Self )]"
									align = nobaseline
								}
								expand = {}
								text_single = {
									visible = "[AccoladeType.IsPrimaryRank( AccoladeRank.Self )]"
									text = "ACCOLADE_PRIMARY_TYPE"
									align = right|nobaseline
									default_format = "#low;italic"
									margin_left = 20
								}
								text_single = {
									visible = "[AccoladeType.IsSecondaryRank( AccoladeRank.Self )]"
									text = "ACCOLADE_SECONDARY_TYPE"
									align = right|nobaseline
									default_format = "#low;italic"
									margin_left = 20
								}
							}
						}
					}
				}
				# Last Rank (without Accolade)
				vbox = {
					visible = "[Not(Accolade.IsValid)]"
					layoutpolicy_horizontal = expanding
					datamodel = "[DataModelLast( AccoladeType.GetRanks, '(int32)1' )]"
					margin_bottom = 10
					spacing = 5

					item = {
						vbox = {
							layoutpolicy_horizontal = expanding

							hbox = {
								layoutpolicy_horizontal = expanding
								text_single = {
									layoutpolicy_horizontal = expanding
									text = "[AccoladeType.GetLevelAndGloryOfRank( AccoladeRank.Self )]"
									align = nobaseline
								}
								text_single = {
									text = "ACCOLADE_SECONDARY_TYPE"
									align = nobaseline
									default_format = "#low;italic"
									margin_left = 20
								}
							}
							text_multi = {
								layoutpolicy_horizontal = expanding
								text = "[AccoladeRank.GetEffects]"
								align = nobaseline
								autoresize = yes
								margin_top = 5
								margin_left = 20
							}
						}
					}
				}

				# current rank number
				text_single = {
					margin_top = 10
					margin_bottom = 10
					layoutpolicy_horizontal = expanding
					visible = "[Accolade.IsValid]"
					text = "CURRENT_ACCOLADE_GLORY_AND_LEVEL"
					align = nobaseline

					background = {
						margin_left = 10
						margin_right = 10
						margin_top = -5
						margin_bottom = -5
						using = Background_Area_Dark
						alpha = 0.6
					}
				}

				# breakdown of primary effects
				vbox = {
					visible = "[And(Accolade.IsValid, Accolade.IsPrimaryType( AccoladeType.Self ))]"
					datamodel = "[AccoladeType.GetRanks]"
					margin_bottom = 10
					spacing = 5

					item = {
						widget = {
							visible = "[AccoladeType.IsPrimaryRank( AccoladeRank.Self )]"
							size = { 300 40 }
							tooltip = "ACCOLADE_RANK_HEADER_AND_EFFECTS_TT"
							using = tooltip_se

							background = {
								using = Background_Frame
								margin = { 10 0 }
							}

							hbox = {
								text_single = {
									layoutpolicy_horizontal = expanding
									text = "[AccoladeType.GetLevelAndGloryOfRank( AccoladeRank.Self )]"
									align = nobaseline
								}
							}
						}
					}
				}

				# breakdown of secondary effects
				vbox = {
					visible = "[And(Accolade.IsValid, Accolade.IsSecondaryType( AccoladeType.Self ))]"
					datamodel = "[AccoladeType.GetRanks]"
					margin_bottom = 10
					spacing = 5

					item = {
						widget = {
							visible = "[AccoladeType.IsSecondaryRank( AccoladeRank.Self )]"
							size = { 300 40 }
							tooltip = "ACCOLADE_RANK_HEADER_AND_EFFECTS_TT"
							using = tooltip_se

							background = {
								using = Background_Frame
								margin = { 10 0 }
							}

							hbox = {
								text_single = {
									layoutpolicy_horizontal = expanding
									text = "[AccoladeType.GetLevelAndGloryOfRank( AccoladeRank.Self )]"
									align = nobaseline
								}
							}
						}
					}
				}
			}

			blockoverride "concept_link" {
				text = "[accolade_type|E]"
			}
		}
	}
}

container = {
	alwaystransparent = no
	name = "AccoladeTypeTooltip"
	using = accolade_type_tooltip
}


template accolade_types_tooltip {
	container = {
		alwaystransparent = no

		object_tooltip_pop_out = {
			blockoverride "title_text" {
				margin = { 0 8 }
				text = "CREATE_ACCOLADE"
				default_format = "#T"
			}

			blockoverride "subheading" {

			}

			blockoverride "main_description" {

				text_single = {
					layoutpolicy_horizontal = expanding
					visible = "[Not( KnightsView.CanBeAcclaimedKnight( Character.Self ) )]"

					text = "[KnightsView.CanBeAcclaimedKnightDesc( Character.Self )]"
					align = nobaseline

					margin_bottom = 10
				}

				text_single = {
					layoutpolicy_horizontal = expanding

					text = "[accolade_types|E]"
					align = nobaseline

					margin_bottom = 10
				}

				vbox = {
					layoutpolicy_horizontal = expanding
					layoutpolicy_vertical = expanding

					datamodel = "[KnightsView.GetPotentialAccoladeTypes( Character.Self )]"

					spacing = 5

					item = {
						hbox = {
							layoutpolicy_horizontal = expanding

							text_single = {
								text = "BULLET"
								align = nobaseline
								margin = { 10 0 }
							}

							text_single = {
								layoutpolicy_horizontal = expanding

								text = "[AccoladeType.GetName]"
								align = nobaseline
							}
						}
					}
				}
			}

			blockoverride "concept_link" {

			}
		}
	}
}

template point_of_interest_tooltip {
	container = {
		alwaystransparent = no
		name = "PointOfInterestTooltip"

		datacontext = "[TravelPointsOfInterestIconData.GetProvince]"
		datacontext = "[TravelPointsOfInterestIconData.GetProvince.GetTitle]"

		object_tooltip_pop_out = {
			blockoverride "header_additions" {
				margin_top = 5
				coa_title_small = {
					visible = "[And( Not( Province.GetHolding.IsEmpty ), Title.IsValid )]"
					blockoverride "coa_tooltip" {}
					blockoverride "coa_hover_glow_visible"
					{
						visible = no
					}
				}

				widget = {
					visible = "[Or( Province.GetHolding.IsEmpty, Not( Title.IsValid ) )]"
					size = { 55 65 }
					icon = {
						parentanchor = center
						texture = "[Province.GetTerrain.GetIcon]"
						position = { 0 -2 }
						size = { 55 55 }
					}
				}
			}

			blockoverride "title_text" {
				margin_top = -10
				margin_left = 5

				text = "[Select_CString( Title.IsValid, Title.GetNameNoTierNoTooltip, Province.GetName )]"
				default_format = "#T"
			}

			blockoverride "description_text" {
				text = "[TravelPointsOfInterestIconData.GetDescription]"
			}

			blockoverride "concept_link" {
				margin_top = -2
				text = "[point_of_interest|E]"
			}
		}
	}
}

types GameTooltipTypes
{
	type tax_slot_obligation_tooltip = object_tooltip_pop_out
	{
		blockoverride "header_additions"
		{
			hbox = {
				margin_right = 10
				margin_top = 8
				margin_left = -4

				icon = {
					size = { 52 52 }
					texture = "[TaxSlotObligation.GetIcon]"
				}
			}
		}

		blockoverride "title_text" {
			margin = { 0 8 }
			text = "[TaxSlotObligation.GetNameNoTooltip]"
			default_format = "#T"
		}

		blockoverride "description_text"
		{
			text = "[TaxSlotObligation.GetFlavorDesc]"
		}

		blockoverride "extra_data_after_description"
		{
			vbox = {
				layoutpolicy_horizontal = expanding
				margin_top = 15

				text_label_left  = {
					layoutpolicy_horizontal = expanding
					text = "TAX_OPTION_EFFECT_LABEL"
				}

				text_multi = {
					layoutpolicy_horizontal = expanding
					margin_top = 5
					using = DefaultTooltipText
					multiline = yes
					text = "[TaxSlotObligation.GetEffectText]"
					fonttintcolor = "[TooltipInfo.GetTintColor]"
					alwaystransparent = no
				}
			}
		}

		blockoverride "concept_link" {
			text = "[tax_decree|E]"
		}
	}
}

container = {
	name = "TaxSlotObligation"
	alwaystransparent = no
	tax_slot_obligation_tooltip = {}
}

template epidemic_tooltip {
	container = {
		alwaystransparent = no

		object_tooltip_pop_out = {
			blockoverride "title_text"
			{
				margin = { 0 8 }
				raw_text = "[Epidemic.GetNameNoTooltip]"
				default_format = "#T"
			}

			blockoverride "subtitle_text"
			{
				text = "[Epidemic.GetType.GetName]"
				default_format = "#weak"
			}

			blockoverride "subheading"
			{
				hbox = {
					layoutpolicy_horizontal = expanding
					margin_top = -8

					text_single = {
						autoresize = yes
						fontsize_min = 14
						using = Font_Size_Small
						
						align = left
						text = "[Epidemic.GetIntensityName]"
						default_format = "#weak"
						fonttintcolor = "[TooltipInfo.GetTintColor]"
						max_width = 200
						margin_right = 4
					}

					text_single = {
						autoresize = yes
						fontsize_min = 14
						using = Font_Size_Small
						
						align = right
						text = "[Epidemic.GetType.GetName]"
						default_format = "#weak"
						fonttintcolor = "[TooltipInfo.GetTintColor]"
						max_width = 200
					}
					expand = {}
				}
			}

			blockoverride "main_description" 
			{
				vbox = {
					layoutpolicy_horizontal = expanding
					spacing = 16

					datacontext = "[Epidemic.GetType]"

					vbox = {
						layoutpolicy_horizontal = expanding
						visible = "[Epidemic.IsInRealm( GetPlayer )]"
						spacing = 3

						cooltip_paragraph = {
							text = "EPIDMIC_TOOLTIP_IN_REALM"
						}
						cooltip_paragraph = {
							text = "EPIDMIC_TOOLTIP_DOMAIN_INFECTIONS"
						}
					}

					vbox = {
						layoutpolicy_horizontal = expanding
						visible = "[Epidemic.IsNearbyRealm( GetPlayer )]"

						cooltip_paragraph = {
							text = "EPIDMIC_TOOLTIP_NEARBY_REALM"
						}
					}

					# Shared information
					vbox = {
						layoutpolicy_horizontal = expanding

						cooltip_paragraph = {
							text = "EPIDEMIC_TOOLTIP_HAS_INFECTION"
							visible = "[GetPlayer.HasInfection( Epidemic.Self )]"
						}

						cooltip_paragraph = {
							block "infection_chance_text"
							{
								text = "EPIDEMIC_TOOLTIP_CHANCE_OF_INFECTION_CHARACTER_LOCATION"
							}
							visible = "[Not( GetPlayer.HasInfection( Epidemic.Self ) )]"
						}
						
						cooltip_paragraph = {
							text = "EPIDEMIC_TOOLTIP_OUTBREAK"
						}

						block "extra_data"
						{
						}

						cooltip_paragraph = {
							text = "EPIDEMIC_TOOLTIP_COURT_PHYSICIAN"
							margin_top = 16
							default_format = "#weak"
						}
					}

					cooltip_paragraph = {
						text = "CLICK_TO_VIEW"
					}
				}
			}

			blockoverride "concept_link" {
				text = "[epidemic|E]"
			}

			blockoverride "header_additions"
			{
				hbox = {
					margin_right = 10
					margin_top = 8
					margin_left = -4

					icon_epidemic = {
						blockoverride "icon_size"
						{
							size = { 52 52 }
							tintcolor = "[TooltipInfo.GetTintColor]"
						}
					}
				}
			}
		}
	}
}

container = {
	alwaystransparent = no
	name = "EpidemicTooltip"
	using = epidemic_tooltip
}

template legend_tooltip {
	container = {
		alwaystransparent = no

		object_tooltip_pop_out = {
			blockoverride "title_text" {
				margin = { 0 8 }
				raw_text = "[Legend.GetNameNoTooltip]"
				default_format = "#T"
			}

			blockoverride "subheading"
			{
				hbox = {
					layoutpolicy_horizontal = expanding
					
					text_single = {
						layoutpolicy_horizontal = expanding
						autoresize = yes
						fontsize_min = 14
						using = Font_Size_Small
						
						align = left
						text = "[Legend.GetQualityLevel]"
						default_format = "#weak"
						fonttintcolor = "[TooltipInfo.GetTintColor]"
						max_width = 200
					}

					text_single = {
						layoutpolicy_horizontal = expanding
						autoresize = yes
						fontsize_min = 14
						using = Font_Size_Small
						
						align = right
						text = "[Legend.GetType.GetName]"
						default_format = "#weak"
						fonttintcolor = "[TooltipInfo.GetTintColor]"
						max_width = 200
					}
				}
			}

			blockoverride "extra_data"
			{
				cooltip_paragraph = {
					visible = "[ObjectsEqual( Legend.GetOwner.Self, GetPlayer.Self )]"
					text = "LEGEND_OWNING_LEGEND"
				}

				vbox = {
					layoutpolicy_horizontal = expanding
					visible = "[Not( ObjectsEqual( Legend.GetOwner.Self, GetPlayer.Self ) )]"

					cooltip_paragraph = {
						visible = "[Legend.IsCharacterPromotingLegend( GetPlayer )]"
						text = "LEGEND_PROMOTING_LEGEND"
					}
					cooltip_paragraph = {
						text = "LEGEND_OWNER_DESCRIPTION"
					}
				}
			}

			blockoverride "extra_data_after_description"
			{
				vbox = {
					layoutpolicy_horizontal = expanding
					margin_top = 16
					spacing = 16

					cooltip_paragraph = {
						visible = "[Legend.HasImpactModifiers( 'owner' )]"
						text = "OWNER_MODIFIERS_SUBTEXT"
					}
					cooltip_paragraph = {
						visible = "[Legend.HasImpactModifiers( 'promoter' )]"
						text = "LEGEND_PROMOTER_MODIFIERS_SUBTEXT"
					}
					cooltip_paragraph = {
						visible = "[Legend.HasImpactModifiers( 'county' )]"
						text = "LEGEND_COUNTY_MODIFIERS_SUBTEXT"
					}

					cooltip_paragraph = {
						visible = "[Legend.HasImpactModifiers( 'province' )]"
						text = "LEGEND_PROVINCE_MODIFIERS_SUBTEXT"
					}

					block "province_details" {}
				}
			}

			blockoverride "description_text"
			{
				default_format = "#F"
				text = "[Legend.GetChapterDescriptionByIndex( '(int32)0' )]"
			}

			blockoverride "concept_link" {
				text = "[legend|E]"
			}
			
			blockoverride "input_info_text" {
				text = "CLICK_TO_VIEW"
			}

			blockoverride "header_additions"
			{
				hbox = {
					margin_right = 10
					margin_top = 8
					margin_left = -4

					icon_legend = {
						datacontext = "[Legend.GetType]"

						blockoverride "icon_size"
						{
							size = { 52 52 }
							tintcolor = "[TooltipInfo.GetTintColor]"
						}
					}
				}
			}
		}
	}
}

container = {
	alwaystransparent = no
	name = "LegendTooltip"
	using = legend_tooltip
}

