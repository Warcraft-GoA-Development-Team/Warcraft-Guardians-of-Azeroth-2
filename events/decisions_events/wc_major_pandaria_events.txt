namespace = pandaria_unification

### Pandaria Decision Events ###
# By Juke

pandaria_unification.0001 = { # Mogu Empire Restored!
	type = character_event
	title = pandaria_unification.0001.t
	desc = {
		desc = pandaria_unification.0001.desc.intro
		# Mogu
		triggered_desc = {
			trigger = { 
                culture = { has_cultural_pillar = heritage_mogu }  
			}
			desc = pandaria_unification.0001.desc.mogu
		}
		# Others
		triggered_desc = {
			trigger = { 
				NOT = { culture = { has_cultural_pillar = heritage_mogu } }
			}
			desc = pandaria_unification.0001.desc.neutral
		}
	}
	theme = realm
	override_background = bp1_courtyard_indian

	immediate = {
		title:e_pandaria_empire.holder = { save_scope_as = scoped_emperor }
		play_music_cue = "mx_cue_epic_sacral_moment"
		character:lineofthunderking1 = { save_scope_as = thunderking }
		scope:scoped_emperor = {
			set_nickname_effect = { NICKNAME = nick_the_restorer }
		}
	}

	left_portrait = {
		character = scope:scoped_emperor
		animation = celebrate_hammer
	}
	right_portrait = {
		character = scope:thunderking
		animation = personality_honorable
	}

	option = {
		name = {
			# Mogu/New Emperor
			trigger = {
				culture = {
					has_cultural_pillar = heritage_mogu
				}
			}
			text = pandaria_unification.0001.mogu
		}
		name = {
			# Others
			trigger = {
				NOT = { 
					culture = {
						has_cultural_pillar = heritage_mogu
					}
				}
			}
			text = pandaria_unification.0001.neutral
		}
	}
}

pandaria_unification.0002 = { # Pandaren Empire Reunites!
	type = character_event
	title = pandaria_unification.0002.t
	desc = pandaria_unification.0002.desc
	theme = realm
	override_background = bp1_courtyard_indian

	immediate = {
		title:e_pandaria_empire.holder = { save_scope_as = scoped_emperor }
		#character: = { save_scope_as = lastemperor } # TBD: Add last Pandaren Emperor
		play_music_cue = "mx_cue_epic_sacral_moment"
		scope:scoped_emperor = {
			set_nickname_effect = { NICKNAME = nick_the_restorer }
		}
	}

	left_portrait = {
		character = scope:scoped_emperor
		animation = personality_honorable
	}
	#right_portrait = {
	#	character = scope:lastemperor
	#	animation = steward
	#}

	option = {
		name = {
			# Pandaren/New Emperor
			trigger = {
				culture = {
					has_cultural_pillar = heritage_pandaren
				}
			}
			text = pandaria_unification.0002.pandaren
		}
		name = {
			# Grumpy Mogu
			trigger = {
				culture = {
					has_cultural_pillar = heritage_mogu
				}
			}
			text = pandaria_unification.0002.mogu
		}
		name = {
			# Others
			trigger = {
				NOR = { 
					culture = {
						has_cultural_pillar = heritage_pandaren
					}
					culture = {
						has_cultural_pillar = heritage_mogu
					}
				}
			}
			text = pandaria_unification.0002.neutral
		}
	}
}

pandaria_unification.0003 = { # Generic Pandaria Reunification
	type = character_event
	title = pandaria_unification.0003.t
	desc = pandaria_unification.0003.desc
	theme = realm
	override_background = bp1_courtyard_indian

	immediate = {
		title:e_pandaria_empire.holder = { save_scope_as = scoped_emperor }
		play_music_cue = "mx_cue_epic_sacral_moment"
		scope:scoped_emperor = {
			set_nickname_effect = { NICKNAME = nick_the_great }
		}
	}

	left_portrait = {
		character = scope:scoped_emperor
		animation = personality_honorable
	}

	option = {
		name = {
			# New Emperor
			trigger = {
				culture = scope:scoped_emperor.culture
			}
			text = pandaria_unification.0003.positive
		}
		name = {
			# Others
			trigger = {
				NOT = { 
					culture = scope:scoped_emperor.culture
				}
			}
			text = pandaria_unification.0003.neutral
		}
	}
}


### Resurrect Lei Shen Decision ###
pandaria_unification.0100 = { # Reviver meets with Zandalari Prophet
	type = character_event
	title = pandaria_unification.0100.t
	desc = pandaria_unification.0100.desc
	theme = realm
	override_background = bp1_courtyard_indian

	immediate = {
		save_scope_as = reviver
		create_character = {
			template = prophet_khar_zul_template
			save_scope_as = prophet
			location = root.location
		}
	}

	left_portrait = {
		character = ROOT
		animation = personality_honorable
	}

	right_portrait = {
		character = scope:prophet
		animation = personality_honorable
	}

	option = {
		name = pandaria_unification.0100.a
		
		# Resurrect the Thunder King
		create_character = {
			template = lei_shen_template
			save_scope_as = lei_shen
			location = root.location
		}
			
		# Hidden setup event
		#scope:lei_shen = {
		#	trigger_event = pandaria_unification.0101
		#}
	
		trigger_event = pandaria_unification.0102
	}
}

pandaria_unification.0101 = { # Hidden Setup Event for scope:lei_shen
	hidden = yes

	immediate = {
		set_house = house:house_mogu
	}
}

pandaria_unification.0102 = { # Reviver swears fealty to Lei Shen
	type = character_event
	title = pandaria_unification.0102.t
	desc = pandaria_unification.0102.desc
	theme = realm
	override_background = bp1_courtyard_indian

	immediate = {
		save_scope_as = reviver
		scope:lei_shen = { save_scope_as = lei_shen }
	}

	left_portrait = {
		character = ROOT
		animation = personality_honorable
	}

	right_portrait = {
		character = scope:lei_shen
		animation = personality_honorable
	}

	option = {
		name = pandaria_unification.0102.a
		scope:lei_shen = {
			thunder_king_effect = yes
		}
		set_player_character = scope:lei_shen
		ai_chance = {
			base = 0
		}
	}

	option = {
		name = pandaria_unification.0102.b
		scope:lei_shen = {
			thunder_king_effect = yes
		}
	}
	
	after = {
	}
}