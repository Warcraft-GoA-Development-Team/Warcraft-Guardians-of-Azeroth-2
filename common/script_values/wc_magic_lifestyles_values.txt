wc_magic_user_1_trait_exp_threshold_value = 1
wc_magic_user_2_trait_exp_threshold_value = 200
wc_magic_user_3_trait_exp_threshold_value = 300
wc_magic_user_4_trait_exp_threshold_value = 400
wc_magic_user_5_trait_exp_threshold_value = 500

# EXP to magic user trait per magic_lifestyles_progress_pulse
wc_magic_lifestyle_pulse_exp_regular_value = 3 # For all magic, exept elemental, spirit and decay
wc_magic_lifestyle_pulse_exp_elemental_regular_value = 6 # For elemental magic if focus is not spirit or decay
wc_magic_lifestyle_pulse_exp_shared_elemental_spirit_and_decay_value = 2 # For spirit and decay
wc_magic_lifestyle_pulse_exp_shared_elemental_other_value = 4 # For elemental magic if focus is spirit or decay

﻿wc_magic_bad_1_xp_gain_mult_value = -0.1
wc_magic_bad_2_xp_gain_mult_value = -0.2
wc_magic_bad_3_xp_gain_mult_value = -0.3
wc_magic_good_1_xp_gain_mult_value = 0.1
wc_magic_good_2_xp_gain_mult_value = 0.2
wc_magic_good_3_xp_gain_mult_value = 0.3
wc_magic_bad_noninheritable_xp_gain_mult_value = -0.15
wc_magic_good_noninheritable_xp_gain_mult_value = 0.15

wc_magic_lifestyle_auto_selection_weight_base_value = 11
wc_magic_lifestyle_auto_selection_weight_magic_talent_add_to_base_value = {
	value = 0

	if = {
		limit = {
			OR = {
				has_trait = magic_good
				has_trait = magic_good_noninheritable
			}
		}
		add = 1989
	}
}

@wc_local_magic_lifestyle_auto_selection_weight_education_intrigue_add_to_base_value = 200
@wc_local_magic_lifestyle_auto_selection_weight_education_martial_add_to_base_value = 500
@wc_local_magic_lifestyle_auto_selection_weight_education_learning_add_to_base_value = 1000

@wc_local_lifestyle_multiply_mod_positive_big = 10
@wc_local_lifestyle_multiply_mod_positive_medium = 5
@wc_local_lifestyle_multiply_mod_positive_small = 3
@wc_local_lifestyle_multiply_mod_positive_tiny = 1.5

@wc_local_lifestyle_multiply_mod_negative_medium = 0.25

wc_magic_lifestyle_focus_selection_weight_multiply_all_magic_value = { # Common multiplier of all focuses
	value = 1

	if = {
		limit = {
			OR = {
				has_trait = magic_bad
				has_trait = magic_bad_noninheritable
			}
		}
		multiply = 0
	}
}
wc_magic_lifestyle_focus_selection_weight_multiply_elemental_spirit_magic_value = {
	value = 1

	if = {
		limit = { MAGIC_is_approved_trigger = { MAGIC = elemental_spirit } }
		multiply = @[wc_local_lifestyle_multiply_mod_positive_big]
	}

	if = {
		limit = {
			MAGIC_is_shunned_or_illegal_trigger = { MAGIC = elemental_spirit }
			NOT = { has_trait = cynical }
		}
		multiply = 0
	}

	if = { # Elemental duality - bravery
		limit = { has_trait = brave }
		multiply = @[wc_local_lifestyle_multiply_mod_positive_medium]
	}
	else_if = {
		limit = { has_trait = craven }
		multiply = @[wc_local_lifestyle_multiply_mod_negative_medium]
	}
	if = { # Elemental duality - naivete
		limit = { has_trait = trusting }
		multiply = @[wc_local_lifestyle_multiply_mod_positive_medium]
	}
	else_if = {
		limit = { has_trait = paranoid }
		multiply = @[wc_local_lifestyle_multiply_mod_negative_medium]
	}
}
wc_magic_lifestyle_focus_selection_weight_multiply_elemental_decay_magic_value = {
	value = 1

	if = {
		limit = { MAGIC_is_approved_trigger = { MAGIC = elemental_decay } }
		multiply = @[wc_local_lifestyle_multiply_mod_positive_big]
	}

	if = {
		limit = {
			MAGIC_is_shunned_or_illegal_trigger = { MAGIC = elemental_decay }
			NOT = { has_trait = cynical }
		}
		multiply = 0
	}

	if = { # Elemental duality - efficiency
		limit = { has_trait = diligent }
		multiply = @[wc_local_lifestyle_multiply_mod_positive_medium]
	}
	else_if = {
		limit = { has_trait = lazy }
		multiply = @[wc_local_lifestyle_multiply_mod_negative_medium]
	}
	if = { # Elemental duality - ruthlessness
		limit = { has_trait = callous }
		multiply = @[wc_local_lifestyle_multiply_mod_positive_medium]
	}
	else_if = {
		limit = { has_trait = sadistic } # Cruelty for cruelty's sake is not as efficient
		multiply = @[wc_local_lifestyle_multiply_mod_positive_small]
	}
	else_if = {
		limit = { has_trait = compassionate }
		multiply = @[wc_local_lifestyle_multiply_mod_negative_medium]
	}
}

wc_approved_magic_auto_selection_multiply_value = { # Cleargy and zealous prefer approved magic stronger than others
	value = 1
	if = {
		limit = {
			OR = {
				has_trait = zealous
				is_clergy = yes
			}
		}
		multiply = @[wc_local_lifestyle_multiply_mod_positive_big]
	}
	else = {
		multiply = @[wc_local_lifestyle_multiply_mod_positive_tiny]
	}
}

wc_light_magic_auto_selection_value = {
	value = wc_magic_lifestyle_auto_selection_weight_base_value

	#### Addings
	# Talent
	add = wc_magic_lifestyle_auto_selection_weight_magic_talent_add_to_base_value
	if = { # Education
		limit = { has_trait = education_learning }
		add = @wc_local_magic_lifestyle_auto_selection_weight_education_learning_add_to_base_value
	}
	else_if = {
		limit = { has_trait = education_martial }
		add = @wc_local_magic_lifestyle_auto_selection_weight_education_martial_add_to_base_value
	}

	### Multipliers
	# Common
	multiply = wc_magic_lifestyle_focus_selection_weight_multiply_all_magic_value
	## Light Magic
	# Doctrines
	if = {
		limit = { MAGIC_is_approved_trigger = { MAGIC = light } }
		multiply = wc_approved_magic_auto_selection_multiply_value
	}
	if = {
		limit = {
			MAGIC_is_shunned_or_illegal_trigger = { MAGIC = light }
			NOT = { has_trait = cynical }
		}
		multiply = 0
	}
}
wc_shadow_magic_auto_selection_value = {
	value = wc_magic_lifestyle_auto_selection_weight_base_value

	#### Addings
	# Talent
	add = wc_magic_lifestyle_auto_selection_weight_magic_talent_add_to_base_value
	if = { # Education
		limit = { has_trait = education_learning }
		add = @wc_local_magic_lifestyle_auto_selection_weight_education_learning_add_to_base_value
	}
	else_if = {
		limit = { has_trait = education_martial }
		add = @wc_local_magic_lifestyle_auto_selection_weight_education_martial_add_to_base_value
	}
	else_if = {
		limit = { has_trait = education_intrigue }
		add = @wc_local_magic_lifestyle_auto_selection_weight_education_intrigue_add_to_base_value
	}

	### Multipliers
	# Common
	multiply = wc_magic_lifestyle_focus_selection_weight_multiply_all_magic_value
	## Shadow Magic
	# Doctrines
	if = {
		limit = { MAGIC_is_approved_trigger = { MAGIC = shadow } }
		multiply = wc_approved_magic_auto_selection_multiply_value
	}
	if = {
		limit = {
			MAGIC_is_shunned_or_illegal_trigger = { MAGIC = shadow }
			NOT = { has_trait = cynical }
		}
		multiply = 0
	}
}
wc_disorder_magic_auto_selection_value = {
	value = wc_magic_lifestyle_auto_selection_weight_base_value

	#### Addings
	# Talent
	add = wc_magic_lifestyle_auto_selection_weight_magic_talent_add_to_base_value
	if = { # Education
		limit = { has_trait = education_learning }
		add = @wc_local_magic_lifestyle_auto_selection_weight_education_learning_add_to_base_value
	}
	else_if = {
		limit = { has_trait = education_martial }
		add = @wc_local_magic_lifestyle_auto_selection_weight_education_martial_add_to_base_value
	}
	else_if = {
		limit = { has_trait = education_intrigue }
		add = @wc_local_magic_lifestyle_auto_selection_weight_education_intrigue_add_to_base_value
	}

	### Multipliers
	# Common
	multiply = wc_magic_lifestyle_focus_selection_weight_multiply_all_magic_value
	## Disorder Magic
	# Doctrines
	if = {
		limit = { MAGIC_is_approved_trigger = { MAGIC = disorder } }
		multiply = wc_approved_magic_auto_selection_multiply_value
	}
	if = {
		limit = {
			MAGIC_is_shunned_or_illegal_trigger = { MAGIC = disorder }
			NOT = { has_trait = cynical }
		}
		multiply = 0
	}
}
wc_order_magic_auto_selection_value = {
	value = wc_magic_lifestyle_auto_selection_weight_base_value

	#### Addings
	# Talent
	add = wc_magic_lifestyle_auto_selection_weight_magic_talent_add_to_base_value
	if = { # Education
		limit = { has_trait = education_learning }
		add = @wc_local_magic_lifestyle_auto_selection_weight_education_learning_add_to_base_value
	}

	### Multipliers
	# Common
	multiply = wc_magic_lifestyle_focus_selection_weight_multiply_all_magic_value
	## Order Magic
	# Doctrines
	if = {
		limit = { MAGIC_is_approved_trigger = { MAGIC = order } }
		multiply = wc_approved_magic_auto_selection_multiply_value
	}
	if = {
		limit = {
			MAGIC_is_shunned_or_illegal_trigger = { MAGIC = order }
			NOT = { has_trait = cynical }
		}
		multiply = 0
	}
}
wc_life_magic_auto_selection_value = {
	value = wc_magic_lifestyle_auto_selection_weight_base_value

	#### Addings
	# Talent
	add = wc_magic_lifestyle_auto_selection_weight_magic_talent_add_to_base_value
	if = { # Education
		limit = { has_trait = education_learning }
		add = @wc_local_magic_lifestyle_auto_selection_weight_education_learning_add_to_base_value
	}
	else_if = {
		limit = { has_trait = education_martial }
		add = @wc_local_magic_lifestyle_auto_selection_weight_education_martial_add_to_base_value
	}

	### Multipliers
	# Common
	multiply = wc_magic_lifestyle_focus_selection_weight_multiply_all_magic_value
	## Life Magic
	# Doctrines
	if = {
		limit = { MAGIC_is_approved_trigger = { MAGIC = life } }
		multiply = wc_approved_magic_auto_selection_multiply_value
	}
	if = {
		limit = {
			MAGIC_is_shunned_or_illegal_trigger = { MAGIC = life }
			NOT = { has_trait = cynical }
		}
		multiply = 0
	}
}
wc_death_magic_auto_selection_value = {
	value = wc_magic_lifestyle_auto_selection_weight_base_value

	#### Addings
	# Talent
	add = wc_magic_lifestyle_auto_selection_weight_magic_talent_add_to_base_value
	if = { # Education
		limit = { has_trait = education_learning }
		add = @wc_local_magic_lifestyle_auto_selection_weight_education_learning_add_to_base_value
	}
	else_if = {
		limit = { has_trait = education_martial }
		add = @wc_local_magic_lifestyle_auto_selection_weight_education_martial_add_to_base_value
	}
	else_if = {
		limit = { has_trait = education_intrigue }
		add = @wc_local_magic_lifestyle_auto_selection_weight_education_intrigue_add_to_base_value
	}

	### Multipliers
	# Common
	multiply = wc_magic_lifestyle_focus_selection_weight_multiply_all_magic_value
	## Death Magic
	# Doctrines
	if = {
		limit = { MAGIC_is_approved_trigger = { MAGIC = death } }
		multiply = wc_approved_magic_auto_selection_multiply_value
	}
	if = {
		limit = {
			MAGIC_is_shunned_or_illegal_trigger = { MAGIC = death }
			NOT = { has_trait = cynical }
		}
		multiply = 0
	}
}
wc_fire_magic_auto_selection_value = {
	value = wc_magic_lifestyle_auto_selection_weight_base_value

	#### Addings
	# Talent
	add = wc_magic_lifestyle_auto_selection_weight_magic_talent_add_to_base_value
	if = { # Education
		limit = { has_trait = education_learning }
		add = @wc_local_magic_lifestyle_auto_selection_weight_education_learning_add_to_base_value
	}
	else_if = {
		limit = { has_trait = education_martial }
		add = @wc_local_magic_lifestyle_auto_selection_weight_education_martial_add_to_base_value
	}

	### Multipliers
	# Common
	multiply = wc_magic_lifestyle_focus_selection_weight_multiply_all_magic_value
	## Fire Magic
	# Doctrines
	if = {
		limit = { MAGIC_is_approved_trigger = { MAGIC = elemental_fire } }
		multiply = wc_approved_magic_auto_selection_multiply_value
	}
	if = {
		limit = {
			MAGIC_is_shunned_or_illegal_trigger = { MAGIC = elemental_fire }
			NOT = { has_trait = cynical }
		}
		multiply = 0
	}

	# Traits
	if = { # Elemental duality - passion
		limit = { has_trait = diligent }
		multiply = @[wc_local_lifestyle_multiply_mod_positive_medium]
	}
	else_if = {
		limit = { has_trait = lazy }
		multiply = @[wc_local_lifestyle_multiply_mod_negative_medium]
	}
	if = { # Elemental duality - fury
		limit = { has_trait = wrathful }
		multiply = @[wc_local_lifestyle_multiply_mod_positive_medium]
	}
	else_if = {
		limit = { has_trait = calm }
		multiply = @[wc_local_lifestyle_multiply_mod_negative_medium]
	}
}
wc_water_magic_auto_selection_value = {
	value = wc_magic_lifestyle_auto_selection_weight_base_value

	#### Addings
	# Talent
	add = wc_magic_lifestyle_auto_selection_weight_magic_talent_add_to_base_value
	if = { # Education
		limit = { has_trait = education_learning }
		add = @wc_local_magic_lifestyle_auto_selection_weight_education_learning_add_to_base_value
	}
	else_if = {
		limit = { has_trait = education_martial }
		add = @wc_local_magic_lifestyle_auto_selection_weight_education_martial_add_to_base_value
	}

	### Multipliers
	# Common
	multiply = wc_magic_lifestyle_focus_selection_weight_multiply_all_magic_value
	## Water Magic
	# Doctrines
	if = {
		limit = { MAGIC_is_approved_trigger = { MAGIC = elemental_water } }
		multiply = wc_approved_magic_auto_selection_multiply_value
	}
	if = {
		limit = {
			MAGIC_is_shunned_or_illegal_trigger = { MAGIC = elemental_water }
			NOT = { has_trait = cynical }
		}
		multiply = 0
	}
	# Traits
	if = { # Elemental duality - tranquility
		limit = { has_trait = calm }
		multiply = @[wc_local_lifestyle_multiply_mod_positive_medium]
	}
	else_if = {
		limit = { has_trait = wrathful }
		multiply = @[wc_local_lifestyle_multiply_mod_negative_medium]
	}
	if = { # Elemental duality - indecisiveness
		limit = { has_trait = fickle }
		multiply = @[wc_local_lifestyle_multiply_mod_positive_medium]
	}
	else_if = {
		limit = { has_trait = stubborn }
		multiply = @[wc_local_lifestyle_multiply_mod_negative_medium]
	}
}
wc_air_magic_auto_selection_value = {
	value = wc_magic_lifestyle_auto_selection_weight_base_value

	#### Addings
	# Talent
	add = wc_magic_lifestyle_auto_selection_weight_magic_talent_add_to_base_value
	if = { # Education
		limit = { has_trait = education_learning }
		add = @wc_local_magic_lifestyle_auto_selection_weight_education_learning_add_to_base_value
	}
	else_if = {
		limit = { has_trait = education_martial }
		add = @wc_local_magic_lifestyle_auto_selection_weight_education_martial_add_to_base_value
	}

	### Multipliers
	# Common
	multiply = wc_magic_lifestyle_focus_selection_weight_multiply_all_magic_value
	## Air Magic
	# Doctrines
	if = {
		limit = { MAGIC_is_approved_trigger = { MAGIC = elemental_air } }
		multiply = wc_approved_magic_auto_selection_multiply_value
	}
	if = {
		limit = {
			MAGIC_is_shunned_or_illegal_trigger = { MAGIC = elemental_air }
			NOT = { has_trait = cynical }
		}
		multiply = 0
	}
	# Traits
	if = { # Elemental duality - cunning
		limit = { has_trait = deceitful }
		multiply = @[wc_local_lifestyle_multiply_mod_positive_small]
	}
	else_if = {
		limit = { has_trait = honest }
		multiply = @[wc_local_lifestyle_multiply_mod_negative_medium]
	}
	if = {
		limit = { has_trait = paranoid }
		multiply = @[wc_local_lifestyle_multiply_mod_positive_small]
	}
	else_if = {
		limit = { has_trait = trusting }
		multiply = @[wc_local_lifestyle_multiply_mod_negative_medium]
	}
	if = { # Elemental duality - madness
		limit = {
			OR = {
				has_trait = lunatic_1
				has_trait = lunatic_genetic
				has_trait = possessed_1
				has_trait = possessed_genetic
			}
		}
		multiply = @[wc_local_lifestyle_multiply_mod_positive_medium]
	}
}
wc_earth_magic_auto_selection_value = {
	value = wc_magic_lifestyle_auto_selection_weight_base_value

	#### Addings
	# Talent
	add = wc_magic_lifestyle_auto_selection_weight_magic_talent_add_to_base_value
	if = { # Education
		limit = { has_trait = education_learning }
		add = @wc_local_magic_lifestyle_auto_selection_weight_education_learning_add_to_base_value
	}
	else_if = {
		limit = { has_trait = education_martial }
		add = @wc_local_magic_lifestyle_auto_selection_weight_education_martial_add_to_base_value
	}

	### Multipliers
	# Common
	multiply = wc_magic_lifestyle_focus_selection_weight_multiply_all_magic_value
	## Earth Magic
	# Doctrines
	if = {
		limit = { MAGIC_is_approved_trigger = { MAGIC = elemental_earth } }
		multiply = wc_approved_magic_auto_selection_multiply_value
	}
	if = {
		limit = {
			MAGIC_is_shunned_or_illegal_trigger = { MAGIC = elemental_earth }
			NOT = { has_trait = cynical }
		}
		multiply = 0
	}
	# Traits
	if = { # Elemental duality - stability
		limit = { has_trait = just }
		multiply = @[wc_local_lifestyle_multiply_mod_positive_medium]
	}
	else_if = {
		limit = { has_trait = arbitrary }
		multiply = @[wc_local_lifestyle_multiply_mod_negative_medium]
	}
	if = { # Elemental duality - stubbornness
		limit = { has_trait = stubborn }
		multiply = @[wc_local_lifestyle_multiply_mod_positive_medium]
	}
	else_if = {
		limit = { has_trait = fickle }
		multiply = @[wc_local_lifestyle_multiply_mod_negative_medium]
	}
}

wc_magic_lifestyle_perk_auto_selection_weight_multiply_from_focus_value = 5