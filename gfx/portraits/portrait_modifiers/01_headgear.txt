# Tags:
# rank_headgear: any headgear that signifies a certain title. crowns, pope hat etc.



headgear = {
	# interface_position = 1
	usage = game
	selection_behavior = weighted_random
	
	no_hat = {
		usage = game 
		dna_modifiers = {
			accessory = {
				mode = add
		
				gene = headgear
				template = no_headgear
				value = 0
			}
		}
        outfit_tags = { no_clothes } # 1.8 added this line
		weight = {
			base = 0
			modifier = {
				add = 1000
				OR = {
					# Deliberately not the "fully naked" one since dropping your crown's intended even if nudity is disabled
					should_be_naked_trigger = yes
					AND = {
						highest_held_title_tier < tier_duchy # Should wear ducal or royal crown instead.
						OR = {
							has_short_disease_trigger = yes #affliction that would plausibly leave them bedridden for treatment
							has_character_flag = use_sickness_clothes
						}
					}
				}
			}
			
			modifier = {
				factor = 0
				OR = {
					is_adult = no
					highest_held_title_tier >= tier_duchy # Should wear ducal or royal crown instead.
					AND = {
						like_christianity_religion_trigger = yes
						faith.religious_head = this
					}
				}
			}

			# Refuses to wear a crown due to HighGod.
			modifier = {
				add = 110
                exists = this
				has_character_modifier = fp1_abased_before_highgod_modifier
			}
			
			# Warcraft
			modifier = {
				add = 1000
				portrait_wildhammer_clothing_trigger = yes
				portrait_wear_helmet_trigger = yes
			}
			
			modifier = {
				add = 70
				portrait_gnomish_clothing_trigger = yes
			}
		}
	}

## So that the Prophet Muhammad does not have a portrait ## 

	no_portrait = {
		dna_modifiers = {
			accessory = {
				mode = add				
				gene = headgear
				template = no_headgear
				value = 0.5
			}
		}
		weight = {
			base = 0
			
			# Warcraft
			modifier = {
				add = 2000
				exists = this
				has_no_portrait_trigger = yes
			}
		}
	}

	# Warcraft
	arthas_hood = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = scourge_cultist_headgears
				range = { 0 0 } # For the randomness to work correctly
			}
		}		
		weight = {
			base = 0
			modifier = {
				add = 1000
				has_character_flag = wear_hood_flag
			}
		}
	}

	no_headgear = {

		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		
		weight = {
			## No headgear for children under 16 ## 
			base = 0
			modifier = {
				add = 100
				# Warcraft
				scope:age < age_16_value
			}
			# No headgear for characters with an active Vow of Poverty
			modifier = {
				add = 100
				exists = this
				has_character_modifier = vow_of_poverty_modifier
				# Should still wear armor when going to war
				NOT = { portrait_wear_armor_trigger = yes }
			}
			# No headgear for characters who sold their crown
			#modifier = {
			#	add = 100
			#	exists = this
			#	has_character_flag = sold_crown_charmod
			#	# Should still wear armor when going to war
			#	NOT = { portrait_wear_armor_trigger = yes }
			#}
			# Warcraft
		}
	}



	vanity_no_headgear = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
		}	

		## No headgear for vanity characters with the no_headgear flag, unless they are dukes or higher
		weight = {  
			base = 0
            modifier = {
                add = 200
				exists = this
                has_character_flag = no_headgear
                highest_held_title_tier < tier_duchy
            }
		}
	}

### SP2 - Elegance of the Empire ###

	sp2_western_imperial = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = sp2_western_imperial
				range = { 0 1 } # For the randomness to work correctly
			}
			morph = {
				mode = modify_multiply
				gene = gene_bs_bust
				value = 0.8 # Setting this lower to reduce the exaggerated effect of large bust size when wearing clothes
				template = bust_clothes
			}

		}	
		weight = {
			base = 0
			modifier = {
				add = 99
				trigger_if = {
					limit = { exists = this }
					OR = {
						AND = {
							highest_held_title_tier = tier_empire
							NOR = {
								AND = {
									has_government = republic_government
									primary_title.tier > 1
								}
								AND = { is_ruler = yes has_government = theocracy_government }
							}
							portrait_sp2_western_clothing_trigger = yes
						}
						AND = {
							exists = primary_spouse
							OR = {
								is_ruler = no
								highest_held_title_tier = tier_barony
							}
							primary_spouse = {
								highest_held_title_tier = tier_empire
								NOR = {
									AND = {
									has_government = republic_government
										primary_title.tier > 1
									}
									AND = { is_ruler = yes has_government = theocracy_government }
								}
								portrait_sp2_western_clothing_spouse_trigger = yes
							}
						}
					}
				}
				trigger_else = {
					scope:highest_held_title_tier = tier_empire
					portrait_sp2_western_clothing_spouse_trigger = yes
				}
			}
		}
	}

## DDE HRE ##

## Western ##

	dde_hre_commoners = {

		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = dde_hre_common
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 20
				exists = this
				highest_held_title_tier < tier_county
				NOR = {
					AND = {
						exists = primary_spouse
						primary_spouse = {
							highest_held_title_tier > tier_county
						}
					}
					AND = {
						has_government = republic_government
						primary_title.tier > 1
					}
					AND = { is_ruler = yes has_government = theocracy_government }
				}
				portrait_dde_hre_clothing_spouse_trigger = yes
			}
			
			# Warcraft
			modifier = {
				factor = 0
				prefer_no_lowborn_headgear = yes
			}
		}
	}

	dde_hre_low_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = dde_hre_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				exists = this
				portrait_can_use_noble_headgear_trigger = yes
				OR = {
					AND = {
						highest_held_title_tier = tier_county
						NOR = {
							# has_dynasty = no
							AND = {
								has_government = republic_government
								primary_title.tier > 1
							}
							AND = { is_ruler = yes has_government = theocracy_government }
						}
						portrait_dde_hre_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							highest_held_title_tier = tier_county
							NOR = {
								# has_dynasty = no
								AND = {
									has_government = republic_government
									primary_title.tier > 1
								}
								AND = { is_ruler = yes has_government = theocracy_government }
							}
							portrait_dde_hre_clothing_spouse_trigger = yes
						}
					}
				}
			}
		}
	}

	dde_hre_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = dde_hre_high_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				exists = this
				portrait_can_use_noble_headgear_trigger = yes
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_duchy
							AND = {
								has_government = republic_government
								primary_title.tier > 2
							}
							AND = { is_ruler = yes has_government = theocracy_government }
						}
						NOT = { AND = { is_ruler = yes has_government = mercenary_government  } } # Blocked for mercenaries
						portrait_dde_hre_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_duchy
								AND = {
									has_government = republic_government
									primary_title.tier > 2
								}
								AND = { is_ruler = yes has_government = theocracy_government }
							}
							portrait_dde_hre_clothing_spouse_trigger = yes
						}
					}
				}
			}
		}
	}

	dde_hre_royalty = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = dde_hre_royalty
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				exists = this
				portrait_can_use_noble_headgear_trigger = yes
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_kingdom
							AND = { is_ruler = yes has_government = theocracy_government }
						}
						NOT = { AND = { is_ruler = yes has_government = mercenary_government  } } # Blocked for mercenaries
						NOT = { has_government = republic_government }
						portrait_dde_hre_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_kingdom
								AND = { is_ruler = yes has_government = theocracy_government }
							}
							NOT = { AND = { is_ruler = yes has_government = mercenary_government  } } # Blocked for mercenaries
							NOT = { has_government = republic_government }
							portrait_dde_hre_clothing_spouse_trigger = yes
						}
					}
				}
			}
		}
	}

	# Reichskrone
	hre_imperial = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = dde_hre_imperial
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			
			# Warcraft
			# modifier = {
				# add = 101 # always pick the HRE crown over the western one
				# exists = this
				# has_primary_title = title:e_hre
			# }
			# modifier = {
				# add = 140
				# exists = this
				# any_equipped_character_artifact = {
					# has_variable = reichskrone
				# }
			# }
		}
	}


	dde_hre_war = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = dde_hre_war
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 101 # larger than the western war headgear
				exists = this
				portrait_wear_helmet_trigger = yes
				portrait_dde_hre_clothing_trigger = yes
				
				NOR = {
				    AND = {
				        like_christianity_religion_trigger = yes
				        has_government = holy_order_government
				    }
				    AND = {
				        like_christianity_religion_trigger = yes
				        is_landed = no
				        portrait_wear_armor_trigger = yes
				        exists = liege
				        liege = {
				            has_government = holy_order_government
				        }
				    }
				    AND = {
				        like_christianity_religion_trigger = yes
				        portrait_wear_armor_trigger = yes
				        OR = {
				            any_character_war = {
				                OR = {
				                    using_cb = undirected_great_holy_war
				                    using_cb = directed_great_holy_war
				                }
				                is_attacker = prev
				            }
				            any_liege_or_above = {
				                faith = prev.faith
				                any_character_war = {
				                    OR = {
				                        using_cb = undirected_great_holy_war
				                        using_cb = directed_great_holy_war
				                    }
				                    is_attacker = prev
				                }
				            }
				        }
				    }
				}
			}
		}
	}

## Western ##

	western_commoners = {

		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = western_common
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 80
				exists = this
				portrait_can_use_noble_headgear_trigger = no
				portrait_western_clothing_trigger = yes
			}
			modifier = {
				add = 20
				exists = this
				highest_held_title_tier < tier_county
				NOR = {
					AND = {
						exists = primary_spouse
						primary_spouse = {
							highest_held_title_tier > tier_county
						}
					}
					AND = {
						has_government = republic_government
						primary_title.tier > 1
					}
					AND = { is_ruler = yes has_government = theocracy_government }
				}
				portrait_western_clothing_spouse_trigger = yes
			}
			
			# Warcraft
			modifier = {
				factor = 0
				prefer_no_lowborn_headgear = yes
			}
		}
	}

	western_low_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = western_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				exists = this
				portrait_can_use_noble_headgear_trigger = yes
				OR = {
					AND = {
						highest_held_title_tier = tier_county
						OR = {
							# has_dynasty = no
							AND = {
								has_government = republic_government
								primary_title.tier > 1
							}
							AND = { is_ruler = yes has_government = theocracy_government }
						}
						
						OR = {
							portrait_western_clothing_trigger = yes
							
							#Warcraft
							portrait_dwarven_clothing_trigger = yes 
						}
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							highest_held_title_tier = tier_county
							NOR = {
								# has_dynasty = no
								AND = {
									has_government = republic_government
									primary_title.tier > 1
								}
								AND = { is_ruler = yes has_government = theocracy_government }
							}
							OR = { 
								portrait_western_clothing_spouse_trigger = yes
								
								#Warcraft
								portrait_dwarven_clothing_spouse_trigger = yes 
							}
						}
					}
				}
			}
		}
	}

	western_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = western_high_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				exists = this
				portrait_can_use_noble_headgear_trigger = yes
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_duchy
							AND = {
								has_government = republic_government
								primary_title.tier > 2
							}
							AND = { is_ruler = yes has_government = theocracy_government }
						}
						NOT = { AND = { is_ruler = yes has_government = mercenary_government  } } # Blocked for mercenaries
						OR = {
							portrait_western_clothing_trigger = yes
							
							#Warcraft
							AND = {
								portrait_dwarven_clothing_trigger = yes
								portrait_fp1_dwarven_clothing_trigger = no
							}
							
							AND = {
								portrait_northern_clothing_trigger = yes
								portrait_fp1_norse_clothing_trigger = no
							}
						}
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_duchy
								AND = {
									has_government = republic_government
									primary_title.tier > 2
								}
								AND = { is_ruler = yes has_government = theocracy_government }
							}
							OR = {
								portrait_western_clothing_trigger = yes
								
								#Warcraft
								AND = {
									portrait_dwarven_clothing_spouse_trigger = yes
									portrait_fp1_dwarven_clothing_spouse_trigger = no
								}

								# Warcraft
								AND = {
									portrait_northern_clothing_trigger = yes
									portrait_fp1_norse_clothing_spouse_trigger = no
								}
							}
						}
					}
				}
			}
		}
	}


	sp2_western_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = sp2_western_high_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				exists = this
				portrait_can_use_noble_headgear_trigger = yes
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_duchy
							AND = {
								has_government = republic_government
								primary_title.tier > 2
							}
							AND = { is_ruler = yes has_government = theocracy_government }
						}
						NOT = { AND = { is_ruler = yes has_government = mercenary_government  } } # Blocked for mercenaries
						OR = {
							portrait_sp2_western_clothing_trigger = yes
							AND = {
								portrait_northern_clothing_trigger = yes
								OR = {
									portrait_fp1_norse_clothing_trigger = no
									AND = {
										portrait_fp1_norse_clothing_trigger = yes
										NOR = {
											has_government = tribal_government
											like_norse_religion_trigger = yes
										}
									}
								}
							}
						}
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_duchy
								AND = {
									has_government = republic_government
									primary_title.tier > 2
								}
								AND = { is_ruler = yes has_government = theocracy_government }
							}
							OR = {
								portrait_sp2_western_clothing_spouse_trigger = yes
								OR = {
									portrait_fp1_norse_clothing_spouse_trigger = no
									AND = {
										portrait_fp1_norse_clothing_spouse_trigger = yes
										NOR = {
											has_government = tribal_government
											like_norse_religion_trigger = yes
										}
									}
								}
							}
						}
					}
				}
			}
		}
	}

	western_royalty = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = western_royalty
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				exists = this
				portrait_can_use_noble_headgear_trigger = yes
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_kingdom
							AND = { is_ruler = yes has_government = theocracy_government }
							AND = {
								highest_held_title_tier = tier_empire
								portrait_northern_clothing_trigger = yes
								portrait_fp1_norse_clothing_trigger = no
							}
						}
						NOT = { AND = { is_ruler = yes has_government = mercenary_government  } } # Blocked for mercenaries
						NOT = { has_government = republic_government }
						OR = {
							portrait_western_clothing_trigger = yes
							AND = {
								portrait_northern_clothing_trigger = yes
								portrait_fp1_norse_clothing_trigger = no
							}
							AND = {
								portrait_fp1_norse_clothing_trigger = yes
								NOR = {
									has_government = tribal_government
									like_germanic_religion_trigger = yes
								}
							}
						}
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_kingdom
								AND = { is_ruler = yes has_government = theocracy_government }
								AND = {
									highest_held_title_tier = tier_empire
									portrait_northern_clothing_spouse_trigger = yes
									portrait_fp1_norse_clothing_spouse_trigger = no
								}
							}
							NOT = { AND = { is_ruler = yes has_government = mercenary_government  } } # Blocked for mercenaries
							NOT = { has_government = republic_government }
							OR = {
								portrait_western_clothing_spouse_trigger = yes
								AND = {
									portrait_northern_clothing_spouse_trigger = yes
									portrait_fp1_norse_clothing_spouse_trigger = no
								}
								AND = {
									portrait_fp1_norse_clothing_spouse_trigger = yes
									NOR = {
										has_government = tribal_government
										like_germanic_religion_trigger = yes
									}
								}
							}
						}
					}
				}
			}
		}
	}

	ep1_western_royalty = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = ep1_western_royalty
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				exists = this
				portrait_can_use_noble_headgear_trigger = yes
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_kingdom
							AND = { is_ruler = yes has_government = theocracy_government }
							AND = {
								highest_held_title_tier = tier_empire
								portrait_northern_clothing_trigger = yes
								portrait_fp1_norse_clothing_trigger = no
							}
						}
						NOT = { AND = { is_ruler = yes has_government = mercenary_government  } } # Blocked for mercenaries
						NOT = { has_government = republic_government }
						OR = {
							portrait_western_clothing_trigger = yes
							AND = {
								portrait_northern_clothing_trigger = yes
								portrait_fp1_norse_clothing_trigger = no
							}
							AND = {
								portrait_fp1_norse_clothing_trigger = yes
								NOR = {
									has_government = tribal_government
									like_germanic_religion_trigger = yes
								}
							}
						}
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_kingdom
								AND = { is_ruler = yes has_government = theocracy_government }
								AND = {
									highest_held_title_tier = tier_empire
									portrait_northern_clothing_spouse_trigger = yes
									portrait_fp1_norse_clothing_spouse_trigger = no
								}
							}
							NOT = { AND = { is_ruler = yes has_government = mercenary_government  } } # Blocked for mercenaries
							NOT = { has_government = republic_government }
							OR = {
								portrait_western_clothing_spouse_trigger = yes
								AND = {
									portrait_northern_clothing_spouse_trigger = yes
									portrait_fp1_norse_clothing_spouse_trigger = no
								}
								AND = {
									portrait_fp1_norse_clothing_spouse_trigger = yes
									NOR = {
										has_government = tribal_government
										like_germanic_religion_trigger = yes
									}
								}
							}
						}
					}
				}
			}
			modifier = {
				factor = 0
				NOT = {
					has_ep1_dlc_trigger = yes
				}
			}
		}
	}

	# Commented as it can create desync in multiplayer game
	#reward_western_royalty = {
	#	dna_modifiers = {
	#		accessory = {
	#			mode = add
	#			gene = headgear
	#			template = ep1_western_royalty
	#			range = { 0 1 } # For the randomness to work correctly
	#		}
	#	}
	#	weight = {
	#		base = 0
	#		modifier = {
	#			add = 50
	#			exists = this
	#			portrait_can_use_noble_headgear_trigger = yes
	#			OR = {
	#				AND = {
	#					OR = {
	#						highest_held_title_tier = tier_kingdom
	#						AND = { is_ruler = yes has_government = theocracy_government }
	#						AND = {
	#							highest_held_title_tier = tier_empire
	#							portrait_northern_clothing_trigger = yes
	#							portrait_fp1_norse_clothing_trigger = no
	#						}
	#					}
	#					NOT = { AND = { is_ruler = yes has_government = mercenary_government  } } # Blocked for mercenaries
	#					NOT = { has_government = republic_government }
	#					OR = {
	#						portrait_western_clothing_trigger = yes
	#						AND = {
	#							portrait_northern_clothing_trigger = yes
	#							portrait_fp1_norse_clothing_trigger = no
	#						}
	#						AND = {
	#							portrait_fp1_norse_clothing_trigger = yes
	#							NOR = {
	#								has_government = tribal_government
	#								religion = religion:germanic_religion
	#							}
	#						}
	#					}
	#				}
	#				AND = {
	#					exists = primary_spouse
	#					OR = {
	#						is_ruler = no
	#						highest_held_title_tier = tier_barony
	#					}
	#					primary_spouse = {
	#						OR = {
	#							highest_held_title_tier = tier_kingdom
	#							AND = { is_ruler = yes has_government = theocracy_government }
	#							AND = {
	#								highest_held_title_tier = tier_empire
	#								portrait_northern_clothing_spouse_trigger = yes
	#								portrait_fp1_norse_clothing_spouse_trigger = no
	#							}
	#						}
	#						NOT = { AND = { is_ruler = yes has_government = mercenary_government  } } # Blocked for mercenaries
	#						NOT = { has_government = republic_government }
	#						OR = {
	#							portrait_western_clothing_spouse_trigger = yes
	#							AND = {
	#								portrait_northern_clothing_spouse_trigger = yes
	#								portrait_fp1_norse_clothing_spouse_trigger = no
	#							}
	#							AND = {
	#								portrait_fp1_norse_clothing_spouse_trigger = yes
	#								NOR = {
	#									has_government = tribal_government
	#									religion = religion:germanic_religion
	#								}
	#							}
	#						}
	#					}
	#				}
	#			}
	#		}
	#		modifier = {
	#			factor = 0
	#			NOT = {
	#				has_reward_item = newsletter_crown
	#			}
	#		}
	#	}
	#}

	ep1_italian_royalty = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = ep1_italian_royalty
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				exists = this
				portrait_can_use_noble_headgear_trigger = yes
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_kingdom
							AND = { is_ruler = yes has_government = theocracy_government }
							AND = {
								highest_held_title_tier = tier_empire
								portrait_northern_clothing_trigger = yes
								portrait_fp1_norse_clothing_trigger = no
							}
						}
						NOT = { AND = { is_ruler = yes has_government = mercenary_government  } } # Blocked for mercenaries
						NOT = { has_government = republic_government }
						OR = {
							portrait_western_clothing_trigger = yes
							
							#Warcraft
							AND = {
								portrait_dwarven_clothing_trigger = yes
								portrait_fp1_dwarven_clothing_trigger = no
							}
							
							AND = {
								portrait_northern_clothing_trigger = yes
								portrait_fp1_norse_clothing_trigger = no
							}
						}
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_kingdom
								AND = { is_ruler = yes has_government = theocracy_government }
								AND = {
									highest_held_title_tier = tier_empire
									portrait_northern_clothing_spouse_trigger = yes
									portrait_fp1_norse_clothing_spouse_trigger = no
								}
							}
							NOT = { AND = { is_ruler = yes has_government = mercenary_government  } } # Blocked for mercenaries
							NOT = { has_government = republic_government }
							OR = {
								portrait_western_clothing_spouse_trigger = yes
								
								#Warcraft
								AND = {
									portrait_dwarven_clothing_spouse_trigger = yes
									portrait_fp1_dwarven_clothing_spouse_trigger = no
								}
								
								AND = {
									portrait_northern_clothing_spouse_trigger = yes
									portrait_fp1_norse_clothing_spouse_trigger = no
								}
							}
						}
					}
				}
			}
			modifier = {
				factor = 0
				NOT = {
					culture = {
						like_heritage_latin_trigger = yes
					}
				}
			}
			modifier = {
				factor = 0
				NOT = {
					has_ep1_dlc_trigger = yes
				}
			}
		}
	}

	western_imperial = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = western_imperial
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 5
				exists = this
				portrait_can_use_noble_headgear_trigger = yes
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_empire
							AND = { is_ruler = yes has_government = theocracy_government }
						}
						NOT = { AND = { is_ruler = yes has_government = mercenary_government  } } # Blocked for mercenaries
						NOT = { has_government = republic_government }
						
						OR = {
							portrait_western_clothing_trigger = yes
						
							#Warcraft
							portrait_dwarven_clothing_trigger = yes
						}
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_empire
								AND = { is_ruler = yes has_government = theocracy_government }
							}
							NOT = { AND = { is_ruler = yes has_government = mercenary_government  } } # Blocked for mercenaries
							NOT = { has_government = republic_government }
							
							OR = {
								portrait_western_clothing_spouse_trigger = yes
							
								#Warcraft
								portrait_dwarven_clothing_spouse_trigger = yes
							}
						}
					}
				}
			}
		}
	}

	# Warcraft
	scourge_high_cultists = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = scourge_high_cultist_headgears
				range = { 0 1 } # For the randomness to work correctly
			}
		}		
		weight = {
			base = 0
			modifier = {
				add = 100
				portrait_scourge_clothing_trigger = yes
				exists = liege_or_court_owner.cp:councillor_spymaster
				this = liege_or_court_owner.cp:councillor_spymaster
			}
		}
	}

	western_war = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = western_war
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 100
				exists = this
				portrait_wear_helmet_trigger = yes
				OR = {
					# Warcraft
					portrait_goblin_clothing_trigger = yes
					portrait_scourge_clothing_trigger = yes
					
					portrait_western_clothing_trigger = yes
				}

				NOR = {
				    AND = {
				        like_christianity_religion_trigger = yes
				        has_government = holy_order_government
				    }
				    AND = {
				        like_christianity_religion_trigger = yes
				        is_landed = no
				        portrait_wear_armor_trigger = yes
				        exists = liege
				        liege = {
				            has_government = holy_order_government
				        }
				    }
				    AND = {
				        like_christianity_religion_trigger = yes
				        portrait_wear_armor_trigger = yes
				        OR = {
				            any_character_war = {
				                OR = {
				                    using_cb = undirected_great_holy_war
				                    using_cb = directed_great_holy_war
				                }
				                is_attacker = prev
				            }
				            any_liege_or_above = {
				                faith = prev.faith
				                any_character_war = {
				                    OR = {
				                        using_cb = undirected_great_holy_war
				                        using_cb = directed_great_holy_war
				                    }
				                    is_attacker = prev
				                }
				            }
				        }
				    }
				}
			}
		}
	}


	crusades_western_war = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = crusades_western_war
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 110
				exists = this
				portrait_wear_helmet_trigger = yes
				OR = {
				    AND = {
				        like_christianity_religion_trigger = yes
				        has_government = holy_order_government
				    }
				    AND = {
				        like_christianity_religion_trigger = yes
				        is_landed = no
				        portrait_wear_armor_trigger = yes
				        exists = liege
				        liege = {
				            has_government = holy_order_government
				        }
				    }
				    AND = {
				        like_christianity_religion_trigger = yes
				        portrait_wear_armor_trigger = yes
				        OR = {
				            any_character_war = {
				                OR = {
				                    using_cb = undirected_great_holy_war
				                    using_cb = directed_great_holy_war
				                }
				                is_attacker = prev
				            }
				            any_liege_or_above = {
				                faith = prev.faith
				                any_character_war = {
				                    OR = {
				                        using_cb = undirected_great_holy_war
				                        using_cb = directed_great_holy_war
				                    }
				                    is_attacker = prev
				                }
				            }
				        }
				    }
				}
			}
		}
	}

	# adapted from 1.8, check if modifiers need to be changed for GoA
	western_stealth = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = western_stealth
				range = { 0 1 } # For the randomness to work correctly
			}
		}
		outfit_tags = { 
			western_stealth
			western_stealth_hood 
		}
		weight = {
			base = 0
			modifier = {
				add = 110
				exists = this
				has_character_flag = use_stealth_clothes
				OR = {
					portrait_western_clothing_trigger = yes
					portrait_mena_clothing_trigger = yes
					portrait_byzantine_clothing_trigger = yes
					portrait_northern_clothing_trigger = yes
				}
			}
		}
	}



## Byzantine ##


	byzantine_commoners = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = byzantine_common
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 80
				exists = this
				portrait_can_use_noble_headgear_trigger = no
				portrait_byzantine_clothing_trigger = yes
			}
			modifier = {
				add = 20
				exists = this
				highest_held_title_tier < tier_county
				NOR = {
					AND = {
						exists = primary_spouse
						primary_spouse = {
							highest_held_title_tier > tier_county
						}
					}
					AND = {
						has_government = republic_government
						primary_title.tier > 1
					}
					AND = { is_ruler = yes has_government = theocracy_government }
				}
				portrait_byzantine_clothing_spouse_trigger = yes
			}
			
			# Warcraft
			modifier = {
				factor = 0
				prefer_no_lowborn_headgear = yes
			}
		}
	}

	byzantine_low_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = byzantine_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				exists = this
				portrait_can_use_noble_headgear_trigger = yes
				OR = {
					AND = {
						highest_held_title_tier = tier_county
						NOR = {
							# has_dynasty = no
							AND = {
								has_government = republic_government
								primary_title.tier > 1
							}
							AND = { is_ruler = yes has_government = theocracy_government }
						}
						portrait_byzantine_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							highest_held_title_tier = tier_county
							NOR = {
								# has_dynasty = no
								AND = {
									has_government = republic_government
									primary_title.tier > 1
								}
								AND = { is_ruler = yes has_government = theocracy_government }
							}
							portrait_byzantine_clothing_spouse_trigger = yes
						}
					}
				}

			}
		}
	}

	byzantine_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = byzantine_high_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
		}		
		weight = {
			base = 0
			modifier = {
				add = 50
				exists = this
				portrait_can_use_noble_headgear_trigger = yes
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_duchy
							AND = {
								has_government = republic_government
								primary_title.tier > 2
							}
							AND = { is_ruler = yes has_government = theocracy_government }
						}
						NOT = { AND = { is_ruler = yes has_government = mercenary_government  } } # Blocked for mercenaries
						portrait_byzantine_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_duchy
								AND = {
									has_government = republic_government
									primary_title.tier > 2
								}
								AND = { is_ruler = yes has_government = theocracy_government }
							}
							portrait_byzantine_clothing_spouse_trigger = yes
						}
					}
				}

			}
		}
	}

	byzantine_royalty = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = byzantine_royalty
				range = { 0 1 } # For the randomness to work correctly
			}
		}		
		weight = {
			base = 0
			modifier = {
				add = 50
				exists = this
				portrait_can_use_noble_headgear_trigger = yes
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_kingdom
							AND = { is_ruler = yes has_government = theocracy_government }
						}
						NOT = { AND = { is_ruler = yes has_government = mercenary_government  } } # Blocked for mercenaries
						NOT = { has_government = republic_government }
						portrait_byzantine_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						is_ruler = no
						primary_spouse = {
							OR = {
								highest_held_title_tier >= tier_kingdom
								AND = { is_ruler = yes has_government = theocracy_government }
							}
							portrait_byzantine_clothing_spouse_trigger = yes
						}
					}
				}

			}
		}
	}

	byzantine_imperial = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = byzantine_imperial
				range = { 0 1 } # For the randomness to work correctly
			}
		}		
		weight = {
			base = 0
			modifier = {
				add = 50
				exists = this
				portrait_can_use_noble_headgear_trigger = yes
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_empire
							AND = { is_ruler = yes has_government = theocracy_government }
						}
						NOT = { AND = { is_ruler = yes has_government = mercenary_government  } } # Blocked for mercenaries
						NOT = { has_government = republic_government }
						portrait_byzantine_clothing_trigger = yes
					}
					#AND = {
					#	exists = primary_spouse
					#	is_ruler = no
					#	primary_spouse = {
					#		OR = {
					#			highest_held_title_tier = tier_empire
					#			AND = { is_ruler = yes has_government = theocracy_government }
					#		}
					#		NOT = { AND = { is_ruler = yes has_government = mercenary_government  } } # Blocked for mercenaries
					#		NOT = { has_government = republic_government }
					#		portrait_byzantine_clothing_trigger = yes
					#	}
					#}
				}

			}
		}
	}

	ep1_byzantine_imperial = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = ep1_byzantine_imperial
				range = { 0 1 } # For the randomness to work correctly
			}
		}		
		weight = {
			base = 0
			modifier = {
				add = 50
				exists = this
				portrait_can_use_noble_headgear_trigger = yes
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_empire
							AND = { is_ruler = yes has_government = theocracy_government }
						}
						NOT = { AND = { is_ruler = yes has_government = mercenary_government  } } # Blocked for mercenaries
						NOT = { has_government = republic_government }
						portrait_byzantine_clothing_trigger = yes
					}
					#AND = {
					#	exists = primary_spouse
					#	is_ruler = no
					#	primary_spouse = {
					#		OR = {
					#			highest_held_title_tier = tier_empire
					#			AND = { is_ruler = yes has_government = theocracy_government }
					#		}
					#		NOT = { AND = { is_ruler = yes has_government = mercenary_government  } } # Blocked for mercenaries
					#		NOT = { has_government = republic_government }
					#		portrait_byzantine_clothing_trigger = yes
					#	}
					#}
				}

			}
			modifier = {
				factor = 0
				# Warcraft
				always = yes
			}
			modifier = {
				factor = 0
				NOT = {
					has_ep1_dlc_trigger = yes
				}
			}
		}
	}

	byzantine_war = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = byzantine_war
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 100
				exists = this
				portrait_wear_helmet_trigger = yes
				OR = {
					# Warcraft
					portrait_ogre_clothing_trigger = yes
					
					portrait_byzantine_clothing_trigger = yes
				}
				
				NOR = {
				    AND = {
				        like_christianity_religion_trigger = yes
				        has_government = holy_order_government
				    }
				    AND = {
				        like_christianity_religion_trigger = yes
				        is_landed = no
				        portrait_wear_armor_trigger = yes
				        exists = liege
				        liege = {
				            has_government = holy_order_government
				        }
				    }
				    AND = {
				        like_christianity_religion_trigger = yes
				        portrait_wear_armor_trigger = yes
				        OR = {
				            any_character_war = {
				                OR = {
				                    using_cb = undirected_great_holy_war
				                    using_cb = directed_great_holy_war
				                }
				                is_attacker = prev
				            }
				            any_liege_or_above = {
				                faith = prev.faith
				                any_character_war = {
				                    OR = {
				                        using_cb = undirected_great_holy_war
				                        using_cb = directed_great_holy_war
				                    }
				                    is_attacker = prev
				                }
				            }
				        }
				    }
				}
			}
		}
	}

## INDIAN ##

	indian_commoners = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = indian_common
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 80
				exists = this
				portrait_can_use_noble_headgear_trigger = no
				OR = {
					portrait_indian_clothing_trigger = yes
					
					# Warcraft
					portrait_draenei_clothing_trigger = yes
				}
					
			}
			modifier = { # Non-european jesters should not use the jester hat
				add = 1000
				has_court_position = court_jester_court_position
				portrait_indian_clothing_trigger = yes
				NOR = {
					portrait_western_clothing_trigger = yes
					portrait_byzantine_clothing_trigger = yes
					portrait_northern_clothing_trigger = yes
				}
			}
			modifier = {
				add = 20
				exists = this
				highest_held_title_tier < tier_county
				NOR = {
					AND = {
						exists = primary_spouse
						primary_spouse = {
							highest_held_title_tier > tier_county
						}
					}
					AND = {
						has_government = republic_government
						primary_title.tier > 1
					}
					AND = { is_ruler = yes has_government = theocracy_government }
				}
				OR = {
					portrait_indian_clothing_spouse_trigger = yes
					
					# Warcraft
					portrait_draenei_clothing_trigger = yes
				}
			}
			
			# Warcraft
			modifier = {
				factor = 0
				prefer_no_lowborn_headgear = yes
			}
		}
	}

	indian_low_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = indian_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				exists = this
				portrait_can_use_noble_headgear_trigger = yes
				OR = {
					AND = {
						highest_held_title_tier = tier_county
						NOR = {
							# has_dynasty = no
							AND = {
								has_government = republic_government
								primary_title.tier > 1
							}
							AND = { is_ruler = yes has_government = theocracy_government }
						}
						OR = {
							portrait_indian_clothing_trigger = yes
							
							# Warcraft
							portrait_draenei_clothing_trigger = yes
						}
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							highest_held_title_tier = tier_county
							NOR = {
								# has_dynasty = no
								AND = {
									has_government = republic_government
									primary_title.tier > 1
								}
								AND = { is_ruler = yes has_government = theocracy_government }
							}
							OR = {
								portrait_indian_clothing_spouse_trigger = yes
								
								# Warcraft
								portrait_draenei_clothing_spouse_trigger = yes
							}
						}
					}
				}

			}
		}
	}

	indian_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = indian_high_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
		}		
		weight = {
			base = 0
			modifier = {
				add = 50
				exists = this
				portrait_can_use_noble_headgear_trigger = yes
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_duchy
							AND = {
								has_government = republic_government
								primary_title.tier > 2
							}
							AND = { is_ruler = yes has_government = theocracy_government }
						}
						NOT = { AND = { is_ruler = yes has_government = mercenary_government  } } # Blocked for mercenaries
						
						OR = {
							portrait_indian_clothing_trigger = yes
							
							# Warcraft
							portrait_draenei_clothing_trigger = yes
						}
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_duchy
								AND = {
									has_government = republic_government
									primary_title.tier > 2
								}
								AND = { is_ruler = yes has_government = theocracy_government }
							}
							
							OR = {
								portrait_indian_clothing_spouse_trigger = yes
								
								# Warcraft
								portrait_draenei_clothing_spouse_trigger = yes
							}
						}
					}
				}				

			}
		}
	}

	indian_royalty = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = indian_royalty
				range = { 0 1 } # For the randomness to work correctly
			}
		}		
		weight = {
			base = 0
			modifier = {
				add = 50
				exists = this
				portrait_can_use_noble_headgear_trigger = yes
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_kingdom
							AND = { is_ruler = yes has_government = theocracy_government }
						}
						NOT = { AND = { is_ruler = yes has_government = mercenary_government  } } # Blocked for mercenaries
						NOT = { has_government = republic_government }
						
						OR = {
							portrait_indian_clothing_trigger = yes
							
							# Warcraft
							portrait_draenei_clothing_trigger = yes
						}
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_kingdom
								AND = { is_ruler = yes has_government = theocracy_government }
							}
							NOT = { AND = { is_ruler = yes has_government = mercenary_government  } } # Blocked for mercenaries
							NOT = { has_government = republic_government }
							
							OR = {
								portrait_indian_clothing_spouse_trigger = yes
								
								# Warcraft
								portrait_draenei_clothing_spouse_trigger = yes
							}
						}
					}
				}				

			}
			modifier = {
				factor = 0
				exists = this
				has_ep1_dlc_trigger = yes
				OR = {
					highest_held_title_tier = tier_kingdom
					AND = { is_ruler = yes has_government = theocracy_government }
				}
				NOT = { AND = { is_ruler = yes has_government = mercenary_government  } } # Blocked for mercenaries
				NOT = { has_government = republic_government }
				culture = {
					like_heritage_burman_trigger = yes
				}
			}
		}
	}

	ep1_indian_royalty = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = ep1_indian_royalty
				range = { 0 1 } # For the randomness to work correctly
			}
		}		
		weight = {
			base = 0
			modifier = {
				add = 50
				exists = this
				portrait_can_use_noble_headgear_trigger = yes
				OR = {
					highest_held_title_tier = tier_kingdom
					AND = { is_ruler = yes has_government = theocracy_government }
				}
				NOT = { AND = { is_ruler = yes has_government = mercenary_government  } } # Blocked for mercenaries
				NOT = { has_government = republic_government }
				portrait_indian_clothing_trigger = yes				

			}
			modifier = {
				factor = 0
				NOT = {
					has_ep1_dlc_trigger = yes
				}
			}
		}
	}

	indian_imperial = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = indian_imperial
				range = { 0 1 } # For the randomness to work correctly
			}
		}		
		weight = {
			base = 0
			modifier = {
				add = 50
				exists = this
				portrait_can_use_noble_headgear_trigger = yes
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_empire
							AND = { is_ruler = yes has_government = theocracy_government }
						}
						NOT = { AND = { is_ruler = yes has_government = mercenary_government  } } # Blocked for mercenaries
						NOT = { has_government = republic_government }
						
						OR = {
							portrait_indian_clothing_trigger = yes
							
							# Warcraft
							portrait_draenei_clothing_trigger = yes
						}
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_empire
								AND = { is_ruler = yes has_government = theocracy_government }
							}
							NOT = { AND = { is_ruler = yes has_government = mercenary_government  } } # Blocked for mercenaries
							NOT = { has_government = republic_government }
							
							OR = {
								portrait_indian_clothing_spouse_trigger = yes
								
								# Warcraft
								portrait_draenei_clothing_spouse_trigger = yes
							}
						}
					}
				}				

			}
			modifier = {
				factor = 0
				exists = this
				has_ep1_dlc_trigger = yes
				OR = {
					highest_held_title_tier = tier_empire
					AND = { is_ruler = yes has_government = theocracy_government }
				}
				NOT = { AND = { is_ruler = yes has_government = mercenary_government  } } # Blocked for mercenaries
				NOT = { has_government = republic_government }
				culture = {
					like_heritage_burman_trigger = yes
				}
			}
		}
	}

	ep1_indian_imperial = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = ep1_indian_imperial
				range = { 0 1 } # For the randomness to work correctly
			}
		}		
		weight = {
			base = 0
			modifier = {
				add = 50
				exists = this
				portrait_can_use_noble_headgear_trigger = yes
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_empire
							AND = { is_ruler = yes has_government = theocracy_government }
						}
						NOT = { AND = { is_ruler = yes has_government = mercenary_government  } } # Blocked for mercenaries
						NOT = { has_government = republic_government }
						portrait_indian_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_empire
								AND = { is_ruler = yes has_government = theocracy_government }
							}
							NOT = { AND = { is_ruler = yes has_government = mercenary_government  } } # Blocked for mercenaries
							NOT = { has_government = republic_government }
							portrait_indian_clothing_spouse_trigger = yes
						}
					}
				}				

			}
			modifier = {
				factor = 0
				NOT = {
					has_ep1_dlc_trigger = yes
				}
			}
		}
	}

	indian_war = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = indian_war
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 100
				exists = this
				portrait_wear_helmet_trigger = yes
				
				OR = {
					portrait_indian_clothing_trigger = yes
					
					# Warcraft
					portrait_draenei_clothing_trigger = yes
				}
				
				NOR = {
				    AND = {
				        like_christianity_religion_trigger = yes
				        has_government = holy_order_government
				    }
				    AND = {
				        like_christianity_religion_trigger = yes
				        is_landed = no
				        portrait_wear_armor_trigger = yes
				        exists = liege
				        liege = {
				            has_government = holy_order_government
				        }
				    }
				    AND = {
				        like_christianity_religion_trigger = yes
				        portrait_wear_armor_trigger = yes
				        OR = {
				            any_character_war = {
				                OR = {
				                    using_cb = undirected_great_holy_war
				                    using_cb = directed_great_holy_war
				                }
				                is_attacker = prev
				            }
				            any_liege_or_above = {
				                faith = prev.faith
				                any_character_war = {
				                    OR = {
				                        using_cb = undirected_great_holy_war
				                        using_cb = directed_great_holy_war
				                    }
				                    is_attacker = prev
				                }
				            }
				        }
				    }
				}
			}
		}
	}


## MENA ##

	mena_commoners = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = mena_common
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 80
				exists = this
				portrait_can_use_noble_headgear_trigger = no
				portrait_mena_clothing_trigger = yes
			}
			modifier = { # Non-european jesters should not use the jester hat
				add = 1000
				has_court_position = court_jester_court_position
				portrait_mena_clothing_trigger = yes
				NOR = {
					portrait_western_clothing_trigger = yes
					portrait_byzantine_clothing_trigger = yes
					portrait_northern_clothing_trigger = yes
				}
			}
			modifier = {
				add = 20
				exists = this
				highest_held_title_tier < tier_county
				NOR = {
					AND = {
						exists = primary_spouse
						primary_spouse = {
							highest_held_title_tier > tier_county
						}
					}
					has_government = republic_government
					AND = { is_ruler = yes has_government = theocracy_government }
				}
				portrait_mena_clothing_spouse_trigger = yes
			}
			
			# Warcraft
			modifier = {
				factor = 0
				prefer_no_lowborn_headgear = yes
			}
		}
	}

	mena_mayors = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = mena_low_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 60
				exists = this
				highest_held_title_tier < tier_county
				has_government = republic_government
				portrait_mena_clothing_trigger = yes
			}
		}
	}

	mena_low_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = mena_low_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				exists = this
				portrait_can_use_noble_headgear_trigger = yes
				OR = {
					AND = {
						highest_held_title_tier = tier_county
						NOR = {
							# has_dynasty = no
							AND = {
								has_government = republic_government
								primary_title.tier > 1
							}
							AND = { is_ruler = yes has_government = theocracy_government }
						}
						portrait_mena_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							highest_held_title_tier = tier_county
							NOR = {
								# has_dynasty = no
								AND = {
									has_government = republic_government
									primary_title.tier > 1
								}
								AND = { is_ruler = yes has_government = theocracy_government }
							}
							portrait_mena_clothing_spouse_trigger = yes
						}
					}
				}

			}
		}
	}

	mena_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = mena_high_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
		}		
		weight = {
			base = 0
			modifier = {
				add = 50
				exists = this
				portrait_can_use_noble_headgear_trigger = yes
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_duchy
							AND = {
								has_government = republic_government
								primary_title.tier > 2
							}
							AND = { is_ruler = yes has_government = theocracy_government }
						}
						NOT = { AND = { is_ruler = yes has_government = mercenary_government  } } # Blocked for mercenaries
						portrait_mena_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_duchy
								AND = {
									has_government = republic_government
									primary_title.tier > 2
								}
								AND = { is_ruler = yes has_government = theocracy_government }
							}
							portrait_mena_clothing_spouse_trigger = yes
						}
					}
				}

			}
		}
	}

	mena_royalty = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = mena_royalty
				range = { 0 1 } # For the randomness to work correctly
			}
		}		
		weight = {
			base = 0
			modifier = {
				add = 50
				exists = this
				portrait_can_use_noble_headgear_trigger = yes
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_kingdom
							AND = { is_ruler = yes has_government = theocracy_government }
						}
						NOT = { AND = { is_ruler = yes has_government = mercenary_government  } } # Blocked for mercenaries
						NOT = { has_government = republic_government }
						portrait_mena_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_kingdom
								AND = { is_ruler = yes has_government = theocracy_government }
							}
							NOT = { AND = { is_ruler = yes has_government = mercenary_government  } } # Blocked for mercenaries
							NOT = { has_government = republic_government }
							portrait_mena_clothing_spouse_trigger = yes
						}
					}
				}

			}
			modifier = {
				factor = 0
				exists = this
				has_ep1_dlc_trigger = yes
				OR = {
					highest_held_title_tier = tier_kingdom
					AND = { is_ruler = yes has_government = theocracy_government }
				}
				NOT = { AND = { is_ruler = yes has_government = mercenary_government  } } # Blocked for mercenaries
				NOT = { has_government = republic_government }
			}
		}
	}

	ep1_mena_royalty = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = ep1_mena_royalty
				range = { 0 1 } # For the randomness to work correctly
			}
		}		
		weight = {
			base = 0
			modifier = {
				add = 50
				exists = this
				portrait_can_use_noble_headgear_trigger = yes
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_kingdom
							AND = { is_ruler = yes has_government = theocracy_government }
						}
						NOT = { AND = { is_ruler = yes has_government = mercenary_government  } } # Blocked for mercenaries
						NOT = { has_government = republic_government }
						portrait_mena_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						is_male = yes
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_kingdom
								AND = { is_ruler = yes has_government = theocracy_government }
							}
							NOT = { AND = { is_ruler = yes has_government = mercenary_government  } } # Blocked for mercenaries
							NOT = { has_government = republic_government }
							portrait_mena_clothing_spouse_trigger = yes
						}
					}
				}

			}
			modifier = {
				factor = 0
				exists = this
				has_ep1_dlc_trigger = yes
				OR = {
					highest_held_title_tier = tier_kingdom
					AND = { is_ruler = yes has_government = theocracy_government }
				}
				NOT = { AND = { is_ruler = yes has_government = mercenary_government  } } # Blocked for mercenaries
				NOT = { has_government = republic_government }
			}
			modifier = {
				factor = 0
				NOT = {
					has_ep1_dlc_trigger = yes
				}
			}
		}
	}

	mena_imperial = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = mena_imperial
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				exists = this
				portrait_can_use_noble_headgear_trigger = yes
				highest_held_title_tier = tier_empire
				NOR = {
					AND = { is_ruler = yes has_government = mercenary_government  }
					has_government = republic_government
					AND = { is_ruler = yes has_government = theocracy_government }
				}
				portrait_mena_clothing_trigger = yes
			}
			modifier = {
				factor = 0
				exists = this
				has_ep1_dlc_trigger = yes
				OR = {
					highest_held_title_tier = tier_empire
					AND = { is_ruler = yes has_government = theocracy_government }
				}
				NOT = { AND = { is_ruler = yes has_government = mercenary_government  } } # Blocked for mercenaries
				NOT = { has_government = republic_government }
				culture = {
					like_heritage_iranian_trigger = yes
				}
			}
		}
	}

	ep1_persian_imperial = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = ep1_persian_imperial
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				exists = this
				culture = {
					like_heritage_iranian_trigger = yes
				}
				portrait_can_use_noble_headgear_trigger = yes
				highest_held_title_tier = tier_empire
				NOR = {
					AND = { is_ruler = yes has_government = mercenary_government  }
					has_government = republic_government
					AND = { is_ruler = yes has_government = theocracy_government }
				}
				portrait_mena_clothing_trigger = yes
			}
			modifier = {
				factor = 0
				NOT = {
					has_ep1_dlc_trigger = yes
				}
			}
		}
	}

	mena_war = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = mena_war
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 100
				exists = this
				portrait_wear_helmet_trigger = yes
				portrait_mena_clothing_trigger = yes
				
				NOR = {
				    AND = {
				        like_christianity_religion_trigger = yes
				        has_government = holy_order_government
				    }
				    AND = {
				        like_christianity_religion_trigger = yes
				        is_landed = no
				        portrait_wear_armor_trigger = yes
				        exists = liege
				        liege = {
				            has_government = holy_order_government
				        }
				    }
				    AND = {
				        like_christianity_religion_trigger = yes
				        portrait_wear_armor_trigger = yes
				        OR = {
				            any_character_war = {
				                OR = {
				                    using_cb = undirected_great_holy_war
				                    using_cb = directed_great_holy_war
				                }
				                is_attacker = prev
				            }
				            any_liege_or_above = {
				                faith = prev.faith
				                any_character_war = {
				                    OR = {
				                        using_cb = undirected_great_holy_war
				                        using_cb = directed_great_holy_war
				                    }
				                    is_attacker = prev
				                }
				            }
				        }
				    }
				}
			}
		}
	}
	
	# adapted from 1.8, check if modifiers need changing for GoA
	mena_stealth = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = mena_stealth
				range = { 0 1 } # For the randomness to work correctly
			}
		}
		outfit_tags = { 
			mena_stealth
			mena_stealth_hood 
		}
		weight = {
			base = 0
			modifier = {
				add = 110
				exists = this
				has_character_flag = use_stealth_clothes
				OR = {
					portrait_mena_clothing_trigger = yes
					portrait_indian_clothing_trigger = yes
					portrait_steppe_clothing_trigger = yes
					portrait_african_clothing_trigger = yes
				}
			}
		}
	}
	
## DDE ABBASID ##

	dde_abbasid_commoners = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = dde_abbasid_common
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 20
				exists = this
				 highest_held_title_tier < tier_county
				 NOR = {
					AND = {
						exists = primary_spouse
						primary_spouse = {
							highest_held_title_tier > tier_county
						}
					}
				 	has_government = republic_government
				 	AND = { is_ruler = yes has_government = theocracy_government }
				}
				portrait_dde_abbasid_clothing_spouse_trigger = yes
			}
			
			# Warcraft
			modifier = {
				factor = 0
				prefer_no_lowborn_headgear = yes
			}
		}
	}

	dde_abbasid_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = dde_abbasid_high_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
		}		
		weight = {
			base = 0
			modifier = {
				add = 50
				exists = this
				portrait_can_use_noble_headgear_trigger = yes
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_duchy
							AND = {
								has_government = republic_government
								primary_title.tier > 2
							}
							AND = { is_ruler = yes has_government = theocracy_government }
						}
						NOT = { AND = { is_ruler = yes has_government = mercenary_government  } } # Blocked for mercenaries
						portrait_dde_abbasid_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_duchy
								AND = {
									has_government = republic_government
									primary_title.tier > 2
								}
								AND = { is_ruler = yes has_government = theocracy_government }
							}
							portrait_dde_abbasid_clothing_spouse_trigger = yes
						}
					}
				}

			}
		}
	}

	dde_abbasid_royalty = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = dde_abbasid_royalty
				range = { 0 1 } # For the randomness to work correctly
			}
		}		
		weight = {
			base = 0
			modifier = {
				add = 50
				exists = this
				portrait_can_use_noble_headgear_trigger = yes
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_kingdom
							AND = { is_ruler = yes has_government = theocracy_government }
						}
						NOT = { AND = { is_ruler = yes has_government = mercenary_government  } } # Blocked for mercenaries
						NOT = { has_government = republic_government }
						portrait_dde_abbasid_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_kingdom
								AND = { is_ruler = yes has_government = theocracy_government }
							}
							NOT = { AND = { is_ruler = yes has_government = mercenary_government  } } # Blocked for mercenaries
							NOT = { has_government = republic_government }
							portrait_dde_abbasid_clothing_spouse_trigger = yes
						}
					}
				}

			}
		}
	}

	dde_abbasid_imperial = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = dde_abbasid_imperial
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 100 # pick over mena
				exists = this
				portrait_can_use_noble_headgear_trigger = yes
				highest_held_title_tier = tier_empire
				NOR = {
					AND = { is_ruler = yes has_government = mercenary_government  }
					has_government = republic_government
					AND = { is_ruler = yes has_government = theocracy_government }
				}
				portrait_dde_abbasid_clothing_trigger = yes
			}
		}
	}

	dde_abbasid_war = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = dde_abbasid_war
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 101 # slightly higher than mena
				exists = this
				portrait_can_use_noble_headgear_trigger = yes
				OR = { # This helmet is really fancy & gilded - it's nothing for commoners. We allow Dukes+ to use it sometimes, just because it suits them!
					AND = {
						has_council_position = councillor_marshal
						OR = {
							is_landed = no
							primary_title.tier >= tier_duchy
						}
					}
					AND = {
						is_commanding_army = yes
						AND = {
							exists = primary_title
							primary_title.tier >= tier_duchy
						}
					}
				}
				portrait_mena_clothing_trigger = yes
				
				NOR = {
				    AND = {
				        like_christianity_religion_trigger = yes
				        has_government = holy_order_government
				    }
				    AND = {
				        like_christianity_religion_trigger = yes
				        is_landed = no
				        portrait_wear_armor_trigger = yes
				        exists = liege
				        liege = {
				            has_government = holy_order_government
				        }
				    }
				    AND = {
				        like_christianity_religion_trigger = yes
				        portrait_wear_armor_trigger = yes
				        OR = {
				            any_character_war = {
				                OR = {
				                    using_cb = undirected_great_holy_war
				                    using_cb = directed_great_holy_war
				                }
				                is_attacker = prev
				            }
				            any_liege_or_above = {
				                faith = prev.faith
				                any_character_war = {
				                    OR = {
				                        using_cb = undirected_great_holy_war
				                        using_cb = directed_great_holy_war
				                    }
				                    is_attacker = prev
				                }
				            }
				        }
				    }
				}
			}
		}
	}


## Steppe ##

	steppe_commoners = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = steppe_common
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 80
				exists = this
				portrait_can_use_noble_headgear_trigger = no
				OR = {
					portrait_steppe_clothing_trigger = yes
					
					# Warcraft
					portrait_night_elven_clothing_trigger = yes
				}
			}
			modifier = { # Non-european jesters should not use the jester hat
				add = 1000
				has_court_position = court_jester_court_position
				portrait_steppe_clothing_trigger = yes
				NOR = {
					portrait_western_clothing_trigger = yes
					portrait_byzantine_clothing_trigger = yes
					portrait_northern_clothing_trigger = yes
				}
			}
			modifier = {
				add = 20
				exists = this
				highest_held_title_tier < tier_county
				NOR = {
					AND = {
						exists = primary_spouse
						primary_spouse = {
							highest_held_title_tier > tier_county
						}
					}
					AND = {
						has_government = republic_government
						primary_title.tier > 1
					}
					AND = { is_ruler = yes has_government = theocracy_government }
				}
				portrait_steppe_clothing_spouse_trigger = yes
			}
			
			# Warcraft
			modifier = {
				factor = 0
				prefer_no_lowborn_headgear = yes
			}
		}
	}

	steppe_low_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = steppe_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
		}		
		weight = {
			base = 0
			modifier = {
				add = 50
				exists = this
				portrait_can_use_noble_headgear_trigger = yes
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_duchy
							AND = {
								has_government = republic_government
								primary_title.tier > 1
							}
							AND = { is_ruler = yes has_government = theocracy_government }
						}
						NOT = { AND = { is_ruler = yes has_government = mercenary_government  } } # Blocked for mercenaries
						portrait_steppe_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_duchy
								AND = {
									has_government = republic_government
									primary_title.tier > 1
								}
								AND = { is_ruler = yes has_government = theocracy_government }
							}
							portrait_steppe_clothing_trigger = yes
						}
					}
				}

			}
		}
	}

	steppe_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = steppe_high_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
		}		
		weight = {
			base = 0
			modifier = {
				add = 50
				exists = this
				portrait_can_use_noble_headgear_trigger = yes
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_duchy
							AND = {
								has_government = republic_government
								primary_title.tier > 2
							}
							AND = { is_ruler = yes has_government = theocracy_government }
						}
						NOT = { AND = { is_ruler = yes has_government = mercenary_government  } } # Blocked for mercenaries
						portrait_steppe_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_duchy
								AND = {
									has_government = republic_government
									primary_title.tier > 2
								}
								AND = { is_ruler = yes has_government = theocracy_government }
							}
							portrait_steppe_clothing_spouse_trigger = yes
						}
					}
				}

			}
		}
	}

	steppe_royalty = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = steppe_royalty
				range = { 0 1 } # For the randomness to work correctly
			}
		}		
		weight = {
			base = 0
			modifier = {
				add = 50
				exists = this
				portrait_can_use_noble_headgear_trigger = yes
				OR = {
					AND = {
						OR = {
							highest_held_title_tier > tier_duchy
							AND = { is_ruler = yes has_government = theocracy_government }
						}
						NOT = { AND = { is_ruler = yes has_government = mercenary_government  } } # Blocked for mercenaries
						NOT = { has_government = republic_government }
						portrait_steppe_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							OR = {
								highest_held_title_tier > tier_duchy
								AND = { is_ruler = yes has_government = theocracy_government }
							}
							NOT = { AND = { is_ruler = yes has_government = mercenary_government  } } # Blocked for mercenaries
							NOT = { has_government = republic_government }
							portrait_steppe_clothing_spouse_trigger = yes
						}
					}
				}

			}
		}
	}

	ep1_steppe_royalty = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = ep1_steppe_royalty
				range = { 0 1 } # For the randomness to work correctly
			}
		}		
		weight = {
			base = 0
			modifier = {
				add = 50
				exists = this
				portrait_can_use_noble_headgear_trigger = yes
				OR = {
					highest_held_title_tier > tier_duchy
					AND = { is_ruler = yes has_government = theocracy_government }
				}
				NOT = { AND = { is_ruler = yes has_government = mercenary_government  } } # Blocked for mercenaries
				NOT = { has_government = republic_government }
				portrait_steppe_clothing_trigger = yes
			}
			modifier = {
				factor = 0
				NOT = {
					has_ep1_dlc_trigger = yes
				}
			}
		}
	}

	steppe_war = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = steppe_war
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 100
				exists = this
				portrait_wear_helmet_trigger = yes
				OR = {
					# Warcraft
					portrait_night_elven_clothing_trigger = yes
					
					portrait_steppe_clothing_trigger = yes
				}
				
				NOR = {
				    AND = {
				        like_christianity_religion_trigger = yes
				        has_government = holy_order_government
				    }
				    AND = {
				        like_christianity_religion_trigger = yes
				        is_landed = no
				        portrait_wear_armor_trigger = yes
				        exists = liege
				        liege = {
				            has_government = holy_order_government
				        }
				    }
				    AND = {
				        like_christianity_religion_trigger = yes
				        portrait_wear_armor_trigger = yes
				        OR = {
				            any_character_war = {
				                OR = {
				                    using_cb = undirected_great_holy_war
				                    using_cb = directed_great_holy_war
				                }
				                is_attacker = prev
				            }
				            any_liege_or_above = {
				                faith = prev.faith
				                any_character_war = {
				                    OR = {
				                        using_cb = undirected_great_holy_war
				                        using_cb = directed_great_holy_war
				                    }
				                    is_attacker = prev
				                }
				            }
				        }
				    }
				}
			}
		}
	}


## Northern Pagans ##

	northern_commoners = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = northern_common
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 70
				exists = this
				portrait_can_use_noble_headgear_trigger = no
				portrait_northern_clothing_trigger = yes
			}
			modifier = {
				add = 30
				exists = this
				highest_held_title_tier < tier_county
				NOR = {
					AND = {
						exists = primary_spouse
						primary_spouse = {
							highest_held_title_tier > tier_county
						}
					}
					AND = {
						has_government = republic_government
						primary_title.tier > 1
					}
					AND = { is_ruler = yes has_government = theocracy_government }
				}
				portrait_northern_clothing_spouse_trigger = yes
			}
			
			# Warcraft
			modifier = {
				factor = 0
				prefer_no_lowborn_headgear = yes
			}
		}
	}

	northern_low_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = northern_common
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				exists = this
				portrait_can_use_noble_headgear_trigger = yes
				highest_held_title_tier = tier_county
				NOR = {
					# has_dynasty = no
					AND = {
						has_government = republic_government
						primary_title.tier > 1
					}
					AND = { is_ruler = yes has_government = theocracy_government }
				}
				portrait_northern_clothing_trigger = yes
			}
		}
	}

	northern_war = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = northern_war
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 100
				exists = this
				portrait_wear_helmet_trigger = yes
				OR = {
					# Warcraft
					portrait_northern_clothing_trigger = yes
					portrait_dwarven_clothing_trigger = yes
				}
				
				NOR = {
				    AND = {
				        like_christianity_religion_trigger = yes
				        has_government = holy_order_government
				    }
				    AND = {
				        like_christianity_religion_trigger = yes
				        is_landed = no
				        portrait_wear_armor_trigger = yes
				        exists = liege
				        liege = {
				            has_government = holy_order_government
				        }
				    }
				    AND = {
				        like_christianity_religion_trigger = yes
				        portrait_wear_armor_trigger = yes
				        OR = {
				            any_character_war = {
				                OR = {
				                    using_cb = undirected_great_holy_war
				                    using_cb = directed_great_holy_war
				                }
				                is_attacker = prev
				            }
				            any_liege_or_above = {
				                faith = prev.faith
				                any_character_war = {
				                    OR = {
				                        using_cb = undirected_great_holy_war
				                        using_cb = directed_great_holy_war
				                    }
				                    is_attacker = prev
				                }
				            }
				        }
				    }
				}
			}
		}
	}

	## FP2 Iberian ##
	# someone should check the modifiers on all of these and see if any of them need to be updated for GoA
	fp2_iberian_muslim_commoners = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = fp2_muslim_common
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				#add = 80
				# exists = this
				# portrait_can_use_noble_headgear_trigger = no
				# portrait_fp2_iberian_muslim_clothing_trigger = yes
			}
			# modifier = {
			# 	add = 41 # Slightly higher
			# 	scope:highest_held_title_tier < tier_county
			# 	trigger_if = {
			# 		limit = { exists = this }
			# 		NOR = {
			# 			AND = {
			# 				exists = primary_spouse
			# 				primary_spouse = {
			# 					highest_held_title_tier > tier_county
			# 				}
			# 			}
			# 		 	has_government = republic_government
			# 		 	AND = { is_ruler = yes has_government = theocracy_government }
			# 		}
			# 	}
			# 	portrait_fp2_iberian_muslim_clothing_spouse_trigger = yes
			# }
		}
	}

	fp2_iberian_muslim_low_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = fp2_muslim_low_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			#modifier = {
				#add = 51 # Slightly higher
				# trigger_if = {
				# 	limit = { exists = this }
				# 	portrait_can_use_noble_headgear_trigger = yes
				# 	NOR = {
				# 		# has_dynasty = no
				# 		AND = {
				# 			has_government = republic_government
				# 			primary_title.tier > 1
				# 		}
				# 		AND = { is_ruler = yes has_government = theocracy_government }
				# 	}
				# }
				# scope:highest_held_title_tier = tier_county
				# portrait_fp2_iberian_muslim_clothing_trigger = yes
			#}
		}
	}

	fp2_iberian_muslim_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = fp2_muslim_high_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
		}		
		weight = {
			base = 0
			modifier = {
				#add = 51 # Slightly higher
				# trigger_if = {
				# 	limit = { exists = this }
				# 	portrait_can_use_noble_headgear_trigger = yes
				# 	OR = {
				# 		AND = {
				# 			OR = {
				# 				highest_held_title_tier = tier_duchy
				# 				AND = {
				# 					has_government = republic_government
				# 					primary_title.tier > 2
				# 				}
				# 				AND = { is_ruler = yes has_government = theocracy_government }
				# 			}
				# 			NOT = { AND = { is_ruler = yes has_government = mercenary_government  } } # Blocked for mercenaries
				# 			portrait_fp2_iberian_muslim_clothing_trigger = yes
				# 		}
				# 		AND = {
				# 			exists = primary_spouse
				# 			OR = {
				# 				is_ruler = no
				# 				highest_held_title_tier = tier_barony
				# 			}
				# 			primary_spouse = {
				# 				OR = {
				# 					highest_held_title_tier = tier_duchy
				# 					AND = {
				# 						has_government = republic_government
				# 						primary_title.tier > 2
				# 					}
				# 					AND = { is_ruler = yes has_government = theocracy_government }
				# 				}
				# 				portrait_fp2_iberian_muslim_clothing_spouse_trigger = yes
				# 			}
				# 		}
				# 	}
				# }
				# trigger_else = {
				# 	scope:highest_held_title_tier = tier_duchy
				# 	portrait_fp2_iberian_muslim_clothing_trigger = yes
				# }
			}
		}
	}

	fp2_iberian_muslim_royalty = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = fp2_muslim_royalty
				range = { 0 1 } # For the randomness to work correctly
			}
		}		
		weight = {
			base = 0
			#modifier = {
				# add = 51 # Slightly higher
				# trigger_if = {
				# 	limit = { exists = this }
				# 	portrait_can_use_noble_headgear_trigger = yes
				# 	OR = {
				# 		AND = {
				# 			OR = {
				# 				highest_held_title_tier = tier_kingdom
				# 				AND = { is_ruler = yes has_government = theocracy_government }
				# 			}
				# 			NOT = { AND = { is_ruler = yes has_government = mercenary_government  } } # Blocked for mercenaries
				# 			NOT = { has_government = republic_government }
				# 			portrait_fp2_iberian_muslim_clothing_trigger = yes
				# 		}
				# 		AND = {
				# 			exists = primary_spouse
				# 			OR = {
				# 				is_ruler = no
				# 				highest_held_title_tier = tier_barony
				# 			}
				# 			primary_spouse = {
				# 				OR = {
				# 					highest_held_title_tier = tier_kingdom
				# 					AND = { is_ruler = yes has_government = theocracy_government }
				# 				}
				# 				NOT = { AND = { is_ruler = yes has_government = mercenary_government  } } # Blocked for mercenaries
				# 				NOT = { has_government = republic_government }
				# 				portrait_fp2_iberian_muslim_clothing_spouse_trigger = yes
				# 			}
				# 		}
				# 	}
				# }
				# trigger_else = {
				# 	scope:highest_held_title_tier = tier_kingdom
				# 	portrait_fp2_iberian_muslim_clothing_trigger = yes
				# }
			#}
		}
	}

	fp2_iberian_muslim_war = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = fp2_muslim_war_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			#modifier = {
				#add = 101 # slightly higher
				# exists = this
				# portrait_can_use_noble_headgear_trigger = yes
				# OR = { 
				# 	AND = {
				# 		has_council_position = councillor_marshal
				# 		OR = {
				# 			is_landed = no
				# 			primary_title.tier >= tier_duchy
				# 		}
				# 	}
				# 	AND = {
				# 		is_commanding_army = yes
				# 		AND = {
				# 			exists = primary_title
				# 			primary_title.tier >= tier_duchy
				# 		}
				# 	}
				# }
				# portrait_fp2_iberian_muslim_clothing_trigger = yes
				
				# NOR = {
				#     AND = {
				#         # Warcraft
				#         like_christianity_religion_trigger = yes

				#         has_government = holy_order_government
				#     }
				#     AND = {
				#         # Warcraft
				#         like_christianity_religion_trigger = yes

				#         is_landed = no
				#         portrait_wear_armor_trigger = yes
				#         exists = liege
				#         liege = {
				#             has_government = holy_order_government
				#         }
				#     }
				#     AND = {
				#         # Warcraft
				#         like_christianity_religion_trigger = yes

				#         portrait_wear_armor_trigger = yes
				#         OR = {
				#             any_character_war = {
				#                 OR = {
				#                     using_cb = undirected_great_holy_war
				#                     using_cb = directed_great_holy_war
				#                 }
				#                 is_attacker = prev
				#             }
				#             any_liege_or_above = {
				#                 faith = prev.faith
				#                 any_character_war = {
				#                     OR = {
				#                         using_cb = undirected_great_holy_war
				#                         using_cb = directed_great_holy_war
				#                     }
				#                     is_attacker = prev
				#                 }
				#             }
				#         }
				#     }
				# }
			#}
		}
	}

	fp2_iberian_christian_commoners = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = fp2_christian_common
				range = { 0 1 } # For the randomness to work correctly
			}
		}
		outfit_tags = { iberian_christian_shrimp_wrap }	
		weight = {
			base = 0
			modifier = {
				add = 80
				exists = this
				portrait_can_use_noble_headgear_trigger = no
				portrait_fp2_iberian_christian_clothing_trigger = yes
			}
			#modifier = {
				#add = 41 # Slightly higher
				# scope:highest_held_title_tier < tier_county
				# trigger_if = {
				# 	limit = { exists = this }
				# 	NOR = {
				# 		AND = {
				# 			exists = primary_spouse
				# 			primary_spouse = {
				# 				highest_held_title_tier > tier_county
				# 			}
				# 		}
				# 	 	has_government = republic_government
				# 	 	AND = { is_ruler = yes has_government = theocracy_government }
				# 	}
				# }
				# portrait_fp2_iberian_christian_clothing_spouse_trigger = yes
			#}
		}
	}

	fp2_iberian_christian_low_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = fp2_christian_low_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			#modifier = {
				#add = 51 # Slightly higher
				# trigger_if = {
				# 	limit = { exists = this }
				# 	portrait_can_use_noble_headgear_trigger = yes
				# 	NOR = {
				# 		# has_dynasty = no
				# 		AND = {
				# 			has_government = republic_government
				# 			primary_title.tier > 1
				# 		}
				# 		AND = { is_ruler = yes has_government = theocracy_government }
				# 	}
				# }
				# scope:highest_held_title_tier = tier_county
				# portrait_fp2_iberian_christian_clothing_trigger = yes
			#}
		}
	}

	fp2_iberian_christian_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = fp2_christian_high_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
		}		
		weight = {
			base = 0
			#modifier = {
				#add = 51 # Slightly higher
				# trigger_if = {
				# 	limit = { exists = this }
				# 	portrait_can_use_noble_headgear_trigger = yes
				# 	OR = {
				# 		AND = {
				# 			OR = {
				# 				highest_held_title_tier = tier_duchy
				# 				AND = {
				# 					has_government = republic_government
				# 					primary_title.tier > 2
				# 				}
				# 				AND = { is_ruler = yes has_government = theocracy_government }
				# 			}
				# 			NOT = { AND = { is_ruler = yes has_government = mercenary_government  } } # Blocked for mercenaries
				# 			portrait_fp2_iberian_christian_clothing_trigger = yes
				# 		}
				# 		AND = {
				# 			exists = primary_spouse
				# 			OR = {
				# 				is_ruler = no
				# 				highest_held_title_tier = tier_barony
				# 			}
				# 			primary_spouse = {
				# 				OR = {
				# 					highest_held_title_tier = tier_duchy
				# 					AND = {
				# 						has_government = republic_government
				# 						primary_title.tier > 2
				# 					}
				# 					AND = { is_ruler = yes has_government = theocracy_government }
				# 				}
				# 				portrait_fp2_iberian_christian_clothing_spouse_trigger = yes
				# 			}
				# 		}
				# 	}
				# }
				# trigger_else = {
				# 	scope:highest_held_title_tier = tier_duchy
				# 	portrait_fp2_iberian_christian_clothing_trigger = yes
				# }
			#}
		}
	}

	fp2_iberian_christian_royalty = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = fp2_christian_royalty
				range = { 0 1 } # For the randomness to work correctly
			}
		}		
		weight = {
			base = 0
			#modifier = {
				#add = 51 # Slightly higher
				# trigger_if = {
				# 	limit = { exists = this }
				# 	portrait_can_use_noble_headgear_trigger = yes
				# 	OR = {
				# 		AND = {
				# 			OR = {
				# 				highest_held_title_tier = tier_kingdom
				# 				AND = { is_ruler = yes has_government = theocracy_government }
				# 			}
				# 			NOT = { AND = { is_ruler = yes has_government = mercenary_government  } } # Blocked for mercenaries
				# 			NOT = { has_government = republic_government }
				# 			portrait_fp2_iberian_christian_clothing_trigger = yes
				# 		}
				# 		AND = {
				# 			exists = primary_spouse
				# 			OR = {
				# 				is_ruler = no
				# 				highest_held_title_tier = tier_barony
				# 			}
				# 			primary_spouse = {
				# 				OR = {
				# 					highest_held_title_tier = tier_kingdom
				# 					AND = { is_ruler = yes has_government = theocracy_government }
				# 				}
				# 				NOT = { AND = { is_ruler = yes has_government = mercenary_government  } } # Blocked for mercenaries
				# 				NOT = { has_government = republic_government }
				# 				portrait_fp2_iberian_christian_clothing_spouse_trigger = yes
				# 			}
				# 		}
				# 	}
				# }
				# trigger_else = {
				# 	scope:highest_held_title_tier = tier_kingdom
				# 	portrait_fp2_iberian_christian_clothing_trigger = yes
				# }
			#}
		}
	}

	fp2_iberian_christian_war = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = fp2_christian_war_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			#modifier = {
				#add = 101 # slightly higher
				# exists = this
				# portrait_can_use_noble_headgear_trigger = yes
				# OR = { 
				# 	AND = {
				# 		has_council_position = councillor_marshal
				# 		OR = {
				# 			is_landed = no
				# 			primary_title.tier >= tier_duchy
				# 		}
				# 	}
				# 	AND = {
				# 		is_commanding_army = yes
				# 		AND = {
				# 			exists = primary_title
				# 			primary_title.tier >= tier_duchy
				# 		}
				# 	}
				# }
				# portrait_fp2_iberian_christian_clothing_trigger = yes
				
				# NOR = {
				#     AND = {
				#         # Warcraft
				#         like_christianity_religion_trigger = yes

				#         has_government = holy_order_government
				#     }
				#     AND = {
				#         # Warcraft
				#         like_christianity_religion_trigger = yes

				#         is_landed = no
				#         portrait_wear_armor_trigger = yes
				#         exists = liege
				#         liege = {
				#             has_government = holy_order_government
				#         }
				#     }
				#     AND = {
				#         # Warcraft
				#         like_christianity_religion_trigger = yes
				#         portrait_wear_armor_trigger = yes
				#         OR = {
				#             any_character_war = {
				#                 OR = {
				#                     using_cb = undirected_great_holy_war
				#                     using_cb = directed_great_holy_war
				#                 }
				#                 is_attacker = prev
				#             }
				#             any_liege_or_above = {
				#                 faith = prev.faith
				#                 any_character_war = {
				#                     OR = {
				#                         using_cb = undirected_great_holy_war
				#                         using_cb = directed_great_holy_war
				#                     }
				#                     is_attacker = prev
				#                 }
				#             }
				#         }
				#     }
				# }
			#}
		}
	}
	
## FP1 NORSE ##

	fp1_norse_commoners = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = fp1_common
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 80
				exists = this
				portrait_can_use_noble_headgear_trigger = no
				portrait_fp1_norse_clothing_trigger = yes
			}
			modifier = {
				add = 41 # Slightly higher
				scope:highest_held_title_tier < tier_county
				trigger_if = {
					limit = { exists = this }
					NOR = {
						AND = {
							exists = primary_spouse
							primary_spouse = {
								highest_held_title_tier > tier_county
							}
						}
					 	has_government = republic_government
					 	AND = { is_ruler = yes has_government = theocracy_government }
					}
				}
				portrait_fp1_norse_clothing_spouse_trigger = yes
			}
			
			# Warcraft
			modifier = {
				factor = 0
				prefer_no_lowborn_headgear = yes
			}
		}
	}

	fp1_norse_low_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = fp1_low_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 51 # Slightly higher
				trigger_if = {
					limit = { exists = this }
					portrait_can_use_noble_headgear_trigger = yes
					NOR = {
						# has_dynasty = no
						AND = {
							has_government = republic_government
							primary_title.tier > 1
						}
						AND = { is_ruler = yes has_government = theocracy_government }
					}
				}
				scope:highest_held_title_tier = tier_county
				portrait_fp1_norse_clothing_trigger = yes
			}
		}
	}

	fp1_norse_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = fp1_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
		}		
		weight = {
			base = 0
			modifier = {
				add = 51 # Slightly higher
				trigger_if = {
					limit = { exists = this }
					portrait_can_use_noble_headgear_trigger = yes
					OR = {
						AND = {
							OR = {
								highest_held_title_tier = tier_duchy
								AND = {
									has_government = republic_government
									primary_title.tier > 2
								}
								AND = { is_ruler = yes has_government = theocracy_government }
							}
							NOT = { AND = { is_ruler = yes has_government = mercenary_government  } } # Blocked for mercenaries
							OR = {
								portrait_fp1_norse_clothing_spouse_trigger = yes
								portrait_fp1_dwarven_clothing_spouse_trigger = yes
							}
						}
						AND = {
							exists = primary_spouse
							OR = {
								is_ruler = no
								highest_held_title_tier = tier_barony
							}
							primary_spouse = {
								OR = {
									highest_held_title_tier = tier_duchy
									AND = {
										has_government = republic_government
										primary_title.tier > 2
									}
									AND = { is_ruler = yes has_government = theocracy_government }
								}
								portrait_fp1_norse_clothing_spouse_trigger = yes
							}
						}
					}
				}
				trigger_else = {
					scope:highest_held_title_tier = tier_duchy
					portrait_fp1_norse_clothing_trigger = yes
				}
			}
		}
	}

	fp1_norse_royalty = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = fp1_royalty
				range = { 0 1 } # For the randomness to work correctly
			}
		}		
		weight = {
			base = 0
			modifier = {
				add = 51 # Slightly higher
				trigger_if = {
					limit = { exists = this }
					portrait_can_use_noble_headgear_trigger = yes
					OR = {
						AND = {
							OR = {
								highest_held_title_tier = tier_kingdom
								AND = { is_ruler = yes has_government = theocracy_government }
							}
							NOT = { AND = { is_ruler = yes has_government = mercenary_government  } } # Blocked for mercenaries
							NOT = { has_government = republic_government }
							OR = {
								portrait_fp1_norse_clothing_spouse_trigger = yes
								portrait_fp1_dwarven_clothing_spouse_trigger = yes
							}
						}
						AND = {
							exists = primary_spouse
							OR = {
								is_ruler = no
								highest_held_title_tier = tier_barony
							}
							primary_spouse = {
								OR = {
									highest_held_title_tier = tier_kingdom
									AND = { is_ruler = yes has_government = theocracy_government }
								}
								NOT = { AND = { is_ruler = yes has_government = mercenary_government  } } # Blocked for mercenaries
								NOT = { has_government = republic_government }
								portrait_fp1_norse_clothing_spouse_trigger = yes
							}
						}
					}
				}
				trigger_else = {
					scope:highest_held_title_tier = tier_kingdom
					portrait_fp1_norse_clothing_trigger = yes
				}
			}
		}
	}

	fp1_norse_imperial = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = fp1_imperial
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 100 # pick over northern
				trigger_if = {
					limit = { exists = this }
					portrait_can_use_noble_headgear_trigger = yes
					NOR = {
						AND = { is_ruler = yes has_government = mercenary_government  }
						has_government = republic_government
						AND = { is_ruler = yes has_government = theocracy_government }
					}
				}
				scope:highest_held_title_tier = tier_empire
				OR = {
					portrait_fp1_norse_clothing_trigger = yes
					portrait_fp1_dwarven_clothing_trigger = yes
				}
			}
		}
	}

	fp1_norse_war = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = fp1_war
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 101 # slightly higher than northern
				exists = this
				portrait_can_use_noble_headgear_trigger = yes
				OR = { # This helmet is really fancy & gilded - it's nothing for commoners. We allow Dukes+ to use it sometimes, just because it suits them!
					AND = {
						has_council_position = councillor_marshal
						OR = {
							is_landed = no
							primary_title.tier >= tier_duchy
						}
					}
					AND = {
						is_commanding_army = yes
						AND = {
							exists = primary_title
							primary_title.tier >= tier_duchy
						}
					}
				}
				OR = {
					portrait_fp1_norse_clothing_trigger = yes
					
					# Warcraft
					portrait_dwarven_clothing_trigger = yes
				}
				NOR = {
				    AND = {
						# Warcraft
				        like_christianity_religion_trigger = yes

				        has_government = holy_order_government
				    }
				    AND = {
						# Warcraft
				        like_christianity_religion_trigger = yes

				        is_landed = no
				        portrait_wear_helmet_trigger = yes
				        exists = liege
				        liege = {
				            has_government = holy_order_government
				        }
				    }
				    AND = {
						# Warcraft
				        like_christianity_religion_trigger = yes

				        portrait_wear_helmet_trigger = yes
				        OR = {
				            any_character_war = {
				                OR = {
				                    using_cb = undirected_great_holy_war
				                    using_cb = directed_great_holy_war
				                }
				                is_attacker = prev
				            }
				            any_liege_or_above = {
				                faith = prev.faith
				                any_character_war = {
				                    OR = {
				                        using_cb = undirected_great_holy_war
				                        using_cb = directed_great_holy_war
				                    }
				                    is_attacker = prev
				                }
				            }
				        }
				    }
				}
			}
		}
	}
	
	fp1_norse_war_common = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = fp1_war_common
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 100
				AND = { 
					portrait_wear_helmet_trigger = yes
					OR = { 
						portrait_fp1_norse_clothing_trigger = yes

						# Warcraft
						portrait_dwarven_clothing_trigger = yes
					}
				}
				NOR = {
				    AND = {
						# Warcraft
				        like_christianity_religion_trigger = yes

				        has_government = holy_order_government
				    }
				    AND = {
						# Warcraft
				        like_christianity_religion_trigger = yes

				        is_landed = no
				        portrait_wear_armor_trigger = yes
				        exists = liege
				        liege = {
				            has_government = holy_order_government
				        }
				    }
				    AND = {
						# Warcraft
				        like_christianity_religion_trigger = yes

				        portrait_wear_armor_trigger = yes
				        OR = {
				            any_character_war = {
				                OR = {
				                    using_cb = undirected_great_holy_war
				                    using_cb = directed_great_holy_war
				                }
				                is_attacker = prev
				            }
				            any_liege_or_above = {
				                faith = prev.faith
				                any_character_war = {
				                    OR = {
				                        using_cb = undirected_great_holy_war
				                        using_cb = directed_great_holy_war
				                    }
				                    is_attacker = prev
				                }
				            }
				        }
				    }
				}
			}
		}
	}




## Sub-Saharan Africans ##

	african_commoners = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = sub_saharan_common
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				exists = this
				portrait_can_use_noble_headgear_trigger = no
				portrait_african_clothing_trigger = yes
			}
			modifier = { # Non-european jesters should not use the jester hat
				add = 1000
				has_court_position = court_jester_court_position
				portrait_african_clothing_trigger = yes
				NOR = {
					portrait_western_clothing_trigger = yes
					portrait_byzantine_clothing_trigger = yes
					portrait_northern_clothing_trigger = yes
				}
			}
			modifier = {
				add = 50
				exists = this
				scope:highest_held_title_tier < tier_county
				trigger_if = {
					limit = { exists = this }
					NOR = {
						AND = {
							exists = primary_spouse
							primary_spouse = {
								highest_held_title_tier > tier_county
							}
						}
						AND = {
							has_government = republic_government
							primary_title.tier > 1
						}
						AND = { is_ruler = yes has_government = theocracy_government }
					}
				}
				portrait_african_clothing_spouse_trigger = yes
			}
			
			# Warcraft
			modifier = {
				factor = 0
				prefer_no_lowborn_headgear = yes
			}
		}
	}

	sub_saharan_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = sub_saharan_high_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
		}		
		weight = {
			base = 0
			modifier = {
				add = 50
				trigger_if = {
					limit = { exists = this }
					portrait_can_use_noble_headgear_trigger = yes
					OR = {
						AND = {
							OR = {
								highest_held_title_tier = tier_duchy
								AND = {
									has_government = republic_government
									primary_title.tier > 2
								}
								AND = { is_ruler = yes has_government = theocracy_government }
							}
							NOT = { AND = { is_ruler = yes has_government = mercenary_government  } } # Blocked for mercenaries
							portrait_african_clothing_trigger = yes
						}
						AND = {
							exists = primary_spouse
							OR = {
								is_ruler = no
								highest_held_title_tier = tier_barony
							}
							primary_spouse = {
								OR = {
									highest_held_title_tier = tier_duchy
									AND = {
										has_government = republic_government
										primary_title.tier > 2
									}
									AND = { is_ruler = yes has_government = theocracy_government }
								}
								portrait_african_clothing_spouse_trigger = yes
							}
						}
					}
				}
				trigger_else = {
					scope:highest_held_title_tier = tier_duchy
					portrait_african_clothing_trigger = yes
				}
			}
		}
	}

	sub_saharan_royalty = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = sub_saharan_royalty
				range = { 0 1 } # For the randomness to work correctly
			}
		}		
		weight = {
			base = 0
			modifier = {
				add = 50
				trigger_if = {
					limit = { exists = this }
					portrait_can_use_noble_headgear_trigger = yes
					OR = {
						AND = {
							OR = {
								highest_held_title_tier = tier_kingdom
								AND = { is_ruler = yes has_government = theocracy_government }
							}
							NOT = { AND = { is_ruler = yes has_government = mercenary_government  } } # Blocked for mercenaries
							NOT = { has_government = republic_government }
							portrait_african_clothing_trigger = yes
						}
						AND = {
							exists = primary_spouse
							OR = {
								is_ruler = no
								highest_held_title_tier = tier_barony
							}
							primary_spouse = {
								OR = {
									highest_held_title_tier = tier_kingdom
									AND = { is_ruler = yes has_government = theocracy_government }
								}
								NOT = { AND = { is_ruler = yes has_government = mercenary_government  } } # Blocked for mercenaries
								NOT = { has_government = republic_government }
								portrait_african_clothing_spouse_trigger = yes
							}
						}
					}
				}
				trigger_else = {
					scope:highest_held_title_tier = tier_kingdom
					portrait_african_clothing_trigger = yes
				}

			}
		}
	}

	ep1_sub_saharan_royalty = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = ep1_sub_saharan_royalty
				range = { 0 1 } # For the randomness to work correctly
			}
		}		
		weight = {
			base = 0
			modifier = {
				add = 50
				trigger_if = {
					limit = { exists = this }
					portrait_can_use_noble_headgear_trigger = yes
					OR = {
						AND = {
							OR = {
								highest_held_title_tier = tier_kingdom
								AND = { is_ruler = yes has_government = theocracy_government }
							}
							NOT = { AND = { is_ruler = yes has_government = mercenary_government  } } # Blocked for mercenaries
							NOT = { has_government = republic_government }
							portrait_african_clothing_trigger = yes
						}
						AND = {
							exists = primary_spouse
							OR = {
								is_ruler = no
								highest_held_title_tier = tier_barony
							}
							primary_spouse = {
								OR = {
									highest_held_title_tier = tier_kingdom
									AND = { is_ruler = yes has_government = theocracy_government }
								}
								NOT = { AND = { is_ruler = yes has_government = mercenary_government  } } # Blocked for mercenaries
								NOT = { has_government = republic_government }
								portrait_african_clothing_spouse_trigger = yes
							}
						}
					}
				}
				trigger_else = {
					scope:highest_held_title_tier = tier_kingdom
					portrait_african_clothing_trigger = yes
				}

			}
			modifier = {
				factor = 0
				NOT = {
					has_ep1_dlc_trigger = yes
				}
			}
		}
	}

	sub_saharan_imperial = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = sub_saharan_imperial
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				trigger_if = {
					limit = { exists = this }
					portrait_can_use_noble_headgear_trigger = yes
					NOR = {
						AND = { is_ruler = yes has_government = mercenary_government  }
						has_government = republic_government
						AND = { is_ruler = yes has_government = theocracy_government }
					}
				}
				scope:highest_held_title_tier = tier_empire
				portrait_african_clothing_trigger = yes
			}
		}
	}


	sub_saharan_war = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = mena_war
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 100
				exists = this
				portrait_wear_helmet_trigger = yes
				portrait_african_clothing_trigger = yes
				
				NOR = {
				    AND = {
				        like_christianity_religion_trigger = yes
				        has_government = holy_order_government
				    }
				    AND = {
				        like_christianity_religion_trigger = yes
				        is_landed = no
				        portrait_wear_armor_trigger = yes
				        exists = liege
				        liege = {
				            has_government = holy_order_government
				        }
				    }
				    AND = {
				        like_christianity_religion_trigger = yes
				        portrait_wear_armor_trigger = yes
				        OR = {
				            any_character_war = {
				                OR = {
				                    using_cb = undirected_great_holy_war
				                    using_cb = directed_great_holy_war
				                }
				                is_attacker = prev
				            }
				            any_liege_or_above = {
				                faith = prev.faith
				                any_character_war = {
				                    OR = {
				                        using_cb = undirected_great_holy_war
				                        using_cb = directed_great_holy_war
				                    }
				                    is_attacker = prev
				                }
				            }
				        }
				    }
				}
			}
		}
	}
	
	# Warcraft
	### Troll
	troll_royalty = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = religious_african_high
				range = { 0 1 } # For the randomness to work correctly
			}
		}		
		weight = {
			base = 0
			modifier = {
				add = 50
				peasant_clothing_trigger = no
				OR = {
					AND = {
						king_clothing_trigger = yes
						portrait_troll_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						takes_spouse_clothing_trigger = yes
						primary_spouse = {
							king_clothing_trigger = yes
							portrait_troll_clothing_spouse_trigger = yes
						}
					}
				}
			}
		}
	}
	troll_imperial = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = zandalari_imperial
				range = { 0 1 } # For the randomness to work correctly
			}
		}		
		weight = {
			base = 0
			modifier = {
				add = 50
				peasant_clothing_trigger = no
				OR = {
					AND = {
						emperor_clothing_trigger = yes
						portrait_troll_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						takes_spouse_clothing_trigger = yes
						primary_spouse = {
							emperor_clothing_trigger = yes
							portrait_troll_clothing_spouse_trigger = yes
						}
					}
				}
			}
		}
	}
	
	### High Elves
	high_elven_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = high_elven_crowns
				range = { 0 1 } # For the randomness to work correctly
			}
		}		
		weight = {
			base = 0
			modifier = {
				add = 50
				OR = {
					AND = {
						duke_or_highter_clothing_trigger = yes
						OR = {
							portrait_high_elven_clothing_trigger = yes
							portrait_night_elven_clothing_trigger = yes
						}
					}
					AND = {
						exists = primary_spouse
						takes_spouse_clothing_trigger = yes
						primary_spouse = {
							duke_or_highter_clothing_trigger = yes
							OR = {
								portrait_high_elven_clothing_spouse_trigger = yes
								portrait_night_elven_clothing_spouse_trigger = yes
							}
						}
					}
				}

			}
		}
	}
	
	### Goblins
	goblin_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = goblin_top_hats
				range = { 0 1 } # For the randomness to work correctly
			}
		}		
		weight = {
			base = 0
			modifier = {
				add = 50
				OR = {
					king_clothing_trigger = yes
					emperor_clothing_trigger = yes
				}
				portrait_goblin_clothing_trigger = yes
			}
		}
	}		
	
	scourge_commoners = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = scourge_cultist_headgears
				range = { 0 1 } # For the randomness to work correctly
			}
		}		
		weight = {
			base = 0
			modifier = {
				add = 50
				commoner_clothing_trigger = yes
				portrait_scourge_clothing_trigger = yes
			}
			
			# Warcraft
			modifier = {
				factor = 0
				prefer_no_lowborn_headgear = yes
			}
		}
	}
	scourge_low_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = western_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
		}		
		weight = {
			base = 0
			modifier = {
				add = 50
				OR = {
					AND = {
						count_clothing_trigger = yes
						portrait_scourge_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						takes_spouse_clothing_trigger = yes
						primary_spouse = {
							count_clothing_trigger = yes
							portrait_scourge_clothing_spouse_trigger = yes
						}
					}
				}
			}
		}
	}
	scourge_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = western_high_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
		}		
		weight = {
			base = 0
			modifier = {
				add = 50
				OR = {
					AND = {
						duke_or_highter_clothing_trigger = yes
						portrait_scourge_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						takes_spouse_clothing_trigger = yes
						primary_spouse = {
							duke_or_highter_clothing_trigger = yes
							portrait_scourge_clothing_spouse_trigger = yes
						}
					}
				}
			}
		}
	}
	
	rexxar_mask = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = rexxar_mask
				range = { 0 1 } # For the randomness to work correctly
			}
		}		
		weight = {
			base = 0
			modifier = {
				add = 1000
				is_rexxar_trigger = yes
			}
		}
	}
	
	# Warcraft
	high_elven_war = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = high_elven_war
				range = { 0 1 } # For the randomness to work correctly
			}
		}		
		weight = {
			base = 0
			modifier = {
				add = 101
				portrait_wear_helmet_trigger = yes
				portrait_high_elven_clothing_trigger = yes
			}
		}
	}

	gnome_goggles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = gnome_goggles
				range = { 0 1 } # For the randomness to work correctly
			}
		}		
		weight = {
			base = 0
			modifier = {
				add = 30
				portrait_gnomish_clothing_trigger = yes
			}
			modifier = {
				add = 100
				portrait_gnomish_clothing_trigger = yes
				duke_or_highter_clothing_trigger = yes
			}
			modifier = {
				add = 120
				religious_clothing_trigger = yes
				religious_gnomish_clothing_trigger = yes
			}
		}
	}

	terenas_crown = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = terenas_crown
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 101
				exists = this
				has_primary_title = title:e_lordaeron
			}
			modifier = {
				add = 140
				exists = this
				any_equipped_character_artifact = {
					has_variable = terenas_crown
				}
			}
		}
	}
	
######## Religious ##########


## Orthodox ##

	religious_orthodox_high_clothes = {
	    dna_modifiers = {
	        accessory = {
	            mode = add
	            gene = headgear
	            template = religious_orthodox_high
	            range = { 0 1 }
	        }
	    }
	    outfit_tags = { priest_outfit bishop_outfit }
	    weight = {
	        base = 0
	        modifier = {
				add = 130
				exists = this
				OR = {
					has_character_flag = need_priest_outfit
					is_theocratic_lessee = yes
					AND = { is_ruler = yes has_government = theocracy_government }
				}
				religious_orthodox_clothing_trigger = yes
				NAND = {	
					is_ruler = yes
					primary_title = {
						is_head_of_faith = yes
					}
				}
				NOT = {
					faith = {
						has_doctrine_parameter = vows_of_poverty_active
					}
				}
			}
	    }
	}

	religious_orthodox_head_clothes = {
	    dna_modifiers = {
	        accessory = {
	            mode = add
	            gene = headgear
	            template = religious_orthodox_head
	            range = { 0 1 }
	        }
	    }
	    weight = {
	        base = 0
	        modifier = {
	            add = 200
				exists = this
				religious_orthodox_clothing_trigger = yes
				exists = primary_title
				primary_title = {
					is_head_of_faith = yes
				}
				NOT = {
					faith = {
						has_doctrine_parameter = vows_of_poverty_active
					}
				}
	        }
	    }
	}	


## Catholic ##

	catholic_devoted = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = religious_catholic_devoted
				range = { 0 1 } # For the randomness to work correctly
			}
		}
		outfit_tags = { monk_outfit }
		weight = {
			base = 0
			modifier = {
				add = 100
				exists = this
				
				# Warcraft
				OR = {
					portrait_has_trait_trigger = { TRAIT = devoted }
					has_council_position = councillor_court_chaplain
					is_theocratic_lessee = yes
					AND = { is_ruler = yes has_government = theocracy_government }
				}
				
				# Warcraft
				religious_christian_clothing_trigger = yes
			}
		}
	}

	catholic_head = {
		outfit_tags = { rank_headgear }
		usage = game
		dna_modifiers = {
			morph = {
				mode = add
				
				gene = gene_bs_ear_outward
				template = ear_outward_neg
				value = 1.0
			}
			accessory = {
				mode = add
				
				gene = headgear
				template = catholic_head
				range = { 0 1 }
			}

			# accessory = {
			# 	mode = add
				
			# 	gene = hairstyles
			# 	template = no_hairstyles
			# 	range = { 0 1 }
			# }
		}	
		weight = {
			base = 0
			modifier = {
				add = 150
				exists = this
				exists = primary_title
				religious_catholic_clothing_trigger = yes
				primary_title = {
					is_head_of_faith = yes
				}
				NOT = {
					faith = {
						has_doctrine_parameter = vows_of_poverty_active
					}
				}
			}
		}
	}

	catholic_high = {
		outfit_tags = { rank_headgear }
		usage = game
		dna_modifiers = {
			morph = {
				mode = add
				
				gene = gene_bs_ear_outward
				template = ear_outward_neg
				value = 1.0
			}
			accessory = {
				mode = add
				
				gene = headgear
				template = catholic_high
				range = { 0 1 }
			}

			# accessory = {
			# 	mode = add
				
			# 	gene = hairstyles
			# 	template = no_hairstyles
			# 	range = { 0 1 }
			# }
		}
		outfit_tags = { priest_outfit bishop_outfit }
	    weight = {
	        base = 0
	        modifier = {
	            add = 120
				exists = this
				religious_christian_clothing_trigger = yes
				OR = {
					has_character_flag = need_priest_outfit
					is_theocratic_lessee = yes
					AND = { is_ruler = yes has_government = theocracy_government }
				}
				NOT = {
					faith = {
						has_doctrine_parameter = vows_of_poverty_active
					}
				}
	        }
	    }
	}

	#religious_catholic_high_headgear = {
	#    dna_modifiers = {
	#        accessory = {
	#            mode = add
	#            gene = headgear
	#            template = religious_orthodox_high
	#            range = { 1 1 }
	#        }
	#    }
	#    outfit_tags = { bishop_outfit }
	#    weight = {
	#        base = 130
	#        modifier = {
	#            factor = 0
	#            OR = {
	#            	AND = {
	#                	is_theocratic_lessee = no
	#                	NOT = { AND = { is_ruler = yes has_government = theocracy_government } }
	#                	NOT = { faith.religious_head = root }
	#                }
	#                NOT = { like_christianity_religion_trigger = yes }
	#            }
	#        }
	#    }
	#}

	popes = {
		outfit_tags = { rank_headgear }
		usage = game
		dna_modifiers = {
			morph = {
				mode = add
				
				gene = gene_bs_ear_outward
				template = ear_outward_neg
				value = 1.0
			}
			accessory = {
				mode = add
				
				gene = headgear
				template = catholic_head
				range = { 0 1 }
			}

			# accessory = {
			# 	mode = add
				
			# 	gene = hairstyles
			# 	template = no_hairstyles
			# 	range = { 0 1 }
			# }
		}	
		weight = {
			base = 0
			modifier = {
				add = 200
				exists = this
				religious_catholic_clothing_trigger = yes
				is_adult = yes
				#religious_christian_clothing_trigger = yes
				exists = primary_title
				primary_title = {
					is_head_of_faith = yes
				}
			}
			#modifier = {
			#	add = 140
			#	exists = this
			#	any_equipped_character_artifact = {
			#		has_variable = pope_hat
			#	}
			#}
			# Warcraft
		}
	}

## Jewish ##

	religious_jewish_high_headgear = {
	    dna_modifiers = {
	        accessory = {
	            mode = add
	            gene = headgear
	            template = religious_jewish_high
	            range = { 0 1 }
	        }
	    }
	    outfit_tags = { priest_outfit }
	    weight = {
	        base = 0
	        modifier = {
				add = 100
				exists = this
				OR = {
					has_character_flag = need_priest_outfit
					is_theocratic_lessee = yes
					AND = { is_ruler = yes has_government = theocracy_government }
					has_council_position = councillor_court_chaplain
				}
				religious_jewish_clothing_trigger = yes
			}
	    }
	}

	religious_jewish_head = {
		outfit_tags = { rank_headgear }
		usage = game
		dna_modifiers = {
			accessory = {
				mode = add
				
				gene = headgear
				template = religious_jewish_head
				range = { 0 1 }
			}

			#accessory = {
			#	mode = add
			#	
			#	gene = hairstyles
			#	template = no_hairstyles
			#	range = { 0 1 }
			#}
		}	
		weight = {
	        base = 0
	        modifier = {
	            add = 140
				exists = this
				religious_jewish_clothing_trigger = yes
				exists = primary_title
				primary_title = {
					is_head_of_faith = yes
				}
	        }
	    }
	}

## Muslim ##	

	religious_muslim_high_headgear = {
	    dna_modifiers = {
	        accessory = {
	            mode = add
	            gene = headgear
	            template = religious_muslim_high
	            range = { 0 1 }
	        }
	    }
	    outfit_tags = { priest_outfit }
	    weight = {
	        base = 0
	        modifier = {
				add = 111
				exists = this
				OR = {
					has_character_flag = need_priest_outfit
					is_theocratic_lessee = yes
					AND = { is_ruler = yes has_government = theocracy_government }
					has_council_position = councillor_court_chaplain
				}
				religious_muslim_clothing_trigger = yes
			}
	    }
	}



## Northern Pagan ##

	religious_northern_high_headgear = {
	    dna_modifiers = {
	        accessory = {
	            mode = add
	            gene = headgear
	            template = religious_northern_high
	            range = { 0 1 }
	        }
	    }
	    outfit_tags = { priest_outfit }
	    weight = {
	        base = 0
	        modifier = {
				add = 100
				exists = this
				OR = {
					has_character_flag = need_priest_outfit
					is_theocratic_lessee = yes
					AND = { is_ruler = yes has_government = theocracy_government }
					has_council_position = councillor_court_chaplain
				}
				religious_northern_clothing_trigger = yes
			}
	    }
	}


## Steppe ##

	religious_steppe_high_headgear = {
	    dna_modifiers = {
	        accessory = {
	            mode = add
	            gene = headgear
	            template = religious_steppe_high
	            range = { 0 1 }
	        }
	    }
	    outfit_tags = { priest_outfit }
	    weight = {
	        base = 0
	        modifier = {
				add = 100
				exists = this
				OR = {
					has_character_flag = need_priest_outfit
					is_theocratic_lessee = yes
					AND = { is_ruler = yes has_government = theocracy_government }
					has_council_position = councillor_court_chaplain
				}
				religious_steppe_clothing_trigger = yes
			}
	    }
	}

## Buddhist ##

	religious_buddhist_devoted_headgear = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = hairstyles
				template = no_hairstyles
				range = { 0 1 } # For the randomness to work correctly
			}
		}
		outfit_tags = { monk_outfit }
		weight = {
			base = 0
			modifier = {
				add = 100
				portrait_has_trait_trigger = { TRAIT = devoted }
				religious_buddhist_clothing_trigger = yes
			}
		}
	}

	religious_buddhist_high_headgear = {
	    dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = hairstyles
				template = no_hairstyles
				range = { 0 1 } # For the randomness to work correctly
			}
	    }
	    outfit_tags = { priest_outfit }
	    weight = {
	        base = 0
	        modifier = {
				add = 110
				exists = this
				OR = {
					has_character_flag = need_priest_outfit
					is_theocratic_lessee = yes
					AND = { is_ruler = yes has_government = theocracy_government }
					has_council_position = councillor_court_chaplain
				}
				religious_buddhist_clothing_trigger = yes
			}
	    }
	}

## Hinduist ##

	religious_hindu_devoted_headgear = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
		}
		outfit_tags = { monk_outfit }
		weight = {
			base = 0
			modifier = {
				add = 100
				portrait_has_trait_trigger = { TRAIT = devoted }
				religious_hindu_clothing_trigger = yes
			}
		}
	}

	religious_hindu_high_headgear = {
	    dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
	    }
	    outfit_tags = { priest_outfit }
	    weight = {
	        base = 0
	        modifier = {
				add = 110
				exists = this
				OR = {
					has_character_flag = need_priest_outfit
					is_theocratic_lessee = yes
					AND = { is_ruler = yes has_government = theocracy_government }
					has_council_position = councillor_court_chaplain
				}
				religious_hindu_clothing_trigger = yes
			}
	    }
	}

## Zoroastrian ##

	religious_zoroastrian_high_headgear = {
	    dna_modifiers = {
	        accessory = {
	            mode = add
	            gene = headgear
	            template = religious_zoroastrian_high
	            range = { 0 1 }
	        }
	    }
	    outfit_tags = { priest_outfit }
	    weight = {
	        base = 0
	        modifier = {
				add = 100
				exists = this
				OR = {
					has_character_flag = need_priest_outfit
					is_theocratic_lessee = yes
					AND = { is_ruler = yes has_government = theocracy_government }
					has_council_position = councillor_court_chaplain
				}
				religious_zoroastrian_clothing_trigger = yes
			}
	    }
	}

## Jain ##

	religious_jain_devoted_headgear = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
		}
		outfit_tags = { monk_outfit }
		weight = {
			base = 0
			modifier = {
				add = 100
				portrait_has_trait_trigger = { TRAIT = devoted }
				religious_jain_clothing_trigger = yes
			}
		}
	}

	religious_jain_high_headgear = {
	    dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
	    }
	    outfit_tags = { priest_outfit }
	    weight = {
	        base = 0
	        modifier = {
				add = 110
				exists = this
				OR = {
					has_character_flag = need_priest_outfit
					is_theocratic_lessee = yes
					AND = { is_ruler = yes has_government = theocracy_government }
					has_council_position = councillor_court_chaplain
				}
				religious_jain_clothing_trigger = yes
			}
	    }
	}

## African Pagan ##

	# religious_african_devoted_clothes = {
	# 	dna_modifiers = {
	# 		accessory = {
	# 			mode = add
	# 			gene = clothes
	# 			template = mena_commoner_clothes
	# 			range = { 0 1 } # For the randomness to work correctly
	# 		}
	# 	}
	#	outfit_tags = { monk_outfit }
	# 	weight = {
	# 		base = 0
	# 		modifier = {
	# 			add = 100
	# 			portrait_has_trait_trigger = { TRAIT = devoted }
	# 			like_islam_religion_trigger = yes
	# 		}
	# 	}
	# }

	religious_african_high_headgear = {
	    dna_modifiers = {
	        accessory = {
	            mode = add
	            gene = headgear
	            template = religious_african_high
	            range = { 0 1 }
	        }
	    }
	    outfit_tags = { priest_outfit }
	    weight = {
	        base = 0
	        modifier = {
				add = 110
				exists = this
				OR = {
					has_character_flag = need_priest_outfit
					is_theocratic_lessee = yes
					AND = { is_ruler = yes has_government = theocracy_government }
					has_council_position = councillor_court_chaplain
				}
				religious_african_clothing_trigger = yes
			}
	    }
	}

	# Warcraft
	religious_death_high_headgear = {
	    dna_modifiers = {
	        accessory = {
	            mode = add
	            gene = headgear
	            template = scourge_high_cultist_headgears
	            range = { 0 1 }
	        }
	    }
	    outfit_tags = { priest_outfit }
	    weight = {
	        base = 0
	        modifier = {
				add = 110
				religious_clothing_trigger = yes
				religious_death_clothing_trigger = yes
			}
	    }
	}
	religious_troll_high_headgear = {
	    dna_modifiers = {
	        accessory = {
	            mode = add
	            gene = headgear
	            template = troll_voodoo_mask
	            range = { 0 1 }
	        }
	    }
	    outfit_tags = { priest_outfit }
	    weight = {
	        base = 0
	        modifier = {
				add = 110
				religious_clothing_trigger = yes
				religious_troll_clothing_trigger = yes
			}
	    }
	}

	jester_headgear = {
	    dna_modifiers = {
			accessory = {
				mode = add

				gene = headgear
				template = ep1_jester
				range = { 0 1 }
			}
		}
	    weight = {
			base = -100
			modifier = {
				add = 1000
				has_court_position = court_jester_court_position
				OR = {
					portrait_western_clothing_trigger = yes
					portrait_byzantine_clothing_trigger = yes
					portrait_northern_clothing_trigger = yes
				}
			}
			modifier = {
				factor = 0
				OR = {
					is_adult = no
					should_be_naked_trigger = yes
				}
			}			
		}
	}

	#RTT headgear
	monarchs_journey_late_unlock = {
		dna_modifiers = {
			accessory = {
				mode = add

				gene = headgear
				template = monarchs_journey_unleashed
				range = { 0 1 } # For the randomness to work correctly
			}
		}

		weight = {
	        base = -100
	        modifier = {
	        	add = 110
	        	current_date >= 1300.1.1
	        	OR = {
					portrait_western_clothing_trigger = yes
					portrait_western_clothing_spouse_trigger = yes
				}
	        	OR = {
	        		AND = {
	        			is_lowborn = no
						is_female = yes
	        		}
	        		AND = {
						has_government = republic_government
						highest_held_title_tier <= tier_barony
	        		}
	        	}
	        }
        }
	}

	# Pygmy
	pygmy_commoners = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = pygmy_common
				range = { 0 1 } # For the randomness to work correctly
			}
		}		
		weight = {
			base = 0
			modifier = {
				add = 50
				commoner_clothing_trigger = yes
				portrait_pygmy_clothing_trigger = yes
			}
			
			# Warcraft
			modifier = {
				factor = 0
				prefer_no_lowborn_headgear = yes
			}
		}
	}
	pygmy_low_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = pygmy_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
		}		
		weight = {
			base = 0
			modifier = {
				add = 50
				OR = {
					AND = {
						count_clothing_trigger = yes
						portrait_pygmy_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						takes_spouse_clothing_trigger = yes
						primary_spouse = {
							count_clothing_trigger = yes
							portrait_pygmy_clothing_spouse_trigger = yes
						}
					}
				}
			}
		}
	}
	pygmy_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = pygmy_high_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
		}		
		weight = {
			base = 0
			modifier = {
				add = 50
				OR = {
					AND = {
						duke_or_highter_clothing_trigger = yes
						portrait_pygmy_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						takes_spouse_clothing_trigger = yes
						primary_spouse = {
							duke_or_highter_clothing_trigger = yes
							portrait_pygmy_clothing_spouse_trigger = yes
						}
					}
				}
			}
		}
	}
	pygmy_war = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = pygmy_war
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 101
				portrait_wear_helmet_trigger = yes
				portrait_pygmy_clothing_trigger = yes
			}
		}
	}
}
