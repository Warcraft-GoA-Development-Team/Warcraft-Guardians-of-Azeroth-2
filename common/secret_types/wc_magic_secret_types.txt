
# unfortunately we cant make these dynamically but i think we can call them dynamically - SS

#########################
# non-elemental magicks
#########################

secret_light_magic_user = { 
	category = religious
	
	is_valid = {
		NOT =  { 
			scope:secret_owner = {
				has_trait = wc_lifestyle_light_magic
				can_openly_learn_magic_type_trigger = { MAGICTYPE = light }
			}
		}
	}
	
	is_shunned = {
		scope:secret_owner = {
			is_magic_type_shunned_trigger = { MAGICTYPE = light } 
		}
	}
	
	is_criminal = {
		scope:secret_owner = {
			is_magic_type_criminal_trigger = { MAGICTYPE = light } 
		}
	}
	
	
	on_expose = {
		save_scope_as = secret
		
		secret_exposed_notification_effect = yes
		
		scope:secret_owner = {
			if = {
				limit = {
					NOT = {
						this = scope:secret_exposer
					}
				}
				save_scope_as = owner
				trigger_event = magic_secret.1001
			}
			else = {
				wc_magic_lifestyle_secret_reveal_effect = yes
			}
		}
	}
}

secret_shadow_magic_user = { 
	category = religious
	
	is_valid = {
		NOT =  { 
			scope:secret_owner = {
				has_trait = wc_lifestyle_shadow_magic
				can_openly_learn_magic_type_trigger = { MAGICTYPE = shadow } 
			}
		}
	}
	
	is_shunned = {
		scope:secret_owner = {
			is_magic_type_shunned_trigger = { MAGICTYPE = shadow } 
		}
	}
	
	is_criminal = {
		scope:secret_owner = {
			is_magic_type_criminal_trigger = { MAGICTYPE = shadow } 
		}
	}
	
	
	on_expose = {
		save_scope_as = secret
		
		secret_exposed_notification_effect = yes
		
		scope:secret_owner = {
			if = {
				limit = {
					NOT = {
						this = scope:secret_exposer
					}
				}
				save_scope_as = owner
				trigger_event = magic_secret.1001
			}
			else = {
				wc_magic_lifestyle_secret_reveal_effect = yes
			}
		}
	}
}

secret_order_magic_user = { 
	category = religious
	
	is_valid = {
		NOT =  { 
			scope:secret_owner = {
				has_trait = wc_lifestyle_order_magic
				can_openly_learn_magic_type_trigger = { MAGICTYPE = order }
			}
		}
	}
	
	is_shunned = {
		scope:secret_owner = {
			is_magic_type_shunned_trigger = { MAGICTYPE = order } 
		}
	}
	
	is_criminal = {
		scope:secret_owner = {
			is_magic_type_criminal_trigger = { MAGICTYPE = order } 
		}
	}
	
	
	on_expose = {
		save_scope_as = secret
		
		secret_exposed_notification_effect = yes
		
		scope:secret_owner = {
			if = {
				limit = {
					NOT = {
						this = scope:secret_exposer
					}
				}
				save_scope_as = owner
				trigger_event = magic_secret.1001
			}
			else = {
				wc_magic_lifestyle_secret_reveal_effect = yes
			}
		}
	}
}

secret_disorder_magic_user = { 
	category = religious
	
	is_valid = {
		NOT =  { 
			scope:secret_owner = {
				has_trait = wc_lifestyle_disorder_magic
				can_openly_learn_magic_type_trigger = { MAGICTYPE =disorder }
			}
		}
	}
	
	is_shunned = {
		scope:secret_owner = {
			is_magic_type_shunned_trigger = { MAGICTYPE = disorder } 
		}
	}
	
	is_criminal = {
		scope:secret_owner = {
			is_magic_type_criminal_trigger = { MAGICTYPE = disorder } 
		}
	}
	
	
	on_expose = {
		save_scope_as = secret
		
		secret_exposed_notification_effect = yes
		
		scope:secret_owner = {
			if = {
				limit = {
					NOT = {
						this = scope:secret_exposer
					}
				}
				save_scope_as = owner
				trigger_event = magic_secret.1001
			}
			else = {
				wc_magic_lifestyle_secret_reveal_effect = yes
			}
		}
	}
}

secret_life_magic_user = { 
	category = religious
	
	is_valid = {
		NOT =  { 
			scope:secret_owner = {
				has_trait = wc_lifestyle_life_magic
				can_openly_learn_magic_type_trigger = { MAGICTYPE =life }
			}
		}
	}
	
	is_shunned = {
		scope:secret_owner = {
			is_magic_type_shunned_trigger = { MAGICTYPE = life } 
		}
	}
	
	is_criminal = {
		scope:secret_owner = {
			is_magic_type_criminal_trigger = { MAGICTYPE = life } 
		}
	}
	
	
	on_expose = {
		save_scope_as = secret
		
		secret_exposed_notification_effect = yes
		
		scope:secret_owner = {
			if = {
				limit = {
					NOT = {
						this = scope:secret_exposer
					}
				}
				save_scope_as = owner
				trigger_event = magic_secret.1001
			}
			else = {
				# TODO: shouldnt there be an event for this??? - SS
				wc_magic_lifestyle_secret_reveal_effect = yes
			}
		}
	}
}

secret_death_magic_user = { 
	category = religious
	
	is_valid = {
		NOT =  { 
			scope:secret_owner = {
				has_trait = wc_lifestyle_death_magic
				can_openly_learn_magic_type_trigger = { MAGICTYPE =death }
			}
		}
	}
	
	is_shunned = {
		scope:secret_owner = {
			is_magic_type_shunned_trigger = { MAGICTYPE = death } 
		}
	}
	
	is_criminal = {
		scope:secret_owner = {
			is_magic_type_criminal_trigger = { MAGICTYPE = death } 
		}
	}
	
	
	on_expose = {
		save_scope_as = secret
		
		secret_exposed_notification_effect = yes
		
		scope:secret_owner = {
			if = {
				limit = {
					NOT = {
						this = scope:secret_exposer
					}
				}
				save_scope_as = owner
				trigger_event = magic_secret.1001
			}
			else = {
				wc_magic_lifestyle_secret_reveal_effect = yes
			}
		}
	}
}


#########################
# elemental magicks
#########################


secret_elemental_earth_magic_user = { 
	category = religious
	
	is_valid = {
		NOT =  { 
			scope:secret_owner = {
				has_trait = wc_lifestyle_elemental_earth_magic
				can_openly_learn_magic_type_trigger = { MAGICTYPE =elemental_earth }
			}
		}
	}
	
	is_shunned = {
		scope:secret_owner = {
			is_magic_type_shunned_trigger = { MAGICTYPE = elemental_earth } 
		}
	}
	
	is_criminal = {
		scope:secret_owner = {
			is_magic_type_criminal_trigger = { MAGICTYPE = elemental_earth } 
		}
	}
	
	
	on_expose = {
		save_scope_as = secret
		
		secret_exposed_notification_effect = yes
		
		scope:secret_owner = {
			if = {
				limit = {
					NOT = {
						this = scope:secret_exposer
					}
				}
				save_scope_as = owner
				trigger_event = magic_secret.1001
			}
			else = {
				wc_magic_lifestyle_secret_reveal_effect = yes
			}
		}
	}
}

secret_elemental_air_magic_user = { 
	category = religious
	
	is_valid = {
		NOT =  { 
			scope:secret_owner = {
				has_trait = wc_lifestyle_elemental_air_magic
				can_openly_learn_magic_type_trigger = { MAGICTYPE = elemental_air } 
			}
		}
	}
	
	is_shunned = {
		scope:secret_owner = {
			is_magic_type_shunned_trigger = { MAGICTYPE = elemental_air } 
		}
	}
	
	is_criminal = {
		scope:secret_owner = {
			is_magic_type_criminal_trigger = { MAGICTYPE = elemental_air } 
		}
	}
	
	
	on_expose = {
		save_scope_as = secret
		
		secret_exposed_notification_effect = yes
		
		scope:secret_owner = {
			if = {
				limit = {
					NOT = {
						this = scope:secret_exposer
					}
				}
				save_scope_as = owner
				trigger_event = magic_secret.1001
			}
			else = {
				wc_magic_lifestyle_secret_reveal_effect = yes
			}
		}
	}
}

secret_elemental_water_magic_user = { 
	category = religious
	
	is_valid = {
		NOT =  { 
			scope:secret_owner = {
				has_trait = wc_lifestyle_elemental_water_magic
				can_openly_learn_magic_type_trigger = { MAGICTYPE =elemental_water } 
			}
		}
	}
	
	is_shunned = {
		scope:secret_owner = {
			is_magic_type_shunned_trigger = { MAGICTYPE = elemental_water } 
		}
	}
	
	is_criminal = {
		scope:secret_owner = {
			is_magic_type_criminal_trigger = { MAGICTYPE = elemental_water } 
		}
	}
	
	
	on_expose = {
		save_scope_as = secret
		
		secret_exposed_notification_effect = yes
		
		scope:secret_owner = {
			if = {
				limit = {
					NOT = {
						this = scope:secret_exposer
					}
				}
				save_scope_as = owner
				trigger_event = magic_secret.1001
			}
			else = {
				wc_magic_lifestyle_secret_reveal_effect = yes
			}
		}
	}
}

secret_elemental_fire_magic_user = { 
	category = religious
	
	is_valid = {
		NOT =  { 
			scope:secret_owner = {
				has_trait = wc_lifestyle_elemental_fire_magic
				can_openly_learn_magic_type_trigger = { MAGICTYPE = elemental_fire } 
			}
		}
	}
	
	is_shunned = {
		scope:secret_owner = {
			is_magic_type_shunned_trigger = { MAGICTYPE = elemental_fire } 
		}
	}
	
	is_criminal = {
		scope:secret_owner = {
			is_magic_type_criminal_trigger = { MAGICTYPE = elemental_fire } 
		}
	}
	
	
	on_expose = {
		save_scope_as = secret
		
		secret_exposed_notification_effect = yes
		
		scope:secret_owner = {
			if = {
				limit = {
					NOT = {
						this = scope:secret_exposer
					}
				}
				save_scope_as = owner
				trigger_event = magic_secret.1001
			}
			else = {
				wc_magic_lifestyle_secret_reveal_effect = yes
			}
		}
	}
}