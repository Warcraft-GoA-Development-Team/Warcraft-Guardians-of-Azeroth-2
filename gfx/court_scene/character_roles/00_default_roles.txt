standing_ruler = {
	effect = {
		scope:ruler = {
			if = {
				limit = { 
					OR = {
						# Character shows up in their court as long as they are not away on an activity or otherwise unavailable. Special case is when they are holding court, which is why we check the variable here. 
						has_character_flag = holding_court_character_flag
						is_available = yes
					}
					age >= 4
					is_incorrect_type_for_throne_trigger = { CHARACTER = scope:ruler }
				}
				add_to_list = characters
			}
		}
	}
	scripted_animation = { 
		triggered_animation = {
			trigger = { always = yes }
			animation = { personality_honorable personality_content personality_rational }
		}
	}
}

standing_spouse = {
	effect = {
		scope:ruler = {
			if = {
				limit = { 
					exists = primary_spouse
					primary_spouse = {
						exists = location
						location = scope:ruler.capital_province
						is_available_healthy_ai_adult = yes
					}
					is_spouse_incorrect_type_for_throne_trigger = { CHARACTER = scope:ruler }
				}
				primary_spouse = { add_to_list = characters }
			}
		}
	}
	scripted_animation = { 
		triggered_animation = {
			trigger = { always = yes }
			animation = { personality_honorable personality_content personality_rational }
		}
	}
}

# Role is used in code to place people on throne
ruler = {
	effect = {
		scope:ruler = {
			if = {
				limit = { 
					OR = {
						# Check variable instead
						has_character_flag = holding_court_character_flag
						is_available = yes
					}
					age >= 4
					NOT = {
						is_incorrect_type_for_throne_trigger = { CHARACTER = scope:ruler }
					}
				}
				add_to_list = characters
			}
		}
	}

	# ruler sits on the throne, so this animation parameter is ignored
	# instead we use animation specific to the throne entity
	# see game/gfx/court_scene/throne_animations/throne_animations.txt
	scripted_animation = {
		animation = throne_room_ruler
	}
}

# Role is used in code to place people on throne
spouse = {
	effect = {
		scope:ruler = {
			if = {
				limit = { 
					exists = primary_spouse
					primary_spouse = {
						is_available_healthy_adult = yes
					}
					NOT = {
						is_spouse_incorrect_type_for_throne_trigger = { CHARACTER = scope:ruler }
					}
				}
				primary_spouse = { add_to_list = characters }
			}
		}
	}

	# spouse sits on the throne, so this animation parameter is ignored
	# instead we use animation specific to the throne entity
	# see game/gfx/court_scene/throne_animations/throne_animations.txt
	scripted_animation = {
		animation = throne_room_ruler
	}
}

adviser = {
	effect = {
		scope:ruler = {
			if = {
				limit = {
					diarch ?= {
						is_available_healthy_adult = yes 
						NOT = { has_short_disease_trigger = yes }
					}
				}
				diarch = { add_to_list = characters }
			}
			else_if = {
				limit = {
					num_of_relation_guardian > 0
					any_relation = {
						type = guardian
						is_available_healthy_ai_adult = yes
						NOT = { has_short_disease_trigger = yes }
					}
				}
				random_relation = {
					type = guardian
					limit = {
						is_available_healthy_ai_adult = yes
						NOT = { has_short_disease_trigger = yes }
					}
					add_to_list = characters
				}
			}
			else_if = {
				limit = {
					any_councillor = {
						exists = location
						location = scope:ruler.capital_province
						is_non_spouse_councillor_trigger = yes
						is_available_healthy_ai_adult = yes
						NOT = { has_short_disease_trigger = yes }
					}
				}
				random_councillor = {
					limit = {
						exists = location
						location = scope:ruler.capital_province
						is_non_spouse_councillor_trigger = yes
						is_available_healthy_ai_adult = yes
						NOT = { has_short_disease_trigger = yes }
					}
					add_to_list = characters
				}
			}
			else_if = {
				limit = {
					any_court_position_holder = {
						exists = location
						location = scope:ruler.capital_province
						is_available_healthy_ai_adult = yes
						NOT = { has_short_disease_trigger = yes }
						NOT = { has_court_position = court_jester_court_position }
						NOT = { has_court_position = executioner_court_position }
						NOT = { has_court_position = bodyguard_court_position }
						NOT = { has_court_position = champion_court_position }
						#NOT = { has_court_position = garuda_court_position }
						#NOT = { has_court_position = akolouthos_court_position }
					}
				}
				random_court_position_holder = {
					limit = {
						exists = location
						location = scope:ruler.capital_province
						is_available_healthy_ai_adult = yes
						NOT = { has_short_disease_trigger = yes }
						NOT = { has_court_position = court_jester_court_position }
						NOT = { has_court_position = executioner_court_position }
						NOT = { has_court_position = bodyguard_court_position }
						NOT = { has_court_position = champion_court_position }
						#NOT = { has_court_position = garuda_court_position }
						#NOT = { has_court_position = akolouthos_court_position }
					}
					add_to_list = characters
				}
			}
		}
	}
	scripted_animation = { 
		triggered_animation = { 
 			trigger = { # advisor standing neutrally when there are court_events or the ruler is occupied
 				OR = {
	 				court_event_ongoing_trigger = yes
	 				scope:ruler = {
	 					OR = {
	 						is_available = no
	 						age < 4
	 						is_spouse_incorrect_type_for_throne_trigger = { CHARACTER = scope:ruler }
	 						is_incorrect_type_for_throne_trigger = { CHARACTER = scope:ruler }
 						}
	 				}
 				}
			}
 			animation = { personality_honorable personality_content personality_rational }
 		}
 		triggered_animation = { # advisor leaning in to ruler when they're available
 			trigger = {
 				court_event_ongoing_trigger = no
			}
 			animation = throne_room_chancellor
		}
	}
}

inspired_person = {
	effect = {
		random = {
			chance = 85
			scope:ruler = {
				if = {
					limit = {
						any_courtier_or_guest = {
							is_available_non_adventurer_inspired_person_trigger = yes
						}
					}
					random_courtier_or_guest = {
						limit = {
							is_available_non_adventurer_inspired_person_trigger = yes
						}
						add_to_list = characters
					}
			    }
			}
		}
	}
	scripted_animation = {
		triggered_animation = {
			trigger = { always = yes }
			animation = { throne_room_writer happy_teacher reading page_flipping writing }
		}
	}
}

antiquarian = {
	effect = {
		scope:ruler = {
			if = {
				limit = {
					employs_court_position = antiquarian_court_position
					any_court_position_holder = {
			        	type = antiquarian_court_position
						exists = location
						location = scope:ruler.capital_province
						is_available_healthy_ai_adult = yes
						NOT = { has_short_disease_trigger = yes }
					}
		        }
				random_court_position_holder = {
					type = antiquarian_court_position
					limit = {
						exists = location
						location = scope:ruler.capital_province
						is_available_healthy_ai_adult = yes
						NOT = { has_short_disease_trigger = yes }
					}
					add_to_list = characters
				}
			}
		}
	}
	scripted_animation = { 
		animation = throne_room_writer 
	}
}

heir = {
	effect = {
		random = {
			chance = 75
			scope:ruler = {
				if = {
					limit = {
						exists = primary_heir
						primary_heir = {
							exists = location
							location = scope:ruler.capital_province
							is_available_healthy_ai_adult = yes
							is_independent_ruler = no
						}
					}
					primary_heir = { add_to_list = characters }
				}
			}
		}
	}
	scripted_animation = { 
	 	triggered_animation = {
	 		trigger = {
	 			scope:ruler = { 
	 				reverse_opinion = {
	 					target = primary_heir
	 					value > medium_positive_opinion
	 				}
	 			}
	 		}
	 		animation = { happiness boredom flirtation personality_content }
	 	}
	 	triggered_animation = {
	 		trigger = {
	 			scope:ruler = { 
	 				reverse_opinion = {
	 					target = primary_heir
	 					value < medium_positive_opinion
	 				}
	 			}
	 		}
	 		animation = { anger personality_greedy disapproval }
	 	}
	 }
}

intrigue_character = {
	effect = {
		scope:ruler = {
			if = {
				limit = {
					has_ep3_dlc_trigger = yes
					# OR = {
					# 	capital_county ?= title:c_byzantion
					# 	primary_title ?= title:e_byzantium
					# }
				}
			}
			cp:councillor_spymaster ?= { add_to_list = characters }
			court_position:chief_eunuch_court_position ?= { add_to_list = characters }
			every_courtier_or_guest = {
				limit = { is_eunuch_trigger = yes }
				add_to_list = characters
			}
		}
	}
	scripted_animation = {
		triggered_animation = {
			trigger = { always = yes }
			animation = { spymaster }
		}
	}
}

cupbearer = {
	effect = {
		random = {
			chance = 75
			scope:ruler = {
				if = {
					limit = {
						employs_court_position = cupbearer_court_position
						any_court_position_holder = {
				        	type = cupbearer_court_position
							exists = location
							location = scope:ruler.capital_province
							is_available_healthy_ai_adult = yes
						}
			        }
					random_court_position_holder = {
						type = cupbearer_court_position
						limit = {
							is_available_healthy_ai_adult = yes
						}
						add_to_list = characters
					}
				}
			}
		}
	}
	scripted_animation = {
		triggered_animation = {
			trigger = { always = yes }
			animation = { throne_room_bow_1 throne_room_bow_2 throne_room_kneel_1 personality_content paranoia }
		}
	}
}

special_guard = {
	effect = {
		scope:ruler = {
			#if = {
			#	limit = {
			#		employs_court_position = garuda_court_position
		    #    	any_court_position_holder = {
			#	        type = garuda_court_position
			#			exists = location
			#			location = scope:ruler.capital_province
			#			is_available_healthy_ai_adult = yes
			#			NOT = { has_short_disease_trigger = yes }
			#		}
		    #    }
			#	random_court_position_holder = {
			#		type = garuda_court_position
			#		limit = {
			#			exists = location
			#			location = scope:ruler.capital_province
			#			is_available_healthy_ai_adult = yes
			#			NOT = { has_short_disease_trigger = yes }
			#		}
			#		add_to_list = characters
			#	}
			#}
			if = {
				limit = {
					employs_court_position = executioner_court_position
		        	any_court_position_holder = {
				        type = executioner_court_position
						exists = location
						location = scope:ruler.capital_province
						is_available_healthy_ai_adult = yes
						NOT = { has_short_disease_trigger = yes }
					}
		        }
				random_court_position_holder = {
					type = executioner_court_position
					limit = {
						exists = location
						location = scope:ruler.capital_province
						is_available_healthy_ai_adult = yes
						NOT = { has_short_disease_trigger = yes }
					}
					add_to_list = characters
				}
			}
			# else_if = {
			# 	limit = {
			# 		employs_court_position = akolouthos_court_position
			# 		any_court_position_holder = {
			# 	       	type = akolouthos_court_position
			# 			exists = location
			# 			location = scope:ruler.capital_province
			# 			is_available_healthy_ai_adult = yes
			# 			NOT = { has_short_disease_trigger = yes }
			# 		}
		    #     }
			# 	random_court_position_holder = {
			# 		type = akolouthos_court_position
			# 		limit = {
			# 			exists = location
			# 			location = scope:ruler.capital_province
			# 			is_available_healthy_ai_adult = yes
			# 			NOT = { has_short_disease_trigger = yes }
			# 		}
			# 		add_to_list = characters
			# 	}
			# }
			else_if = {
				limit = {
					employs_court_position = champion_court_position
					any_court_position_holder = {
				       	type = champion_court_position
						exists = location
						location = scope:ruler.capital_province
						is_available_healthy_ai_adult = yes
						NOT = { has_short_disease_trigger = yes }
					}
		        }
				random_court_position_holder = {
					type = champion_court_position
					limit = {
						exists = location
						location = scope:ruler.capital_province
						is_available_healthy_ai_adult = yes
						NOT = { has_short_disease_trigger = yes }
					}
					add_to_list = characters
				}
			}
			else_if = {
				limit = {
					employs_court_position = bodyguard_court_position
					any_court_position_holder = {
				       	type = bodyguard_court_position
						exists = location
						location = scope:ruler.capital_province
						is_available_healthy_ai_adult = yes
						NOT = { has_short_disease_trigger = yes }
					}
		        }
				random_court_position_holder = {
					type = bodyguard_court_position
					limit = {
						exists = location
						location = scope:ruler.capital_province
						is_available_healthy_ai_adult = yes
						NOT = { has_short_disease_trigger = yes }
					}
					add_to_list = characters
				}
			}
			every_in_list = {
				limit = {
					OR = {
						is_clergy = yes
						has_trait = maimed
					}
				}
				list = characters
				remove_from_list = characters
			}
		}
	}
	scripted_animation = {
		triggered_animation = {
			trigger = { always = yes }
			animation = { throne_room_one_handed_passive_1 throne_room_one_handed_passive_2 marshal }
		}
	}
}

knights = {
	effect = {
		scope:ruler = {
			if = {
				limit = {
					any_knight = {
						count >= 2
						exists = location
						location = scope:ruler.capital_province
						is_ruler = no
						is_available_healthy_ai_adult = yes
						is_clergy = no
						NOT = { has_court_position = court_jester_court_position }
						NOT = { has_short_disease_trigger = yes }
						NOT = { has_trait = maimed }
					}
		        }
				every_knight = {
					limit = {
						exists = location
						location = scope:ruler.capital_province
						is_ruler = no
						is_available_healthy_ai_adult = yes
						is_clergy = no
						NOT = { has_court_position = court_jester_court_position }
						NOT = { has_short_disease_trigger = yes }
						NOT = { has_trait = maimed }
					}
					add_to_list = characters
				}
			}
			else_if = {
				limit = {
					any_knight = {
						count >= 2
						exists = location
						location = scope:ruler.capital_province
						OR = {
							is_ruler = no
							highest_held_title_tier <= tier_county
						}
						is_available_healthy_ai_adult = yes
						is_clergy = no
						NOT = { has_court_position = court_jester_court_position }
						NOT = { has_short_disease_trigger = yes }
						NOT = { has_trait = maimed }
					}
		        }
				every_knight = {
					limit = {
						exists = location
						location = scope:ruler.capital_province
						OR = {
							is_ruler = no
							highest_held_title_tier <= tier_county
						}
						is_available_healthy_ai_adult = yes
						is_clergy = no
						NOT = { has_court_position = court_jester_court_position }
						NOT = { has_short_disease_trigger = yes }
						NOT = { has_trait = maimed }
					}
					add_to_list = characters
				}
			}
			else_if = {
				limit = {
					any_knight = {
						exists = location
						location = scope:ruler.capital_province
						is_available_healthy_ai_adult = yes
						is_clergy = no
						NOT = { has_court_position = court_jester_court_position }
						NOT = { has_short_disease_trigger = yes }
						NOT = { has_trait = maimed }
					}
				}
				every_knight = {
					limit = {
						exists = location
						location = scope:ruler.capital_province
						is_available_healthy_ai_adult = yes
						is_clergy = no
						NOT = { has_court_position = court_jester_court_position }
						NOT = { has_short_disease_trigger = yes }
						NOT = { has_trait = maimed }
					}
					add_to_list = characters
				}
			}
			else = {
				every_courtier = {
					limit = {
						exists = location
						location = scope:ruler.capital_province
						is_available_healthy_ai_adult = yes
						is_clergy = no
						NOT = { has_court_position = court_jester_court_position }
						NOT = { has_short_disease_trigger = yes }
						NOT = { has_trait = maimed }
						can_be_combatant_based_on_gender_trigger = { ARMY_OWNER = scope:ruler }
					}
					add_to_list = characters
				}
			}
		}
	}
	scripted_animation = {
		triggered_animation = {
			trigger = {
				always = yes
			}
			animation = { throne_room_two_handed_passive_1 }
		}
	}
}

poet = {
	effect = {
		random = {
			chance = 50
			scope:ruler = {
				if = {
					limit = {
						employs_court_position = court_poet_court_position
						any_court_position_holder = {
				        	type = court_poet_court_position
							exists = location
							location = scope:ruler.capital_province
							is_available_healthy_ai_adult = yes
						}
		        	}
					random_court_position_holder = {
						type = court_poet_court_position
						limit = {
							exists = location
							location = scope:ruler.capital_province
							is_available_healthy_ai_adult = yes
						}
						add_to_list = characters
					}
				}
			}
		}
	}
	scripted_animation = { 
		triggered_animation = {
			trigger = { always = yes }
			animation = { worry sadness personality_cynical personality_compassionate throne_room_writer }
		}
	}
}

jester = {
	effect = {
		random = {
			chance = 85
			scope:ruler = {
				if = {
					limit = {
						employs_court_position = court_jester_court_position
						any_court_position_holder = {
				        	type = court_jester_court_position
							exists = location
							location = scope:ruler.capital_province
							is_available_healthy_ai_adult = yes
			        	}
		        	}
					random_court_position_holder = {
						type = court_jester_court_position
						limit = {
							exists = location
							location = scope:ruler.capital_province
							is_available_healthy_ai_adult = yes
						}
						add_to_list = characters
					}
				}
			}
		}
	}
	scripted_animation = { 
		triggered_animation = {
			trigger = { always = yes }
			animation = { throne_room_bow_3 personality_irrational happiness shame throne_room_applaud_1 laugh dancing instrument_active }
		}
	}
}

schemers = {
	effect = {
		random = {
			chance = 25
			scope:ruler = {
				if = {
					limit = {
						any_courtier_or_guest = {
							count > 1
							is_available_schemer = yes
							NOT = { has_short_disease_trigger = yes }
						}
					}
					every_courtier_or_guest = {
						limit = {
							is_available_schemer = yes
							NOT = { has_short_disease_trigger = yes }
						}
						add_to_list = characters
					}
				}
			}
		}
	}
	scripted_animation = { 
		triggered_animation = {
			trigger = { always = yes }
			animation = { scheme anger disbelief worry shock stressed_teacher paranoia }
		}
	}
}

arguing_councillors = {
	effect = {
		random = {
			chance = 75
			scope:ruler = {
				if = {
					limit = {
						any_councillor = {
							count > 1
							exists = location
							location = scope:ruler.capital_province
							is_available_healthy_ai_adult = yes
							NOT = { has_short_disease_trigger = yes }
							num_of_relation_rival > 0
							any_relation = {
								type = rival
								exists = liege
								liege = prev.liege
								OR = {
									has_council_position = councillor_chancellor
									has_council_position = councillor_marshal
									has_council_position = councillor_steward
									has_council_position = councillor_spymaster
									has_council_position = councillor_court_chaplain
								}
							}
						}
					}
					every_councillor = {
						limit = {
							exists = location
							location = scope:ruler.capital_province
							is_available_healthy_ai_adult = yes
							NOT = { has_short_disease_trigger = yes }
							num_of_relation_rival > 0
							any_relation = {
								type = rival
								exists = liege
								liege = prev.liege
								OR = {
									has_council_position = councillor_chancellor
									has_council_position = councillor_marshal
									has_council_position = councillor_steward
									has_council_position = councillor_spymaster
									has_council_position = councillor_court_chaplain
								}
							}
						}
						add_to_list = characters
					}
				}
			}
		}
	}
	scripted_animation = {
		triggered_animation = {
			trigger = { always = yes }
			animation = { anger rage disapproval }
		}
	}
}

flirty_flirts = {
	effect = {
		random = {
			chance = 25
			scope:ruler = {
				if = {
					limit = {
						any_courtier_or_guest = {
							count > 1
							is_available_healthy_ai_adult = yes
							NOT = { has_short_disease_trigger = yes }
							any_relation = {
								type = lover
								exists = location
								location = scope:ruler.capital_province
								exists = liege
								liege = prev.liege
							}
						}
					}
					random_courtier_or_guest = {
						limit = {
							is_available_healthy_ai_adult = yes
							NOT = { has_short_disease_trigger = yes }
							any_relation = {
								type = lover
								exists = liege
								liege = prev.liege
							}
						}
						add_to_list = characters
						random_relation = {
							type = lover
							limit = {
								exists = location
								location = scope:ruler.capital_province
								exists = liege
								liege = prev.liege
							}
							add_to_list = characters
						}
					}
				}
			}
		}
	}
	scripted_animation = {
		triggered_animation = {
			trigger = { always = yes }
			animation = { flirtation love }
		}
	}
}

secondary_spouses = {
	effect = {
		random = {
			chance = 75
			scope:ruler =  {
				if = {
					limit = {
						any_consort = {
							count >= 2
							exists = location
							location = scope:ruler.capital_province
							is_available_non_primary_consort = yes
							NOT = { has_short_disease_trigger = yes }
						}
					}
					every_consort = {
						limit = {
							exists = location
							location = scope:ruler.capital_province
							is_available_non_primary_consort = yes
							NOT = { has_short_disease_trigger = yes }
						}
						add_to_list = characters
					}
				}
			}
		}
	}
	scripted_animation = { 
		triggered_animation = {
			trigger = { always = yes }
			animation =  { happiness love disgust anger throne_room_conversation_1 throne_room_conversation_2 throne_room_conversation_3 throne_room_conversation_4 admiration }
		}
	}
}

court_children = {
	effect = {
		scope:ruler = {				
			if = {
				limit = {
					any_courtier_or_guest = {
						count >= 2
						child_not_infant_trigger = yes
						child_not_teen_trigger = yes
						is_healthy = yes
						NOT = { has_short_disease_trigger = yes }
					}
				}
				every_courtier_or_guest = {
					limit = {
						child_not_infant_trigger = yes
						child_not_teen_trigger = yes
						is_healthy = yes
						NOT = { has_short_disease_trigger = yes }
					}
					add_to_list = characters
				}
			}
		}
	}
	scripted_animation = { 
		triggered_animation = {
			trigger = { always = yes }
			animation = { happiness throne_room_conversation_1 throne_room_conversation_2 throne_room_conversation_3 throne_room_conversation_4 admiration throne_room_applaud_1 storyteller debating child_hobby_horse clutching_toy reading crying dancing eyeroll eavesdrop marshal_wooden_sword throne_room_wooden_sword }
		}
	}
}

family = {
	effect = {
		scope:ruler = {	
			every_courtier_or_guest = {
				limit = {
					is_available_non_child_family = yes
					NOT = { has_short_disease_trigger = yes }
				}
				add_to_list = characters
			}
		}
	}
	scripted_animation = { 
		triggered_animation = {
			trigger = { always = yes }
			animation = { throne_room_conversation_1 throne_room_conversation_2 throne_room_conversation_3 throne_room_conversation_4 anger disapproval disbelief worry happiness }
		}
	}
}

# low-priority courtiers (generic). Should always be at the bottom of this list

low_prio_warriors = {
	effect = {
		scope:ruler = {
			random = {
				chance = {
					value = 0
					if = {
						limit = {
							has_court_type = court_warlike
							# NOR = {
							# 	has_title = title:e_byzantium
							# 	has_title = title:e_roman_empire
							# }
							OR = {
								any_knight = {
									exists = location
									location = scope:ruler.capital_province
									is_available_healthy_ai_adult = yes
									NOT = { has_short_disease_trigger = yes }
									is_clergy = no
									NOT = { has_court_position = court_jester_court_position }
									NOT = { has_trait = maimed }
								}
								any_vassal = {
									exists = location
									location = scope:ruler.capital_province
									is_available_healthy_ai_adult = yes
									NOT = { has_short_disease_trigger = yes }
									is_clergy = no
									NOT = { has_court_position = court_jester_court_position }
									OR = {
										has_council_position = councillor_marshal
										has_court_position = champion_court_position
										has_court_position = master_of_hunt_court_position
										has_education_martial_trigger = yes
									}
									NOT = { has_trait = maimed }
								}
								any_courtier_or_guest = {
									is_available_healthy_ai_adult = yes
									NOT = { has_short_disease_trigger = yes }
									is_clergy = no
									NOT = { has_court_position = court_jester_court_position }
									can_be_combatant_based_on_gender_trigger = { ARMY_OWNER = scope:ruler }
									OR = {
										has_council_position = councillor_marshal
										has_court_position = champion_court_position
										has_court_position = master_of_hunt_court_position
										has_education_martial_trigger = yes
									}
									NOT = { has_trait = maimed }
								}
							}
						}
						add = 100
					}
					if = {
						limit = {
							OR = {
								has_title = title:e_byzantium
								has_title = title:e_roman_empire
							}
							OR = {
								any_knight = {
									exists = location
									location = scope:ruler.capital_province
									is_available_healthy_ai_adult = yes
									NOT = { has_short_disease_trigger = yes }
									is_clergy = no
									NOT = { has_court_position = court_jester_court_position }
									NOT = { has_trait = maimed }
								}
								any_vassal = {
									exists = location
									location = scope:ruler.capital_province
									is_available_healthy_ai_adult = yes
									NOT = { has_short_disease_trigger = yes }
									is_clergy = no
									NOT = { has_court_position = court_jester_court_position }
									OR = {
										has_council_position = councillor_marshal
										has_court_position = champion_court_position
										has_court_position = master_of_hunt_court_position
										has_education_martial_trigger = yes
									}
									NOT = { has_trait = maimed }
								}
								any_courtier_or_guest = {
									is_available_healthy_ai_adult = yes
									NOT = { has_short_disease_trigger = yes }
									is_clergy = no
									NOT = { has_court_position = court_jester_court_position }
									can_be_combatant_based_on_gender_trigger = { ARMY_OWNER = scope:ruler }
									OR = {
										has_council_position = councillor_marshal
										has_court_position = champion_court_position
										has_court_position = master_of_hunt_court_position
										has_education_martial_trigger = yes
									}
									NOT = { has_trait = maimed }
								}
							}
						}
						add = 25
					}
				}
				scope:ruler = {
					every_knight = {
						limit = {
							exists = location
							location = scope:ruler.capital_province
							is_available_healthy_ai_adult = yes
							NOT = { has_short_disease_trigger = yes }
							is_clergy = no
							NOT = { has_court_position = court_jester_court_position }
							NOT = { has_trait = maimed }
						}
						add_to_list = characters
					}
					every_vassal = {
						limit = {
							exists = location
							location = scope:ruler.capital_province
							can_be_combatant_based_on_gender_trigger = { ARMY_OWNER = scope:ruler }
							is_available_healthy_ai_adult = yes
							NOT = { has_short_disease_trigger = yes }
							is_clergy = no
							NOT = { has_court_position = court_jester_court_position }
							OR = {
								has_council_position = councillor_marshal
								has_court_position = champion_court_position
								has_court_position = master_of_hunt_court_position
								has_education_martial_trigger = yes
							}
							NOT = { has_trait = maimed }
						}
						add_to_list = characters
					}
					every_courtier_or_guest = {
						limit = {
							is_available_healthy_ai_adult = yes
							NOT = { has_short_disease_trigger = yes }
							is_clergy = no
							NOT = { has_court_position = court_jester_court_position }
							can_be_combatant_based_on_gender_trigger = { ARMY_OWNER = scope:ruler }
							OR = {
								has_council_position = councillor_marshal
								has_court_position = champion_court_position
								has_court_position = master_of_hunt_court_position
								has_education_martial_trigger = yes
							}
							NOT = { has_trait = maimed }
						}
						add_to_list = characters
					}
				}
			}
		}
	}
	scripted_animation = {
		triggered_animation = {
	 		trigger = {
	 			always = yes
	 		}
	 		animation = { throne_room_conversation_3 throne_room_conversation_4 throne_room_two_handed_passive_1 throne_room_one_handed_passive_1 throne_room_one_handed_passive_2 personality_bold spymaster marshal hunting_knife_start throne_room_two_handed_passive_shield marshal_shield inspect_weapon }
	 	}
	}

	is_low_priority = yes
}

low_prio_clergy = {
	effect = {
		scope:ruler = {
			random = {
				chance = {
					value = 0
					if = {
						limit = {
							has_court_type = court_scholarly
							# NOR = {
							# 	has_title = title:e_byzantium
							# 	has_title = title:e_roman_empire
							# }
							OR = {
								any_courtier_or_guest = {
									is_available_healthy_ai_adult = yes
									NOT = { has_short_disease_trigger = yes }
									NOT = { has_court_position = court_jester_court_position }
									OR = {
										is_clergy = yes
										has_education_learning_trigger = yes
										has_trait = scholar
										has_trait = theologian
										has_trait = lifestyle_herbalist
										has_trait = lifestyle_physician
										#has_court_position = chief_qadi_court_position
										has_court_position = high_almoner_court_position
										has_court_position = court_artificer_court_position
										has_court_position = court_physician_court_position
										has_court_position = cultural_emissary_court_position
										is_available_non_adventurer_inspired_person_trigger = yes
										has_council_position = councillor_court_chaplain
									}
								}
								any_vassal = {
									exists = location
									location = scope:ruler.capital_province
									is_available_healthy_ai_adult = yes
									NOT = { has_short_disease_trigger = yes }
									NOT = { has_court_position = court_jester_court_position }
									OR = {
										is_clergy = yes
										has_education_learning_trigger = yes
										has_trait = scholar
										has_trait = theologian
										has_trait = lifestyle_herbalist
										has_trait = lifestyle_physician
										#has_court_position = chief_qadi_court_position
										has_court_position = high_almoner_court_position
										has_court_position = court_artificer_court_position
										has_court_position = court_physician_court_position
										has_court_position = cultural_emissary_court_position
										has_court_position = court_tutor_court_position
										is_available_non_adventurer_inspired_person_trigger = yes
										has_council_position = councillor_court_chaplain
									}
								}
							}
						}
						add = 100
					}
					if = {
						limit = {
							OR = {
								has_title = title:e_byzantium
								has_title = title:e_roman_empire
							}
							OR = {
								any_courtier_or_guest = {
									is_available_healthy_ai_adult = yes
									NOT = { has_short_disease_trigger = yes }
									NOT = { has_court_position = court_jester_court_position }
									OR = {
										is_clergy = yes
										has_education_learning_trigger = yes
										has_trait = scholar
										has_trait = theologian
										has_trait = lifestyle_herbalist
										has_trait = lifestyle_physician
										has_court_position = chief_qadi_court_position
										has_court_position = high_almoner_court_position
										has_court_position = court_artificer_court_position
										has_court_position = court_physician_court_position
										has_court_position = cultural_emissary_court_position
										is_available_non_adventurer_inspired_person_trigger = yes
										has_council_position = councillor_court_chaplain
									}
								}
								any_vassal = {
									exists = location
									location = scope:ruler.capital_province
									is_available_healthy_ai_adult = yes
									NOT = { has_short_disease_trigger = yes }
									NOT = { has_court_position = court_jester_court_position }
									OR = {
										is_clergy = yes
										has_education_learning_trigger = yes
										has_trait = scholar
										has_trait = theologian
										has_trait = lifestyle_herbalist
										has_trait = lifestyle_physician
										has_court_position = chief_qadi_court_position
										has_court_position = high_almoner_court_position
										has_court_position = court_artificer_court_position
										has_court_position = court_physician_court_position
										has_court_position = cultural_emissary_court_position
										has_court_position = court_tutor_court_position
										is_available_non_adventurer_inspired_person_trigger = yes
										has_council_position = councillor_court_chaplain
									}
								}
							}
						}
						add = 25
					}
				}
				scope:ruler = {
					every_courtier_or_guest = {
						limit = {
							is_available_healthy_ai_adult = yes
							NOT = { has_short_disease_trigger = yes }
							NOT = { has_court_position = court_jester_court_position }
							OR = {
								is_clergy = yes
								has_education_learning_trigger = yes
								has_trait = scholar
								has_trait = theologian
								has_trait = lifestyle_herbalist
								has_trait = lifestyle_physician
								has_court_position = chief_qadi_court_position
								has_court_position = high_almoner_court_position
								has_court_position = court_artificer_court_position
								has_court_position = court_physician_court_position
								has_court_position = cultural_emissary_court_position
								has_court_position = court_tutor_court_position
								is_available_non_adventurer_inspired_person_trigger = yes
								has_council_position = councillor_court_chaplain
							}
						}
						add_to_list = characters
					}
					every_vassal = {
						limit = {
							exists = location
							location = scope:ruler.capital_province
							is_available_healthy_ai_adult = yes
							NOT = { has_short_disease_trigger = yes }
							NOT = { has_court_position = court_jester_court_position }
							OR = {
								is_clergy = yes
								has_education_learning_trigger = yes
								has_trait = scholar
								has_trait = theologian
								has_trait = lifestyle_herbalist
								has_trait = lifestyle_physician
								has_court_position = chief_qadi_court_position
								has_court_position = high_almoner_court_position
								has_court_position = court_artificer_court_position
								has_court_position = court_physician_court_position
								has_court_position = cultural_emissary_court_position
								has_court_position = court_tutor_court_position
								is_available_non_adventurer_inspired_person_trigger = yes
								has_council_position = councillor_court_chaplain
							}
						}
						add_to_list = characters
					}
				}
			}
		}
	}
	scripted_animation = {
		triggered_animation = {
	 		trigger = {
	 			always = yes
	 		}
	 		animation = { throne_room_conversation_1 throne_room_conversation_2 throne_room_conversation_4 throne_room_writer personality_rational chaplain personality_zealous boredom thinking prayer storyteller debating reading writing page_flipping stressed_teacher happy_teacher physician }
	 	}
	}

	is_low_priority = yes
}

low_prio_diplomats = {
	effect = {
		scope:ruler = {
			random = {
				chance = {
					value = 0
					if = {
						limit = {
							has_court_type = court_diplomatic
							# NOR = {
							# 	has_title = title:e_byzantium
							# 	has_title = title:e_roman_empire
							# }
							OR = {
								any_courtier_or_guest = {
									is_available_healthy_ai_adult = yes
									NOT = { has_short_disease_trigger = yes }
									NOT = { has_court_position = court_jester_court_position }
									OR = {
										has_education_diplomacy_trigger = yes
										has_trait = diplomat
										has_court_position = cultural_emissary_court_position
										has_court_position = cupbearer_court_position
										has_court_position = food_taster_court_position
										has_court_position = lady_in_waiting_court_position
										has_court_position = chief_eunuch_court_position
										has_council_position = councillor_chancellor
									}
								}
								any_vassal = {
									exists = location
									location = scope:ruler.capital_province
									is_available_healthy_ai_adult = yes
									NOT = { has_short_disease_trigger = yes }
									NOT = { has_court_position = court_jester_court_position }
									OR = {
										has_education_diplomacy_trigger = yes
										has_trait = diplomat
										has_court_position = cultural_emissary_court_position
										has_court_position = cupbearer_court_position
										has_court_position = food_taster_court_position
										has_court_position = lady_in_waiting_court_position
										has_court_position = chief_eunuch_court_position
										has_council_position = councillor_chancellor
									}
								}
							}
						}
						add = 100
					}
					if = {
						limit = {
							OR = {
								has_title = title:e_byzantium
								has_title = title:e_roman_empire
							}
							OR = {
								any_courtier_or_guest = {
									is_available_healthy_ai_adult = yes
									NOT = { has_short_disease_trigger = yes }
									NOT = { has_court_position = court_jester_court_position }
									OR = {
										has_education_diplomacy_trigger = yes
										has_trait = diplomat
										has_court_position = cultural_emissary_court_position
										has_court_position = cupbearer_court_position
										has_court_position = food_taster_court_position
										has_court_position = lady_in_waiting_court_position
										has_court_position = chief_eunuch_court_position
										has_council_position = councillor_chancellor
									}
								}
								any_vassal = {
									exists = location
									location = scope:ruler.capital_province
									is_available_healthy_ai_adult = yes
									NOT = { has_short_disease_trigger = yes }
									NOT = { has_court_position = court_jester_court_position }
									OR = {
										has_education_diplomacy_trigger = yes
										has_trait = diplomat
										has_court_position = cultural_emissary_court_position
										has_court_position = cupbearer_court_position
										has_court_position = food_taster_court_position
										has_court_position = lady_in_waiting_court_position
										has_court_position = chief_eunuch_court_position
										has_council_position = councillor_chancellor
									}
								}
							}
						}
						add = 25
					}
				}
				scope:ruler = {
					every_courtier_or_guest = {
						limit = {
							is_available_healthy_ai_adult = yes
							NOT = { has_short_disease_trigger = yes }
							NOT = { has_court_position = court_jester_court_position }
							OR = {
								has_education_diplomacy_trigger = yes
								has_trait = diplomat
								has_court_position = cultural_emissary_court_position
								has_court_position = cupbearer_court_position
								has_court_position = food_taster_court_position
								has_court_position = lady_in_waiting_court_position
								has_court_position = chief_eunuch_court_position
								has_council_position = councillor_chancellor
							}
						}
						add_to_list = characters
					}
					every_vassal = {
						limit = {
							exists = location
							location = scope:ruler.capital_province
							is_available_healthy_ai_adult = yes
							NOT = { has_short_disease_trigger = yes }
							NOT = { has_court_position = court_jester_court_position }
							OR = {
								has_education_diplomacy_trigger = yes
								has_trait = diplomat
								has_court_position = cultural_emissary_court_position
								has_court_position = cupbearer_court_position
								has_court_position = food_taster_court_position
								has_court_position = lady_in_waiting_court_position
								has_court_position = chief_eunuch_court_position
								has_council_position = councillor_chancellor
							}
						}
						add_to_list = characters
					}
				}
			}
		}
	}
	scripted_animation = {
		triggered_animation = {
	 		trigger = {
	 			always = yes
	 		}
	 		animation = { throne_room_conversation_1 throne_room_conversation_2 throne_room_conversation_4 flirtation personality_honorable personality_compassionate throne_room_bow_3 ecstasy personality_forgiving toast_goblet toast laugh storyteller debating instrument_idle }
	 	}
	}

	is_low_priority = yes
}

low_prio_stewards = {
	effect = {
		scope:ruler = {
			random = {
				chance = {
					value = 0
					if = {
						limit = {
							has_court_type = court_administrative
							# NOR = {
							# 	has_title = title:e_byzantium
							# 	has_title = title:e_roman_empire
							# }
							OR = {
								any_courtier_or_guest = {
									is_available_healthy_ai_adult = yes
									NOT = { has_short_disease_trigger = yes }
									NOT = { has_court_position = court_jester_court_position }
									OR = {
										has_education_stewardship_trigger = yes
										has_trait = architect
										has_trait = avaricious
										has_trait = administrator
										has_trait = lifestyle_gardener
										has_court_position = cultural_emissary_court_position
										has_court_position = court_gardener_court_position
										has_court_position = court_artificer_court_position
										#has_court_position = chief_qadi_court_position
										has_court_position = royal_architect_court_position
										has_court_position = seneschal_court_position
										has_council_position = councillor_steward
									}
								}
								any_vassal = {
									exists = location
									location = scope:ruler.capital_province
									is_available_healthy_ai_adult = yes
									NOT = { has_short_disease_trigger = yes }
									NOT = { has_court_position = court_jester_court_position }
									OR = {
										has_education_stewardship_trigger = yes
										has_trait = architect
										has_trait = avaricious
										has_trait = administrator
										has_trait = lifestyle_gardener
										has_court_position = cultural_emissary_court_position
										has_court_position = court_gardener_court_position
										has_court_position = court_artificer_court_position
										#has_court_position = chief_qadi_court_position
										has_court_position = royal_architect_court_position
										has_court_position = seneschal_court_position
										has_council_position = councillor_steward
									}
								}
							}
						}
						add = 100
					}
					if = {
						limit = {
							has_court_type = court_administrative
							# OR = {
							# 	has_title = title:e_byzantium
							# 	has_title = title:e_roman_empire
							# }
							OR = {
								any_courtier_or_guest = {
									is_available_healthy_ai_adult = yes
									NOT = { has_short_disease_trigger = yes }
									NOT = { has_court_position = court_jester_court_position }
									OR = {
										has_education_stewardship_trigger = yes
										has_trait = architect
										has_trait = avaricious
										has_trait = administrator
										has_trait = lifestyle_gardener
										has_court_position = cultural_emissary_court_position
										has_court_position = court_gardener_court_position
										has_court_position = court_artificer_court_position
										has_court_position = chief_qadi_court_position
										has_court_position = royal_architect_court_position
										has_court_position = seneschal_court_position
										has_council_position = councillor_steward
									}
								}
								any_vassal = {
									exists = location
									location = scope:ruler.capital_province
									is_available_healthy_ai_adult = yes
									NOT = { has_short_disease_trigger = yes }
									NOT = { has_court_position = court_jester_court_position }
									OR = {
										has_education_stewardship_trigger = yes
										has_trait = architect
										has_trait = avaricious
										has_trait = administrator
										has_trait = lifestyle_gardener
										has_court_position = cultural_emissary_court_position
										has_court_position = court_gardener_court_position
										has_court_position = court_artificer_court_position
										has_court_position = chief_qadi_court_position
										has_court_position = royal_architect_court_position
										has_court_position = seneschal_court_position
										has_council_position = councillor_steward
									}
								}
							}
						}
						add = 25
					}
				}
				scope:ruler = {
					every_courtier_or_guest = {
						limit = {
							is_available_healthy_ai_adult = yes
							NOT = { has_short_disease_trigger = yes }
							NOT = { has_court_position = court_jester_court_position }
							OR = {
								has_education_stewardship_trigger = yes
								has_trait = architect
								has_trait = avaricious
								has_trait = administrator
								has_trait = lifestyle_gardener
								has_court_position = cultural_emissary_court_position
								has_court_position = court_gardener_court_position
								has_court_position = court_artificer_court_position
								has_court_position = chief_qadi_court_position
								has_court_position = royal_architect_court_position
								has_court_position = seneschal_court_position
								has_council_position = councillor_steward
							}
						}
						add_to_list = characters
					}
					every_vassal = {
						limit = {
							exists = location
							location = scope:ruler.capital_province
							is_available_healthy_ai_adult = yes
							NOT = { has_short_disease_trigger = yes }
							NOT = { has_court_position = court_jester_court_position }
							OR = {
								has_education_stewardship_trigger = yes
								has_trait = architect
								has_trait = avaricious
								has_trait = administrator
								has_trait = lifestyle_gardener
								has_court_position = cultural_emissary_court_position
								has_court_position = court_gardener_court_position
								has_court_position = court_artificer_court_position
								has_court_position = chief_qadi_court_position
								has_court_position = royal_architect_court_position
								has_court_position = seneschal_court_position
								has_council_position = councillor_steward
							}
						}
						add_to_list = characters
					}
				}
			}
		}
	}
	scripted_animation = {
		triggered_animation = {
	 		trigger = {
	 			always = yes
	 		}
	 		#animation = { steward }
	 		animation = { throne_room_conversation_2 throne_room_conversation_3 throne_room_conversation_4 steward personality_cynical beg throne_room_writer toast toast_goblet betting storyteller debating }
	 	}
	}

	is_low_priority = yes
}

low_prio_intriguers = {
	effect = {
		scope:ruler = {
			random = {
				chance = {
					value = 0
					if = {
						limit = {
							has_court_type = court_intrigue
							# NOR = {
							# 	has_title = title:e_byzantium
							# 	has_title = title:e_roman_empire
							# }
							OR = {
								any_courtier_or_guest = {
									is_available_healthy_ai_adult = yes
									NOT = { has_court_position = court_jester_court_position }
									NOT = { has_short_disease_trigger = yes }
									OR = {
										has_education_intrigue_trigger = yes
										has_trait = schemer
										has_trait = torturer
										has_court_position = executioner_court_position
										has_court_position = chief_eunuch_court_position
										has_court_position = food_taster_court_position
										has_court_position = lady_in_waiting_court_position
										has_council_position = councillor_spymaster
									}
								}
								any_vassal = {
									exists = location
									location = scope:ruler.capital_province
									is_available_healthy_ai_adult = yes
									NOT = { has_court_position = court_jester_court_position }
									NOT = { has_short_disease_trigger = yes }
									OR = {
										has_education_intrigue_trigger = yes
										has_trait = schemer
										has_trait = torturer
										has_court_position = executioner_court_position
										has_court_position = chief_eunuch_court_position
										has_court_position = food_taster_court_position
										has_court_position = lady_in_waiting_court_position
										has_council_position = councillor_spymaster
									}
								}
							}
						}
						add = 100
					}
					if = {
						limit = {
							has_court_type = court_intrigue
							OR = {
								has_title = title:e_byzantium
								has_title = title:e_roman_empire
							}
							OR = {
								any_courtier_or_guest = {
									is_available_healthy_ai_adult = yes
									NOT = { has_court_position = court_jester_court_position }
									NOT = { has_short_disease_trigger = yes }
									OR = {
										has_education_intrigue_trigger = yes
										has_trait = schemer
										has_trait = torturer
										has_court_position = executioner_court_position
										has_court_position = chief_eunuch_court_position
										has_court_position = food_taster_court_position
										has_court_position = lady_in_waiting_court_position
										has_council_position = councillor_spymaster
									}
								}
								any_vassal = {
									exists = location
									location = scope:ruler.capital_province
									is_available_healthy_ai_adult = yes
									NOT = { has_court_position = court_jester_court_position }
									NOT = { has_short_disease_trigger = yes }
									OR = {
										has_education_intrigue_trigger = yes
										has_trait = schemer
										has_trait = torturer
										has_court_position = executioner_court_position
										has_court_position = chief_eunuch_court_position
										has_court_position = food_taster_court_position
										has_court_position = lady_in_waiting_court_position
										has_council_position = councillor_spymaster
									}
								}
							}
						}
						add = 60
					}
				}
				scope:ruler = {
					every_courtier_or_guest = {
						limit = {
							is_available_healthy_ai_adult = yes
							NOT = { has_short_disease_trigger = yes }
							NOT = { has_court_position = court_jester_court_position }
							OR = {
								has_education_intrigue_trigger = yes
								has_trait = schemer
								has_trait = torturer
								has_court_position = executioner_court_position
								has_court_position = chief_eunuch_court_position
								has_court_position = food_taster_court_position
								has_court_position = lady_in_waiting_court_position
								has_council_position = councillor_spymaster
							}
						}
						add_to_list = characters
					}
					every_vassal = {
						limit = {
							exists = location
							location = scope:ruler.capital_province
							is_available_healthy_ai_adult = yes
							NOT = { has_short_disease_trigger = yes }
							NOT = { has_court_position = court_jester_court_position }
							OR = {
								has_education_intrigue_trigger = yes
								has_trait = schemer
								has_trait = torturer
								has_court_position = executioner_court_position
								has_court_position = chief_eunuch_court_position
								has_court_position = food_taster_court_position
								has_court_position = lady_in_waiting_court_position
								has_council_position = councillor_spymaster
							}
						}
						add_to_list = characters
					}
				}
			}
		}
	}
	scripted_animation = {
		triggered_animation = {
	 		trigger = {
	 			always = yes
	 		}
	 		#animation = { pain }
	 		animation = { throne_room_conversation_2 throne_room_conversation_3 throne_room_conversation_4 spymaster personality_dishonorable scheme paranoia dismissal eavesdrop eyeroll debating bribing }
	 	}
	}

	is_low_priority = yes
}

low_prio_prisoners = {
	effect = {
		scope:ruler = {
			random = {
				chance = {
					value = 0
					if = {
						limit = {
							has_court_type = court_intrigue
							any_prisoner = {
								is_adult = yes
								is_ai = yes
								is_healthy = yes
								is_in_prison_type = house_arrest
							}
						}
						add = 100
					}
				}
				scope:ruler = {
					random_prisoner = {
						limit = {
							is_adult = yes
							is_ai = yes
							is_healthy = yes
							is_in_prison_type = house_arrest
						}
						add_to_list = characters
					}
				}
			}
		}
	}
	scripted_animation = {
		triggered_animation = {
	 		trigger = {
	 			always = yes
	 		}
			animation = { prisonhouse }
	 	}
	}

	is_low_priority = yes
}

low_prio_courtiers = { 
	effect = {
		scope:ruler = {
			every_courtier_or_guest = {
				limit = {
					is_available_healthy_ai_adult = yes
					NOT = { has_short_disease_trigger = yes }
				}
				add_to_list = characters
			}
		}
	}
	scripted_animation = { 
		triggered_animation = {
			trigger = { always = yes }
			animation = { throne_room_conversation_1 throne_room_conversation_2 throne_room_conversation_3 throne_room_conversation_4 anger disapproval disbelief worry happiness }
		}
	}

	is_low_priority = yes
}

low_prio_lone_courtier = { 
	effect = {
		scope:ruler = {
			every_courtier_or_guest = {
				limit = {
					is_available_healthy_ai_adult = yes
					NOT = { has_short_disease_trigger = yes }
				}
				add_to_list = characters
			}
		}
	}
	scripted_animation = { 
		triggered_animation = {
			trigger = { always = yes }
			animation = { personality_honorable personality_content personality_rational }
		}
	}

	is_low_priority = yes
}
