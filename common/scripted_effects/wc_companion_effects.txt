########
# Animal Companion
########

duel_1_companion_effect = {
	duel = {
		skill = $SKILL$
		value = decent_skill_rating
		
		33 = {
			desc = companion.1001.challenge.great
			compare_modifier = {
				value = scope:duel_value
				multiplier = 6
			}
				
			show_as_tooltip = {
				assign_companion_modifier_effect = yes
			}

			trigger_event = companion.4001
		}

		33 = {
			desc = companion.1001.challenge.good
			compare_modifier = {
				value = scope:duel_value
				multiplier = 4
			}
				
			show_as_tooltip = {
				#Show that you have a second chance somehow. Probably use an effect.
			}

			trigger_event = companion.2001
		}

		33 = {
			desc = companion.1001.challenge.fail
			compare_modifier = {
				value = scope:duel_value
				multiplier = -5
			}

			show_as_tooltip = {
				#Show that you have failed somehow. Probably use an effect.
			}

			trigger_event = companion.5001
		}
	}
}

duel_2_companion_effect = {
	duel = {
		skill = $SKILL$
		value = average_skill_rating

		50 = {
			desc = companion.2001.challenge.succeed
			compare_modifier = {
				value = scope:duel_value
				multiplier = 5
			}

			show_as_tooltip = {
				assign_companion_modifier_effect = yes
			}

			trigger_event = companion.4001
		}

		50 = {
			desc = companion.2001.challenge.fail
			compare_modifier = {
				value = scope:duel_value
				multiplier = -5
			}

			trigger_event = companion.5001
		}
	}
}

assign_companion_modifier_effect = {
	if = { 
		limit = { scope:companion_species = flag:raven }
		add_character_modifier = raven_companion
	}

	if = {
		limit = { scope:companion_species = flag:bear }
		add_character_modifier = bear_companion
	}

	if = {
		limit = { scope:companion_species = flag:wolf }
		add_character_modifier = wolf_companion
	}

	if = {
		limit = { scope:companion_species = flag:boar }
		add_character_modifier = boar_companion
	}

	if = {
		limit = { scope:companion_species = flag:scorpion }
		add_character_modifier = scorpion_companion
	}

	if = {
		limit = { scope:companion_species = flag:fox }
		add_character_modifier = fox_companion
	}

	if = {
		limit = { scope:companion_species = flag:bat }
		add_character_modifier = bat_companion
	}

	if = {
		limit = { scope:companion_species = flag:frostsaber }
		add_character_modifier = frostsaber_companion
	}

	if = {
		limit = { scope:companion_species = flag:crab }
		add_character_modifier = crab_companion
	}

	if = {
		limit = { scope:companion_species = flag:turtle }
		add_character_modifier = turtle_companion
	}

	if = {
		limit = { scope:companion_species = flag:salamander }
		add_character_modifier = salamander_companion
	}

	if = {
		limit = { scope:companion_species = flag:serpent }
		add_character_modifier = serpent_companion
	}

	if = {
		limit = { scope:companion_species = flag:spider }
		add_character_modifier = spider_companion
	}

	if = {
		limit = { scope:companion_species = flag:toad }
		add_character_modifier = toad_companion
	}

	if = {
		limit = { scope:companion_species = flag:worm }
		add_character_modifier = worm_companion
	}
}

assign_companion_lifespan_effect = {
	if = {
		limit = { 
			story_owner = {
				has_character_modifier = raven_companion
			}
		}

		set_variable = {
			name = companion_lifespan_variable
			value = 12
		}
	}

	if = {
		limit = { 
			story_owner = {
				has_character_modifier = bear_companion
			}
		}

		set_variable = {
			name = companion_lifespan_variable
			value = 20
		}
	}

	if = {
		limit = { 
			story_owner = {
				has_character_modifier = wolf_companion
			}
		}

		set_variable = {
			name = companion_lifespan_variable
			value = 14
		}
	}

	if = {
		limit = { 
			story_owner = {
				has_character_modifier = boar_companion
			}
		}

		set_variable = {
			name = companion_lifespan_variable
			value = 12
		}
	}

	if = {
		limit = { 
			story_owner = {
				has_character_modifier = scorpion_companion
			}
		}

		set_variable = {
			name = companion_lifespan_variable
			value = 6
		}
	}

	if = {
		limit = { 
			story_owner = {
				has_character_modifier = fox_companion
			}
		}

		set_variable = {
			name = companion_lifespan_variable
			value = 5
		}
	}

	if = {
		limit = { 
			story_owner = {
				has_character_modifier = bat_companion
			}
		}

		set_variable = {
			name = companion_lifespan_variable
			value = 16
		}
	}

	if = {
		limit = { 
			story_owner = {
				has_character_modifier = frostsaber_companion
			}
		}

		set_variable = {
			name = companion_lifespan_variable
			value = 10000
		}
	}

	if = {
		limit = { 
			story_owner = {
				has_character_modifier = crab_companion
			}
		}

		set_variable = {
			name = companion_lifespan_variable
			value = 4
		}
	}

	if = {
		limit = { 
			story_owner = {
				has_character_modifier = turtle_companion
			}
		}

		set_variable = {
			name = companion_lifespan_variable
			value = 40
		}
	}

	if = {
		limit = { 
			story_owner = {
				has_character_modifier = salamander_companion
			}
		}

		set_variable = {
			name = companion_lifespan_variable
			value = 20
		}
	}

	if = {
		limit = { 
			story_owner = {
				has_character_modifier = serpent_companion
			}
		}

		set_variable = {
			name = companion_lifespan_variable
			value = 9
		}
	}

	if = {
		limit = { 
			story_owner = {
				has_character_modifier = spider_companion
			}
		}

		set_variable = {
			name = companion_lifespan_variable
			value = 12 #Not accurate to real life, but since they are giant spiders...
		}
	}

	if = {
		limit = { 
			story_owner = {
				has_character_modifier = toad_companion
			}
		}

		set_variable = {
			name = companion_lifespan_variable
			value = 13
		}
	}

	if = {
		limit = { 
			story_owner = {
				has_character_modifier = worm_companion
			}
		}

		set_variable = {
			name = companion_lifespan_variable
			value = 10 # Again, not accurate to real life
		}
	}
}