# wc_magic_cast_spell_interaction = {
# 	common_interaction = yes
# 	use_diplomatic_range = yes
# 	category = interaction_category_wc_magic
# 	icon = wc_spellbook_icon

# 	is_shown = {
# 		scope:actor = {
# 			is_magic_user_trigger = yes
# 			can_cast_another_spell_trigger = yes
# 		}
# 	}

# 	on_accept = {
# 		scope:actor = {
# 			set_global_variable = {
# 				name = spellbook_open
# 				value = yes
# 			}
# 			set_variable = {
# 				name = spellbook_type_cast
# 				value = yes
# 			}
# 			custom_tooltip = wc_magic_cast_spell_interaction_tt
# 		 	set_variable = { name = spell_recipient value = scope:recipient }
# 		}
# 		scope:recipient = {
# 			custom_tooltip = wc_magic_cast_spell_interaction_tt_r
# 		}
# 	}

# 	auto_accept = yes
# }

# wc_magic_stop_channeling_spell_interaction = {

# }

wc_spell_reflect_character_interaction = {
    common_interaction = yes
    use_diplomatic_range = yes
    category = interaction_category_wc_magic
    icon = wc_spellbook_icon

    is_shown = {
        always = yes
    }

    on_accept = {
        scope:actor = {
            set_variable = { name = true_target value = scope:secondary_recipient }
            remove_variable = reflect_interaction
            remove_variable = landed_only
        }
    }

    populate_recipient_list = {
        scope:actor = {
            every_courtier = {
                add_to_list = characters
            }
            every_vassal = {
                add_to_list = characters
            }
        }

        every_in_list = {
            list = characters
            if = {
                limit = {
                    scope:actor = {
                        has_variable = landed_only
                    }
                }

                if = {
                    limit = {
                        is_landed = no
                    }

                    remove_from_list = characters
                }
            }
        }
    }

    auto_accept = yes
}