namespace = wc_holy_light_orders_events

##################################################
# Destruction of the Brotherhood
# by Dione and ElMariuso
##################################################

# The Destruction of Northshire
wc_holy_light_orders_events.0001 = {
	type = character_event
	title = wc_holy_light_orders_events.0001.title
	
	desc = {
		desc = wc_holy_light_orders_events.0001.opening
		first_valid = {
			triggered_desc = {
				trigger = {
					has_faith = faith:cleric
					government_has_flag = government_is_theocracy
					has_title = title:k_holy_light_church
				}
				desc = wc_holy_light_orders_events.0001.desc.church
			}
			triggered_desc = {
				trigger = {
					has_faith = faith:cleric
					government_has_flag = government_is_theocracy
				}
				desc = wc_holy_light_orders_events.0001.desc.cleric_theocracy
			}
			triggered_desc = {
				trigger = { has_culture = culture:azerothian }
				desc = wc_holy_light_orders_events.0001.desc.azerothian
			}
			triggered_desc = {
				trigger = { has_faith = faith:cleric }
				desc = wc_holy_light_orders_events.0001.desc.cleric
			}
			triggered_desc = {
				trigger = {
					OR = {
						has_trait = creature_human
						AND = {
							has_trait = creature_dwarf
							NOT = { has_culture = culture:dark_iron }
						}
						has_trait = creature_high_elf
					}
				}
				desc = wc_holy_light_orders_events.0001.desc.normal
			}
			desc = wc_holy_light_orders_events.0001.desc.other
		}
	}
	
	theme = faith
	left_portrait = {
		character = scope:invader
		animation = war_attacker
	}
	#right_portrait = {
	#	character = scope:abbot
	#	animation = fear
	#}

	immediate = {
		faith:cleric = {
			save_scope_as = clericism
		}
		if = {
			limit = { is_independent_ruler = yes }
			scope:clericism = {
				change_fervor = {
					value = 10
					desc = brotherhood_northshire_destroyed
				}
			}
		}
		scope:clericism.religious_head = {
			save_scope_as = high_priest
		}
		title:e_horde.holder = { save_scope_as = invader }
	}
	
	# The Archbishop
	option = {
		name = wc_holy_light_orders_events.0001.church
		trigger = {
			has_faith = faith:cleric
			government_has_flag = government_is_theocracy
			has_title = title:k_holy_light_church
		}
		
		add_piety = massive_piety_gain
		
		ai_chance = {
			base = 150
		}
	}
	
	# Martial Priest
	option = {
		name = wc_holy_light_orders_events.0001.cleric_theocracy.a
		trigger = {
			NOT = { has_culture = culture:azerothian }
			has_faith = faith:cleric
			government_has_flag = government_is_theocracy
			NOT = { has_title = title:k_holy_light_church }
		}
		
		add_character_modifier = {
			modifier = vengeful_cleric_modifier
			years = 3
		}
		add_piety = minor_piety_gain
		
		ai_chance = {
			base = 150
		}
	}
	
	# Helpful Priest
	option = {
		name = wc_holy_light_orders_events.0001.cleric_theocracy.b
		trigger = {
			NOT = { has_culture = culture:azerothian }
			has_faith = faith:cleric
			government_has_flag = government_is_theocracy
			NOT = { has_title = title:k_holy_light_church }
		}
		
		add_piety = medium_piety_gain
		add_gold = -50
		
		ai_chance = {
			base = 150
		}
	}
	
	# Martial Azerothian
	option = {
		name = wc_holy_light_orders_events.0001.azerothian.a
		trigger = {
			has_culture = culture:azerothian
			NOT = { has_title = title:k_holy_light_church }
		}
		
		add_character_modifier = {
			modifier = vengeful_cleric_modifier
			years = 3
		}
		stress_impact = {
			base = medium_stress_impact_gain
		}
		
		ai_chance = {
			base = 150
		}
	}
	
	# Zealot Azerothian
	option = {
		name = wc_holy_light_orders_events.0001.azerothian.b
		trigger = {
			has_culture = culture:azerothian
			NOT = { has_title = title:k_holy_light_church }
			OR = {
				has_trait = zealous
				piety_level >= high_piety_level
			}
		}
		
		add_piety = massive_piety_gain
		stress_impact = {
			base = medium_stress_impact_gain
		}
		
		ai_chance = {
			base = 150
		}
	}

	# Vengful zealot, have to be cleric
	option = {
		name = wc_holy_light_orders_events.0001.cleric.zealous
		trigger = {
			NOT = { has_culture = culture:azerothian }
			faith = scope:clericism
			OR = {
				has_trait = zealous
				piety_level >= high_piety_level
			}
		}
		add_piety = minor_piety_gain
		add_character_modifier = {
			modifier = vengeful_cleric_modifier
			years = 3
		}
		
		ai_chance = {
			base = 150
		}
	}

	# Is cynical
	option = {
		name = wc_holy_light_orders_events.0001.cleric.cynical
		trigger = {
			NOT = { has_culture = culture:azerothian }
			faith = scope:clericism
			has_trait = cynical
		}
		add_piety = minor_piety_loss
		stress_impact = {
			base = minor_stress_impact_loss
		}
		
		ai_chance = {
			base = 150
		}
	}

	# Normal and other option
	option = {
		name = {
			trigger = {
				OR = {
					has_trait = creature_human
					AND = {
						has_trait = creature_dwarf
						NOT = { has_culture = culture:dark_iron }
					}
					has_trait = creature_high_elf
				}
			}
			text = wc_holy_light_orders_events.0001.normal
		}
		name = {
			trigger = { has_faith = faith:cult_of_wealth }
			text = wc_holy_light_orders_events.0001.other.fortunism
		}
		name = {
			trigger = {
				has_trait = creature_orc
				has_religion = religion:shamanism_group
			}
			text = wc_holy_light_orders_events.0001.other.shamanic_orcs
		}
		name = {
			trigger = {
				OR = {
					has_trait = creature_troll
					has_trait = creature_gnoll
				}
			}
			text = wc_holy_light_orders_events.0001.other.troll_and_gnolls
		}
		name = {
			trigger = { has_trait = creature_murloc }
			text = wc_holy_light_orders_events.0001.other.murloc
		}
		name = {
			text = wc_holy_light_orders_events.0001.other.base
		}
		
		ai_chance = {
			base = 100
		}
	}
}