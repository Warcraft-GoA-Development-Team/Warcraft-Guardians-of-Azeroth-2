light_magic_tree_1_perk_1 = {
	lifestyle = light_magic_lifestyle
	tree = light_magic_tree_1
	position = { 2 0 }
	icon = node_martial

	can_be_auto_selected = {
		magic_lifestyle_is_valid_trigger = { MAGIC = light }
	}

	auto_selection_weight = {
		value = wc_light_magic_auto_selection_value
		
		if = {
			limit = { has_focus = light_magic_focus_1 }
			multiply = wc_lifestyle_perk_auto_selection_weight_multiply_from_focus_value
		}
		if = {
			limit = {
				NOT = { can_spend_perks_in_nonelemental_TYPE_lifestyle_tree_TREE_trigger = { TYPE = light_magic TREE = 1 } }
			}
			multiply = 0
		}
	}

	effect = {
		custom_tooltip = wc_learn_spell_flash_of_light
		wc_learn_spell_effect = {
			SPELL = flash_of_light
		}
		# Maintenance
		wc_nonelemental_MAGIC_magic_lifestyle_rank_up_check_effect = { MAGIC = light }
	}
}
light_magic_tree_1_perk_2 = {
	lifestyle = light_magic_lifestyle
	tree = light_magic_tree_1
	position = { 1 1 }
	icon = node_martial

	parent = light_magic_tree_1_perk_1

	effect = {
		# Maintenance
		wc_nonelemental_MAGIC_magic_lifestyle_rank_up_check_effect = { MAGIC = light }
		learn_spell_rank_effect = {
			SPELL = flash_of_light
			RANK = 2
		}
		custom_tooltip = wc_learn_spell_flash_of_light_2
		custom_tooltip = wc_divine_service_effect
	}
}
light_magic_tree_1_perk_3 = {
	lifestyle = light_magic_lifestyle
	tree = light_magic_tree_1
	position = { 3 1 }
	icon = node_martial

	parent = light_magic_tree_1_perk_1

	effect = {
		# Maintenance
		wc_learn_spell_effect = {
			SPELL = dispel
		}
		custom_tooltip = wc_learn_spell_dispel_magic
		wc_nonelemental_MAGIC_magic_lifestyle_rank_up_check_effect = { MAGIC = light }
	}
}
light_magic_tree_1_perk_4 = {
	lifestyle = light_magic_lifestyle
	tree = light_magic_tree_1
	position = { 1 2.75 }
	icon = node_martial

	parent = light_magic_tree_1_perk_2

	effect = {
		custom_tooltip = wc_learn_spell_holy_fire
		wc_learn_spell_effect = {
			SPELL = holy_fire
		}
		# Maintenance
		wc_nonelemental_MAGIC_magic_lifestyle_rank_up_check_effect = { MAGIC = light }
	}
}
light_magic_tree_1_perk_5 = {
	lifestyle = light_magic_lifestyle
	tree = light_magic_tree_1
	position = { 3 2.75 }
	icon = node_martial

	parent = light_magic_tree_1_perk_3

	effect = {
		custom_tooltip = wc_learn_spell_lightwell
		wc_learn_spell_effect = {
			SPELL = lightwell
		}
		# Maintenance
		wc_nonelemental_MAGIC_magic_lifestyle_rank_up_check_effect = { MAGIC = light }
	}
}
light_magic_tree_1_perk_6 = {
	lifestyle = light_magic_lifestyle
	tree = light_magic_tree_1
	position = { 0 3.75 }
	icon = node_martial

	parent = light_magic_tree_1_perk_4

	effect = {
		# Maintenance
		learn_spell_rank_effect = {
			SPELL = flash_of_light
			RANK = 3
		}
		custom_tooltip = wc_learn_spell_flash_of_light_3
		add_character_modifier = {
			modifier = wc_blessed_blood_modifier
		}
		player_heir ?= {
			add_character_modifier = {
				modifier = wc_blessed_blood_modifier
				years = 10
			}
		}
		wc_nonelemental_MAGIC_magic_lifestyle_rank_up_check_effect = { MAGIC = light }
	}
}
light_magic_tree_1_perk_7 = {
	lifestyle = light_magic_lifestyle
	tree = light_magic_tree_1
	position = { 4 3.75 }
	icon = node_martial

	parent = light_magic_tree_1_perk_5

	effect = {
		custom_tooltip = wc_echo_of_light_effect
		# Maintenance
		wc_nonelemental_MAGIC_magic_lifestyle_rank_up_check_effect = { MAGIC = light }
	}
}
light_magic_tree_1_perk_8 = {
	lifestyle = light_magic_lifestyle
	tree = light_magic_tree_1
	position = { 2 4 }
	icon = node_martial

	parent = light_magic_tree_1_perk_6
	parent = light_magic_tree_1_perk_7

	character_modifier = {
		character_travel_safety_mult = 0.25
		character_travel_speed_mult = 0.25
	}
	effect = {
		# Maintenance
		wc_nonelemental_MAGIC_magic_lifestyle_rank_up_check_effect = { MAGIC = light }
	}
}
light_magic_tree_1_perk_9 = {
	lifestyle = light_magic_lifestyle
	tree = light_magic_tree_1
	position = { 2 5 }
	icon = node_martial

	parent = light_magic_tree_1_perk_8

	effect = {
		# Maintenance
		custom_tooltip = wc_learn_spell_salvation
		wc_learn_spell_effect = {
			SPELL = salvation
		}
		wc_nonelemental_MAGIC_magic_lifestyle_rank_up_check_effect = { MAGIC = light }
	}
}

light_magic_tree_2_perk_1 = {
	lifestyle = light_magic_lifestyle
	tree = light_magic_tree_2
	position = { 1.875 0 }
	icon = node_martial

	can_be_auto_selected = {
		magic_lifestyle_is_valid_trigger = { MAGIC = light }
	}

	auto_selection_weight = {
		value = wc_light_magic_auto_selection_value

		if = {
			limit = { has_focus = light_magic_focus_2 }
			multiply = wc_lifestyle_perk_auto_selection_weight_multiply_from_focus_value
		}
		if = {
			limit = {
				NOT = { can_spend_perks_in_nonelemental_TYPE_lifestyle_tree_TREE_trigger = { TYPE = light_magic TREE = 2 } }
			}
			multiply = 0
		}
	}

	effect = {
		wc_learn_spell_effect = {
			SPELL = judgement
		}
		custom_tooltip = wc_learn_spell_judgement
		# Maintenance
		wc_nonelemental_MAGIC_magic_lifestyle_rank_up_check_effect = { MAGIC = light }
	}
}
light_magic_tree_2_perk_2 = {
	lifestyle = light_magic_lifestyle
	tree = light_magic_tree_2
	position = { 3.75 0.5 }
	icon = node_martial

	parent = light_magic_tree_2_perk_1

	effect = {
		custom_tooltip = wc_struggle_effect
		# Maintenance
		wc_nonelemental_MAGIC_magic_lifestyle_rank_up_check_effect = { MAGIC = light }
	}
}
light_magic_tree_2_perk_3 = {
	lifestyle = light_magic_lifestyle
	tree = light_magic_tree_2
	position = { 1.25 1 }
	icon = node_martial

	parent = light_magic_tree_2_perk_2

	effect = {
		# Maintenance
		wc_learn_spell_effect = {
			SPELL = exorcism
		}
		wc_learn_spell_effect = {
			SPELL = expulsion
		}
		custom_tooltip = wc_learn_spell_exorcism
		custom_tooltip = wc_learn_spell_expulsion
		wc_nonelemental_MAGIC_magic_lifestyle_rank_up_check_effect = { MAGIC = light }
	}
}
light_magic_tree_2_perk_4 = {
	lifestyle = light_magic_lifestyle
	tree = light_magic_tree_2
	position = { 0 2.5 }
	icon = node_martial

	parent = light_magic_tree_2_perk_3

	character_modifier = {
		martial = 2
	}
	effect = {
		# Maintenance
		custom_tooltip = wc_seal_of_command
		wc_nonelemental_MAGIC_magic_lifestyle_rank_up_check_effect = { MAGIC = light }
	}
}
light_magic_tree_2_perk_5 = {
	lifestyle = light_magic_lifestyle
	tree = light_magic_tree_2
	position = { 1.875 2.5 }
	icon = node_martial

	parent = light_magic_tree_2_perk_3

	effect = {
		# Maintenance
		wc_nonelemental_MAGIC_magic_lifestyle_rank_up_check_effect = { MAGIC = light }
	}
}
light_magic_tree_2_perk_6 = {
	lifestyle = light_magic_lifestyle
	tree = light_magic_tree_2
	position = { 3.75 2.5 }
	icon = node_martial

	parent = light_magic_tree_2_perk_3

	effect = {
		# Maintenance
		wc_nonelemental_MAGIC_magic_lifestyle_rank_up_check_effect = { MAGIC = light }
	}
}
light_magic_tree_2_perk_7 = {
	lifestyle = light_magic_lifestyle
	tree = light_magic_tree_2
	position = { 2.5 4 }
	icon = node_martial

	parent = light_magic_tree_2_perk_4
	parent = light_magic_tree_2_perk_5
	parent = light_magic_tree_2_perk_6

	effect = {
		# Maintenance
		wc_learn_spell_effect = {
			SPELL = avenging_wrath
		}
		custom_tooltip = wc_learn_spell_avenging_wrath
		wc_nonelemental_MAGIC_magic_lifestyle_rank_up_check_effect = { MAGIC = light }
	}
}
light_magic_tree_2_perk_8 = {
	lifestyle = light_magic_lifestyle
	tree = light_magic_tree_2
	position = { 0 4.5 }
	icon = node_martial

	parent = light_magic_tree_2_perk_7

	effect = {
		# Maintenance
		wc_nonelemental_MAGIC_magic_lifestyle_rank_up_check_effect = { MAGIC = light }
	}
}
light_magic_tree_2_perk_9 = {
	lifestyle = light_magic_lifestyle
	tree = light_magic_tree_2
	position = { 1.875 5 }
	icon = node_martial

	parent = light_magic_tree_2_perk_8

	effect = {
		# Maintenance
		wc_nonelemental_MAGIC_magic_lifestyle_rank_up_check_effect = { MAGIC = light }
		custom_tooltip = wc_learn_spell_divine_storm
		wc_learn_spell_effect = {
			SPELL = divine_storm
		}
	}
}

light_magic_tree_3_perk_1 = {
	lifestyle = light_magic_lifestyle
	tree = light_magic_tree_3
	position = { 2 0 }
	icon = node_martial

	can_be_auto_selected = {
		magic_lifestyle_is_valid_trigger = { MAGIC = light }
	}

	auto_selection_weight = {
		value = wc_light_magic_auto_selection_value
	
		if = {
			limit = { has_focus = light_magic_focus_3 }
			multiply = wc_lifestyle_perk_auto_selection_weight_multiply_from_focus_value
		}
		if = {
			limit = {
				NOT = { can_spend_perks_in_nonelemental_TYPE_lifestyle_tree_TREE_trigger = { TYPE = light_magic TREE = 3 } }
			}
			multiply = 0
		}
	}

	effect = {
		# Maintenance
		custom_tooltip = wc_learn_spell_bless
		wc_learn_spell_effect = {
			SPELL = bless
		}
		learn_spell_rank_effect = {
			SPELL = bless
			RANK = 2
		}
		learn_spell_rank_effect = {
			SPELL = bless
			RANK = 3
		}
		wc_nonelemental_MAGIC_magic_lifestyle_rank_up_check_effect = { MAGIC = light }
	}
}
light_magic_tree_3_perk_2 = {
	lifestyle = light_magic_lifestyle
	tree = light_magic_tree_3
	position = { 0 1.25 }
	icon = node_martial

	parent = light_magic_tree_3_perk_1

	effect = {
		# Maintenance
		wc_nonelemental_MAGIC_magic_lifestyle_rank_up_check_effect = { MAGIC = light }
	}
}
light_magic_tree_3_perk_3 = {
	lifestyle = light_magic_lifestyle
	tree = light_magic_tree_3
	position = { 4 1.25 }
	icon = node_martial

	parent = light_magic_tree_3_perk_1

	effect = {
		# Maintenance
		custom_tooltip = wc_learn_spell_divine_shield
		wc_learn_spell_effect = {
			SPELL = divine_shield
		}
		wc_nonelemental_MAGIC_magic_lifestyle_rank_up_check_effect = { MAGIC = light }
	}
}
light_magic_tree_3_perk_4 = {
	lifestyle = light_magic_lifestyle
	tree = light_magic_tree_3
	position = { 0 2.5 }
	icon = node_martial

	parent = light_magic_tree_3_perk_2

	effect = {
		# Maintenance
		wc_nonelemental_MAGIC_magic_lifestyle_rank_up_check_effect = { MAGIC = light }
	}
}
light_magic_tree_3_perk_5 = {
	lifestyle = light_magic_lifestyle
	tree = light_magic_tree_3
	position = { 4 2.5 }
	icon = node_martial

	parent = light_magic_tree_3_perk_3

	effect = {
		custom_tooltip = wc_learn_spell_consecration
		wc_learn_spell_effect = {
			SPELL = consecration
		}
		# Maintenance
		wc_nonelemental_MAGIC_magic_lifestyle_rank_up_check_effect = { MAGIC = light }
	}
}
light_magic_tree_3_perk_6 = {
	lifestyle = light_magic_lifestyle
	tree = light_magic_tree_3
	position = { 2 3 }
	icon = node_martial

	parent = light_magic_tree_3_perk_1
	parent = light_magic_tree_3_perk_4
	parent = light_magic_tree_3_perk_5

	effect = {
		# Maintenance
		wc_nonelemental_MAGIC_magic_lifestyle_rank_up_check_effect = { MAGIC = light }
	}
}
light_magic_tree_3_perk_7 = {
	lifestyle = light_magic_lifestyle
	tree = light_magic_tree_3
	position = { 0 3.75 }
	icon = node_martial

	parent = light_magic_tree_3_perk_4

	effect = {
		# Maintenance
		custom_tooltip = wc_learn_spell_rebuke
		wc_learn_spell_effect = {
			SPELL = rebuke
		}
		wc_nonelemental_MAGIC_magic_lifestyle_rank_up_check_effect = { MAGIC = light }
	}
}
light_magic_tree_3_perk_8 = {
	lifestyle = light_magic_lifestyle
	tree = light_magic_tree_3
	position = { 4 3.75 }
	icon = node_martial

	parent = light_magic_tree_3_perk_5

	effect = {
		# Maintenance
		wc_nonelemental_MAGIC_magic_lifestyle_rank_up_check_effect = { MAGIC = light }
	}
}
light_magic_tree_3_perk_9 = {
	lifestyle = light_magic_lifestyle
	tree = light_magic_tree_3
	position = { 2 5 }
	icon = node_martial

	parent = light_magic_tree_3_perk_6
	parent = light_magic_tree_3_perk_7
	parent = light_magic_tree_3_perk_8

	effect = {
		custom_tooltip = wc_learn_spell_blessed_bastion
		wc_learn_spell_effect = {
			SPELL = blessed_bastion
		}
		# Maintenance
		wc_nonelemental_MAGIC_magic_lifestyle_rank_up_check_effect = { MAGIC = light }
	}
}