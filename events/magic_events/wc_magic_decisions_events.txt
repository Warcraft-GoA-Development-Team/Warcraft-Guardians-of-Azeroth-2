namespace = magic_decisions

# ███    ███  █████   ██████  ██  ██████                                   
# ████  ████ ██   ██ ██       ██ ██                                        
# ██ ████ ██ ███████ ██   ███ ██ ██                                        
# ██  ██  ██ ██   ██ ██    ██ ██ ██                                        
# ██      ██ ██   ██  ██████  ██  ██████

# ██████  ███████  ██████ ██ ███████ ██  ██████  ███    ██ ███████ 
# ██   ██ ██      ██      ██ ██      ██ ██    ██ ████   ██ ██      
# ██   ██ █████   ██      ██ ███████ ██ ██    ██ ██ ██  ██ ███████ 
# ██   ██ ██      ██      ██      ██ ██ ██    ██ ██  ██ ██      ██ 
# ██████  ███████  ██████ ██ ███████ ██  ██████  ██   ████ ███████ 

# ███████ ██    ██ ███████ ███    ██ ████████ ███████                      
# ██      ██    ██ ██      ████   ██    ██    ██                           
# █████   ██    ██ █████   ██ ██  ██    ██    ███████                      
# ██       ██  ██  ██      ██  ██ ██    ██         ██                      
# ███████   ████   ███████ ██   ████    ██    ███████

##################################################################
# 0001- 0099 : Recruit Court Mage 
##################################################################

# there are two versions of this because i think we are going to need lots of options for this in the future.

# normal court mage recruitment
magic_decisions.0001 = { 
	
	type = character_event
	title = magic_decisions.0001.title
	desc = magic_decisions.0001.desc
	theme = witchcraft

	left_portrait = { 
		character = scope:random_legal_mage
		animation = learning
	}

	right_portrait = { 
		character = scope:random_shady_mage
		animation = seduction
	}

	#lower_center_portrait = scope:extra_option_mage 

	immediate = { 
		create_character = { 
			template = court_mage_random_character
			location = root.location
			save_scope_as = random_legal_mage
		}
		create_character = { 
			template = court_mage_shady_character
			location = root.location
			save_scope_as = random_shady_mage
		}
	}

	# normal mage
	option = { 
		name = magic_decisions.0001.opt.a
		hire_court_mage_effect = { MAGE = scope:random_legal_mage EMPLOYER = root }
		pay_short_term_gold = {
			target = scope:random_legal_mage
			gold = medium_gold_value
		}
	}

	# shady mage
	option = { 
		name = magic_decisions.0001.opt.b
		hire_court_mage_effect = { MAGE = scope:random_shady_mage EMPLOYER = root }
		scope:random_shady_mage = { 
			progress_towards_friend_effect = { 
				CHARACTER = root
				REASON = friend_hired_court_mage
				OPINION = 15
			}
		}
	}

	# nobody
	option = { 
		name = magic_decisions.0001.opt.f
	}

	after = { 
		scope:random_shady_mage = {
			if = { limit = { NOT = { has_court_position = court_mage_court_position } }
				silent_disappearance_effect = yes
			}
		}
		scope:random_legal_mage = {
			if = { limit = { NOT = { has_court_position = court_mage_court_position } }
				silent_disappearance_effect = yes
			}
		}
	}
}

# human / high elf court mage recruitment
magic_decisions.0002 = { 
	
	type = character_event
	title = magic_decisions.0002.title
	desc = { 
		first_valid =  {
			triggered_desc = {
				trigger = { culture = { has_human_heritage_trigger = yes } } 
				desc = magic_decisions.0002.desc.opening_human
			}
			desc = magic_decisions.0002.desc.opening_elven
		}
		desc = magic_decisions.0002.desc.ending
	}
	theme = witchcraft

	left_portrait = { 
		character = scope:random_legal_mage
		animation = learning
	}

	right_portrait = { 
		character = scope:dalaranian_mage
		animation = stewardship
	}

	lower_right_portrait = scope:random_shady_mage

	#lower_center_portrait = scope:extra_option_mage 

	immediate = { 
		create_character = { 
			template = court_mage_random_character
			location = root.location
			save_scope_as = random_legal_mage
		}
		create_character = { 
			template = court_mage_shady_character
			location = root.location
			save_scope_as = random_shady_mage
		}
		create_character = { 
			template = court_mage_dalaranian_character
			location = root.location
			save_scope_as = dalaranian_mage
		}
	}

	# dalaran mage
	option = { 
		name = magic_decisions.0002.opt.a
		hire_court_mage_effect = { MAGE = scope:dalaranian_mage EMPLOYER = root }
		if = { limit = { NOT = { culture = culture:dalaranian } }
			pay_short_term_gold = {
				target = scope:dalaranian_mage
				gold = medium_gold_value
			}
		}
		if = { limit = { culture = { has_human_heritage_trigger = yes } } 
			add_piety = minor_piety_gain
		}
		else = { 
			add_piety = minor_piety_loss
		}
		ai_chance = { 
			base = 50
			modifier = { 
				add = 200
				culture = { has_human_heritage_trigger = yes }
			}
		}
	}

	# normal mage (human)
	option = { 
		name = magic_decisions.0002.opt.b
		trigger = { 
			culture = { has_human_heritage_trigger = yes }
			NOT = { culture = culture:dalaranian } 
		}
		hire_court_mage_effect = { MAGE = scope:random_legal_mage EMPLOYER = root }
		pay_short_term_gold = {
			target = scope:random_legal_mage
			gold = minor_gold_value
		}
		scope:random_legal_mage = { 
			progress_towards_friend_effect = { 
				CHARACTER = root
				REASON = friend_hired_court_mage
				OPINION = 15
			}
		}
		add_piety = minor_piety_loss
		ai_chance = { 
			base = 50
		}
	}

	# normal mage (nonhuman)
	option = { 
		name = magic_decisions.0002.opt.c
		trigger = { 
			OR = { 
				culture = { has_human_heritage_trigger = no } 
				culture = culture:dalaranian
			}
		}
		hire_court_mage_effect = { MAGE = scope:random_legal_mage EMPLOYER = root }
		if = { 
			limit = { NOT = { culture = culture:dalaranian } }
			pay_short_term_gold = {
				target = scope:random_legal_mage
				gold = minor_gold_value
			}
		}
		scope:random_legal_mage = { 
			progress_towards_friend_effect = { 
				CHARACTER = root
				REASON = friend_hired_court_mage
				OPINION = 15
			}
		}
		if = { 
			limit = { NOT = { culture = culture:dalaranian } }
			add_piety = minor_piety_gain
		}
		ai_chance = {
			base = 250
		}
	}

	# shady mage
	option = { 
		name = magic_decisions.0002.opt.d
		hire_court_mage_effect = { MAGE = scope:random_shady_mage EMPLOYER = root }
		scope:random_shady_mage = { 
			progress_towards_friend_effect = { 
				CHARACTER = root
				REASON = friend_hired_court_mage
				OPINION = 15
			}
		}
		add_piety = minor_piety_loss
		ai_chance = { 
			base = 50
			ai_value_modifier = { 
				ai_boldness = 1
				ai_zeal = -1
				ai_rationality = -1
				ai_greed = 0.25
			}
		}
	}

	# nobody
	option = { 
		name = magic_decisions.0002.opt.f
	}

	after = { 
		scope:random_shady_mage = {
			if = { limit = { NOT = { has_court_position = court_mage_court_position } }
				silent_disappearance_effect = yes
			}
		}
		scope:random_legal_mage = {
			if = { limit = { NOT = { has_court_position = court_mage_court_position } }
				silent_disappearance_effect = yes
			}
		}
		scope:dalaranian_mage = {
			if = { limit = { NOT = { has_court_position = court_mage_court_position } }
				silent_disappearance_effect = yes
			}
		}
	}

}