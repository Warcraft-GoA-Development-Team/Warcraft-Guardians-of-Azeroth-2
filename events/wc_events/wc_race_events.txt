namespace = WCRAC

# Sets race not looking at genes
WCRAC.10 = {
	type = character_event
	hidden = yes
	
	trigger = {
		OR = {
			NOT = { has_character_flag = race_giving_fired_flag }

			has_race_trait_trigger = no
		}
	}
	
	immediate = {
		copy_race_effect = { CHARACTER = this }
		
		if = {
			limit = {
				OR = {
					NOT = { has_character_flag = race_giving_fired_flag }

					has_race_trait_trigger = no
				}
			}
			
			if = { #Sets rules of species with special reproduction
				limit = { is_race_with_special_reproduction = yes }
				set_special_racial_reproduction = yes
			}
		
			try_to_set_race_effect = yes
			if = {
				limit = { game_start_undead_trigger = yes }
				become_undead_no_notification_effect = yes
			}
			scale_age_effect = yes
		}
	}
}

# Sets race on game start
WCRAC.30 = {
	type = character_event
	hidden = yes
	
	immediate = {
		if = {
			limit = {
				NOT = { has_character_flag = race_giving_fired_flag }
			
				has_race_trait_trigger = no
			}
			#Tries to set race flag based on trait you have
			copy_race_effect = { CHARACTER = this }
			trigger_race_giving_no_gene_effect = yes
		}
			
		if = { #Sets rules of species with special reproduction
			limit = { is_race_with_special_reproduction = yes }
			set_special_racial_reproduction = yes
		}
			
		# Old characters become impotent
		if = {
			limit = { can_be_impotent_trigger = yes }
			add_trait = impotent
		}
		# Give perks to characters
		#add_perks_in_physical_lifestyle_effect = yes
		add_perks_in_nonelemental_MAGIC_lifestyle_effect = { MAGIC = light }
		add_perks_in_nonelemental_MAGIC_lifestyle_effect = { MAGIC = shadow }
		add_perks_in_nonelemental_MAGIC_lifestyle_effect = { MAGIC = disorder }
		add_perks_in_nonelemental_MAGIC_lifestyle_effect = { MAGIC = order }
		add_perks_in_nonelemental_MAGIC_lifestyle_effect = { MAGIC = life }
		add_perks_in_nonelemental_MAGIC_lifestyle_effect = { MAGIC = death }
		add_perks_in_elemental_MAGIC_lifestyle_effect = { MAGIC = elemental_fire }
		add_perks_in_elemental_MAGIC_lifestyle_effect = { MAGIC = elemental_water }
		add_perks_in_elemental_MAGIC_lifestyle_effect = { MAGIC = elemental_air }
		add_perks_in_elemental_MAGIC_lifestyle_effect = { MAGIC = elemental_earth }
		# Long-lived races slow down their XP
		set_long_lived_lifestyle_xp_slowdown_event_effect = yes
		# Starts mana regeneration loop
		wc_start_mana_regeneration_loop_effect = yes
		# if = {
		# 	limit = {
		# 		has_game_rule = wc_dangerous_magic_on
		# 	}
		# 	wc_start_hp_regeneration_loop_effect = yes
		# }
	}
}