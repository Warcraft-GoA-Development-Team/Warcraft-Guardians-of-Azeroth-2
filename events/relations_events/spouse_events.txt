#Events for Spouse relationships

namespace = spouse

#0000-0999: Adjusting opinion/relationship status
#1000-1999: Neutral Spouse events
#2000-2999: Loving Spouse events
#3000-3999: Hating Spouse events
#4000-4999: Additional events
#5000-5999: Multiple Spouses events


####################################
# ADJUSTING OPINIONS/RELATION
# 0000-0999
####################################

# Increase opinion of spouse because of common personality trait
spouse.0001 = {
	type = character_event
	title = spouse.0001.t
	desc = {
		random_valid = {
			desc = spouse.0001.desc
		}
	}
	theme = marriage
	left_portrait = scope:spouse

	trigger = {
		NOT = { has_character_flag = had_spouse_personality_opinion_event }
		any_spouse = {
			has_a_personality_trait_in_common_with_root_trigger = yes
			save_temporary_scope_as = spouse
			is_available_healthy_ai_adult = yes
		}
		NOT = {
			has_opinion_modifier = {
				target = scope:spouse
				modifier = spouse_similar_personality_opinion
			}
		}
	}

	immediate = {
		save_scope_as = first_spouse
		add_character_flag = {
			flag = had_spouse_personality_opinion_event
			days = 730
		}
		random_spouse = {
			limit = {
				has_a_personality_trait_in_common_with_root_trigger = yes
				is_available_healthy_ai_adult = yes
				NOT = {
					root = {
						has_opinion_modifier = {
							target = prev
							modifier = spouse_similar_personality_opinion
						}
					}
				}
			}
			save_scope_as = spouse
		}
	}

	#I am lucky to be with someone who understands me.
	option = {
		name = spouse.0001.a
		hidden_effect = {
			add_opinion = {
				target = scope:spouse
				modifier = spouse_similar_personality_opinion
			}
		}
		scope:spouse = {
			show_as_tooltip = {
				add_opinion = {
					target = scope:first_spouse
					modifier = spouse_similar_personality_opinion
				}
			}
			trigger_event = spouse.0002
		}
	}
}

# Notification to spouse
spouse.0002 = {
	type = character_event
	title = spouse.0002.t
	desc = {
		random_valid = {
			desc = spouse.0002.desc
		}
	}
	theme = marriage
	left_portrait = scope:first_spouse

	option = {
		name = spouse.0002.a
		hidden_effect = {
			add_opinion = {
				target = scope:first_spouse
				modifier = spouse_similar_personality_opinion
			}
		}
		show_as_tooltip = {
			scope:first_spouse = {
				add_opinion = {
					target = scope:spouse
					modifier = spouse_similar_personality_opinion
				}
			}
		}
	}
}



# Increase opinion of spouse because of common education or lifestyle trait
spouse.0003 = {
	type = character_event
	title = spouse.0003.t
	desc = {
		random_valid = {
			desc = spouse.0003.desc
		}
	}
	theme = marriage
	left_portrait = scope:spouse

	trigger = {
		NOT = { has_character_flag = had_spouse_personality_opinion_event }
		any_spouse = {
			is_available_healthy_ai_adult = yes
			OR = {
				has_same_education_as_root_trigger = yes
				has_same_lifestyle_as_root_trigger = yes
			}
			NOT = {
				root = {
					has_opinion_modifier = {
						target = prev
						modifier = spouse_similar_life_opinion
					}
				}
			}
			save_temporary_scope_as = spouse
		}
		NOT = {
			has_opinion_modifier = {
				target = scope:spouse
				modifier = spouse_similar_life_opinion
			}
		}
	}

	immediate = {
		save_scope_as = first_spouse
		add_character_flag = {
			flag = had_spouse_personality_opinion_event
			days = 730
		}
		random_spouse = {
			limit = {
				is_available_healthy_ai_adult = yes
				OR = {
					has_same_education_as_root_trigger = yes
					has_same_lifestyle_as_root_trigger = yes
				}
				NOT = {
					root = {
						has_opinion_modifier = {
							target = prev
							modifier = spouse_similar_life_opinion
						}
					}
				}
			}
			save_scope_as = spouse
		}
	}

	option = {
		name = spouse.0003.a
		hidden_effect = {
			add_opinion = {
				target = scope:spouse
				modifier = spouse_similar_life_opinion
			}
		}
		scope:spouse = {
			show_as_tooltip = {
				add_opinion = {
					target = scope:first_spouse
					modifier = spouse_similar_life_opinion
				}
			}
			trigger_event = spouse.0004
		}
	}
}

# Notification to spouse
spouse.0004 = {
	type = character_event
	title = spouse.0004.t
	desc = {
		random_valid = {
			desc = spouse.0004.desc
		}
	}
	theme = marriage
	left_portrait = scope:first_spouse

	option = {
		name = spouse.0004.a
		hidden_effect = {
			add_opinion = {
				target = scope:first_spouse
				modifier = spouse_similar_life_opinion
			}
		}
		show_as_tooltip = {
			scope:first_spouse = {
				add_opinion = {
					target = scope:spouse
					modifier = spouse_similar_life_opinion
				}
			}
		}
	}
}




# Decrease opinion of spouse because of opposing personality trait
scripted_trigger spouse_0005_disagreeing_spouse_trigger = {
	has_a_personality_trait_opposite_to_root_trigger = yes
	is_available_healthy_adult = yes
	number_of_personality_traits_in_common = {
		target = root
		value < 2
	}
	NOT = {
		reverse_has_opinion_modifier = {
			target = root
			modifier = spouse_personal_disagreements_opinion
		}
	}
}

spouse.0005 = {
	type = character_event
	title = spouse.0005.t
	desc = {
		random_valid = {
			desc = spouse.0005.desc
		}
	}
	theme = marriage
	left_portrait = scope:spouse

	trigger = {
		is_ai = yes
		NOT = { has_character_flag = had_spouse_personality_opinion_event }
		any_spouse = {
			spouse_0005_disagreeing_spouse_trigger = yes
		}
	}

	weight_multiplier = {
		base = 1
		modifier = {
			add = -0.5
			any_spouse = {
				spouse_0005_disagreeing_spouse_trigger = yes
				is_ai = no
			}
		}
	}

	immediate = {
		save_scope_as = from_spouse
		add_character_flag = {
			flag = had_spouse_personality_opinion_event
			days = 730
		}
		random_spouse = {
			limit = {
				spouse_0005_disagreeing_spouse_trigger = yes
			}
			save_scope_as = spouse
		}
	}

	option = {
		name = spouse.0005.a
		hidden_effect = {
			add_opinion = {
				target = scope:spouse
				modifier = spouse_personal_disagreements_opinion
			}
		}
		scope:spouse = {
			show_as_tooltip = {
				add_opinion = {
					target = scope:from_spouse
					modifier = spouse_personal_disagreements_opinion
				}
			}
			trigger_event = spouse.0006
		}
	}
}

# Notification to spouse
spouse.0006 = {
	type = character_event
	title = spouse.0006.t
	desc = {
		random_valid = {
			desc = spouse.0006.desc
		}
	}
	theme = marriage
	left_portrait = scope:from_spouse

	option = {
		name = spouse.0006.a
		hidden_effect = {
			add_opinion = {
				target = scope:from_spouse
				modifier = spouse_personal_disagreements_opinion
			}
		}
		show_as_tooltip = {
			scope:from_spouse = {
				add_opinion = {
					target = scope:spouse
					modifier = spouse_personal_disagreements_opinion
				}
			}
		}
	}
}



# Increase opinion of spouse because of common friend
spouse.0007 = {
	type = character_event
	title = spouse.0007.t
	desc = {
		random_valid = {
			desc = spouse.0007.desc
		}
	}
	theme = marriage
	left_portrait = scope:friend
	right_portrait = scope:spouse

	trigger = {
		is_ai = yes
		any_spouse = {
			is_available_healthy_adult = yes
			any_relation = {
				type = friend
				is_available_healthy_adult = yes
				OR = {
					any_relation = {
						type = friend
						this = root
					}
					any_relation = {
						type = lover
						this = root
					}
				}
			}
			save_temporary_scope_as = spouse
		}
		NOT = {
			has_opinion_modifier = {
				target = scope:spouse
				modifier = spouse_common_friend_opinion
			}
		}
	}

	immediate = {
		save_scope_as = first_spouse
		random_spouse = {
			limit = {
				is_available_healthy_adult = yes
				any_relation = {
					type = friend
					OR = {
						any_relation = {
							type = friend
							this = root
						}
						any_relation = {
							type = lover
							this = root
						}
					}
				}
				NOT = {
					root = {
						has_opinion_modifier = {
							target = prev
							modifier = spouse_common_friend_opinion
						}
					}
				}
			}
			save_scope_as = spouse
			random_relation = {
				type = friend
				limit = {
					is_available_healthy_adult = yes
					OR = {
						any_relation = {
							type = friend
							this = root
						}
						any_relation = {
							type = lover
							this = root
						}
					}
				}
				save_scope_as = friend_in_common
			}
		}
	}

	option = {
		name = spouse.0007.a
		hidden_effect = {
			add_opinion = {
				target = scope:spouse
				modifier = spouse_common_friend_opinion
			}
		}
		scope:spouse = {
			show_as_tooltip = {
				add_opinion = {
					target = scope:first_spouse
					modifier = spouse_common_friend_opinion
				}
			}
			trigger_event = spouse.0008
		}
	}
}

# Notification to spouse
spouse.0008 = {
	type = character_event
	title = spouse.0008.t
	desc = {
		random_valid = {
			desc = spouse.0008.desc
		}
	}
	theme = marriage
	left_portrait = scope:first_spouse
	right_portrait = scope:friend

	option = {
		name = spouse.0008.a
		trigger = {
			NOT = { has_trait = paranoid }
		}
		hidden_effect = {
			add_opinion = {
				target = scope:first_spouse
				modifier = spouse_common_friend_opinion
			}
		}
		show_as_tooltip = {
			scope:first_spouse = {
				add_opinion = {
					target = scope:spouse
					modifier = spouse_common_friend_opinion
				}
			}
		}
	}

	option = {
		name = spouse.0008.b
		trigger = {
			OR = {
				has_trait = paranoid
				scope:first_spouse = {
					any_secret = {
						secret_type = secret_lover
						secret_target = {
							this = scope:friend_in_common
						}
					}
				}
			}
		}
		hidden_effect = {
			add_opinion = {
				target = scope:first_spouse
				modifier = spouse_suspecting_motives_opinion
			}
		}
		show_as_tooltip = {
			scope:first_spouse = {
				add_opinion = {
					target = scope:spouse
					modifier = insulted_opinion
					opinion = -10
				}
			}
		}
		hidden_effect = {
			trigger_event = {
				id = spouse.0009
				days = 1
			}
		}
	}
}


#Spouse is accused!
spouse.0009 = {
	type = character_event
	title = spouse.0009.t
	desc = spouse.0009.desc	
	theme = marriage
	left_portrait = {
		character = scope:spouse
		animation = personality_callous
	}
	right_portrait = scope:friend

	option = {
		name = spouse.0009.a
		hidden_effect = {
			add_opinion = {
				target = scope:spouse
				modifier = insulted_opinion
				opinion = -10
			}
		}
		show_as_tooltip = {
			scope:spouse = {
				add_opinion = {
					target = scope:first_spouse
					modifier = spouse_suspecting_motives_opinion
				}
			}
		}
		if = {
			limit = {
				any_relation = { type = lover this = scope:friend_in_common }
			}
			custom_tooltip = spouse.0009.has_lover_tooltip
			stress_impact = {
				base = medium_stress_gain
			}
		}
	}
}






#########################################
# NEUTRAL SPOUSE EVENTS
# 1000-1999
#########################################

#Ambivalent relationship turns more positive from time spent together
#1001-1002
spouse.1001 = {
	type = character_event
	title = spouse.1001.t
	desc = spouse.1001.desc
	theme = marriage
	left_portrait = scope:spouse

	trigger = {
		is_ai = yes
		any_spouse = {
			is_available_healthy_adult = yes
			reverse_opinion = {
				target = root
				value < 20
			}
			reverse_opinion = {
				target = root
				value > -5
			}
		}
	}

	immediate = {
		save_scope_as = first_spouse
		random_spouse = {
			limit = {
				is_available_healthy_adult = yes
				reverse_opinion = {
					target = root
					value < 20
				}
				reverse_opinion = {
					target = root
					value > -5
				}
			}
			save_scope_as = spouse
		}
	}

	option = {
		name = spouse.1001.a
		hidden_effect = {
			add_opinion = {
				target = scope:spouse
				modifier = spouse_pleasant_relationship_opinion
			}
		}
		show_as_tooltip = {
			scope:spouse = {
				add_opinion = {
					target = scope:first_spouse
					modifier = spouse_pleasant_relationship_opinion
				}
			}
		}
		hidden_effect = {
			scope:spouse = {
				trigger_event = spouse.1002
			}
		}
	}
}

#Notification for the spouse
spouse.1002 = {
	type = character_event
	title = spouse.1002.t
	desc = spouse.1002.desc
	theme = marriage
	left_portrait = scope:first_spouse

	option = {
		name = spouse.1002.a
		hidden_effect = {
			add_opinion = {
				target = scope:first_spouse
				modifier = spouse_pleasant_relationship_opinion
			}
		}
		show_as_tooltip = {
			scope:first_spouse = {
				add_opinion = {
					target = scope:spouse
					modifier = spouse_pleasant_relationship_opinion
				}
			}
		}
	}
}




#Ambivalent relationship turns more negative from time spent together
#1003-1004
spouse.1003 = {
	type = character_event
	title = spouse.1003.t
	desc = spouse.1003.desc
	theme = marriage
	left_portrait = scope:spouse

	trigger = {
		any_spouse = {
			is_available_healthy_adult = yes
			reverse_opinion = {
				target = root
				value > -20
			}
			reverse_opinion = {
				target = root
				value < 5
			}
		}
	}

	immediate = {
		save_scope_as = first_spouse
		random_spouse = {
			limit = {
				is_available_healthy_ai_adult = yes
				reverse_opinion = {
					target = root
					value > -20
				}
				reverse_opinion = {
					target = root
					value < 5
				}
			}
			save_scope_as = spouse
		}
	}

	option = {
		name = spouse.1003.a
		hidden_effect = {
			add_opinion = {
				target = scope:spouse
				modifier = spouse_unpleasant_relationship_opinion
			}
		}
		show_as_tooltip = {
			scope:spouse = {
				add_opinion = {
					target = scope:first_spouse
					modifier = spouse_unpleasant_relationship_opinion
				}
			}
		}
		hidden_effect = {
			scope:spouse = {
				trigger_event = spouse.1004
			}
		}
	}
}

#Notification for the spouse
spouse.1004 = {
	type = character_event
	title = spouse.1004.t
	desc = spouse.1004.desc
	theme = marriage
	left_portrait = scope:first_spouse

	option = {
		name = spouse.1004.a
		hidden_effect = {
			add_opinion = {
				target = scope:first_spouse
				modifier = spouse_unpleasant_relationship_opinion
			}
		}
		show_as_tooltip = {
			scope:first_spouse = {
				add_opinion = {
					target = scope:spouse
					modifier = spouse_unpleasant_relationship_opinion
				}
			}
		}
	}
}




#########################################
# LOVING SPOUSE EVENTS
# 2000-2999
#########################################

#You lose stress thanks to your loving spouse
spouse.2001 = {
	type = character_event
	title = spouse.2001.t
	desc = {
		desc = spouse.2001.opening
		random_valid = {
			triggered_desc = {
				trigger = { scope:spouse = { has_trait = chaste } }
				desc = spouse.2001.chaste
			}
			triggered_desc = {
				trigger = { scope:spouse = { has_trait = lustful } }
				desc = spouse.2001.lustful
			}
			triggered_desc = {
				trigger = { scope:spouse = { has_trait = temperate } }
				desc = spouse.2001.temperate
			}
			triggered_desc = {
				trigger = { scope:spouse = { has_trait = gluttonous } }
				desc = spouse.2001.gluttonous
			}
			triggered_desc = {
				trigger = { scope:spouse = { has_trait = generous } }
				desc = spouse.2001.generous
			}
			triggered_desc = {
				trigger = { scope:spouse = { has_trait = greedy } }
				desc = spouse.2001.greedy
			}
			triggered_desc = {
				trigger = { scope:spouse = { has_trait = diligent } }
				desc = spouse.2001.diligent
			}
			triggered_desc = {
				trigger = { scope:spouse = { has_trait = lazy } }
				desc = spouse.2001.lazy
			}
			triggered_desc = {
				trigger = { scope:spouse = { has_trait = wrathful } }
				desc = spouse.2001.wrathful
			}
			triggered_desc = {
				trigger = { scope:spouse = { has_trait = calm } }
				desc = spouse.2001.calm
			}
			triggered_desc = {
				trigger = { scope:spouse = { has_trait = impatient } }
				desc = spouse.2001.impatient
			}
			triggered_desc = {
				trigger = { scope:spouse = { has_trait = patient } }
				desc = spouse.2001.patient
			}
			triggered_desc = {
				trigger = { scope:spouse = { has_trait = stubborn } }
				desc = spouse.2001.stubborn
			}
			triggered_desc = {
				trigger = { scope:spouse = { has_trait = fickle } }
				desc = spouse.2001.fickle
			}
			triggered_desc = {
				trigger = { scope:spouse = { has_trait = humble } }
				desc = spouse.2001.humble
			}
			triggered_desc = {
				trigger = { scope:spouse = { has_trait = arrogant } }
				desc = spouse.2001.arrogant
			}
			triggered_desc = {
				trigger = { scope:spouse = { has_trait = deceitful } }
				desc = spouse.2001.deceitful
			}
			triggered_desc = {
				trigger = { scope:spouse = { has_trait = honest } }
				desc = spouse.2001.honest
			}
			triggered_desc = {
				trigger = { scope:spouse = { has_trait = craven } }
				desc = spouse.2001.craven
			}
			triggered_desc = {
				trigger = { scope:spouse = { has_trait = brave } }
				desc = spouse.2001.brave
			}
			triggered_desc = {
				trigger = { scope:spouse = { has_trait = shy } }
				desc = spouse.2001.shy
			}
			triggered_desc = {
				trigger = { scope:spouse = { has_trait = gregarious } }
				desc = spouse.2001.gregarious
			}
			triggered_desc = {
				trigger = { scope:spouse = { has_trait = ambitious } }
				desc = spouse.2001.ambitious
			}
			triggered_desc = {
				trigger = { scope:spouse = { has_trait = content } }
				desc = spouse.2001.content
			}
			triggered_desc = {
				trigger = { scope:spouse = { has_trait = arbitrary } }
				desc = spouse.2001.arbitrary
			}
			triggered_desc = {
				trigger = { scope:spouse = { has_trait = just } }
				desc = spouse.2001.just
			}
			triggered_desc = {
				trigger = { scope:spouse = { has_trait = cynical } }
				desc = spouse.2001.cynical
			}
			triggered_desc = {
				trigger = { scope:spouse = { has_trait = zealous } }
				desc = spouse.2001.zealous
			}
			triggered_desc = {
				trigger = { scope:spouse = { has_trait = paranoid } }
				desc = spouse.2001.paranoid
			}
			triggered_desc = {
				trigger = { scope:spouse = { has_trait = trusting } }
				desc = spouse.2001.trusting
			}
			triggered_desc = {
				trigger = { scope:spouse = { has_trait = compassionate } }
				desc = spouse.2001.compassionate
			}
			triggered_desc = {
				trigger = { scope:spouse = { has_trait = callous } }
				desc = spouse.2001.callous
			}
			triggered_desc = {
				trigger = { scope:spouse = { has_trait = sadistic } }
				desc = spouse.2001.sadistic
			}
			triggered_desc = {
				trigger = { scope:spouse = { has_trait = vengeful } }
				desc = spouse.2001.vengeful
			}
			triggered_desc = {
				trigger = { scope:spouse = { has_trait = forgiving } }
				desc = spouse.2001.forgiving
			}
		}
	}
	theme = marriage
	left_portrait = scope:spouse

	trigger = {
		NOT = { has_character_flag = had_loving_spouse_stress_reduction }
		any_spouse = {
			is_available_healthy_ai_adult = yes
			opinion = {
				target = root
				value > 40
			}
		}
		stress > 40
	}

	immediate = {
		random_spouse = {
			limit = {
				is_available_healthy_ai_adult = yes
				opinion = {
					target = root
					value > 40
				}
			}
			save_scope_as = spouse
		}
		add_character_flag = {
			flag = had_loving_spouse_stress_reduction
			days = 730
		}
	}

	option = {
		name = spouse.2001.a
		stress_impact = {
			base = medium_stress_loss
		}
	}
}

####
# Praise your spouse
# 2002-2011
#An opportunity to speak highly of your spouse!

scripted_trigger spouse_2002_told_of_character_trigger = {
	is_available_healthy_ai_adult = yes
	NOT = { this = root }
	NOT = { this = scope:spouse }
	NOT = { is_in_list = potential_targets }
	NOT = {
		has_opinion_modifier = {
			target = scope:spouse
			modifier = spouse_praised_me_opinion
		}
	}
	NOT = {
		has_opinion_modifier = {
			target = scope:spouse
			modifier = spouse_applauded_me_opinion
		}
	}
	NOT = {
		has_opinion_modifier = {
			target = scope:spouse
			modifier = spouse_spoke_poorly_opinion
		}
	}
	NOT = { has_relation_rival = scope:spouse }
	NOT = { is_spouse_of = root }
}


spouse.2002 = {
	type = character_event
	title = spouse.2002.t
	desc = spouse.2002.desc
	theme = marriage
	left_portrait = scope:spouse
	right_portrait = scope:told_of_character

	trigger = {
		is_married = yes
		NOT = { has_character_flag = had_event_spouse_2002 }
		primary_spouse = {
			is_available_healthy_ai_adult = yes
			is_landed = yes
			save_temporary_scope_as = spouse
			OR = {
				any_vassal = {
					spouse_2002_told_of_character_trigger = yes
				}
				AND = {
					exists = liege
					NOT = { this = liege }
					liege = {
						spouse_2002_told_of_character_trigger = yes
					}
				}
			}
		}
	}

	weight_multiplier = {
		base = 1
		compare_modifier = {
			target = root
			value = diplomacy
			multiplier = 0.1
		}
	}

	immediate = {
		add_character_flag = {
			flag = had_event_spouse_2002
			days = 3650
		}
		primary_spouse = {
			save_scope_as = spouse
			#Add all vassals of spouse
			every_vassal = {
				limit = {
					spouse_2002_told_of_character_trigger = yes
				}
				add_to_list = potential_targets
			}
			#Then also their liege if there is one that's not the couple
			if = {
				limit = {
					liege = { 
						NOR = { 
							this = scope:spouse 
							this = root
						} 
					}
				}
				liege = {
					add_to_list = potential_targets
				}
			}
		}
		#Target is picked from potentials
		random_in_list = {
			list = potential_targets
			weight = {
				base = 1
				modifier = {
					add = 3
					this = scope:spouse.liege
				}
			}
			save_scope_as = told_of_character
		}
		save_scope_as = initial_spouse
	}

	option = {
		name = spouse.2002.a
		ai_chance = {
			base = 95
		}
		duel = {
			skill = diplomacy
			target = scope:told_of_character
			10 = {	
				compare_modifier = {
					value = scope:duel_value
					multiplier = 0.5
					min = -9
				}
				show_as_tooltip = {
					add_prestige = major_prestige_gain
					scope:told_of_character = {
						add_opinion = {
							target = scope:spouse
							modifier = spouse_applauded_me_opinion
						}
					}
				}
				scope:told_of_character = {
					trigger_event = spouse.2003 #Extremely good outcome
				}
			}
			15 = {		
				compare_modifier = {
					value = scope:duel_value
					multiplier = 0.25
					min = -14
				}
				show_as_tooltip = {
					add_prestige = medium_prestige_gain
					scope:told_of_character = {
						add_opinion = {
							target = scope:spouse
							modifier = spouse_praised_me_opinion
						}
					}
				}
				scope:told_of_character = {
					trigger_event = spouse.2006 #Pretty good outcome
				}
			}
			10 = {		
				compare_modifier = {
					value = scope:duel_value
					multiplier = -0.5
					min = -9
				}
				show_as_tooltip = {
					add_prestige = minor_prestige_loss
					scope:told_of_character = {
						add_opinion = {
							target = scope:spouse
							modifier = spouse_spoke_poorly_opinion
						}
					}
				}
				scope:told_of_character = {
					trigger_event = spouse.2009 #Bad outcome
				}
			}
		}
	}

	option = {
		name = spouse.2002.b
		ai_chance = {
			base = 5
		}
		add_prestige = minor_prestige_gain
	}
}


#Exceptional outcome: Event for target
spouse.2003 = {
	type = character_event
	title = spouse.2003.t
	desc = {
		desc = spouse.2003.opening
		desc = spouse.2003.exceptional
	}
	theme = marriage
	left_portrait = scope:initial_spouse
	right_portrait = scope:spouse

	immediate = {
		if = {
			limit = {
				NOT = { has_relation_friend = scope:spouse }
			}
			random = {
				chance = 50
				save_scope_value_as = {
					name = make_friend
					value = yes
				}
			}
		}
	}

	option = {
		name = spouse.2003.a
		add_opinion = {
			target = scope:spouse
			modifier = spouse_applauded_me_opinion
		}
		if = {
			limit = {
				exists = scope:make_friend
			}
			show_as_tooltip = {
				set_relation_friend = scope:spouse # No reason needed, show_as_tooltip
			}
		}
		hidden_effect = {
			scope:spouse = {
				trigger_event = spouse.2004
			}
			scope:initial_spouse = {
				trigger_event = spouse.2005
			}
		}
	}
}

#Exceptional outcome: Event for spouse
spouse.2004 = {
	type = character_event
	title = spouse.2004.t
	desc = {
		desc = spouse.2004.opening
		desc = spouse.2004.exceptional
	}
	theme = marriage
	left_portrait = scope:told_of_character
	right_portrait = scope:initial_spouse

	option = {
		name = spouse.2004.a
		if = {
			limit = {
				exists = scope:make_friend
			}
			set_relation_friend = { reason = friend_spouse_talked_me_up target = scope:told_of_character involved_character = scope:initial_spouse }
		}
		show_as_tooltip = {
			scope:told_of_character = {
				add_opinion = {
					target = scope:spouse
					modifier = spouse_applauded_me_opinion
				}
			}
		}
	}
}

#Exceptional outcome: Event for initial spouse
spouse.2005 = {
	type = character_event
	title = spouse.2005.t
	desc = spouse.2005.desc
	theme = marriage
	left_portrait = scope:told_of_character
	right_portrait = scope:spouse

	immediate = {
		show_as_tooltip = {
			scope:told_of_character = {
				if = {
					limit = {
						exists = scope:make_friend
					}
					set_relation_friend = scope:spouse # No reason needed, show_as_tooltip
				}
				add_opinion = {
					target = scope:spouse
					modifier = spouse_applauded_me_opinion
				}
			}
		}
	}

	option = {
		name = spouse.2005.a
		add_prestige = major_prestige_gain
	}
}





#Good outcome: Event for target
spouse.2006 = {
	type = character_event
	title = spouse.2006.t
	desc = {
		desc = spouse.2003.opening
		desc = spouse.2006.good
	}
	theme = marriage
	right_portrait = scope:initial_spouse
	lower_right_portrait = scope:spouse

	option = {
		name = spouse.2006.a
		add_opinion = {
			target = scope:spouse
			modifier = spouse_praised_me_opinion
		}
		hidden_effect = {
			scope:spouse = {
				trigger_event = spouse.2007
			}
			scope:initial_spouse = {
				trigger_event = spouse.2008
			}
		}
	}
}

#Good outcome: Event for spouse
spouse.2007 = {
	type = character_event
	title = spouse.2007.t
	desc = {
		desc = spouse.2004.opening
		desc = spouse.2007.good
	}
	theme = marriage
	left_portrait = scope:told_of_character
	right_portrait = scope:initial_spouse

	option = {
		name = spouse.2007.a
		show_as_tooltip = {
			scope:told_of_character = {
				add_opinion = {
					target = scope:spouse
					modifier = spouse_praised_me_opinion
				}
			}
		}
	}
}

#Good outcome: Event for initial spouse
spouse.2008 = {
	type = character_event
	title = spouse.2008.t
	desc = spouse.2008.desc
	theme = marriage
	left_portrait = scope:told_of_character
	right_portrait = scope:spouse

	immediate = {
		show_as_tooltip = {
			scope:told_of_character = {
				add_opinion = {
					target = scope:spouse
					modifier = spouse_praised_me_opinion
				}
			}
		}
	}

	option = {
		name = spouse.2008.a
		add_prestige = medium_prestige_gain
	}
}


#Bad outcome: Event for target
spouse.2009 = {
	type = character_event
	title = spouse.2009.t
	desc = {
		desc = spouse.2003.opening
		desc = spouse.2009.bad
	}
	theme = marriage
	left_portrait = scope:initial_spouse
	right_portrait = scope:spouse

	option = {
		name = spouse.2009.a
		add_opinion = {
			target = scope:spouse
			modifier = spouse_spoke_poorly_opinion
		}
		hidden_effect = {
			scope:spouse = {
				trigger_event = spouse.2010
			}
			scope:initial_spouse = {
				trigger_event = spouse.2011
			}
		}
	}
}

#Bad outcome: Event for spouse
spouse.2010 = {
	type = character_event
	title = spouse.2010.t
	desc = spouse.2010.desc
	theme = marriage
	left_portrait = scope:told_of_character
	right_portrait = scope:initial_spouse

	option = {
		name = spouse.2010.a
		show_as_tooltip = {
			scope:told_of_character = {
				add_opinion = {
					target = scope:spouse
					modifier = spouse_spoke_poorly_opinion
				}
			}
		}
	}
}

#Bad outcome: Event for initial spouse
spouse.2011 = {
	type = character_event
	title = spouse.2011.t
	desc = spouse.2011.desc
	theme = marriage
	left_portrait = scope:spouse
	right_portrait = scope:told_of_character

	immediate = {
		show_as_tooltip = {
			scope:told_of_character = {
				add_opinion = {
					target = scope:spouse
					modifier = spouse_spoke_poorly_opinion
				}
			}
		}
	}

	option = {
		name = spouse.2011.a
		add_prestige = minor_prestige_loss
	}
}



# Share a secret with spouse
spouse.2012 = {
	type = character_event
	title = spouse.2012.t
	desc = {
		first_valid = {
			triggered_desc = {
				trigger = {
					scope:secret_in_question = {
						secret_target = {
							this = root
						}
					}
				}
				desc = spouse.2012.secret_about_me
			}
			triggered_desc = {
				trigger = {
					scope:secret_in_question = {
						secret_target = {
							this = scope:spouse
						}
					}
				}
				desc = spouse.2012.secret_about_spouse
			}
			desc = spouse.2012.secret_about_other
		}
	}
	theme = marriage
	left_portrait = scope:spouse

	trigger = {
		any_spouse = {
			is_available_healthy_ai_adult = yes
			reverse_opinion = {
				target = root
				value > 40
			}
			save_temporary_scope_as = spouse_check
		}
		any_known_secret = {
			NOT = {
				secret_type = secret_lover
				secret_owner = root
			}
			NOT = { is_known_by = scope:spouse_check }
		}
	}

	weight_multiplier = {
		base = 1
		compare_modifier = {
			target = root
			value = intrigue
			multiplier = 0.1
		}
	}

	immediate = {
		save_scope_as = first_spouse
		random_spouse = {
			limit = {
				is_available_healthy_ai_adult = yes
				save_temporary_scope_as = spouse_check
				root = {
					any_known_secret = {
						NOT = {
							secret_type = secret_lover
							secret_owner = root
						}
						NOT = { is_known_by = scope:spouse_check }
					}
				}
			}
			save_scope_as = spouse
		}
		random_known_secret = {
			limit = {
				NOT = {
					secret_type = secret_lover
					secret_owner = root
				}
				NOT = { is_known_by = scope:spouse }
			}
			save_scope_as = secret_in_question
			secret_owner = {
				save_scope_as = owner_of_secret
			}
		}
	}

	option = {
		name = spouse.2012.a
		ai_chance = {
			base = 85
		}
		custom_tooltip = spouse.2012.a.tt
		scope:spouse = {
			trigger_event = spouse.2013
		}
	}

	option = {
		name = spouse.2012.b
		ai_chance = {
			base = 15
		}
		if = {
			limit = { NOT = { has_trait = deceitful } }
			stress_impact = {
				base = minor_stress_gain
			}
		}
	}
}


#Event for spouse
spouse.2013 = {
	type = character_event
	title = spouse.2013.t
	desc = {
		desc = spouse.2013.opening
		first_valid = {
			triggered_desc = {
				trigger = {
					scope:secret_in_question = {
						secret_target = {
							this = scope:first_spouse
						}
					}
				}
				desc = spouse.2013.secret_about_me
			}
			triggered_desc = {
				trigger = {
					scope:secret_in_question = {
						secret_target = {
							this = root
						}
					}
				}
				desc = spouse.2013.secret_about_spouse
			}
			desc = spouse.2013.secret_about_other
		}
	}
	theme = marriage
	left_portrait = scope:first_spouse

	option = {
		name = spouse.2013.a
		scope:secret_in_question = {
			reveal_to = root
		}
		add_opinion = {
			target = scope:first_spouse
			modifier = spouse_trusted_me_opinion
		}
	}
}



scripted_trigger spouse_2014_base_agent_trigger = {
	NOT = { this = root }
	is_scheming_against = {
		target = scope:spouse_check
	}
}

scripted_trigger spouse_2014_base_scheme_trigger = {
	NOR = {
		scheme_owner = root
		is_scheme_agent_exposed = scope:agent_check
	}
}

#You suspect a plot against spouse
spouse.2014 = {
	type = character_event
	title = spouse.2014.t
	desc = spouse.2014.desc
	theme = marriage
	left_portrait = scope:spouse
	right_portrait = scope:agent

	trigger = {
		any_spouse = {
			is_available_healthy_ai_adult = yes
			save_temporary_scope_as = spouse_check
		}
		OR = {
			any_courtier_or_guest = {
				spouse_2014_base_agent_trigger = yes
				save_temporary_scope_as = agent_check
			}
			scope:spouse_check = {
				any_courtier_or_guest = {
					spouse_2014_base_agent_trigger = yes
					save_temporary_scope_as = agent_check
				}
			}
		}
		scope:spouse_check = {
			any_targeting_scheme = {
				spouse_2014_base_scheme_trigger = yes
			}
		}
	}

	weight_multiplier = {
		#Unlikely, but can still happen when spouse doesn't love you.
		#This aims to make it uncertain whether a hateful spouse is lying to you or not
		base = 0.2
		modifier = {
			add = 0.8
			any_spouse = {
				reverse_opinion = {
					target = root
					value > 40
				}
			}
		}
		compare_modifier = {
			target = root
			value = intrigue
			multiplier = 0.1
		}
	}

	immediate = {
		save_scope_as = first_spouse
		random_spouse = {
			limit = {
				is_available_healthy_ai_adult = yes
				save_temporary_scope_as = spouse_check
				OR = {
					any_courtier_or_guest = {
						spouse_2014_base_agent_trigger = yes
						save_temporary_scope_as = agent_check
					}
					root = {
						any_courtier_or_guest = {
							spouse_2014_base_agent_trigger = yes
						}
						save_temporary_scope_as = agent_check
					}
				}
				any_targeting_scheme = {
					spouse_2014_base_scheme_trigger = yes
				}
			}
			save_scope_as = spouse

			if = {
				limit = {
					any_courtier_or_guest = {
						spouse_2014_base_agent_trigger = yes
						save_temporary_scope_as = agent_check
						scope:spouse = {
							any_targeting_scheme = {
								spouse_2014_base_scheme_trigger = yes
							}
						}
					}
				}
				random_courtier_or_guest = {
					limit = {
						spouse_2014_base_agent_trigger = yes
						save_temporary_scope_as = agent_check
						scope:spouse = {
							any_targeting_scheme = {
								spouse_2014_base_scheme_trigger = yes
							}
						}
					}
					save_scope_as = agent
				}
			}
			else = {
				scope:spouse = {
					random_courtier_or_guest = {
						limit = {
							spouse_2014_base_agent_trigger = yes
							save_temporary_scope_as = agent_check
							scope:spouse = {
								any_targeting_scheme = {
									spouse_2014_base_scheme_trigger = yes
								}
							}
						}
						save_scope_as = agent
					}
				}
			}

			#Pick out the scheme in question to make it easier for the spouse to not reveal their own scheme
			scope:spouse = {
				random_targeting_scheme = {
					limit = {
						spouse_2014_base_scheme_trigger = yes
					}
					save_scope_as = scheme_in_question
				}
			}
		}
	}

	#Warn my spouse!
	option = {
		name = spouse.2014.a
		ai_chance = {
			base = 95
			#The scheme should be unlikely to be revealed if the spouse is in it themselves...
			modifier = {
				factor = 0.05
				exists = scope:scheme_in_question
				scope:scheme_in_question = {
					scheme_is_character_agent = root
				}
			}
		}
		custom_tooltip = spouse.2014.reveal_tt
		show_as_tooltip = {
			scope:spouse = {
				if = {
					limit = {
						opinion = {
							target = root
							value > neutral_opinion
						}
					}
					add_opinion = {
						target = root
						modifier = spouse_warned_me_opinion
					}
					random_targeting_scheme = {
						limit = {
							NOT = { is_scheme_agent_exposed = scope:agent }
						}
						expose_scheme_agent = scope:agent
					}
				}
			}
		}
		hidden_effect = {
			scope:spouse = {
				trigger_event = spouse.2015
			}
		}
	}

	#Say nothing
	option = {
		name = spouse.2014.b
		ai_chance = {
			base = 5
		}
	}
}

#Event for spouse
spouse.2015 = {
	type = character_event
	title = spouse.2015.t
	desc = spouse.2015.desc
	theme = marriage
	left_portrait = {
		character = scope:first_spouse
		animation = worry
	}
	right_portrait = scope:agent

	trigger = {
		exists = scope:agent
	}

	#Thank you for the warning, my love
	option = {
		name = spouse.2015.a
		trigger = {
			reverse_opinion = {
				target = scope:first_spouse
				value > neutral_opinion
			}
		}
		random_targeting_scheme = {
			limit = {
				NOT = { is_scheme_agent_exposed = scope:agent }
			}
			expose_scheme_agent = scope:agent
		}
		add_opinion = {
			target = scope:first_spouse
			modifier = spouse_warned_me_opinion
		}
	}


	#Can my spouse be trusted?
	option = {
		name = spouse.2015.b
		trigger = {
			reverse_opinion = {
				target = root
				value <= neutral_opinion
			}
		}
	}
}



#########################################
# HATING SPOUSE EVENTS
# 3000-3999
#########################################

#You gain stress thanks to your hating spouse
spouse.3001 = {
	type = character_event
	title = spouse.3001.t
	desc = {
		desc = spouse.3001.desc.opening
		first_valid = {
			random_valid = {
				triggered_desc = {
					trigger = {
						scope:spouse = { has_trait = lazy }
						NOT = { has_trait = lazy }
					}
					desc = spouse.3001.lazy
				}
				triggered_desc = {
					trigger = {
						scope:spouse = { has_trait = wrathful }
						NOT = { has_trait = wrathful }
					}
					desc = spouse.3001.wrathful
				}
				triggered_desc = {
					trigger = {
						scope:spouse = { has_trait = impatient }
						NOT = { has_trait = impatient }
					}
					desc = spouse.3001.impatient
				}
				triggered_desc = {
					trigger = {
						scope:spouse = { has_trait = arrogant }
						NOT = { has_trait = arrogant }
					}
					desc = spouse.3001.arrogant
				}
				triggered_desc = {
					trigger = {
						scope:spouse = { has_trait = deceitful }
						NOT = { has_trait = deceitful }
					}
					desc = spouse.3001.deceitful
				}
				triggered_desc = {
					trigger = {
						scope:spouse = { has_trait = paranoid }
						NOT = { has_trait = paranoid }
					}
					desc = spouse.3001.paranoid
				}
				triggered_desc = {
					trigger = {
						scope:spouse = { has_trait = callous }
						NOT = { has_trait = callous }
					}
					desc = spouse.3001.callous
				}
				triggered_desc = {
					trigger = {
						scope:spouse = { has_trait = sadistic }
						NOT = { has_trait = sadistic }
					}
					desc = spouse.3001.sadistic
				}
				triggered_desc = {
					trigger = {
						scope:spouse = { has_trait = vengeful }
						NOT = { has_trait = vengeful }
					}
					desc = spouse.3001.vengeful
				}	
			}
			desc = spouse.3001.desc.fallback
		}
		desc = spouse.3001.desc.end
	}
	theme = marriage
	left_portrait = scope:spouse

	trigger = {
		NOT = { has_character_flag = had_spiteful_spouse_stress_increase }
		is_landed = yes
		any_spouse = {
			is_available_healthy_ai_adult = yes
			opinion = {
				target = root
				value < -25
			}
		}
		stress < 90
	}

	immediate = {
		random_spouse = {
			limit = {
				is_available_healthy_ai_adult = yes
				opinion = {
					target = root
					value < -25
				}
			}
			save_scope_as = spouse
		}
		primary_title = { save_scope_as = p_title }
		add_character_flag = {
			flag = had_spiteful_spouse_stress_increase
			days = 730
		}
	}

	option = {
		name = spouse.3001.a
		stress_impact = {
			base = medium_stress_gain
		}
	}
}




####
# Spread rumours about your spouse
# 3002-3011
#An opportunity to speak poorly of your spouse!
spouse.3002 = {
	type = character_event
	title = spouse.3002.t
	desc = spouse.3002.desc
	theme = marriage
	left_portrait = scope:told_of_character
	right_portrait = scope:spouse

	trigger = {
		NOT = { has_character_flag = had_event_spouse_3002 }
		any_spouse = {
			is_available_healthy_ai_adult = yes
			is_landed = yes
			save_temporary_scope_as = spouse
			OR = {
				any_vassal = {
					NOT = {
						has_opinion_modifier = {
							target = prev
							modifier = spouse_ill_rumors_opinion
						}
					}
					NOT = {
						has_opinion_modifier = {
							target = prev
							modifier = spouse_vicious_rumors_opinion
						}
					}
					NOT = {
						has_opinion_modifier = {
							target = prev
							modifier = spouse_spoke_highly_opinion
						}
					}
					NOT = { has_relation_rival = scope:spouse }
				}
				liege = {
					NOT = {
						has_opinion_modifier = {
							target = prev
							modifier = spouse_ill_rumors_opinion
						}
					}
					NOT = {
						has_opinion_modifier = {
							target = prev
							modifier = spouse_vicious_rumors_opinion
						}
					}
					NOT = {
						has_opinion_modifier = {
							target = prev
							modifier = spouse_spoke_highly_opinion
						}
					}
					NOT = { has_relation_rival = scope:spouse }
				}
			}
		}
	}

	weight_multiplier = {
		base = 1
		modifier = {
			add = -0.8
			is_ai = no
		}
		modifier = {
			add = -1
			is_ai = no
			NOT = {
				any_spouse = { is_landed = yes }
			}
		}
	}

	immediate = {
		add_character_flag = {
			flag = had_event_spouse_3002
			days = 1825
		}
		random_list = {
			70 = {
				trigger = {
					any_spouse = {
						is_available_healthy_ai_adult = yes
						save_temporary_scope_as = spouse_check
						any_vassal = {
							NOT = {
								has_opinion_modifier = {
									target = prev
									modifier = spouse_ill_rumors_opinion
								}
							}
							NOT = {
								has_opinion_modifier = {
									target = prev
									modifier = spouse_vicious_rumors_opinion
								}
							}
							NOT = {
								has_opinion_modifier = {
									target = prev
									modifier = spouse_spoke_highly_opinion
								}
							}
							NOT = { has_relation_rival = scope:spouse_check }
						}
					}
				}
				random_spouse = {
					limit = {
						is_available_healthy_ai_adult = yes
						save_temporary_scope_as = spouse_check
						any_vassal = {
							NOT = {
								has_opinion_modifier = {
									target = prev
									modifier = spouse_ill_rumors_opinion
								}
							}
							NOT = {
								has_opinion_modifier = {
									target = prev
									modifier = spouse_vicious_rumors_opinion
								}
							}
							NOT = {
								has_opinion_modifier = {
									target = prev
									modifier = spouse_spoke_highly_opinion
								}
							}
							NOT = { has_relation_rival = scope:spouse_check }
						}
					}
					save_scope_as = spouse
					random_vassal = {
						limit = {
							NOT = {
								has_opinion_modifier = {
									target = prev
									modifier = spouse_ill_rumors_opinion
								}
							}
							NOT = {
								has_opinion_modifier = {
									target = prev
									modifier = spouse_vicious_rumors_opinion
								}
							}
							NOT = {
								has_opinion_modifier = {
									target = prev
									modifier = spouse_spoke_highly_opinion
								}
							}
							NOT = { has_relation_rival = scope:spouse }
						}
						save_scope_as = told_of_character
					}
				}
			}
			30 = {
				trigger = {
					any_spouse = {
						is_available_healthy_ai_adult = yes
						save_temporary_scope_as = spouse_check
						liege = {
							NOT = {
								has_opinion_modifier = {
									target = prev
									modifier = spouse_ill_rumors_opinion
								}
							}
							NOT = {
								has_opinion_modifier = {
									target = prev
									modifier = spouse_vicious_rumors_opinion
								}
							}
							NOT = {
								has_opinion_modifier = {
									target = prev
									modifier = spouse_spoke_highly_opinion
								}
							}
							NOT = { has_relation_rival = scope:spouse_check }
						}
					}
				}
				random_spouse = {
					limit = {
						is_available_healthy_ai_adult = yes
						save_temporary_scope_as = spouse_check
						liege = {
							NOT = {
								has_opinion_modifier = {
									target = prev
									modifier = spouse_ill_rumors_opinion
								}
							}
							NOT = {
								has_opinion_modifier = {
									target = prev
									modifier = spouse_vicious_rumors_opinion
								}
							}
							NOT = {
								has_opinion_modifier = {
									target = prev
									modifier = spouse_spoke_highly_opinion
								}
							}
							NOT = { has_relation_rival = scope:spouse_check }
						}
					}
					save_scope_as = spouse
					liege = {
						save_scope_as = told_of_character
					}
				}
			}
		}
		save_scope_as = initial_spouse
	}

	option = {
		name = spouse.3002.a
		ai_chance = {
			base = 85
		}
		duel = {
			skill = diplomacy
			target = scope:told_of_character
			10 = {		
				compare_modifier = {
					value = scope:duel_value
					multiplier = 0.5
					min = -9
				}
				desc = spouse.3002.a.great
				custom_tooltip = spouse.3002.a.great_tt
				scope:told_of_character = {
					trigger_event = spouse.3003 #Extremely good outcome
				}
			}
			15 = {		
				compare_modifier = {
					value = scope:duel_value
					multiplier = 0.25
					min = -14
				}
				desc = spouse.3002.a.good
				custom_tooltip = spouse.3002.a.good_tt
				scope:told_of_character = {
					trigger_event = spouse.3006 #Pretty good outcome
				}
			}
			10 = {		
				compare_modifier = {
					value = scope:duel_value
					multiplier = -0.5
					min = -9
				}
				desc = spouse.3002.a.bad
				custom_tooltip = spouse.3002.a.bad_tt
				scope:told_of_character = {
					trigger_event = spouse.3009 #Bad outcome
				}
			}
		}
	}

	option = {
		name = spouse.3002.b
		ai_chance = {
			base = 15
		}
	}
}


#Exceptional outcome: Event for target
spouse.3003 = {
	type = character_event
	title = spouse.3003.t
	desc = {
		desc = spouse.3003.opening
		desc = spouse.3003.exceptional
	}
	theme = marriage
	left_portrait = scope:initial_spouse
	right_portrait = scope:spouse

	immediate = {
		add_opinion = {
			target = scope:spouse
			modifier = spouse_vicious_rumors_opinion
		}
	}

	option = {
		name = spouse.3003.a
		show_as_tooltip = {
			add_opinion = {
				target = scope:spouse
				modifier = spouse_vicious_rumors_opinion
			}
		}
		hidden_effect = {
			random = {
				chance = 20
				scope:spouse = {
					trigger_event = spouse.3004
				}
			}
			scope:initial_spouse = {
				trigger_event = spouse.3005
			}
		}
	}
}

#Exceptional outcome: Event for spouse
spouse.3004 = {
	type = character_event
	title = spouse.3004.t
	desc = {
		desc = spouse.3004.opening
		desc = spouse.3004.exceptional
	}
	theme = marriage
	left_portrait = scope:told_of_character
	right_portrait = scope:initial_spouse

	option = {
		name = spouse.3004.a
		show_as_tooltip = {
			scope:told_of_character = {
				add_opinion = {
					target = scope:spouse
					modifier = spouse_vicious_rumors_opinion
				}
			}
		}
	}
}

#Exceptional outcome: Event for initial spouse
spouse.3005 = {
	type = character_event
	title = spouse.3005.t
	desc = {
		desc = spouse.3005.exceptional
	}
	theme = marriage
	left_portrait = scope:told_of_character
	right_portrait = scope:spouse

	option = {
		name = spouse.3005.a
		show_as_tooltip = {
			scope:told_of_character = {
				add_opinion = {
					target = scope:spouse
					modifier = spouse_vicious_rumors_opinion
				}
			}
		}
	}
}





#Good outcome: Event for target
spouse.3006 = {
	type = character_event
	title = spouse.3006.t
	desc = {
		desc = spouse.3003.opening
		desc = spouse.3006.good
	}
	theme = marriage
	left_portrait = scope:initial_spouse
	right_portrait = scope:spouse

	immediate = {
		add_opinion = {
			target = scope:spouse
			modifier = spouse_ill_rumors_opinion
		}
	}

	option = {
		name = spouse.3006.a
		show_as_tooltip = {
			add_opinion = {
				target = scope:spouse
				modifier = spouse_ill_rumors_opinion
			}
		}
		hidden_effect = {
			random = {
				chance = 30
				scope:spouse = {
					trigger_event = spouse.3007
				}
			}
			scope:initial_spouse = {
				trigger_event = spouse.3008
			}
		}
	}
}

#Good outcome: Event for spouse
spouse.3007 = {
	type = character_event
	title = spouse.3007.t
	desc = {
		desc = spouse.3004.opening
		desc = spouse.3007.good
	}
	theme = marriage
	left_portrait = scope:told_of_character
	right_portrait = scope:initial_spouse

	option = {
		name = spouse.3007.a
		show_as_tooltip = {
			scope:told_of_character = {
				add_opinion = {
					target = scope:spouse
					modifier = spouse_ill_rumors_opinion
				}
			}
		}
	}
}

#Good outcome: Event for initial spouse
spouse.3008 = {
	type = character_event
	title = spouse.3008.t
	desc = {
		desc = spouse.3008.good
	}
	theme = marriage
	left_portrait = scope:told_of_character
	right_portrait = scope:spouse

	option = {
		name = spouse.3008.a
		show_as_tooltip = {
			scope:told_of_character = {
				add_opinion = {
					target = scope:spouse
					modifier = spouse_ill_rumors_opinion
				}
			}
		}
	}
}





#Bad outcome: Event for target
spouse.3009 = {
	type = character_event
	title = spouse.3009.t
	desc = {
		desc = spouse.3003.opening
		desc = spouse.3009.bad
	}
	theme = marriage
	left_portrait = scope:initial_spouse
	right_portrait = scope:spouse

	immediate = {
		add_opinion = {
			target = scope:spouse
			modifier = spouse_spoke_highly_opinion
		}
	}

	option = {
		name = spouse.3009.a
		show_as_tooltip = {
			add_opinion = {
				target = scope:spouse
				modifier = spouse_spoke_highly_opinion
			}
		}
		hidden_effect = {
			scope:spouse = {
				trigger_event = spouse.3010
			}
			scope:initial_spouse = {
				trigger_event = spouse.3011
			}
		}
	}
}

#Bad outcome: Event for spouse
spouse.3010 = {
	type = character_event
	title = spouse.3010.t
	desc = {
		desc = spouse.3004.opening
		desc = spouse.3010.bad
	}
	theme = marriage
	left_portrait = scope:told_of_character
	right_portrait = scope:initial_spouse

	option = {
		name = spouse.3010.a
		show_as_tooltip = {
			scope:told_of_character = {
				add_opinion = {
					target = scope:spouse
					modifier = spouse_spoke_highly_opinion
				}
			}
		}
	}
}

#Bad outcome: Event for initial spouse
spouse.3011 = {
	type = character_event
	title = spouse.3011.t
	desc = {
		desc = spouse.3011.bad
	}
	theme = marriage
	left_portrait = scope:told_of_character
	right_portrait = scope:spouse

	option = {
		name = spouse.3011.a
		show_as_tooltip = {
			scope:told_of_character = {
				add_opinion = {
					target = scope:spouse
					modifier = spouse_spoke_highly_opinion
				}
			}
		}
	}
}






#You claim there is a plot against spouse
#3012-3013
spouse.3012 = {
	type = character_event
	title = spouse.3012.t
	desc = {
		desc = spouse.3012.opening
		first_valid = {
			triggered_desc = {
				trigger = {
					scope:agent = {
						is_scheming_against = {
							target = scope:spouse
							skill = intrigue
						}
					}
				}
				desc = spouse.3012.agent_suspicious
			}
			desc = spouse.3012.agent_probably_innocent
		}
	}
	theme = marriage
	left_portrait = scope:spouse
	right_portrait = scope:agent

	trigger = {
		any_spouse = {
			is_available_healthy_ai_adult = yes
			is_landed = yes
			reverse_opinion = {
				target = root
				value < -20
			}
			save_temporary_scope_as = spouse_check
		}
		OR = {
			any_courtier_or_guest = {
				NOT = { this = scope:spouse_check }
			}
			scope:spouse_check = {
				any_courtier_or_guest = {
					NOT = { this = root }
				}
			}
		}
	}

	weight_multiplier = {
		base = 1
		compare_modifier = {
			target = root
			value = intrigue
			multiplier = 0.1
		}
	}

	immediate = {
		save_scope_as = initial_spouse
		random_spouse = {
			limit = {
				is_available_healthy_ai_adult = yes
				is_landed = yes
				reverse_opinion = {
					target = root
					value < -20
				}
			}
			save_scope_as = spouse

			scope:spouse = {
				random_courtier_or_guest = {
					limit = {
						NOT = { this = root }
					}
				}
				save_scope_as = agent
			}
		}
	}

	#"Warn# my spouse!
	option = {
		name = spouse.3012.a
		ai_chance = {
			base = 95
		}
		custom_tooltip = spouse.3012.false_reveal_tt
		hidden_effect = {
			scope:spouse = {
				trigger_event = spouse.3013
			}
		}
	}

	#Say nothing
	option = {
		name = spouse.3012.b
		ai_chance = {
			base = 5
		}
	}
}

#Event for spouse
spouse.3013 = {
	type = character_event
	title = spouse.3013.t
	desc = spouse.3013.desc
	theme = marriage
	left_portrait = scope:initial_spouse
	right_portrait = scope:agent

	#Can my spouse be trusted?
	option = {
		name = spouse.3013.a
		add_opinion = {
			target = scope:agent
			modifier = spouse_caused_suspicion_opinion
		}
		stress_impact = {
			base = minor_stress_gain
		}
	}
}
