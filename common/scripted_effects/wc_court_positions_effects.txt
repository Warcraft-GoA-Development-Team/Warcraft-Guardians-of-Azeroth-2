# COURT MAGE
court_mage_title_accepted_effect = {
	basic_gained_court_position_effect = yes
}
court_mage_title_revoked_effect = {
	basic_revoked_court_position_effect = yes
}
court_mage_title_invalidated_effect = {
	basic_invalidated_court_position_effect = yes
}

hire_court_mage_effect = { 
	$MAGE$ = { 
		if = {
			limit = { 
				NOT = { liege = $EMPLOYER$ }
			}
			$EMPLOYER$ = { add_courtier = $MAGE$ }
		}
	}
	$EMPLOYER$ = { 
		#Replace existing court mage if one exists
		if = {
			limit = {
				employs_court_position = court_mage_court_position
				any_court_position_holder = {
					type = court_mage_court_position
					count > 0
				}
			}
			every_court_position_holder = {
				type = court_mage_court_position
				save_temporary_scope_as = old_mage

				$EMPLOYER$ = {
					replace_court_position = {
						recipient = $MAGE$
						holder = scope:old_mage
						court_position = court_mage_court_position
					}
					reverse_add_opinion = {
						target = scope:old_mage
						modifier = disappointed_opinion
						opinion = -15
					}
					reverse_add_opinion = {
						target = $MAGE$
						modifier = hired_me_opinion
					}
				}
			}
		}
		#Else just straight up appoint
		else_if = {
			limit = {
				can_employ_court_position_type = court_mage_court_position
			}
			appoint_court_position = {
				recipient = $MAGE$
				court_position = court_mage_court_position
			}
			reverse_add_opinion = {
				target = $MAGE$
				modifier = hired_me_opinion
			}
		}
	}
}
