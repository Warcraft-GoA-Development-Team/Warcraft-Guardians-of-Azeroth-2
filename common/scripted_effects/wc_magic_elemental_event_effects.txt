######################################
# Helper Functions
######################################

# duration to next effect is weighted by proficiency in the relevant magic type
planar_journey_route_effect = {
    add_character_flag = {
        flag = wc_ritual_$PLANE$_plane_$MAGIC$_buffs
        days = 400
    }
    random_list = {
        5 = {
            custom_tooltip = wc_ritual_journey_swift
            modifier = {
                OR = {
                    perks_in_tree = { tree = $MAGIC$_magic_tree_1 value > 1 }
                    perks_in_tree = { tree = $MAGIC$_magic_tree_2 value > 1 }
                }
                add = 5
            }
            modifier = {
                OR = {
                    perks_in_tree = { tree = $MAGIC$_magic_tree_1 value > 9 }
                    perks_in_tree = { tree = $MAGIC$_magic_tree_2 value > 9 }
                }
                add = 5
            }
            if = { limit = { flag:$PLANE$ = flag:fire }
                if = { limit = { flag:$QUEST$ = flag:spirit }
                    trigger_event = {
                        id = wc_elemental_ritual_events.1120
                        days = {7 14}
                    }
                }
                else = {
                    trigger_event = {
                        id = wc_elemental_ritual_events.1620
                        days = {7 14}
                    }
                }
            }
        }
        10 = {
            custom_tooltip = wc_ritual_journey_fast
            modifier = {
                OR = {
                    perks_in_tree = { tree = $MAGIC$_magic_tree_1 value > 1 }
                    perks_in_tree = { tree = $MAGIC$_magic_tree_2 value > 1 }
                }
                add = 15
            }
            if = { limit = { flag:$PLANE$ = flag:fire }
                if = { limit = { flag:$QUEST$ = flag:spirit }
                    trigger_event = {
                        id = wc_elemental_ritual_events.1120
                        days = {21 60}
                    }
                }
                else = {
                    trigger_event = {
                        id = wc_elemental_ritual_events.1620
                        days = {21 60}
                    }
                }
            }
        }
        10 = {
            custom_tooltip = wc_ritual_journey_normal
            modifier = {
                OR = {
                    perks_in_tree = { tree = $MAGIC$_magic_tree_1 value > 1 }
                    perks_in_tree = { tree = $MAGIC$_magic_tree_2 value > 1 }
                }
                add = 5
            }
            if = { limit = { flag:$PLANE$ = flag:fire }
                if = { limit = { flag:$QUEST$ = flag:spirit }
                    trigger_event = {
                        id = wc_elemental_ritual_events.1120
                        days = {60 90}
                    }
                }
                else = {
                    trigger_event = {
                        id = wc_elemental_ritual_events.1620
                        days = {60 90}
                    }
                }
            }
        }
        25 = {
            custom_tooltip = wc_ritual_journey_slow
            modifier = {
                OR = {
                    perks_in_tree = { tree = $MAGIC$_magic_tree_1 value > 1 }
                    perks_in_tree = { tree = $MAGIC$_magic_tree_2 value > 1 }
                }
                add = -20
            }
            if = { limit = { flag:$PLANE$ = flag:fire }
                if = { limit = { flag:$QUEST$ = flag:spirit }
                    trigger_event = {
                        id = wc_elemental_ritual_events.1120
                        days = {90 120}
                    }
                }
                else = {
                    trigger_event = {
                        id = wc_elemental_ritual_events.1620
                        days = {90 120}
                    }
                }
            }
        }
    }
}
