namespace = wc_holy_light_orders_events

##################################################
# Destruction of the Brotherhood
# by Dione and ElMariuso
##################################################

# The Destruction of Northshire
wc_holy_light_orders_events.0001 = {
	type = character_event
	content_source = dlc_GOA
	title = wc_holy_light_orders_events.0001.title
	
	desc = {
		desc = wc_holy_light_orders_events.0001.opening
		first_valid = {
			triggered_desc = {
				trigger = {
					has_faith = faith:holy_light
					government_has_flag = government_is_theocracy
					has_title = title:k_holy_light_church
				}
				desc = wc_holy_light_orders_events.0001.desc.church
			}
			triggered_desc = {
				trigger = {
					has_faith = faith:holy_light
					government_has_flag = government_is_theocracy
				}
				desc = wc_holy_light_orders_events.0001.desc.holy_light_theocracy
			}
			triggered_desc = {
				trigger = { has_culture = culture:azerothian }
				desc = wc_holy_light_orders_events.0001.desc.azerothian
			}
			triggered_desc = {
				trigger = { has_faith = faith:holy_light }
				desc = wc_holy_light_orders_events.0001.desc.holy_light
			}
			triggered_desc = {
				trigger = {
					OR = {
						has_trait = creature_human
						AND = {
							has_trait = creature_dwarf
							NOT = { has_culture = culture:dark_iron }
						}
						has_trait = creature_high_elf
					}
				}
				desc = wc_holy_light_orders_events.0001.desc.normal
			}
			desc = wc_holy_light_orders_events.0001.desc.other
		}
	}
	
	theme = faith
	left_portrait = {
		character = root
		
		triggered_animation = {
			trigger = {
				OR = {
					has_trait = creature_troll
					has_trait = creature_gnoll
					has_trait = creature_murloc
				}
			}
			animation = celebrate_spear
		}
		animation = worry
	}

	immediate = {
		faith:holy_light = {
			save_scope_as = holy_light
		}
		if = {
			limit = { is_independent_ruler = yes }
			scope:holy_light = {
				change_fervor = {
					value = 10
					desc = brotherhood_northshire_destroyed
				}
			}
		}
		scope:holy_light.religious_head = {
			save_scope_as = high_priest
		}
		title:e_horde.holder = { save_scope_as = invader }
	}
	
	# The Archbishop
	option = {
		name = wc_holy_light_orders_events.0001.church
		trigger = {
			has_faith = faith:holy_light
			government_has_flag = government_is_theocracy
			has_title = title:k_holy_light_church
		}
		
		add_piety = massive_piety_gain
		
		ai_chance = {
			base = 150
		}
	}
	
	# Martial Priest
	option = {
		name = wc_holy_light_orders_events.0001.holy_light_theocracy.a
		trigger = {
			NOT = { has_culture = culture:azerothian }
			has_faith = faith:holy_light
			government_has_flag = government_is_theocracy
			NOT = { has_title = title:k_holy_light_church }
		}
		
		add_character_modifier = {
			modifier = vengeful_holy_light_modifier
			years = 3
		}
		add_piety = minor_piety_gain
		
		ai_chance = {
			base = 150
		}
	}
	
	# Helpful Priest
	option = {
		name = wc_holy_light_orders_events.0001.holy_light_theocracy.b
		trigger = {
			NOT = { has_culture = culture:azerothian }
			has_faith = faith:holy_light
			government_has_flag = government_is_theocracy
			NOT = { has_title = title:k_holy_light_church }
		}
		
		add_piety = medium_piety_gain
		add_gold = minor_gold_loss
		
		ai_chance = {
			base = 150
		}
	}
	
	# Martial Azerothian
	option = {
		name = wc_holy_light_orders_events.0001.azerothian.a
		trigger = {
			has_culture = culture:azerothian
			NOT = { has_title = title:k_holy_light_church }
		}
		
		add_character_modifier = {
			modifier = vengeful_holy_light_modifier
			years = 3
		}
		stress_impact = {
			base = medium_stress_impact_gain
		}
		
		ai_chance = {
			base = 150
		}
	}
	
	# Zealot Azerothian
	option = {
		name = wc_holy_light_orders_events.0001.azerothian.b
		trigger = {
			has_culture = culture:azerothian
			NOT = { has_title = title:k_holy_light_church }
			OR = {
				has_trait = zealous
				piety_level >= high_piety_level
			}
		}
		
		add_piety = massive_piety_gain
		stress_impact = {
			base = medium_stress_impact_gain
		}
		
		ai_chance = {
			base = 150
		}
	}

	# Vengful zealot, have to be holy_light
	option = {
		name = wc_holy_light_orders_events.0001.holy_light.zealous
		trigger = {
			NOT = { has_culture = culture:azerothian }
			government_has_flag = government_is_theocracy
			faith = scope:holy_light
			OR = {
				has_trait = zealous
				piety_level >= high_piety_level
			}
		}
		add_piety = minor_piety_gain
		add_character_modifier = {
			modifier = vengeful_holy_light_modifier
			years = 3
		}
		
		ai_chance = {
			base = 150
		}
	}

	# Is cynical
	option = {
		name = wc_holy_light_orders_events.0001.holy_light.cynical
		trigger = {
			NOT = { has_culture = culture:azerothian }
			faith = scope:holy_light
			has_trait = cynical
		}
		add_piety = minor_piety_loss
		stress_impact = {
			base = minor_stress_impact_loss
		}
		
		ai_chance = {
			base = 150
		}
	}

	# Normal option
	option = {
		trigger = {
			NOT = {
				government_has_flag = government_is_theocracy
				has_title = title:k_holy_light_church
			}
		}
		name = wc_holy_light_orders_events.0001.normal
		
		ai_chance = {
			base = 100
		}
	}
}