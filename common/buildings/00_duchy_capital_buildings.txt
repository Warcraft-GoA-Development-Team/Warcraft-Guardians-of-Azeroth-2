##########
# Duchy Capital Buildings
# These are built in the first barony of the first county of any duchy
# Holding the associated duchy is required both to build, and for the buildings to be enabled
##########

# SPECIAL DUCHY BUILDINGS
# We place these at the top to make them more visible in the building interface.

royal_garden_01 = {
	construction_time = slow_construction_time

	can_construct_potential = {
		building_requirement_castle_city_church = { LEVEL = 01 }
		building_requirement_civilized = yes
		culture = { has_cultural_parameter = enable_garden_duchy_building }
		NOR = {
			terrain = desert_mountains
			terrain = mountains
			terrain = wetlands
		}
	}
	
	can_construct_showing_failures_only = {
		culture = {
			has_innovation = innovation_manorialism
		}
	}
	
	is_enabled = {
		county.holder = { has_title = prev.duchy }
	}
	show_disabled = yes
	
	cost_gold = expensive_building_tier_2_cost
	
	character_modifier = {
		monthly_prestige_gain_mult = 0.05
		stress_gain_mult = -0.10
		#Add a court grandeur bonus
		court_grandeur_baseline_add = 4
		#character_capital_county_monthly_development_growth_add = 0.2
	}
	duchy_capital_county_modifier = {
		county_opinion_add = 5
	}
	province_modifier = {
		monthly_income = good_building_tax_tier_2
	}
	
	next_building = royal_garden_02

	type_icon = "icon_building_royal_forest.dds"
	
	type = duchy_capital
	
	ai_value = {
		base = 20
		modifier = {
			factor = 2
			scope:holder.capital_province = this
		}
		modifier = { # Fill all building slots before going for duchy buildings
			factor = 0
			free_building_slots > 0
		}
	}
}

royal_garden_02 = {
	construction_time = slow_construction_time

	can_construct_potential = {
		building_requirement_castle_city_church = { LEVEL = 01 }
		building_requirement_civilized = yes
	}
	
	can_construct_showing_failures_only = {
		culture = {
			has_innovation = innovation_windmills
			has_cultural_parameter = enable_garden_duchy_building
		}
	}
	
	is_enabled = {
		county.holder = { has_title = prev.duchy }
	}
	show_disabled = yes
	
	cost_gold = expensive_building_tier_3_cost
	
	character_modifier = {
		monthly_prestige_gain_mult = 0.10
		stress_gain_mult = -0.20
		#Add a court grandeur bonus
		court_grandeur_baseline_add = 8
		#character_capital_county_monthly_development_growth_add = 0.4
	}
	duchy_capital_county_modifier = {
		county_opinion_add = 10
	}
	province_modifier = {
		monthly_income = good_building_tax_tier_3
	}
	
	next_building = royal_garden_03
	
	type = duchy_capital
	
	ai_value = {
		base = 20
		modifier = {
			factor = 2
			scope:holder.capital_province = this
		}
	}
}

royal_garden_03 = {
	construction_time = slow_construction_time

	can_construct_potential = {
		building_requirement_castle_city_church = { LEVEL = 01 }
		building_requirement_civilized = yes
	}
	
	can_construct_showing_failures_only = {
		culture = {
			has_innovation = innovation_cranes
			has_cultural_parameter = enable_garden_duchy_building
		}
	}
	
	is_enabled = {
		county.holder = { has_title = prev.duchy }
	}
	show_disabled = yes
	
	cost_gold = expensive_building_tier_4_cost
	
	character_modifier = {
		monthly_prestige_gain_mult = 0.15
		stress_gain_mult = -0.30
		#Add a court grandeur bonus
		court_grandeur_baseline_add = 12
		#character_capital_county_monthly_development_growth_add = 0.6
	}
	duchy_capital_county_modifier = {
		county_opinion_add = 15
	}
	province_modifier = {
		monthly_income = good_building_tax_tier_4
	}
	
	type = duchy_capital
	
	flag = fully_upgraded_duchy_capital_building
	
	ai_value = {
		base = 20
		modifier = {
			factor = 2
			scope:holder.capital_province = this
		}
	}
}

# REGULAR DUCHY BUILDINGS

military_academy_01 = {
	construction_time = slow_construction_time

	can_construct_potential = {
		building_requirement_castle_city_church = { LEVEL = 01 }
		building_requirement_civilized = yes
	}
	
	can_construct_showing_failures_only = {
		
		culture = {
			has_innovation = innovation_burhs
		}
	}
	
	is_enabled = {
		county.holder = { has_title = prev.duchy }
	}
	show_disabled = yes
	
	cost_gold = expensive_building_tier_2_cost
	
	character_modifier = {
		knight_limit = 2
		knight_effectiveness_mult = 0.25
		army_maintenance_mult = -0.025
	}
	
	next_building = military_academy_02
	
	type_icon = "icon_building_military_academy.dds"

	type = duchy_capital
	
	ai_value = {
		base = 20
		modifier = {
			factor = 2
			scope:holder.capital_province = this
		}
		modifier = { # Fill all building slots before going for duchy buildings
			factor = 0
			free_building_slots > 0
		}
	}
}

military_academy_02 = {
	construction_time = slow_construction_time

	can_construct_potential = {
		building_requirement_castle_city_church = { LEVEL = 01 }
		building_requirement_civilized = yes
	}
	
	can_construct_showing_failures_only = {
		
		culture = {
			has_innovation = innovation_castle_baileys
		}
	}
	
	is_enabled = {
		county.holder = { has_title = prev.duchy }
	}
	show_disabled = yes
	
	cost_gold = expensive_building_tier_3_cost
	
	character_modifier = {
		knight_limit = 4
		knight_effectiveness_mult = 0.5
		army_maintenance_mult = -0.035
	}
	
	next_building = military_academy_03
	
	type = duchy_capital
	
	ai_value = {
		base = 20
		modifier = {
			factor = 2
			scope:holder.capital_province = this
		}
	}
}

military_academy_03 = {
	construction_time = slow_construction_time

	can_construct_potential = {
		building_requirement_castle_city_church = { LEVEL = 01 }
		building_requirement_civilized = yes
	}
	
	can_construct_showing_failures_only = {
		
		culture = {
			has_innovation = innovation_royal_armory
		}
	}
	
	is_enabled = {
		county.holder = { has_title = prev.duchy }
	}
	show_disabled = yes
	
	cost_gold = expensive_building_tier_4_cost
	
	character_modifier = {
		knight_limit = 6
		knight_effectiveness_mult = 0.75
		army_maintenance_mult = -0.05
	}
	
	type = duchy_capital
	
	flag = fully_upgraded_duchy_capital_building

	ai_value = {
		base = 20
		modifier = {
			factor = 2
			scope:holder.capital_province = this
		}
	}
}

march_01 = {
	construction_time = slow_construction_time

	can_construct_potential = {
		building_requirement_castle_city_church = { LEVEL = 01 }
		building_requirement_civilized = yes
	}
	
	can_construct_showing_failures_only = {
		
		culture = {
			has_innovation = innovation_burhs
		}
	}
	
	is_enabled = {
		county.holder = { has_title = prev.duchy }
	}
	show_disabled = yes
	
	cost_gold = expensive_building_tier_2_cost
	
	duchy_capital_county_modifier = {
		supply_limit_mult = 0.25
		levy_reinforcement_rate = 0.25
		garrison_size = 0.25
		hostile_raid_time = 0.2
		defender_holding_advantage = normal_building_advantage_tier_2
		additional_fort_level = normal_building_fort_level_tier_1
	}
	
	next_building = march_02

	type_icon = "icon_building_march.dds"
	
	type = duchy_capital
	
	ai_value = {
		base = 20
		modifier = {
			factor = 2
			scope:holder.capital_province = this
		}
		culture_likely_to_fortify_modifier = yes
		modifier = { # Fill all building slots before going for duchy buildings
			factor = 0
			free_building_slots > 0
		}
	}
}

march_02 = {
	construction_time = slow_construction_time

	can_construct_potential = {
		building_requirement_castle_city_church = { LEVEL = 01 }
		building_requirement_civilized = yes
	}
	
	can_construct_showing_failures_only = {
		
		culture = {
			has_innovation = innovation_castle_baileys
		}
	}
	
	is_enabled = {
		county.holder = { has_title = prev.duchy }
	}
	show_disabled = yes
	
	cost_gold = expensive_building_tier_3_cost
	
	duchy_capital_county_modifier = {
		supply_limit_mult = 0.5
		levy_reinforcement_rate = 0.5
		garrison_size = 0.5
		hostile_raid_time = 0.3
		defender_holding_advantage = normal_building_advantage_tier_3
		additional_fort_level = normal_building_fort_level_tier_2
	}
	
	next_building = march_03
	
	type = duchy_capital
	
	ai_value = {
		base = 20
		modifier = {
			factor = 2
			scope:holder.capital_province = this
		}
		culture_likely_to_fortify_modifier = yes
	}
}

march_03 = {
	construction_time = slow_construction_time

	can_construct_potential = {
		building_requirement_castle_city_church = { LEVEL = 01 }
		building_requirement_civilized = yes
	}
	
	can_construct_showing_failures_only = {
		
		culture = {
			has_innovation = innovation_royal_armory
		}
	}
	
	is_enabled = {
		county.holder = { has_title = prev.duchy }
	}
	show_disabled = yes
	
	cost_gold = expensive_building_tier_4_cost
	
	duchy_capital_county_modifier = {
		supply_limit_mult = 1
		levy_reinforcement_rate = 1
		garrison_size = 1
		hostile_raid_time = 0.4
		defender_holding_advantage = normal_building_advantage_tier_4
		additional_fort_level = normal_building_fort_level_tier_3
	}
	
	type = duchy_capital
	
	flag = fully_upgraded_duchy_capital_building
	
	ai_value = {
		base = 20
		modifier = {
			factor = 2
			scope:holder.capital_province = this
		}
		culture_likely_to_fortify_modifier = yes
	}
}

siege_works_01 = {
	construction_time = slow_construction_time

	can_construct_potential = {
		building_requirement_castle_city_church = { LEVEL = 01 }
		building_requirement_civilized = yes
	}
	
	can_construct_showing_failures_only = {
		
		culture = {
			has_innovation = innovation_burhs
		}
	}
	
	is_enabled = {
		county.holder = { has_title = prev.duchy }
	}
	show_disabled = yes
	
	cost_gold = expensive_building_tier_2_cost
	
	character_modifier = {
		siege_weapon_siege_value_mult = 0.2
		siege_weapon_toughness_add = 2
	}
	duchy_capital_county_modifier = {
		additional_fort_level = normal_building_fort_level_tier_1
	}
	
	next_building = siege_works_02

	type_icon = "icon_building_siege_works.dds"
	
	type = duchy_capital
	
	ai_value = {
		base = 20
		modifier = {
			factor = 2
			scope:holder.capital_province = this
		}
		culture_likely_to_fortify_modifier = yes
		modifier = { # Fill all building slots before going for duchy buildings
			factor = 0
			free_building_slots > 0
		}
	}
}

siege_works_02 = {
	construction_time = slow_construction_time

	can_construct_potential = {
		building_requirement_castle_city_church = { LEVEL = 01 }
		building_requirement_civilized = yes
	}
	
	can_construct_showing_failures_only = {
		
		culture = {
			has_innovation = innovation_castle_baileys
		}
	}
	
	is_enabled = {
		county.holder = { has_title = prev.duchy }
	}
	show_disabled = yes
	
	cost_gold = expensive_building_tier_3_cost
	
	character_modifier = {
		siege_weapon_siege_value_mult = 0.3
		siege_weapon_toughness_add = 4

		# Warcraft
		massive_aerial_damage_mult = 0.15
	}
	duchy_capital_county_modifier = {
		additional_fort_level = normal_building_fort_level_tier_2
	}
	
	next_building = siege_works_03
	
	type = duchy_capital
	
	ai_value = {
		base = 20
		modifier = {
			factor = 2
			scope:holder.capital_province = this
		}
		culture_likely_to_fortify_modifier = yes
	}
}

siege_works_03 = {
	construction_time = slow_construction_time

	can_construct_potential = {
		building_requirement_castle_city_church = { LEVEL = 01 }
		building_requirement_civilized = yes
	}
	
	can_construct_showing_failures_only = {
		
		culture = {
			has_innovation = innovation_royal_armory
		}
	}
	
	is_enabled = {
		county.holder = { has_title = prev.duchy }
	}
	show_disabled = yes
	
	cost_gold = expensive_building_tier_4_cost
	
	character_modifier = {
		siege_weapon_siege_value_mult = 0.3
		siege_weapon_toughness_add = 6
	}
	duchy_capital_county_modifier = {
		additional_fort_level = normal_building_fort_level_tier_3
	}

	
	type = duchy_capital
	
	flag = fully_upgraded_duchy_capital_building
	
	ai_value = {
		base = 20
		modifier = {
			factor = 2
			scope:holder.capital_province = this
		}
		culture_likely_to_fortify_modifier = yes
	}
}

royal_armory_01 = {
	construction_time = slow_construction_time

	can_construct_potential = {
		building_requirement_castle_city_church = { LEVEL = 01 }
		building_requirement_civilized = yes
	}
	
	can_construct_showing_failures_only = {
		
		culture = {
			has_innovation = innovation_burhs
		}
	}
	
	is_enabled = {
		county.holder = { has_title = prev.duchy }
	}
	show_disabled = yes
	
	cost_gold = expensive_building_tier_2_cost
	
	duchy_capital_county_modifier = {
		levy_size = 0.2
	}
	
	character_modifier = {
		army_maintenance_mult = -0.025
	}

	character_culture_modifier = {
		parameter = better_armory_buildings
		prowess = 2
		knight_effectiveness_mult = 0.15
	}

	duchy_capital_county_culture_modifier = {
		parameter = better_armory_buildings
		build_gold_cost = -0.1
		holding_build_gold_cost = -0.1
	}
	
	next_building = royal_armory_02

	type_icon = "icon_building_royal_armory.dds"
	
	type = duchy_capital
	
	ai_value = {
		base = 20
		modifier = {
			factor = 2
			scope:holder.capital_province = this
		}
		modifier = { # Fill all building slots before going for duchy buildings
			factor = 0
			free_building_slots > 0
		}
	}
}

royal_armory_02 = {
	construction_time = slow_construction_time

	can_construct_potential = {
		building_requirement_castle_city_church = { LEVEL = 01 }
		building_requirement_civilized = yes
	}
	
	can_construct_showing_failures_only = {
		
		culture = {
			has_innovation = innovation_castle_baileys
		}
	}

	character_culture_modifier = {
		parameter = better_armory_buildings
		prowess = 3
		knight_effectiveness_mult = 0.3
	}
	
	is_enabled = {
		county.holder = { has_title = prev.duchy }
	}
	show_disabled = yes
	
	cost_gold = expensive_building_tier_3_cost
	
	duchy_capital_county_modifier = {
		levy_size = 0.3
	}
	
	character_modifier = {
		army_maintenance_mult = -0.035
	}

	duchy_capital_county_culture_modifier = {
		parameter = better_armory_buildings
		build_gold_cost = -0.15
		holding_build_gold_cost = -0.15
	}
	
	next_building = royal_armory_03
	
	type = duchy_capital
	
	ai_value = {
		base = 20
		modifier = {
			factor = 2
			scope:holder.capital_province = this
		}
	}
}

royal_armory_03 = {
	construction_time = slow_construction_time

	can_construct_potential = {
		building_requirement_castle_city_church = { LEVEL = 01 }
		building_requirement_civilized = yes
	}
	
	can_construct_showing_failures_only = {
		
		culture = {
			has_innovation = innovation_royal_armory
		}
	}

	character_culture_modifier = {
		parameter = better_armory_buildings
		prowess = 4
		knight_effectiveness_mult = 0.45
	}
	
	duchy_capital_county_culture_modifier = {
		parameter = better_armory_buildings
		build_gold_cost = -0.2
		holding_build_gold_cost = -0.2
	}
	
	character_modifier = {
		army_maintenance_mult = -0.05
	}
	
	is_enabled = {
		county.holder = { has_title = prev.duchy }
	}
	show_disabled = yes
	
	cost_gold = expensive_building_tier_4_cost
	
	duchy_capital_county_modifier = {
		levy_size = 0.4
	}
	
	type = duchy_capital
	
	flag = fully_upgraded_duchy_capital_building
	
	ai_value = {
		base = 20
		modifier = {
			factor = 2
			scope:holder.capital_province = this
		}
	}
}

jousting_lists_01 = {
	construction_time = slow_construction_time

	can_construct_potential = {
		building_requirement_castle_city_church = { LEVEL = 01 }
		building_requirement_civilized = yes
	}
	
	can_construct_showing_failures_only = {
		
		culture = {
			has_innovation = innovation_burhs
		}
	}
	
	is_enabled = {
		county.holder = { has_title = prev.duchy }
	}
	show_disabled = yes
	
	cost_gold = expensive_building_tier_2_cost
	
	character_modifier = {
		heavy_cavalry_damage_mult = 0.15
		heavy_cavalry_toughness_mult = 0.15
		light_cavalry_damage_mult = 0.1
		light_cavalry_toughness_mult = 0.1
		light_cavalry_screen_mult = 0.1
		light_cavalry_pursuit_mult = 0.1
		men_at_arms_maintenance = -0.06
		elephant_cavalry_damage_mult = 0.15
		elephant_cavalry_toughness_mult = 0.15
		camel_cavalry_damage_mult = 0.1
		camel_cavalry_toughness_mult = 0.1
		camel_cavalry_screen_mult = 0.1
		camel_cavalry_pursuit_mult = 0.1
	}
	
	next_building = jousting_lists_02

	type_icon = "icon_building_jousting_lists.dds"
	
	type = duchy_capital
	
	ai_value = {
		base = 20
		modifier = {
			factor = 2
			scope:holder.capital_province = this
		}
		modifier = { # Don't build unsuitable MaA-boosting duchy buildings
			factor = 0
			scope:holder = {
				NOR = {
					number_maa_regiments_of_base_type = {
						type = heavy_cavalry
						value > 0
					}
					number_maa_regiments_of_base_type = {
						type = light_cavalry
						value > 0
					}
					number_maa_regiments_of_base_type = {
						type = elephant_cavalry
						value > 0
					}
					number_maa_regiments_of_base_type = {
						type = camel_cavalry
						value > 0
					}
				}
			}
		}
		modifier = { # Fill all building slots before going for duchy buildings
			factor = 0
			free_building_slots > 0
		}
	}
}

jousting_lists_02 = {
	construction_time = slow_construction_time

	can_construct_potential = {
		building_requirement_castle_city_church = { LEVEL = 01 }
		building_requirement_civilized = yes
	}
	
	can_construct_showing_failures_only = {
		
		culture = {
			has_innovation = innovation_castle_baileys
		}
	}
	
	is_enabled = {
		county.holder = { has_title = prev.duchy }
	}
	show_disabled = yes
	
	cost_gold = expensive_building_tier_3_cost
	
	character_modifier = {
		heavy_cavalry_damage_mult = 0.3
		heavy_cavalry_toughness_mult = 0.3
		light_cavalry_damage_mult = 0.2
		light_cavalry_toughness_mult = 0.2
		light_cavalry_screen_mult = 0.2
		light_cavalry_pursuit_mult = 0.2
		men_at_arms_maintenance = -0.08
		elephant_cavalry_damage_mult = 0.3
		elephant_cavalry_toughness_mult = 0.3
		camel_cavalry_damage_mult = 0.2
		camel_cavalry_toughness_mult = 0.2
		camel_cavalry_screen_mult = 0.2
		camel_cavalry_pursuit_mult = 0.2
	}
	
	next_building = jousting_lists_03
	
	type = duchy_capital
	
	ai_value = {
		base = 20
		modifier = {
			factor = 2
			scope:holder.capital_province = this
		}
	}
}

jousting_lists_03 = {
	construction_time = slow_construction_time

	can_construct_potential = {
		building_requirement_castle_city_church = { LEVEL = 01 }
		building_requirement_civilized = yes
	}
	
	can_construct_showing_failures_only = {
		
		culture = {
			has_innovation = innovation_royal_armory
		}
	}
	
	is_enabled = {
		county.holder = { has_title = prev.duchy }
	}
	show_disabled = yes
	
	cost_gold = expensive_building_tier_4_cost
	
	character_modifier = {
		heavy_cavalry_damage_mult = 0.45
		heavy_cavalry_toughness_mult = 0.45

		# Warcraft
		massive_infantry_damage_mult = 0.15
		massive_infantry_toughness_mult = 0.15

		light_cavalry_damage_mult = 0.3
		light_cavalry_toughness_mult = 0.3
		light_cavalry_screen_mult = 0.3
		light_cavalry_pursuit_mult = 0.3
		men_at_arms_maintenance = -0.1
		elephant_cavalry_damage_mult = 0.45
		elephant_cavalry_toughness_mult = 0.45
		camel_cavalry_damage_mult = 0.3
		camel_cavalry_toughness_mult = 0.3
		camel_cavalry_screen_mult = 0.3
		camel_cavalry_pursuit_mult = 0.3
	}
	
	type = duchy_capital
	
	flag = fully_upgraded_duchy_capital_building
	
	ai_value = {
		base = 20
		modifier = {
			factor = 2
			scope:holder.capital_province = this
		}
	}
}

blacksmiths_01 = {
	construction_time = slow_construction_time

	can_construct_potential = {
		building_requirement_castle_city_church = { LEVEL = 01 }
		building_requirement_civilized = yes
	}
	
	can_construct_showing_failures_only = {
		
		culture = {
			has_innovation = innovation_burhs
		}
	}
	
	is_enabled = {
		county.holder = { has_title = prev.duchy }
	}
	show_disabled = yes
	
	cost_gold = expensive_building_tier_2_cost
	
	character_modifier = {
		pikemen_damage_mult = 0.05
		pikemen_toughness_mult = 0.15
		heavy_infantry_damage_mult = 0.05
		heavy_infantry_toughness_mult = 0.15

		# Warcraft
		massive_infantry_damage_mult = 0.05
		massive_infantry_toughness_mult = 0.15

		men_at_arms_maintenance = -0.06
	}

	character_culture_modifier = {
		parameter = better_blacksmith_buildings
		pikemen_toughness_mult = 0.03
		heavy_infantry_toughness_mult = 0.03
		prowess = 2
	}

	duchy_capital_county_culture_modifier = {
		parameter = better_blacksmith_buildings
		supply_limit_mult = 0.25
	}

	
	next_building = blacksmiths_02

	type_icon = "icon_building_blacksmiths.dds"
	
	type = duchy_capital
	
	ai_value = {
		base = 20
		modifier = {
			factor = 2
			scope:holder.capital_province = this
		}
		modifier = { # Don't build unsuitable MaA-boosting duchy buildings
			factor = 0
			scope:holder = {
				NOR = {
					number_maa_regiments_of_base_type = {
						type = pikemen
						value > 0
					}
					number_maa_regiments_of_base_type = {
						type = heavy_infantry
						value > 0
					}

					# Warcraft
					number_maa_regiments_of_base_type = {
						type = massive_infantry
						value > 0
					}

				}
			}
		}
		modifier = { # Fill all building slots before going for duchy buildings
			factor = 0
			free_building_slots > 0
		}
	}
}

blacksmiths_02 = {
	construction_time = slow_construction_time

	can_construct_potential = {
		building_requirement_castle_city_church = { LEVEL = 01 }
		building_requirement_civilized = yes
	}
	
	can_construct_showing_failures_only = {
		
		culture = {
			has_innovation = innovation_castle_baileys
		}
	}

	character_culture_modifier = {
		parameter = better_blacksmith_buildings
		pikemen_toughness_mult = 0.05
		heavy_infantry_toughness_mult = 0.05
		prowess = 3
	}

	duchy_capital_county_culture_modifier = {
		parameter = better_blacksmith_buildings
		supply_limit_mult = 0.5
	}
	
	is_enabled = {
		county.holder = { has_title = prev.duchy }
	}
	show_disabled = yes
	
	cost_gold = expensive_building_tier_3_cost
	
	character_modifier = {
		pikemen_damage_mult = 0.1
		pikemen_toughness_mult = 0.3
		heavy_infantry_damage_mult = 0.1
		heavy_infantry_toughness_mult = 0.3

		# Warcraft
		massive_infantry_damage_mult = 0.1
		massive_infantry_toughness_mult = 0.3

		men_at_arms_maintenance = -0.08
	}
	
	next_building = blacksmiths_03
	
	type = duchy_capital
	
	ai_value = {
		base = 20
		modifier = {
			factor = 2
			scope:holder.capital_province = this
		}
	}
}

blacksmiths_03 = {
	construction_time = slow_construction_time

	can_construct_potential = {
		building_requirement_castle_city_church = { LEVEL = 01 }
		building_requirement_civilized = yes
	}
	
	can_construct_showing_failures_only = {
		
		culture = {
			has_innovation = innovation_royal_armory
		}
	}

	character_culture_modifier = {
		parameter = better_blacksmith_buildings
		prowess = 4
		pikemen_toughness_mult = 0.08
		heavy_infantry_toughness_mult = 0.08
	}
	
	duchy_capital_county_culture_modifier = {
		parameter = better_blacksmith_buildings
		supply_limit_mult = 0.75
	}
	
	is_enabled = {
		county.holder = { has_title = prev.duchy }
	}
	show_disabled = yes
	
	cost_gold = expensive_building_tier_4_cost
	
	character_modifier = {
		pikemen_damage_mult = 0.15
		pikemen_toughness_mult = 0.45
		heavy_infantry_damage_mult = 0.15
		heavy_infantry_toughness_mult = 0.45

		# Warcraft
		massive_infantry_damage_mult = 0.15
		massive_infantry_toughness_mult = 0.45

		men_at_arms_maintenance = -0.1
	}
	
	type = duchy_capital
	
	flag = fully_upgraded_duchy_capital_building
	
	ai_value = {
		base = 20
		modifier = {
			factor = 2
			scope:holder.capital_province = this
		}
	}
}

archery_ranges_01 = {
	construction_time = slow_construction_time

	can_construct_potential = {
		building_requirement_castle_city_church = { LEVEL = 01 }
		building_requirement_civilized = yes
	}
	
	can_construct_showing_failures_only = {
		
		culture = {
			has_innovation = innovation_burhs
		}
	}
	
	is_enabled = {
		county.duchy.holder = county.holder
	}
	show_disabled = yes
	
	cost_gold = expensive_building_tier_2_cost
	
	character_modifier = {
		archers_damage_mult = 0.15
		archers_toughness_mult = 0.05
		skirmishers_screen_mult = 0.05
		skirmishers_damage_mult = 0.1
		skirmishers_toughness_mult = 0.05
		skirmishers_pursuit_mult = 0.1
		men_at_arms_maintenance = -0.06
		archer_cavalry_screen_mult = 0.05
		archer_cavalry_damage_mult = 0.1
		archer_cavalry_toughness_mult = 0.05
		archer_cavalry_pursuit_mult = 0.1
	}
	
	next_building = archery_ranges_02

	type_icon = "icon_building_royal_hunting_grounds.dds"
	
	type = duchy_capital
	
	ai_value = {
		base = 20
		modifier = {
			factor = 2
			scope:holder.capital_province = this
		}
		modifier = { # Don't build unsuitable MaA-boosting duchy buildings
			factor = 0
			scope:holder = {
				NOR = {
					number_maa_regiments_of_base_type = {
						type = archers
						value > 0
					}
					number_maa_regiments_of_base_type = {
						type = skirmishers
						value > 0
					}
					number_maa_regiments_of_base_type = {
						type = archer_cavalry
						value > 0
					}
				}
			}
		}
		modifier = { # Fill all building slots before going for duchy buildings
			factor = 0
			free_building_slots > 0
		}
	}
}

archery_ranges_02 = {
	construction_time = slow_construction_time

	can_construct_potential = {
		building_requirement_castle_city_church = { LEVEL = 01 }
		building_requirement_civilized = yes
	}
	
	can_construct_showing_failures_only = {
		
		culture = {
			has_innovation = innovation_castle_baileys
		}
	}
	
	is_enabled = {
		county.holder = { has_title = prev.duchy }
	}
	show_disabled = yes
	
	cost_gold = expensive_building_tier_3_cost
	
	character_modifier = {
		archers_damage_mult = 0.3
		archers_toughness_mult = 0.1
		skirmishers_screen_mult = 0.1
		skirmishers_damage_mult = 0.2
		skirmishers_toughness_mult = 0.1
		skirmishers_pursuit_mult = 0.2
		men_at_arms_maintenance = -0.08
		archer_cavalry_screen_mult = 0.1
		archer_cavalry_damage_mult = 0.2
		archer_cavalry_toughness_mult = 0.1
		archer_cavalry_pursuit_mult = 0.2
	}
	
	next_building = archery_ranges_03
	
	type = duchy_capital
	
	ai_value = {
		base = 20
		modifier = {
			factor = 2
			scope:holder.capital_province = this
		}
	}
}

archery_ranges_03 = {
	construction_time = slow_construction_time

	can_construct_potential = {
		building_requirement_castle_city_church = { LEVEL = 01 }
		building_requirement_civilized = yes
	}
	
	can_construct_showing_failures_only = {
		
		culture = {
			has_innovation = innovation_royal_armory
		}
	}
	
	is_enabled = {
		county.holder = { has_title = prev.duchy }
	}
	show_disabled = yes
	
	cost_gold = expensive_building_tier_4_cost
	
	character_modifier = {
		archers_damage_mult = 0.45
		archers_toughness_mult = 0.15
		skirmishers_screen_mult = 0.15
		skirmishers_damage_mult = 0.3
		skirmishers_toughness_mult = 0.15
		skirmishers_pursuit_mult = 0.3
		men_at_arms_maintenance = -0.1
		archer_cavalry_screen_mult = 0.15
		archer_cavalry_damage_mult = 0.3
		archer_cavalry_toughness_mult = 0.15
		archer_cavalry_pursuit_mult = 0.3
	}
	
	type = duchy_capital
	
	flag = fully_upgraded_duchy_capital_building
	
	ai_value = {
		base = 20
		modifier = {
			factor = 2
			scope:holder.capital_province = this
		}
	}
}

tax_assessor_01 = {
	construction_time = slow_construction_time

	can_construct_potential = {
		building_requirement_castle_city_church = { LEVEL = 01 }
		building_requirement_civilized = yes
	}
	
	can_construct_showing_failures_only = {
		
		culture = {
			has_innovation = innovation_manorialism
		}
	}
	
	is_enabled = {
		county.holder = { has_title = prev.duchy }
	}
	show_disabled = yes
	
	cost_gold = expensive_building_tier_2_cost
	
	duchy_capital_county_modifier = {
		tax_mult = 0.1
	}
	
	next_building = tax_assessor_02

	type_icon = "icon_building_tax_assessor.dds"
	
	type = duchy_capital
	
	ai_value = {
		base = 20
		modifier = {
			factor = 2
			scope:holder.capital_province = this
		}
		modifier = { # Fill all building slots before going for duchy buildings
			factor = 0
			free_building_slots > 0
		}
	}
}

tax_assessor_02 = {
	construction_time = slow_construction_time

	can_construct_potential = {
		building_requirement_castle_city_church = { LEVEL = 01 }
		building_requirement_civilized = yes
	}
	
	can_construct_showing_failures_only = {
		
		culture = {
			has_innovation = innovation_windmills
		}
	}
	
	is_enabled = {
		county.holder = { has_title = prev.duchy }
	}
	show_disabled = yes
	
	cost_gold = expensive_building_tier_3_cost
	
	duchy_capital_county_modifier = {
		tax_mult = 0.15
	}
	
	next_building = tax_assessor_03
	
	type = duchy_capital
	
	ai_value = {
		base = 20
		modifier = {
			factor = 2
			scope:holder.capital_province = this
		}
	}
}

tax_assessor_03 = {
	construction_time = slow_construction_time

	can_construct_potential = {
		building_requirement_castle_city_church = { LEVEL = 01 }
		building_requirement_civilized = yes
	}
	
	can_construct_showing_failures_only = {
		
		culture = {
			has_innovation = innovation_cranes
		}
	}
	
	is_enabled = {
		county.holder = { has_title = prev.duchy }
	}
	show_disabled = yes
	
	cost_gold = expensive_building_tier_4_cost
	
	duchy_capital_county_modifier = {
		tax_mult = 0.20
	}
	
	type = duchy_capital
	
	flag = fully_upgraded_duchy_capital_building
	
	ai_value = {
		base = 20
		modifier = {
			factor = 2
			scope:holder.capital_province = this
		}
	}
}

leisure_palace_01 = {
	construction_time = slow_construction_time

	can_construct_potential = {
		building_requirement_castle_city_church = { LEVEL = 01 }
		building_requirement_civilized = yes
	}
	
	can_construct_showing_failures_only = {
		
		culture = {
			has_innovation = innovation_manorialism
		}
	}
	
	is_enabled = {
		county.holder = { has_title = prev.duchy }
	}
	show_disabled = yes
	
	cost_gold = expensive_building_tier_2_cost
	
	character_modifier = {
		monthly_prestige_gain_mult = 0.05
		stress_loss_mult = 0.15
		owned_hostile_scheme_success_chance_add = 5
		owned_personal_scheme_success_chance_add = 5
	}
	
	duchy_capital_county_modifier = {
		monthly_county_control_change_factor = 0.2
		monthly_county_control_change_add = 0.2
	}
	
	next_building = leisure_palace_02

	type_icon = "icon_building_leisure_palace.dds"
	
	type = duchy_capital
	
	ai_value = {
		base = 10
		
		modifier = { # This type of Duchy Capital Building should be more rare
			add = 10
			scope:holder = {
				OR = { # Suitable personality; cares a lot about their image or reclusive
					has_trait = arrogant
					has_trait = deceitful
					has_trait = paranoid
					has_trait = shy
					has_trait = lazy
					has_trait = reclusive
					has_trait = profligate
				}
			}
		}
		modifier = { # Fill all building slots before going for duchy buildings
			factor = 0
			free_building_slots > 0
		}
	}
}

leisure_palace_02 = {
	construction_time = slow_construction_time

	can_construct_potential = {
		building_requirement_castle_city_church = { LEVEL = 01 }
		building_requirement_civilized = yes
	}
	
	can_construct_showing_failures_only = {
		
		culture = {
			has_innovation = innovation_windmills
		}
	}
	
	is_enabled = {
		county.holder = { has_title = prev.duchy }
	}
	show_disabled = yes
	
	cost_gold = expensive_building_tier_3_cost
	
	character_modifier = {
		monthly_prestige_gain_mult = 0.1
		stress_loss_mult = 0.25
		owned_hostile_scheme_success_chance_add = 10
		owned_personal_scheme_success_chance_add = 10
	}
	
	duchy_capital_county_modifier = {
		monthly_county_control_change_factor = 0.4
		monthly_county_control_change_add = 0.3
	}
	
	next_building = leisure_palace_03
	
	type = duchy_capital
	
	ai_value = {
		base = 20
		modifier = {
			factor = 2
			scope:holder.capital_province = this
		}
	}
}

leisure_palace_03 = {
	construction_time = slow_construction_time

	can_construct_potential = {
		building_requirement_castle_city_church = { LEVEL = 01 }
		building_requirement_civilized = yes
	}
	
	can_construct_showing_failures_only = {
		
		culture = {
			has_innovation = innovation_cranes
		}
	}
	
	is_enabled = {
		county.holder = { has_title = prev.duchy }
	}
	show_disabled = yes
	
	cost_gold = expensive_building_tier_4_cost
	
	character_modifier = {
		monthly_prestige_gain_mult = 0.15
		stress_loss_mult = 0.35
		owned_hostile_scheme_success_chance_add = 15
		owned_personal_scheme_success_chance_add = 15
	}
	
	duchy_capital_county_modifier = {
		monthly_county_control_change_factor = 0.6
		monthly_county_control_change_add = 0.4
	}
	
	type = duchy_capital
	
	flag = fully_upgraded_duchy_capital_building
	
	ai_value = {
		base = 20
		modifier = {
			factor = 2
			scope:holder.capital_province = this
		}
	}
}

royal_forest_01 = {
	construction_time = slow_construction_time

	can_construct_potential = {
		building_requirement_castle_city_church = { LEVEL = 01 }
		building_requirement_civilized = yes
		NOR = {
			terrain = steppe
			terrain = desert
			terrain = oasis
			terrain = desert_mountains
			terrain = mountains
			terrain = wetlands
		}
	}
	
	can_construct_showing_failures_only = {
		
		culture = {
			has_innovation = innovation_manorialism
		}
	}
	
	is_enabled = {
		county.holder = { has_title = prev.duchy }
	}
	show_disabled = yes
	
	cost_gold = expensive_building_tier_2_cost
	
	duchy_capital_county_modifier = {
		county_opinion_add = 5
		development_growth_factor = 0.1
	}
	province_modifier = {
		monthly_income = good_building_tax_tier_2
	}
	
	next_building = royal_forest_02

	type_icon = "icon_building_royal_forest.dds"
	
	type = duchy_capital
	
	ai_value = {
		base = 20
		modifier = {
			factor = 2
			scope:holder.capital_province = this
		}
		modifier = { # Fill all building slots before going for duchy buildings
			factor = 0
			free_building_slots > 0
		}
	}
}

royal_forest_02 = {
	construction_time = slow_construction_time

	can_construct_potential = {
		building_requirement_castle_city_church = { LEVEL = 01 }
		building_requirement_civilized = yes
	}
	
	can_construct_showing_failures_only = {
		
		culture = {
			has_innovation = innovation_windmills
		}
	}
	
	is_enabled = {
		county.holder = { has_title = prev.duchy }
	}
	show_disabled = yes
	
	cost_gold = expensive_building_tier_3_cost
	
	duchy_capital_county_modifier = {
		county_opinion_add = 10
		development_growth_factor = 0.2
	}
	province_modifier = {
		monthly_income = good_building_tax_tier_3
	}
	
	next_building = royal_forest_03
	
	type = duchy_capital
	
	ai_value = {
		base = 20
		modifier = {
			factor = 2
			scope:holder.capital_province = this
		}
	}
}

royal_forest_03 = {
	construction_time = slow_construction_time

	can_construct_potential = {
		building_requirement_castle_city_church = { LEVEL = 01 }
		building_requirement_civilized = yes
	}
	
	can_construct_showing_failures_only = {
		
		culture = {
			has_innovation = innovation_cranes
		}
	}
	
	is_enabled = {
		county.holder = { has_title = prev.duchy }
	}
	show_disabled = yes
	
	cost_gold = expensive_building_tier_4_cost
	
	duchy_capital_county_modifier = {
		county_opinion_add = 15
		development_growth_factor = 0.3
	}
	province_modifier = {
		monthly_income = good_building_tax_tier_4
	}
	
	type = duchy_capital
	
	flag = fully_upgraded_duchy_capital_building
	
	ai_value = {
		base = 20
		modifier = {
			factor = 2
			scope:holder.capital_province = this
		}
	}
}

##########
# Megalith
##########
great_megalith_01 = {

	construction_time = very_slow_construction_time

	type_icon = "icon_megalith.dds"
	
	can_construct_potential = {
		building_requirement_civilized = yes
		building_requirement_castle_city_church = { LEVEL = 01 }
		scope:holder = {
			faith = {
				has_doctrine_parameter = can_build_megaliths
			}
		}
	}
	
	is_enabled = {
		custom_tooltip = {
			text = province_is_of_a_megalith_faith_tt
			county.faith = { has_doctrine_parameter = can_build_megaliths }
		}
		county.holder = { has_title = prev.duchy }
	}
	show_disabled = yes
	
	cost_gold = expensive_building_tier_5_cost

	character_modifier = {
		monthly_learning_lifestyle_xp_gain_mult = 0.1
		monthly_piety = 0.25
		monthly_dynasty_prestige_mult = 0.05
		naval_movement_speed_mult = 0.1
	}

	duchy_capital_county_modifier = {
		county_opinion_add = 10
		development_growth_factor = 0.15
	}
	
	province_modifier = {
		monthly_income = good_building_tax_tier_3
	}
	
	ai_value = {
		base = 100
		modifier = { # Fill all building slots before going for duchy buildings
			factor = 0
			free_building_slots > 0
		}
	}
	
	type = duchy_capital

	flag = fully_upgraded_duchy_capital_building
}
