void_elf_0110_madness_effect = {
	duel = { 
		skill = learning
		value = very_high_skill_rating
		localization = overtaken_by_whispers
		20 = { 
			desc = void_elf.0110.b.whispers_overtake_you
			modifier = { 
				always = yes
				add = $CHANCE$
			}
			modifier = {
				OR = { has_trait = 	fickle has_trait = lazy has_trait = eccentric has_trait = craven has_trait = trusting }
				add = 5
			}
			add_trait = lunatic_1
			custom_tooltip = { 
				text = void_elf.0110.b.old_gods
				random_list = { 
					1 = { make_character_crypto_religionist_effect = { CRYPTO_RELIGION = faith:cthun_worship } }
					1 = { make_character_crypto_religionist_effect = { CRYPTO_RELIGION = faith:nzoth_worship } }
					1 = { make_character_crypto_religionist_effect = { CRYPTO_RELIGION = faith:yoggsaron_worship } }
					1 = { make_character_crypto_religionist_effect = { CRYPTO_RELIGION = faith:yshaarj_worship } }
					1 = { make_character_crypto_religionist_effect = { CRYPTO_RELIGION = faith:ghuun_worship } }
				}
			}
		}
		5 = { 
			desc =  void_elf.0110.b.maintain_your_sanity
			modifier = {
				OR = { has_trait = stubborn has_trait = calm has_trait = zealous has_trait = brave has_trait = paranoid }
				add = 10
			}
			modifier = { 
				OR = { has_trait = intellect_good has_trait = magic_good }
				add = 10
			}
			# MAGIC 2024 TODO - add modifier for void/shadow magic
		}
	}
}

embrace_voidfarer_faith_effect = {
	# Scopes saves for localization
	root = {
		save_scope_as = embracer
		culture = { 
			save_scope_as = embracer_former_culture
		}

		primary_heir = {
			save_scope_as = heir
		}
	}

	culture:void_elf = {
		save_scope_as = new_culture
	}

	# Prestige Bonus
	add_prestige = medium_prestige_gain

	custom_tooltip = embrace_voidfarer_faith_people_custom
	hidden_effect = {

		scope:heir = {
			if = {
				limit = {
					opinion = {
						target = scope:embracer
						value > -30
					}
				}

				set_character_faith = faith:voidfarer
				set_culture = culture:void_elf
			}
		}

		#Convert your, and your whole family's, culture
		every_close_or_extended_family_member = { 
			limit = { 
				can_become_voidfarer_trigger = yes
				is_landed = no 	# Landed people are handled through every_vassal_or_below
				NOT = {
					this = scope:heir
				}
			}
			set_character_faith = faith:voidfarer
			set_culture = culture:void_elf
		}

		every_courtier = { 
			limit = { 
				can_become_voidfarer_trigger = yes
				is_landed = no
				NOT = {
					this = scope:heir
				}
			}
			set_character_faith = faith:voidfarer
			set_culture = culture:void_elf
		}

		every_vassal_or_below = { 
			random_list = {
				50 = { # Converts
					positive_convert_void_elf_modifier = yes

					if = { 
						limit = { 
							can_become_voidfarer_trigger = yes
							NOT = {
								this = scope:heir
							}
						}

						set_character_faith = faith:voidfarer
						set_culture = culture:void_elf
					}

					every_close_or_extended_family_member = { 
						limit = { 
							can_become_voidfarer_trigger = yes
							is_landed = no
							NOT = {
								this = scope:heir
							}
						}

						random_list = {
							75 = { 
								positive_convert_void_elf_modifier = yes

								set_character_faith = faith:voidfarer
								set_culture = culture:void_elf
							}

							25 = { 
								negative_convert_void_elf_modifier = yes

							}
						}
					}
		
					every_courtier = { 
						limit = { 
							can_become_voidfarer_trigger = yes
							is_landed = no
							NOT = {
								this = scope:heir
							}
						}
						set_character_faith = faith:voidfarer
						set_culture = culture:void_elf
					}
				}
				50 = { 
					negative_convert_void_elf_modifier = yes

				}
			}
		}
	}
	
	#Flip Counties
	every_county_in_region = {
		region = world_eastern_kingdoms_quelthalas
		custom = embrace_void_elf_culture_counties_custom
		limit = {
			target_is_de_facto_liege_or_above = root.primary_title
		}
		custom_tooltip = embrace_voidfarer_faith_lands_custom
		custom_tooltip = embrace_voidfarer_faith_lands_40_custom
		hidden_effect = {
			if = { 
				limit = { 
					culture = { has_cultural_pillar = heritage_highborne }
					holder = { 
						faith = faith:voidfarer
					}
				}

				set_county_faith = faith:voidfarer
				set_county_culture = culture:void_elf
			}
			else = { 
				random = {
					chance = 40
					set_county_faith = faith:voidfarer
					set_county_culture = culture:void_elf
				}
			}
		}
	}
}
