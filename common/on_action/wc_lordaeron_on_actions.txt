on_death = {
	on_actions = {
		wc_death_on_actions
	}
}

wc_death_on_actions = {
	effect = {
		if = {
			limit = { exists = scope:killer }
			hurt_scourge_jailor_consequences_effect = { HURT_JAILOR = root SCOURGE = scope:killer }
			if = {
				limit = {
					scope:killer = { is_heir_of = root }
					this = { is_terenas_trigger = yes }
					OR = {
						# making sure arthas is actually evil arthas and didnt kill his father for no reason
						scope:killer = {
							is_ai = yes
							current_date >= 603.5.1
						}
						scope:killer = { 
							is_ai = no
							faith = faith:death_god
							culture = culture:scourge
						}
					}
				}
				save_scope_as = terenas
				# Uther Stress Event
				character:60036 = {
					save_scope_as = uther
					scope:killer = { save_scope_as = arthas }
					trigger_event = { 
						id = uther_events.001
						days = 3
					}
				}

				# Terenas Funeral
				# Compile list of people who should come.
				every_close_or_extended_family_member = { add_to_temporary_list = funeral_attendees }
				every_vassal_or_below = { add_to_temporary_list = funeral_attendees }
				every_courtier = { add_to_temporary_list = funeral_attendees }
				character:60036 = { add_to_temporary_list = funeral_attendees } # Uther
				every_relation = { type = lover add_to_temporary_list = funeral_attendees }
				every_relation = { type = friend add_to_temporary_list = funeral_attendees }

				every_in_list = {
					list = funeral_attendees
					# have to save these now because it wont work after he dies
					if = {
						limit = { # Terenas had a good opinion of them or vv
							is_alive = yes 
							OR = {
								opinion = {
									value > 0
									target = scope:terenas 
								}
								scope:terenas = {
									opinion = {
										value > 0
										target = prev
									}
								}
							}
						}
						add_character_flag = {
							flag = terenas_good
							days = 30
						}
					}

					trigger_event = {
						id = lordaeron.2001
						days = 6
					}
				}
			}
		}
	}
}