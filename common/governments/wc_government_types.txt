necro_government = {
	royal_court = yes
	create_cadet_branches = yes
	primary_holding = castle_holding

	can_get_government = {
		can_keep_necro_government_trigger = yes
	}

	rulers_should_have_dynasty = yes

	valid_holdings = { city_holding tribal_holding }
	required_county_holdings = { castle_holding city_holding church_holding }
	dynasty_named_realms = yes

	vassal_contract = { clan_government_obligations }
	
	opinion_of_liege = {
		# TODO
	}
	opinion_of_liege_desc = {
		# TODO
	}
	
	# Type
	flag = government_is_monarchy
	
	# Features
	flag = government_can_be_matchmaker
	flag = government_can_raid_rule
	flag = government_uses_dark_frenzy
	flag = government_dark_frenzy_from_battles
	flag = government_dark_frenzy_from_sieges_and_raids
	flag = government_dark_frenzy_from_conversions
	flag = government_resurrect_knights
	flag = government_offer_vassalization_turns_undead
	
	color = hsv{ 0.55 1 0.4 }
}

demonic_government = {
	royal_court = yes
	create_cadet_branches = yes
	primary_holding = castle_holding

	can_get_government = {
		can_keep_demonic_government_trigger = yes
	}

	rulers_should_have_dynasty = yes

	valid_holdings = { city_holding tribal_holding }
	required_county_holdings = { castle_holding city_holding church_holding }
	dynasty_named_realms = yes

	vassal_contract = { clan_government_obligations }
	
	opinion_of_liege = {
		# TODO
	}
	opinion_of_liege_desc = {
		# TODO
	}
	
	# Type
	flag = government_is_monarchy
	
	# Features
	flag = government_can_be_matchmaker
	flag = government_can_raid_rule
	flag = government_uses_dark_frenzy
	flag = government_dark_frenzy_from_executions
	flag = government_dark_frenzy_from_torturing
	flag = government_get_demon_knight
	
	color = hsv{ 0.3 1 1 }
}

eldritch_government = {
	royal_court = yes
	create_cadet_branches = yes
	primary_holding = castle_holding

	can_get_government = {
		can_keep_eldritch_government_trigger = yes
	}

	rulers_should_have_dynasty = yes

	valid_holdings = { city_holding tribal_holding }
	required_county_holdings = { castle_holding city_holding church_holding }
	dynasty_named_realms = yes

	vassal_contract = { clan_government_obligations }
	
	opinion_of_liege = {
		# TODO
	}
	opinion_of_liege_desc = {
		# TODO
	}
	
	# Type
	flag = government_is_monarchy
	
	# Features
	flag = government_can_be_matchmaker
	flag = government_can_raid_rule
	flag = government_uses_dark_frenzy
	flag = government_dark_frenzy_from_executions
	flag = government_dark_frenzy_from_mental_breaks
	flag = government_mental_breaks_cant_kill
	flag = government_get_void_creatures
	
	color = hsv{ 0.7 0.7 0.5 }
}

dragonflight_government = {
	primary_holding = castle_holding
	
	# Warcraft
	primary_heritages = { heritage_draconic }
	
	# Warcraft
	preferred_religions = { draconism_religion }

	create_cadet_branches = no
	rulers_should_have_dynasty = yes
	royal_court = yes

	valid_holdings = { castle_holding city_holding church_holding }
	required_county_holdings = { castle_holding }
	dynasty_named_realms = yes
	
	# Warcraft
	# Type
	flag = government_is_monarchy

	house_unity = clan_house_unity

	vassal_contract = {
		feudal_government_taxes
		feudal_government_levies
		special_contract
		religious_rights
		fortification_rights
		coinage_rights
		succession_rights
		war_declaration_rights
		council_rights
		title_revocation_rights
	}
	
	opinion_of_liege = {
		scope:vassal = {
			if = {
				limit = {
					NOT = {
						is_allied_to = scope:liege
					}
				}
				if = {
					limit = {
						is_powerful_vassal = yes
					}
					value = clan_powerful_vassal_no_alliance_opinion_penalty_value
				}
				else = {
					value = clan_vassal_no_alliance_opinion_penalty_value
				}
			}
		}
	}
	opinion_of_liege_desc = {
		first_valid = {
			triggered_desc = {
				trigger = {
					scope:vassal = {
						NOT = {
							is_allied_to = scope:liege
						}
						is_powerful_vassal = yes
					}
				}
				desc = "GOVERNMENT_CLAN_NOT_ALLIED_POWERFUL"
			}
			triggered_desc = {
				trigger = {
					scope:vassal = {
						NOT = {
							is_allied_to = scope:liege
						}
						is_powerful_vassal = no
					}
				}
				desc = "GOVERNMENT_CLAN_NOT_ALLIED"
			}
		}
	}

	# Use flags instead of has_government for moddability if possible (i.e., wherever not visible to the player).
	flag = government_is_clan
	flag = may_appoint_viziers
	
	# Warcraft
	flag = government_can_be_matchmaker
	color = hsv{ 0.98 0.65 0.69 }
}