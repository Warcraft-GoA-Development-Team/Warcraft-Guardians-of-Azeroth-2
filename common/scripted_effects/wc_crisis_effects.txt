join_crisis_coalition_effect = {
	custom_description = {
		text = join_crisis_coalition_effect
		object = $CRISIS_HOLDER$
		
		add_to_variable_list = { name = coalition_targets target = $CRISIS_HOLDER$ }
		$CRISIS_HOLDER$ = {
			add_to_variable_list = { name = coalition_members target = prev }
		}
	}
	add_character_modifier = crisis_coalition_member
}
leave_crisis_coalition_effect = {
	custom_description = {
		text = leave_crisis_coalition_effect
		object = $CRISIS_HOLDER$
		
		remove_list_variable = { name = coalition_targets target = $CRISIS_HOLDER$ }
		$CRISIS_HOLDER$ = {
			remove_list_variable = { name = coalition_members target = prev }
		}
	}
	remove_character_modifier = crisis_coalition_member
}
leave_every_crisis_coalition_effect = {
	every_in_list = {
		variable = coalition_targets
		
		prev = { leave_crisis_coalition_effect = { CRISIS_HOLDER = prev } }
	}
}
break_crisis_coalition_effect = {
	every_in_list = {
		variable = coalition_members
		leave_crisis_coalition_effect = { CRISIS_HOLDER = prev }
	}
}
try_to_inherit_coalition_as_crisis_effect = {
	save_temporary_scope_as = temp_root
	
	$PREV_HOLDER$ = {
		if = {
			limit = { is_crisis_trigger = no }
			if = {
				limit = { scope:temp_root = { is_crisis_trigger = yes } }
				every_in_list = {
					variable = coalition_members
					leave_crisis_coalition_effect = { CRISIS_HOLDER = $PREV_HOLDER$ }
					join_crisis_coalition_effect = { CRISIS_HOLDER = scope:temp_root }
				}
			}
			else = {
				break_crisis_coalition_effect = yes
			}
		}
	}
}
try_to_inherit_coalition_as_member_effect = {
	save_temporary_scope_as = temp_root
	
	$PREV_HOLDER$ = {
		if = {
			limit = { can_be_in_coalition_trigger = no }
			leave_every_crisis_coalition_effect = yes
		}
	}
}
try_to_clean_up_coalition_as_crisis_effect = {
	if = {
		limit = { is_crisis_trigger = no }
		break_crisis_coalition_effect = yes
	}
}
try_to_clean_up_coalition_as_member_effect = {
	if = {
		limit = { can_be_in_coalition_trigger = no }
		leave_every_crisis_coalition_effect = yes
	}
}