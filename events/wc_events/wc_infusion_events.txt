namespace = WCINF

WCINF.0001 = {
	type = character_event

	theme = skull
	
	title = WCINF.0001.t
	desc = WCINF.0001.desc
	
	left_portrait = {
		character = root
		animation = shock
	}
	
	trigger = {
		light_void_infusion_level_value >= 3
		NOT = {
			has_infusion_trait = yes
		}
	}
	
	option = {
		name = WCINF.0001.a
		
		add_trait = being_light
	}
	
	option = {
		name = WCINF.0001.b
		
		infusion_trait_duel_effect = { SKILL = prowess EVENT = 0001 TRAIT = being_light MAGIC = light_void }
	}
}
WCINF.0002 = {
	type = character_event

	theme = skull
	
	title = WCINF.0002.t
	desc = WCINF.0002.desc
	
	left_portrait = {
		character = root
		animation = shock
	}
	
	trigger = {
		light_void_infusion_level_value <= -3
		NOT = {
			has_infusion_trait = yes
		}
	}
	
	option = {
		name = WCINF.0002.a
		
		add_trait = being_void
	}
	
	option = {
		name = WCINF.0002.b
		
		infusion_trait_duel_effect = { SKILL = intrigue EVENT = 0002 TRAIT = being_void MAGIC = light_void }
	}
}
WCINF.0003 = {
	type = character_event

	theme = skull
	
	title = WCINF.0003.t
	desc = WCINF.0003.desc
	
	left_portrait = {
		character = root
		animation = shock
	}
	
	trigger = {
		arcane_fel_infusion_level_value >= 3
		NOT = {
			has_infusion_trait = yes
		}
	}
	
	option = {
		name = WCINF.0003.a
		
		add_trait = being_order
	}
	
	option = {
		name = WCINF.0003.b
		
		infusion_trait_duel_effect = { SKILL = learning EVENT = 0003 TRAIT = being_order MAGIC = arcane_fel }
	}
}
WCINF.0004 = {
	type = character_event

	theme = skull
	
	title = WCINF.0004.t
	desc = WCINF.0004.desc
	
	left_portrait = {
		character = root
		animation = happiness
	}
	
	trigger = {
		arcane_fel_infusion_level_value <= -3
		NOT = {
			has_infusion_trait = yes
		}
	}
	
	immediate = {
		if = {
			limit = {
				NOT = {
					has_variable = demon_sacrifices_needed
				}
			}
			set_variable = {
				name = demon_sacrifices_needed
				value = 0
			}
		}
		
		if = {
			limit = {
				NOT = {
					has_variable = collected_souls
				}
			}
			set_variable = {
				name = collected_souls
				value = 0
			}
		}
	}
	
	option = {
		name = WCINF.0004.a
		
		add_character_flag = demon_ritual
		
		set_variable = {
			name = demon_sacrifices_needed
			value = 10
		}
		
		show_as_tooltip = {
			demon_ritual_sacrifice_tooltip_effect = { SACRIFICES = 10 }
		}
	}
	
	option = {
		name = WCINF.0004.b
		
		add_character_flag = demon_ritual
		
		set_variable = {
			name = demon_sacrifices_needed
			value = 25
		}
		
		show_as_tooltip = {
			demon_ritual_sacrifice_tooltip_effect = { SACRIFICES = 25 }
		}
	}
	
	option = {
		name = WCINF.0004.c
		
		add_character_flag = demon_ritual
		
		set_variable = {
			name = demon_sacrifices_needed
			value = 50
		}
		
		show_as_tooltip = {
			demon_ritual_sacrifice_tooltip_effect = { SACRIFICES = 50 }
		}
	}
	
	option = {
		name = WCINF.0004.cancel
		
		
		remove_decision_cooldown = demon_ritual_decision
	}
}
WCINF.0005 = {
	type = character_event

	theme = skull
	
	title = WCINF.0005.t
	desc = WCINF.0005.desc
	
	left_portrait = {
		character = root
		animation = shock
	}
	
	trigger = {
		nature_death_infusion_level_value >= 3
		NOT = {
			has_infusion_trait = yes
		}
	}
	
	option = {
		name = WCINF.0005.a
		
		add_trait = being_life
	}
	
	option = {
		name = WCINF.0005.b
		
		infusion_trait_duel_effect = { SKILL = stewardship EVENT = 0005 TRAIT = being_life MAGIC = nature_death }
	}
}
WCINF.0006 = {
	type = character_event
	
	theme = skull
	
	title = WCINF.0006.t
	desc = WCINF.0006.desc
	
	left_portrait = {
		character = root
		animation = shock
	}
	
	trigger = {
		nature_death_infusion_level_value <= -3
		NOT = {
			has_infusion_trait = yes
		}
	}
	
	option = {
		name = WCINF.0006.a
		
		add_trait = being_undead
	}
	
	option = {
		name = WCINF.0006.b
		
		infusion_trait_duel_effect = { SKILL = learning EVENT = 0006 TRAIT = being_undead MAGIC = nature_death }
	}
}

#Becoming a demon
WCINF.4004 = {
	type = character_event

	theme = skull
	
	title = WCINF.4004.t
	desc = WCINF.4004.desc
	
	left_portrait = {
		character = root
		animation = happiness
	}
	
	trigger = {
		arcane_fel_infusion_level_value <= -3
		has_character_flag = demon_ritual
		NOT = {
			has_infusion_trait = yes
		}
	}
	
	option = {
		name = WCINF.4004.a
		
		add_trait = being_demon
		remove_character_flag = demon_ritual
		
		change_variable = {
			name = collected_souls
			add = negative_souls_needed_value
		}
	}
	
	option = {
		name = WCINF.4004.b
		
		remove_character_flag = demon_ritual
	}
}

WCINF.5001 = {
	type = character_event

	theme = skull
	
	title = WCINF.5001.t
	desc = WCINF.5001.desc
	
	left_portrait = {
		character = root
		animation = shock
	}
	
	trigger = {
		light_void_infusion_level_value <= 1
		has_trait = being_light
	}
	
	option = {
		name = WCINF.5001.a
		
		remove_trait = being_light
	}
}
WCINF.5002 = {
	type = character_event

	theme = skull
	
	title = WCINF.5002.t
	desc = WCINF.5002.desc
	
	left_portrait = {
		character = root
		animation = shock
	}
	
	trigger = {
		light_void_infusion_level_value >= -1
		has_trait = being_void
	}
	
	option = {
		name = WCINF.5002.a
		
		remove_trait = being_void
	}
}
WCINF.5003 = {
	type = character_event

	theme = skull
	
	title = WCINF.5003.t
	desc = WCINF.5003.desc
	
	left_portrait = {
		character = root
		animation = shock
	}
	
	trigger = {
		arcane_fel_infusion_level_value <= 1
		has_trait = being_order
	}
	
	option = {
		name = WCINF.5003.a
		
		remove_trait = being_order
	}
}
WCINF.5004 = {
	type = character_event

	theme = skull
	
	title = WCINF.5004.t
	desc = WCINF.5004.desc
	
	left_portrait = {
		character = root
		animation = shock
	}
	
	trigger = {
		arcane_fel_infusion_level_value >= -1
		has_trait = being_demon
	}
	
	option = {
		name = WCINF.5004.a
		
		remove_trait = being_demon
	}
}
WCINF.5005 = {
	type = character_event

	theme = skull
	
	title = WCINF.5005.t
	desc = WCINF.5005.desc
	
	left_portrait = {
		character = root
		animation = shock
	}
	
	trigger = {
		nature_death_infusion_level_value <= 1
		has_trait = being_life
	}
	
	option = {
		name = WCINF.5005.a
		
		remove_trait = being_life
	}
}
WCINF.5006 = {
	type = character_event
	
	theme = skull
	
	title = WCINF.5006.t
	desc = WCINF.5006.desc
	
	left_portrait = {
		character = root
		animation = shock
	}
	
	trigger = {
		nature_death_infusion_level_value >= -1
		has_trait = being_undead
	}
	
	option = {
		name = WCINF.5006.a
		
		remove_trait = being_undead
	}
}

#Drink demon blood
WCINF.6001 = {
	type = character_event

	theme = skull
	
	title = WCINF.6001.t
	desc = WCINF.6001.desc
	
	left_portrait = {
		character = root
		animation = worry
	}
	
	right_portrait = {
		character = scope:demon
		animation = personality_bold
	}
	
	trigger = {
		NOT = {
			has_trait = being_demon
		}
		
		OR = {
			any_courtier = {
				has_trait = being_demon
			}
			any_close_family_member = {
				has_trait = being_demon
			}
		}
		
	}
	
	immediate = {
		if = {
			limit = {
				any_courtier = {
					has_trait = being_demon
				}
			}
			random_courtier = {
				limit = {
					has_trait = being_demon
				}
				save_scope_as = demon
			}
		}
		if = {
			limit = {
				any_close_family_member = {
					has_trait = being_demon
				}
			}
			random_close_family_member = {
				limit = {
					has_trait = being_demon
				}
				save_scope_as = demon
			}
		}
	}
	
	option = {
		name = WCINF.6001.a
		
		add_magic_infusion_effect = { MAGIC = arcane_fel ADD = -50 }
	}
}

#Force prisoner to drink demon blood
WCINF.6002 = {
	type = character_event

	theme = skull
	
	title = WCINF.6002.t
	desc = WCINF.6002.desc
	
	left_portrait = {
		character = scope:recipient
		animation = worry
	}
	
	right_portrait = {
		character = scope:demon
		animation = personality_bold
	}
	
	trigger = {
		scope:recipient = {
			is_imprisoned_by = scope:actor
			NOT = {
				has_trait = being_demon
			}
		}
		
		scope:actor = {
			has_trait = being_demon
		}
	}
	
	immediate = {
		scope:recipient = {
			add_magic_infusion_effect = { MAGIC = arcane_fel ADD = -50 }
		}
	}
	
	option = {
		name = WCINF.6002.a
		
	}
}