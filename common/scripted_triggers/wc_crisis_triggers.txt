has_crisis_on_same_continent_trigger = {
	OR = {
		trigger_if = { 
			limit = { exists = title:e_horde.holder }
			ruler_realm_is_on_same_continent_trigger = { CHARACTER = title:e_horde.holder }
			title:e_horde.holder = {
				is_horde_invader_trigger = yes
				realm_size >= pol_faction_leader_realm_size
			}
		}
		trigger_if = {
			limit = { exists = title:e_scourge.holder }
			ruler_realm_is_on_same_continent_trigger = { CHARACTER = title:e_scourge.holder }
		}
		trigger_if = {
			limit = { exists = title:e_burning_legion.holder }
			ruler_realm_is_on_same_continent_trigger = { CHARACTER = title:e_burning_legion.holder }
		}
		trigger_if = {
			limit = { exists = title:e_black_empire.holder }
			ruler_realm_is_on_same_continent_trigger = { CHARACTER = title:e_black_empire.holder }
		}
		always = no
	}
}

is_crisis_trigger = {
	OR = {
		is_horde_invader_trigger = yes
		is_existential_crisis_trigger = yes
	}
}
is_horde_invader_trigger = {
	any_held_title = { this = title:e_horde }
	any_owned_story = { story_type = story_horde_invasion }
}
# Scourge, Legion, Black Empire
is_existential_crisis_trigger = {
	OR = {
		has_title = title:e_scourge
		has_title = title:e_burning_legion
		has_title = title:e_black_empire
	}
}

ai_has_coalition_reason_trigger = {
	save_temporary_scope_value_as = {
		name = coalition_reason
		value = {
			value = -500
			# 30k gives 200
			add = {
				value = $CRISIS_HOLDER$.max_military_strength
				multiply = {
					value = 200
					divide = 30000
				}
			}
			# 10k gives 300
			add = {
				value = $CRISIS_HOLDER$.max_military_strength
				subtract = max_military_strength
				multiply = {
					value = 300
					divide = 10000
				}
			}
			add = {
				value = ai_boldness
				multiply = -0.5
			}
			add = {
				value = ai_honor
				multiply = -0.25
			}
			add = {
				value = ai_rationality
			}
			add = {
				value = ai_compassion
				multiply = 0.5
			}
		}
	}
	scope:coalition_reason > 0
}
can_be_in_coalition_trigger = {
	is_independent_ruler = yes
	is_crisis_trigger = no
}
is_in_coaltion_against_trigger = {
	custom_description = {
		text = is_in_coaltion_against_trigger_loc
		object = $CRISIS_HOLDER$
		
		is_target_in_variable_list = { name = coalition_targets target = $CRISIS_HOLDER$ }
	}
}
is_in_any_coaltion_trigger = {
	has_variable_list = coalition_targets
}

has_crisis_coalition_cooldown_trigger = {
	custom_description = {
		text = has_crisis_coalition_cooldown_trigger_loc
		has_character_flag = crisis_coalition_cooldown_flag
	}
}