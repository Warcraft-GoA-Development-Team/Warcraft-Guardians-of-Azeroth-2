
lesson_basics = {
	chain = lesson_chain_basics
	delay = 0
	
	# Welcome to Crusader Kings...
	lesson_basics_welcome = {
		text = "lesson_welcome_desc"
		force_pause_game = yes
		animation = center

		gui_transition = {
			button_id = "next"
			button_text = "tutorial_lesson_button_next"
			target = lesson_basics_camera
		}

	}

	#### I — Basics...
	# HUD basics...
	lesson_basics_camera = { # WASD and scroll wheel
		text = "lesson_basics_camera_desc"
		header_info = "lesson_step_1_of_3"
		animation = right
		force_pause_game = yes

		effect = {
			close_all_views = yes
			pan_camera_to_title = title:k_ireland
		}

		gui_transition = {
			button_id = "back"
			button_text = "tutorial_lesson_button_back"
			target = lesson_basics_welcome
		}
		gui_transition = {
			button_id = "skip"
			button_text = "tutorial_lesson_button_skip"
			#custom_text = { text = tooltip_tt }
			target = lesson_finish # ends current lesson chain
		}
		gui_transition = {
			button_id = "next"
			button_text = "tutorial_lesson_button_next"
			target = lesson_basics_paused_intro
		}
	}

	# The game is paused! - we're keeping it that way, relax...
	lesson_basics_paused_intro = {
		text = "lesson_basics_paused_intro_desc"
		header_info = "lesson_step_2_of_3"
		force_pause_game = yes
		highlight_widget = "tutorial_highlight_bottom_right_bar"
		highlight_widget = "paused_by_player_text"

		effect = {
			remove_character_flag = tutorial_open_tooltip_complete
		}

		gui_transition = {
			button_id = "back"
			button_text = "tutorial_lesson_button_back"
			target = lesson_basics_camera
		}
		gui_transition = {
			button_id = "next"
			button_text = "tutorial_lesson_button_next"
			target = lesson_basics_tooltips_in_tooltips
		}
	}

	# Check out tooltips in tooltips...
	lesson_basics_tooltips_in_tooltips = {
		text = "lesson_basics_tooltips_in_tooltips_desc"
		header_info = "lesson_step_3_of_3"
		force_pause_game = yes

		gui_transition = {
			button_id = "back"
			button_text = "tutorial_lesson_button_back"
			target = lesson_basics_paused_intro
		}
		trigger_transition = {
			button_id = "next"
			button_text = "tutorial_lesson_button_next"
			target = lesson_basics_tooltips_in_tooltips_complete
			trigger = {
				custom_description = {
					text = "lesson_basics_tooltips_in_tooltips_hover_word"
					is_tooltip_with_name_open = GameConceptTooltipDefault
				}
				custom_description = {
					text = "lesson_basics_tooltips_in_tooltips_hover_word_deeper"
					current_tooltip_depth >= 2
				}
			}
		}
	}

	# Check out tooltips in tooltips - COMPLETED...
	lesson_basics_tooltips_in_tooltips_complete = {
		text = "lesson_basics_tooltips_in_tooltips_complete_desc"
		header_info = "lesson_step_3_of_3"
		force_pause_game = yes

		shown_in_encyclopedia = no

		effect = {
			add_character_flag = {
				flag = tutorial_open_tooltip_complete
				days = 200
			}
		}
	
		gui_transition = {
			button_id = "back"
			button_text = "tutorial_lesson_button_back"
			target = lesson_basics_paused_intro
		}
		gui_transition = {
			button_id = "repeat"
			button_text = "tutorial_lesson_button_repeat_step"
			target = lesson_basics_tooltips_in_tooltips
		}
		gui_transition = {
			button_id = "next"
			button_text = "tutorial_lesson_button_next"
			target = lesson_finish
			enabled = {
				custom_description = {
					text = "lesson_basics_tooltips_in_tooltips_hover_word"
					has_character_flag = tutorial_open_tooltip_complete
				}
				custom_description = {
					text = "lesson_basics_tooltips_in_tooltips_hover_word_deeper"
					has_character_flag = tutorial_open_tooltip_complete
				}
			}
		}
	}

	
}

### II — Map (Land and Titles)...
lesson_basics_map = {
	chain = lesson_chain_basics_map
	delay = 0
	# This is a map, there are titles...
	lesson_basics_web_of_titles = {
		text = "lesson_basics_web_of_titles_desc"
		header_info = "lesson_step_1_of_3"
		force_pause_game = yes

		effect = {
			close_all_views = yes
			close_all_views = yes
			open_view_data = character
			remove_character_flag = tutorial_open_tooltip_complete
		}

		highlight_widget = "realm_info"
		
		gui_transition = {
			button_id = "skip"
			button_text = "tutorial_lesson_button_skip"
			target = lesson_finish # ends current lesson chain
		}
		gui_transition = {
			button_id = "next"
			button_text = "tutorial_lesson_button_next"
			target = lesson_basics_realm
		}
	}
	# These are your borders (realm)...
	lesson_basics_realm = {
		text = "lesson_basics_realm_desc"
		header_info = "lesson_step_2_of_3"
		force_pause_game = yes
		animation = right

		effect = {
			remove_character_flag = tutorial_open_tooltip_complete
		}

		highlight_widget = "tutorial_highlight_bottom_left_portrait_button"
		#highlight_widget = "realm_shield"

		
		gui_transition = {
			button_id = "back"
			button_text = "tutorial_lesson_button_back"
			target = lesson_basics_web_of_titles
		}
		gui_transition = {
			button_id = "next"
			button_text = "tutorial_lesson_button_next"
			target = lesson_basics_map_modes
		}
	}
	# This is your land (domain)...
	lesson_basics_map_modes = {
		text = "lesson_basics_map_modes_desc"
		header_info = "lesson_step_3_of_3"
		force_pause_game = yes

		effect = {
			close_all_views = yes
			pan_camera_to_title = title:c_ormond
		}
		
		gui_transition = {
			button_id = "back"
			button_text = "tutorial_lesson_button_back"
			target = lesson_basics_realm
		}
		gui_transition = {
			button_id = "next"
			button_text = "tutorial_lesson_button_complete"
			target = lesson_finish
		}
	}
}

####  III — Character...
lesson_basics_character = {
	chain = lesson_chain_basics_characters
	delay = 0
	# What makes a ruler...
	lesson_basics_characters = {
		text = "lesson_basics_characters_desc"
		header_info = "lesson_step_1_of_5"
		force_pause_game = yes
		animation = center

		highlight_widget = "tutorial_highlight_next_button"
		highlight_widget = "character_window"
		highlight_widget = "tutorial_highlight_bottom_left_portrait_button"

		effect = {
			close_view = character
		}
		
		gui_transition = {
			button_id = "skip"
			button_text = "tutorial_lesson_button_skip"
			target = lesson_finish # ends current lesson chain
		}
		trigger_transition = {
			button_id = "next"
			button_text = "tutorial_lesson_button_next"
			target = lesson_basics_skills
			trigger = {
				custom_description = {
					text = "lesson_basics_characters_click_on_character"
					is_widget_open = character_window
				}
			}
		}
	}
	# SKills...
	lesson_basics_skills = {
		text = "lesson_basics_skills_desc" # Needs highlight on Skills
		header_info = "lesson_step_2_of_5"
		force_pause_game = yes

		highlight_widget = "tutorial_highlight_bottom_left_portrait_button"
		highlight_widget = "skills_grid"

		gui_transition = {
			button_id = "back"
			button_text = "tutorial_lesson_button_back"
			target = lesson_basics_characters
		}
		gui_transition = {
			button_id = "next"
			button_text = "tutorial_lesson_button_next"
			target = lesson_basics_traits_1
		}
	}
	# Traits...
	lesson_basics_traits_1 = {
		text = "lesson_basics_traits_1_desc"
		header_info = "lesson_step_3_of_5"
		force_pause_game = yes

		highlight_widget = "tutorial_highlight_bottom_left_portrait_button"
		highlight_widget = "tutorial_highlight_traits"

		effect = {
			open_view_data = character
		}

		gui_transition = {
			button_id = "back"
			button_text = "tutorial_lesson_button_back"
			target = lesson_basics_skills
		}
		gui_transition = {
			button_id = "next"
			button_text = "tutorial_lesson_button_next"
			target = lesson_basics_traits_2
		}
	}
	# More traits...
	lesson_basics_traits_2 = {
		text = "lesson_basics_traits_2_desc"
		header_info = "lesson_step_4_of_5"
		force_pause_game = yes

		highlight_widget = "tutorial_highlight_bottom_left_portrait_button"
		highlight_widget = "tutorial_highlight_traits"

		gui_transition = {
			button_id = "back"
			button_text = "tutorial_lesson_button_back"
			target = lesson_basics_traits_1
		}
		gui_transition = {
			button_id = "next"
			button_text = "tutorial_lesson_button_next"
			target = lesson_basics_opinion
		}
	}
	 # Opinion...
	lesson_basics_opinion = {
		text = "lesson_basics_opinion_desc"
		header_info = "lesson_step_5_of_5"
		force_pause_game = yes

		highlight_widget = "tutorial_highlight_bottom_left_portrait_button"
		highlight_widget = "tutorial_highlight_character_view_opinion"
		highlight_widget = "tutorial_highlight_character_view_opinion_heir"

		gui_transition = {
			button_id = "back"
			button_text = "tutorial_lesson_button_back"
			target = lesson_basics_traits_2
		}		
		gui_transition = {
			button_id = "next"
			button_text = "tutorial_lesson_button_next"
			target = lesson_finish
		}
	}
}

#### IV — Resources...
lesson_basics_resources = {
	chain = lesson_chain_basics_resources
	delay = 0

	# Your resources (Gold, Prestige, Piety)...
	lesson_basics_resources_1 = {
		text = "lesson_basics_resources_1_desc"
		header_info = "lesson_step_1_of_3"
		force_pause_game = yes		
		highlight_widget = "gold"

		effect = {
			close_all_views = yes
		}
		gui_transition = {
			button_id = "skip"
			button_text = "tutorial_lesson_button_skip"
			target = lesson_finish # ends current lesson chain
		}
		gui_transition = {
			button_id = "next"
			button_text = "tutorial_lesson_button_next"
			target = lesson_basics_resources_2
		}
	}
	# Your resources (Prestige)...
	lesson_basics_resources_2 = {
		text = "lesson_basics_resources_2_desc"
		header_info = "lesson_step_2_of_3"
		force_pause_game = yes		
		highlight_widget = "prestige"

		gui_transition = {
			button_id = "back"
			button_text = "tutorial_lesson_button_back"
			target = lesson_basics_resources_1
		}
		gui_transition = {
			button_id = "next"
			button_text = "tutorial_lesson_button_next"
			target = lesson_basics_resources_3
		}
	}
	# Your resources (Piety)...
	lesson_basics_resources_3 = {
		text = "lesson_basics_resources_3_desc"
		header_info = "lesson_step_3_of_3"
		force_pause_game = yes		
		highlight_widget = "piety"

		gui_transition = {
			button_id = "back"
			button_text = "tutorial_lesson_button_back"
			target = lesson_basics_resources_2
		}
		gui_transition = {
			button_id = "next"
			button_text = "tutorial_lesson_button_complete"
			target = lesson_finish
		}
	}
}

### V — Lifestyle...
lesson_basics_lifestyles = {
	chain = lesson_chain_basics_lifestyles
	delay = 0

	# Lifestyles...
	lesson_basics_lifestyles_1 = {
		text = "lesson_basics_lifestyles_1_desc"
		header_info = "lesson_step_1_of_2"
		force_pause_game = yes
		animation = center

		highlight_widget = "open_focus_button"
		highlight_widget = "tutorial_highlight_lifestyle_HUD_button"

		effect = {
			close_all_views = yes
			set_focus = no
		}

		gui_transition = {
			button_id = "skip"
			button_text = "tutorial_lesson_button_skip"
			target = lesson_finish # ends current lesson chain
		}

		gui_transition = {
			button_id = "next"
			button_text = "tutorial_lesson_button_next"
			target = lesson_basics_lifestyles_2
			enabled = {
				custom_description = {
					text = "lesson_basics_lifestyle_open_window_tt"
					is_widget_open = character_lifestyle_window
				}
			}
		}

		trigger_transition = {
			target = lesson_basics_lifestyles_2 #prompts picking a Focus
			trigger = {
				NOT = { has_any_focus = yes }
				is_widget_open = character_lifestyle_window
			}
		}

		trigger_transition = {
			target = lesson_basics_lifestyles_2_b # Informs about Focus.
			trigger = {
				has_any_focus = yes
				is_widget_open = character_lifestyle_window
			}
		}
	}

	# Lifestyles (Choose a Focus!)...
	lesson_basics_lifestyles_2 = {
		text = "lesson_basics_lifestyles_2_desc"
		header_info = "lesson_step_2_of_2"
		force_pause_game = yes
		animation = bottom_right

		highlight_widget = "focus_area"

		gui_transition = {
			button_id = "back"
			button_text = "tutorial_lesson_button_back"
			target = lesson_basics_lifestyles_1
		}

		gui_transition = {
			button_id = "next"
			button_text = "tutorial_lesson_button_complete"
			target = lesson_finish
			enabled = {
				custom_description = {
					text = "lesson_basics_lifestyle_choose_focus_tt"
					has_any_focus = yes
				}
			}
		}
		trigger_transition = { #(Automatic)
			target = lesson_basics_lifestyles_no_GUI_highlight #Clone, without GUI highlight
			trigger = {
				OR = {
					is_widget_open = character_window
					has_any_focus = yes
				}
			}
		}
	}
	# Lifestyles (Choose a Focus!)... CLONE
	lesson_basics_lifestyles_no_GUI_highlight = {
		text = "lesson_basics_lifestyles_2_desc"
		header_info = "lesson_step_2_of_2"
		force_pause_game = yes
		shown_in_encyclopedia = no

		gui_transition = {
			button_id = "back"
			button_text = "tutorial_lesson_button_back"
			target = lesson_basics_lifestyles_1
		}

		gui_transition = {
			button_id = "next"
			button_text = "tutorial_lesson_button_complete"
			target = lesson_finish
			enabled = {
				custom_description = {
					text = "lesson_basics_lifestyle_choose_focus_tt"
					has_any_focus = yes
				}
			}
		}
	}
	# Lifestyles (Informs about Focus (passive - already has a Focus))...
	lesson_basics_lifestyles_2_b = {
		text = "lesson_basics_lifestyles_2_b_desc"
		header_info = "lesson_step_2_of_2"
		force_pause_game = yes
		
		shown_in_encyclopedia = no

		effect = {
			close_view = character_focus
		}

		gui_transition = {
			button_id = "back"
			button_text = "tutorial_lesson_button_back"
			target = lesson_basics_lifestyles_1
		}
		gui_transition = {
			button_id = "repeat"
			button_text = "tutorial_lesson_button_repeat_step" # Goes back to before click instructions...
			target = lesson_basics_lifestyles_1
		}
		gui_transition = {
			button_id = "next"
			button_text = "tutorial_lesson_button_complete"
			target = lesson_finish
		}
	}
}

### VI — Interacting...
lesson_basics_interacting = {
	chain = lesson_chain_basics_interacting
	delay = 0

	# Interacting with other characters - EXAMPLES...
	lesson_basics_interacting_1 = {
		text = "lesson_basics_interacting_1_desc"
		header_info = "lesson_step_1_of_3"
		force_pause_game = yes
		animation = center

		highlight_widget = "tutorial_highlight_bottom_left_portrait_button"
		highlight_widget = "heir_player"

		effect = {
			close_all_views = yes
			close_view = character_focus
			close_view = my_realm
		}

		gui_transition = {
			button_id = "skip"
			button_text = "tutorial_lesson_button_skip"
			target = lesson_finish # ends current lesson chain
		}
		
		trigger_transition = {
			button_id = "next"
			button_text = "tutorial_lesson_button_next"
			target = lesson_basics_interacting_2
			trigger = {
				custom_description = {
					text = "lesson_basics_open_character_view_tt"
					is_widget_open = character_window
				}
				custom_description = {
					text = "lesson_basics_open_interactions_tt"
					is_widget_open = character_interaction_menu_window
				}
			}
		}
	}

	# Interacting with other characters - Send Gift!
	lesson_basics_interacting_2 = {
		text = "lesson_basics_interacting_2_desc"
		header_info = "lesson_step_2_of_3"
		animation = right
		force_pause_game = yes

		highlight_widget = "tutorial_highlight_bottom_left_portrait_button"
		highlight_widget = "heir_player"

		effect = {
			if = {
				limit = {
					gold < 100
				}
				add_gold = 100 #so they can afford Send Gift + candy money
			}
		}

		gui_transition = {
			button_id = "back"
			button_text = "tutorial_lesson_button_back"
			target = lesson_basics_interacting_1
		}
		
		trigger_transition = {
			button_id = "next"
			button_text = "tutorial_lesson_button_next"
			target = lesson_basics_interacting_3
			trigger = {
				custom_description = {
					text = "lesson_basics_send_gift_tt"
					has_character_flag = tutorial_sent_gift # Needs highlight
				}
			}
		}
	}
	# Send Gift: Complete...
	lesson_basics_interacting_3 = {
		text = "lesson_basics_interacting_3_desc"
		header_info = "lesson_step_3_of_3"
		force_pause_game = yes

		effect = {
			remove_character_flag = tutorial_sent_gift
		}

		gui_transition = {
			button_id = "back"
			button_text = "tutorial_lesson_button_back"
			target = lesson_basics_interacting_1
		}
		gui_transition = {
			button_id = "repeat"
			button_text = "tutorial_lesson_button_repeat_step" # Goes back to before click instructions
			target = lesson_basics_interacting_1
		}
		gui_transition = {
			button_id = "next"
			button_text = "tutorial_lesson_button_complete"
			target = lesson_finish
		}
	}
}

#### VII - DYNASTY (How to not game over)...
lesson_basics_succession = {
	chain = lesson_chain_basics_succession
	delay = 0

 	# Let's talk Dynasty! How to Game Over...
	lesson_basics_many_lives_1 = {
		text = "lesson_basics_many_lives_1_desc"
		header_info = "lesson_step_1_of_4"
		force_pause_game = yes

		gui_transition = {
			button_id = "skip"
			button_text = "tutorial_lesson_button_skip"
			target = lesson_finish # ends current lesson chain
		}
		gui_transition = {
			button_id = "next"
			button_text = "tutorial_lesson_button_next"
			target = lesson_basics_many_lives_2
		}
	}

	# Death is not the end! You get a new Character...
	lesson_basics_many_lives_2 = {
		text = "lesson_basics_many_lives_2_desc"
		header_info = "lesson_step_2_of_4"
		force_pause_game = yes

		highlight_widget = "house_frame"
		#highlight_widget = "vignette" # highlights religion string in character view
		
		gui_transition = {
			button_id = "back"
			button_text = "tutorial_lesson_button_back"
			target = lesson_basics_many_lives_1
		}
		gui_transition = {
			button_id = "next"
			button_text = "tutorial_lesson_button_next"
			target = lesson_basics_succession_laws
		}

		trigger_transition = { #(Automatic)
			target = lesson_basics_many_lives_2_no_GUI_highlight
			trigger = {
				is_widget_open = dynasty_house_members_view
			}
		}
	}
	lesson_basics_many_lives_2_no_GUI_highlight = { #CLONE
		text = "lesson_basics_many_lives_2_desc"
		header_info = "lesson_step_2_of_4"
		force_pause_game = yes
		shown_in_encyclopedia = no
		
		gui_transition = {
			button_id = "back"
			button_text = "tutorial_lesson_button_back"
			target = lesson_basics_many_lives_1
		}
		gui_transition = {
			button_id = "next"
			button_text = "tutorial_lesson_button_next"
			target = lesson_basics_succession_laws
		}
	}

	# You have succession laws...
	lesson_basics_succession_laws = {
		text = "lesson_basics_succession_laws_desc"
		header_info = "lesson_step_3_of_4"
		force_pause_game = yes
		animation = left

		highlight_widget = "tab_my_realm"
		highlight_widget = "tutorial_highlight_succession_tab"

		effect = {
			close_view = my_realm
			remove_character_flag = tutorial_opened_succession_view
		}

		gui_transition = {
			button_id = "back"
			button_text = "tutorial_lesson_button_back"
			target = lesson_basics_many_lives_2
		}
		gui_transition = {
			button_id = "next"
			button_text = "tutorial_lesson_button_next"
			target = lesson_basics_succession_laws_complete_2
			enabled = {
				custom_description = {
					text = "lesson_basics_realm_view_tt"
					is_widget_open = my_realm_window
				}
				custom_description = {
					text = "lesson_basics_succession_tab_tt"
					is_widget_open = tab_succession
				}
			}
		}

		trigger_transition = {
			target = lesson_basics_renown
			trigger = {
				is_widget_open = tab_succession # Needs highlight
			}
		}
	}

	# You have succession laws (including a "Show me again" button for opening the menus)...
	lesson_basics_succession_laws_complete_2 = { #CLONE
		text = "lesson_basics_succession_laws_complete_2_desc"
		header_info = "lesson_step_3_of_4"
		force_pause_game = yes
		shown_in_encyclopedia = no

		#highlight_widget = "current_heir"

		gui_transition = {
			button_id = "back"
			button_text = "tutorial_lesson_button_back"
			target = lesson_basics_succession_laws
		}
		
		gui_transition = {
			button_id = "repeat"
			button_text = "tutorial_lesson_button_repeat_step"
			target = lesson_basics_succession_laws
		}

		gui_transition = {
			button_id = "next"
			button_text = "tutorial_lesson_button_next"
			target = lesson_basics_renown
			enabled = {
				custom_description = {
					text = "lesson_basics_realm_view_tt"
					OR = {
						is_widget_open = my_realm_window
						has_character_flag = tutorial_opened_succession_view
					}
				}
				custom_description = {
					text = "lesson_basics_succession_tab_tt"
					OR = {
						is_widget_open = tab_succession
						has_character_flag = tutorial_opened_succession_view
					}
				}
			}
		}
	}

	# There is Renown and Dynastic Legacy...
	lesson_basics_renown = {
		text = "lesson_basics_renown_desc"
		header_info = "lesson_step_4_of_4"
		force_pause_game = yes

		#highlight_widget = "tutorial_highlight_resources_bar"
		highlight_widget = "house_frame"

		effect = {
			add_character_flag = {
				flag = tutorial_opened_succession_view
				days = 20
			}
		}

		gui_transition = {
			button_id = "back"
			button_text = "tutorial_lesson_button_back"
			target = lesson_basics_succession_laws_complete_2
		}
		
		gui_transition = {
			button_id = "next"
			button_text = "tutorial_lesson_button_complete"
			target = lesson_finish
		}

		trigger_transition = {
			target = lesson_basics_renown_no_GUI_highlight

			trigger = {
				is_widget_open = dynasty_house # Needs highlight
			}
		}
	}
	lesson_basics_renown_no_GUI_highlight = { # CLONE
		text = "lesson_basics_renown_desc"
		header_info = "lesson_step_4_of_4"
		force_pause_game = yes
		shown_in_encyclopedia = no

		highlight_widget = "tutorial_highlight_dynasty_perks_button"

		gui_transition = {
			button_id = "back"
			button_text = "tutorial_lesson_button_back"
			target = lesson_basics_succession_laws_complete_2
		}
		gui_transition = {
			button_id = "next"
			button_text = "tutorial_lesson_button_complete"
			target = lesson_finish
		}
		trigger_transition = {
			target = lesson_basics_renown_no_GUI_highlight_2

			trigger = {
				is_widget_open = dynasty_view # Needs highlight
			}
		}
	}
	lesson_basics_renown_no_GUI_highlight_2 = { #CLONE
		text = "lesson_basics_renown_desc"
		header_info = "lesson_step_4_of_4"
		force_pause_game = yes
		shown_in_encyclopedia = no

		gui_transition = {
			button_id = "back"
			button_text = "tutorial_lesson_button_back"
			target = lesson_basics_succession_laws_complete_2
		}
		
		gui_transition = {
			button_id = "next"
			button_text = "tutorial_lesson_button_complete"
			target = lesson_finish
		}
	}
}

#### VIII - Marriage (makes player get married, if not already)...
lesson_basics_marriage = {
	chain = lesson_chain_basics_marriage
	delay = 0

	# Marriage concept...
	lesson_basics_marriage_concept_1 = {
		text = "lesson_basics_marriage_concept_1_desc"
		header_info = "lesson_step_1_of_6"
		force_pause_game = yes
		animation = center

		highlight_widget = "tutorial_highlight_bottom_left_portrait_button"
		highlight_widget = "family_button"

		effect = {
			close_all_views = yes
			remove_character_flag = tutorial_opened_succession_view
		}

		gui_transition = {
			button_id = "skip"
			button_text = "tutorial_lesson_button_skip"
			target = lesson_finish
		}

		trigger_transition = {
			button_id = "next"
			button_text = "tutorial_lesson_button_next"
			target = lesson_basics_marriage_gating_1
			trigger = {
				custom_description = {
					text = "lesson_basics_characters_click_on_character"
					is_widget_open = character_window
				}
			}
		}
	}

	# Marriage initial gating (if you're already married)...
	lesson_basics_marriage_gating_1 = {
		force_pause_game = yes
		shown_in_encyclopedia = no

		# This transition happens instantly...
		trigger_transition = {
			target = lesson_basics_marriage_concept_2 #not married yet
			trigger = {
				NOR = {
					is_married = yes
					is_betrothed = yes
				}
			}
		}
		trigger_transition = {
			target = lesson_basics_marriage_concept_2_b #already married
			trigger = {
				OR = {
					is_married = yes
					is_betrothed = yes
				}
			}
		}
	}
	
	# Open Marriage Window (Prompts opening marriage-window)...
	lesson_basics_marriage_concept_2 = {
		text = "lesson_basics_marriage_concept_2_desc"
		header_info = "lesson_step_2_of_6"
		force_pause_game = yes
		animation = center

		highlight_widget = "tutorial_highlight_bottom_left_portrait_button"
		highlight_widget = "tutorial_highlight_main_character_button"

		gui_transition = {
			button_id = "back"
			button_text = "tutorial_lesson_button_back"
			target = lesson_basics_marriage_concept_1
		}

		gui_transition = {
			button_id = "next"
			button_text = "tutorial_lesson_button_next"
			target = lesson_basics_find_spouse_concept

			enabled = {
				custom_description = {
					text = "lesson_basics_open_interactions_marriage_tt"
					is_widget_open = character_interaction_menu_window
				}
				custom_description = {
					text = "lesson_basics_marriage_view_tt"
					is_widget_open = marriage_interaction_window
				}
			}
		}
		trigger_transition = { # Next (Automatic)
			target = lesson_basics_find_spouse_concept
			trigger = {
				is_widget_open = marriage_interaction_window
			}
		}

	}

	# Open Marriage Window (Prompts opening marriage-window - even though player char is already married)...
	lesson_basics_marriage_concept_2_b = {
		text = "lesson_basics_marriage_concept_2_b_desc"
		header_info = "lesson_step_2_of_6"
		force_pause_game = yes
		animation = center
		shown_in_encyclopedia = no

		highlight_widget = "tutorial_highlight_bottom_left_portrait_button"

		gui_transition = {
			button_id = "back"
			button_text = "tutorial_lesson_button_back"
			target = lesson_basics_marriage_concept_1
		}

		gui_transition = {
			button_id = "next"
			button_text = "tutorial_lesson_button_next"
			target = lesson_basics_find_spouse_concept

			enabled = {
				custom_description = {
					text = "lesson_basics_open_interactions_marriage_alt_tt"
					is_widget_open = character_interaction_menu_window
				}
				custom_description = {
					text = "lesson_basics_marriage_view_tt"
					is_widget_open = marriage_interaction_window
				}
			}
		}
		trigger_transition = { # Next (Automatic)
			target = lesson_basics_find_spouse_concept
			trigger = {
				is_widget_open = marriage_interaction_window
			}
		}

	}

	# Marriage interaction: Find Spouse concept...
	lesson_basics_find_spouse_concept = {
		text = "lesson_basics_find_spouse_concept_desc"
		header_info = "lesson_step_3_of_6"
		force_pause_game = yes
		animation = far_right

		gui_transition = {
			button_id = "back"
			button_text = "tutorial_lesson_button_back"
			target = lesson_basics_marriage_concept_1
		}
		gui_transition = {
			button_id = "next"
			button_text = "tutorial_lesson_button_next"
			target = lesson_basics_choosing_a_spouse
		}
	}

	# Marriage interaction: How to CHOOSE someone?
	lesson_basics_choosing_a_spouse = {
		text = "lesson_basics_choosing_a_spouse_desc"
		header_info = "lesson_step_4_of_6"
		force_pause_game = yes

		#potential highlights: "clear_characters" "tutorial_highlight_change_left_character" "tutorial_highlight_change_right_character"
		highlight_widget = "filters"
		
		gui_transition = {
			button_id = "back"
			button_text = "tutorial_lesson_button_back"
			target = lesson_basics_find_spouse_concept
		}
		gui_transition = {
			button_id = "next"
			button_text = "tutorial_lesson_button_next"
			target = lesson_basics_marriage_gating_2
		}
		
		trigger_transition = { # Next (Automatic)
			target = lesson_basics_choosing_a_spouse_no_GUI_highlight
			trigger = {
				is_widget_open = marriage_interaction_window.filter_window
			}
		}
	}
	# Marriage interaction: How to CHOOSE someone? (no highlight)
	lesson_basics_choosing_a_spouse_no_GUI_highlight = { # CLONE
		text = "lesson_basics_choosing_a_spouse_desc"
		header_info = "lesson_step_4_of_6"
		force_pause_game = yes
		shown_in_encyclopedia = no

		gui_transition = {
			button_id = "back"
			button_text = "tutorial_lesson_button_back"
			target = lesson_basics_find_spouse_concept
		}
		gui_transition = {
			button_id = "next"
			button_text = "tutorial_lesson_button_next"
			target = lesson_basics_marriage_gating_2
		}
	}

	# Marriage back-track-gating... (if you're already married)
	lesson_basics_marriage_gating_2 = {
		force_pause_game = yes
		shown_in_encyclopedia = no
		
		# This transition happens instantly...
		trigger_transition = {
			target = lesson_basics_say_yes #not married yet
			trigger = {
				NOR = {
					is_married = yes
					is_betrothed = yes
				}
			}
		}
		trigger_transition = {
			target = lesson_basics_said_yes #already married
			trigger = {
				OR = {
					is_married = yes
					is_betrothed = yes
				}
			}
		}
	}

	# Marriage interaction: do it...
	lesson_basics_say_yes = {
		text = "lesson_basics_say_yes_desc"
		header_info = "lesson_step_5_of_6"
		force_pause_game = yes

		highlight_widget = "tutorial_highlight_send_proposal_button"

		gui_transition = {
			button_id = "back"
			button_text = "tutorial_lesson_button_back"
			target = lesson_basics_choosing_a_spouse
		}

		gui_transition = {
			button_id = "next"
			button_text = "tutorial_lesson_button_next"
			target = lesson_basics_marriage_final_notes

			enabled = {
				custom_description = {
					text = "lesson_basics_get_married_tt"
					OR = {
						is_married = yes
						is_betrothed = yes
					}
				}
			}
		}

		trigger_transition = {
			target = lesson_basics_marriage_final_notes
			trigger = {
				OR = {
					is_married = yes
					is_betrothed = yes
				}
			}
		}
	}

	# Marriage interaction: did it already...
	lesson_basics_said_yes = {
		text = "lesson_basics_say_yes_desc"
		header_info = "lesson_step_5_of_6"
		force_pause_game = yes
		shown_in_encyclopedia = no

		highlight_widget = "tutorial_highlight_send_proposal_button"

		gui_transition = {
			button_id = "back"
			button_text = "tutorial_lesson_button_back"
			target = lesson_basics_choosing_a_spouse
		}
		gui_transition = {
			button_id = "next"
			button_text = "tutorial_lesson_button_next"
			target = lesson_basics_marriage_final_notes

			enabled = {
				custom_description = {
					text = "lesson_basics_get_married_tt"
					OR = {
						is_married = yes
						is_betrothed = yes
					}
				}
			}
		}
	}

	# Fallback: if already married... (CURRENTLY NOT IN USE)
	lesson_basics_already_married = {
		text = "lesson_basics_already_married_desc"
		force_pause_game = yes
		shown_in_encyclopedia = no

		gui_transition = {
			button_id = "back"
			button_text = "tutorial_lesson_button_back"
			target = lesson_basics_choosing_a_spouse
		}
		gui_transition = {
			button_id = "next"
			button_text = "tutorial_lesson_button_next"
			target = lesson_basics_marriage_final_notes
		}
	}

	# Marriage interaction: your current ruler + son should *definitely* get married in the tutorial...
	lesson_basics_marriage_final_notes = {
		text = "lesson_basics_marriage_final_notes_desc"
		header_info = "lesson_step_6_of_6"
		force_pause_game = yes

		gui_transition = {
			button_id = "back"
			button_text = "tutorial_lesson_button_back"
			target = lesson_basics_said_yes
		}

		gui_transition = {
			button_id = "next"
			button_text = "tutorial_lesson_button_complete"
			target = lesson_finish
		}
	}
}

#### IX - Titles (de jure land and player heir talk)...
lesson_basics_titles = {
	chain = lesson_chain_basics_titles
	delay = 0

	 # Dynasty and House produce the player heir...
	lesson_basics_dynasty_and_house = {
		text = "lesson_basics_dynasty_and_house_desc"
		header_info = "lesson_step_1_of_4"
		force_pause_game = yes
		animation = center

		effect = {
			close_all_views = yes
		}

		gui_transition = {
			button_id = "skip"
			button_text = "tutorial_lesson_button_skip"
			target = lesson_finish
		}

		gui_transition = {
			button_id = "next"
			button_text = "tutorial_lesson_button_next"
			target = lesson_basics_landed_titles
		}
	}

	# What is a Landed title...
	lesson_basics_landed_titles = {
		text = "lesson_basics_landed_titles_desc"
		header_info = "lesson_step_2_of_4"
		force_pause_game = yes

		gui_transition = {
			button_id = "back"
			button_text = "tutorial_lesson_button_back"
			target = lesson_basics_dynasty_and_house
		}

		gui_transition = {
			button_id = "next"
			button_text = "tutorial_lesson_button_next"
			target = lesson_basics_de_jure_titles
		}
	}

	# Title tiers and De Jure structure...
	lesson_basics_de_jure_titles = {
		text = "lesson_basics_de_jure_titles_desc"
		header_info = "lesson_step_3_of_4"
		force_pause_game = yes

		effect = {
			remove_character_flag = tutorial_chance_map_mode_complete_1
			remove_character_flag = tutorial_chance_map_mode_complete_2
		}

		gui_transition = {
			button_id = "back"
			button_text = "tutorial_lesson_button_back"
			target = lesson_basics_landed_titles
		}
		gui_transition = {
			button_id = "next"
			button_text = "tutorial_lesson_button_next"
			target = lesson_basics_de_jure_cbs
		}
	}

	# De Jure casus belli...
	lesson_basics_de_jure_cbs = {
		text = "lesson_basics_de_jure_cbs_desc"
		header_info = "lesson_step_4_of_4"
		force_pause_game = yes

		effect = {
			close_all_views = yes
			pan_camera_to_title = title:k_ireland
		}

		highlight_widget = "map_mode_duchies_button"
		# potential highlights: "map_mode_kingdoms_button" "map_mode_empires_button"

		gui_transition = {
			button_id = "back"
			button_text = "tutorial_lesson_button_back"
			target = lesson_basics_de_jure_titles
		}
		trigger_transition = {
			button_id = "next"
			button_text = "tutorial_lesson_button_next"
			target = lesson_basics_de_jure_cbs_complete_1
			trigger = {
				custom_description = {
					text = lesson_basics_change_map_mode_1_tt
					has_map_mode = dejure_duchies
				}
				custom_description = {
					text = lesson_basics_change_map_mode_2_tt
					has_map_mode = dejure_duchies #hack to auto-transition
				}
			}
		}
	}
	# De Jure casus belli COMPLETE (1)...
	lesson_basics_de_jure_cbs_complete_1 = {
		text = "lesson_basics_de_jure_cbs_desc"
		header_info = "lesson_step_4_of_4"
		force_pause_game = yes
		shown_in_encyclopedia = no

		highlight_widget = "map_mode_realms_button"

		effect = {
			add_character_flag = {
				flag = tutorial_chance_map_mode_complete_1
				days = 20
			}
		}

		gui_transition = {
			button_id = "back"
			button_text = "tutorial_lesson_button_back"
			target = lesson_basics_de_jure_titles
		}
		trigger_transition = {
			button_id = "next"
			button_text = "tutorial_lesson_button_next"
			target = lesson_basics_de_jure_cbs_complete_2
			trigger = {
				custom_description = {
					text = lesson_basics_change_map_mode_1_tt
					has_character_flag = tutorial_chance_map_mode_complete_1
				}
				custom_description = {
					text = lesson_basics_change_map_mode_2_tt
					has_map_mode = realms
				}
			}
		}
	}
	# De Jure casus belli COMPLETE (2)...
	lesson_basics_de_jure_cbs_complete_2 = {
		text = "lesson_basics_de_jure_cbs_desc"
		header_info = "lesson_step_4_of_4"
		force_pause_game = yes
		shown_in_encyclopedia = no

		effect = {
			add_character_flag = {
				flag = tutorial_chance_map_mode_complete_2
				days = 20
			}
		}

		gui_transition = {
			button_id = "back"
			button_text = "tutorial_lesson_button_back"
			target = lesson_basics_de_jure_titles
		}
		gui_transition = {
			button_id = "next"
			button_text = "tutorial_lesson_button_complete"
			target = lesson_finish
			enabled = {
				custom_description = {
					text = lesson_basics_change_map_mode_1_tt
					has_character_flag = tutorial_chance_map_mode_complete_1
				}
				custom_description = {
					text = lesson_basics_change_map_mode_2_tt
					has_character_flag = tutorial_chance_map_mode_complete_2
				}
			}
		}
	}
}

#### X - Holdings...
lesson_basics_holdings = {
	chain = lesson_chain_basics_holdings
	delay = 0

	# What are Holdings...?
	lesson_basics_holdings_and_buildings = {
		text = "lesson_basics_holdings_and_buildings_desc"
		header_info = "lesson_step_1_of_4"
		force_pause_game = yes

		effect = {
			if = {
				limit = {
					gold < 300
				}
				add_gold = 500
			}
			remove_character_flag = tutorial_chance_map_mode_complete_1
			remove_character_flag = tutorial_chance_map_mode_complete_2
			pan_camera_to_title = capital_barony
		}

		gui_transition = {
			button_id = "skip"
			button_text = "tutorial_lesson_button_skip"
			target = lesson_finish
		}
		gui_transition = {
			button_id = "next"
			button_text = "tutorial_lesson_button_next"
			target = lesson_basics_buildings
		}
	}
	
	# We have Buildings! Build...?
	lesson_basics_buildings = {
		text = "lesson_basics_buildings_desc"
		header_info = "lesson_step_2_of_4"
		force_pause_game = yes
		animation = far_right

		highlight_widget = "tutorial_highlight_capital_holding"
		highlight_widget = "buildings_grid"

		effect = {
			pan_camera_to_title = capital_barony
		}

		gui_transition = {
			button_id = "back"
			button_text = "tutorial_lesson_button_back"
			target = lesson_basics_holdings_and_buildings
		}

		trigger_transition = {
			button_id = "next"
			button_text = "tutorial_lesson_button_next"
			target = lesson_basics_buildings_no_GUI_highlight
			trigger = {
				custom_description = {
					text = lesson_basics_start_construction_tt
					any_realm_province = {
						has_ongoing_construction = yes
					}
				}
			}
		}
		trigger_transition = { # Next (Automatic)
			target = lesson_basics_buildings_no_GUI_highlight
			trigger = {
				is_widget_open = castle_holding
			}
		}
	}
	# We have Buildings! Build...?
	lesson_basics_buildings_no_GUI_highlight = { # CLONE
		text = "lesson_basics_buildings_desc"
		header_info = "lesson_step_2_of_4"
		force_pause_game = yes
		shown_in_encyclopedia = no

		highlight_widget = "buildings_grid"

		gui_transition = {
			button_id = "back"
			button_text = "tutorial_lesson_button_back"
			target = lesson_basics_holdings_and_buildings
		}

		gui_transition = {
			button_id = "next"
			button_text = "tutorial_lesson_button_next"
			target = lesson_basics_buildings_complete
			enabled = {
				custom_description = {
					text = lesson_basics_start_construction_tt
					any_realm_province = {
						has_ongoing_construction = yes
					}
				}
			}
		}

		trigger_transition = {
			button_id = "next"
			button_text = "tutorial_lesson_button_next"
			target = lesson_basics_buildings_complete
			trigger = {
				custom_description = {
					text = lesson_basics_start_construction_tt
					any_realm_province = {
						has_ongoing_construction = yes
					}
					NOT = { has_character_flag = tutorial_flag_construction_begun }
				}
			}
		}
	}

	# Taxes...
	lesson_basics_buildings_complete = {
		text = "lesson_basics_buildings_complete_desc"
		header_info = "lesson_step_3_of_4"
		force_pause_game = yes

		#highlight_widget = "build_new_icon"

		effect = {
			add_character_flag = {
				flag = tutorial_flag_construction_begun
				days = 10
			}
		}

		gui_transition = {
			button_id = "back"
			button_text = "tutorial_lesson_button_back"
			target = lesson_basics_buildings_no_GUI_highlight
		}
		gui_transition = {
			button_id = "next"
			button_text = "tutorial_lesson_button_next"
			target = lesson_basics_taxes
		}
	}

	# Taxes...
	lesson_basics_taxes = {
		text = "lesson_basics_taxes_desc"
		header_info = "lesson_step_4_of_4"
		force_pause_game = yes

		highlight_widget = "tutorial_highlight_holding_view_taxes_box"

		gui_transition = {
			button_id = "back"
			button_text = "tutorial_lesson_button_back"
			target = lesson_basics_buildings_complete
		}

		gui_transition = {
			button_id = "next"
			button_text = "tutorial_lesson_button_complete"
			target = lesson_finish
		}
	}
}

#### XI - Vassals...
lesson_basics_vassals = {
	chain = lesson_chain_basics_vassals
	delay = 0

	# Vassal view click instruction...
	lesson_basics_vassals_concept = {
		text = "lesson_basics_vassals_concept_desc"
		header_info = "lesson_step_1_of_4"
		force_pause_game = yes
		animation = center

		#Effect: close the Realm view + Vassal tab...
		effect = {
			remove_character_flag = tutorial_flag_construction_begun
			remove_character_flag = tutorial_vassal_tab_open_complete
			close_view = my_realm
			close_view = holding_view
			close_all_views = yes
		}
		
		highlight_widget = "tab_my_realm"
		highlight_widget = "tutorial_highlight_vassals_tab"

		gui_transition = {
			button_id = "skip"
			button_text = "tutorial_lesson_button_skip"
			target = lesson_finish
		}

		gui_transition = {
			button_id = "next"
			button_text = "tutorial_lesson_button_next"
			target = lesson_basics_vassals_concept_complete_2
			enabled = {
				custom_description = {
					text = lesson_basics_realm_view_tt
					is_widget_open = my_realm_window #find the realm view
				}
				custom_description = {
					text = lesson_basics_vassals_tab_tt
					is_widget_open = tab_vassals #find the realm view
				}
			}
		}

		trigger_transition = {
			target = lesson_basics_vassals_concept_complete_2
			trigger = { is_widget_open = tab_vassals }
		}
	}

	lesson_basics_vassals_concept_complete_2 = { # Opened all Vassal views
		text = "lesson_basics_vassals_concept_desc"
		header_info = "lesson_step_1_of_4"
		force_pause_game = yes
		shown_in_encyclopedia = no

		highlight_widget = "tab_my_realm"
		highlight_widget = "tutorial_highlight_vassals_tab"

		gui_transition = {
			button_id = "back"
			button_text = "tutorial_lesson_button_back"
			target = lesson_basics_vassals_concept
		}
		gui_transition = {
			button_id = "repeat"
			button_text = "tutorial_lesson_button_repeat_step" # Goes back to before click instructions
			target = lesson_basics_vassals_concept
		}
		gui_transition = {
			button_id = "next"
			button_text = "tutorial_lesson_button_next"
			target = lesson_basics_vassals_concept_great_job
			enabled = {
				custom_description = {
					text = lesson_basics_realm_view_tt
					is_widget_open = my_realm_window #find the realm view
				}
				custom_description = {
					text = lesson_basics_vassals_tab_tt
					is_widget_open = tab_vassals #find the realm view
				}
			}
		}
		trigger_transition = {
			target = lesson_basics_vassals_concept_great_job
			trigger = {
				is_widget_open = my_realm_window #find the realm view
				is_widget_open = tab_vassals #find the realm view
				NOT = { has_character_flag = tutorial_vassal_tab_open_complete }
			}
		}
	}

	# Good job - here be Vassals...
	lesson_basics_vassals_concept_great_job = {
		text = "lesson_basics_vassals_concept_great_job_desc"
		header_info = "lesson_step_2_of_4"
		force_pause_game = yes
		animation = left

		highlight_widget = "tab_vassals"
		highlight_widget = "tab_my_realm"

		effect = {
			pan_camera_to_title = title:c_ormond
			add_character_flag = {
				flag = tutorial_vassal_tab_open_complete
				days = 200
			}
		}

		gui_transition = {
			button_id = "back"
			button_text = "tutorial_lesson_button_back"
			target = lesson_basics_vassals_concept_complete_2
		}
		gui_transition = {
			button_id = "next"
			button_text = "tutorial_lesson_button_next"
			target = lesson_basics_happy_vassals
		}
	}

	# Keeping the vassals happy...
	lesson_basics_happy_vassals = {
		text = "lesson_basics_happy_vassals_desc"
		header_info = "lesson_step_3_of_4"
		force_pause_game = yes

		gui_transition = {
			button_id = "back"
			button_text = "tutorial_lesson_button_back"
			target = lesson_basics_vassals_concept_great_job
		}
		gui_transition = {
			button_id = "next"
			button_text = "tutorial_lesson_button_next"
			target = lesson_basics_vassal_limit
		}
	}

	# Vassal Limit...
	lesson_basics_vassal_limit = {
		text = "lesson_basics_vassal_limit_desc"
		header_info = "lesson_step_4_of_4"
		force_pause_game = yes
		highlight_widget = "tutorial_highlight_vassal_limit"

		gui_transition = {
			button_id = "back"
			button_text = "tutorial_lesson_button_back"
			target = lesson_basics_happy_vassals
		}
		gui_transition = {
			button_id = "next"
			button_text = "tutorial_lesson_button_complete"
			target = lesson_finish
		}
	}
}

### XII - Domain...
lesson_basics_domain = {
	chain = lesson_chain_basics_domain
	delay = 0

	# Your Domain is always your Realm, but your Realm is not always your Domain...
	lesson_basics_domain_1 = {
		text = "lesson_basics_domain_1_desc"
		header_info = "lesson_step_1_of_2"
		force_pause_game = yes
		animation = top_left

		effect = {
			close_all_views = yes
			pan_camera_to_title = title:d_munster
		}

		gui_transition = {
			button_id = "skip"
			button_text = "tutorial_lesson_button_skip"
			target = lesson_finish
		}
		gui_transition = {
			button_id = "next"
			button_text = "tutorial_lesson_button_next"
			target = lesson_basics_domain_2
		}
	}

	# Domain limit...
	lesson_basics_domain_2 = {
		text = "lesson_basics_domain_2_desc"
		header_info = "lesson_step_2_of_2"
		force_pause_game = yes

		highlight_widget = "domain_limit"

		gui_transition = {
			button_id = "back"
			button_text = "tutorial_lesson_button_back"
			target = lesson_basics_domain_1
		}
		gui_transition = {
			button_id = "next"
			button_text = "tutorial_lesson_button_complete"
			target = lesson_finish
		}
	}
}

#### XIII - Council...
lesson_basics_council = {
	chain = lesson_chain_basics_council
	delay = 0

	# Council concept...
	lesson_basics_council_concept = {
		text = "lesson_basics_council_concept_desc"
		header_info = "lesson_step_1_of_2"
		force_pause_game = yes
		animation = center
		
		highlight_widget = "tab_council"
		highlight_widget = "tutorial_highlight_marshal_position"

		effect = {
			close_all_views = yes
		}

		gui_transition = {
			button_id = "skip"
			button_text = "tutorial_lesson_button_skip"
			target = lesson_finish
		}
		trigger_transition = {
			button_id = "next"
			button_text = "tutorial_lesson_button_next"
			target = lesson_basics_council_tasks
			trigger = {
				custom_description = {
					text = lesson_basics_council_view_tt
					is_widget_open = council_window
				}
			}
		}
	}

	# Council tasks...
	lesson_basics_council_tasks = {
		text = "lesson_basics_council_tasks_desc"
		header_info = "lesson_step_2_of_2"
		force_pause_game = yes

		#highlight_widget = "show_tasks"	#This highlights the spouse's tasks, and these both act different to all other councillors and may be invalid, as the user may have skipped that tutorial section.
		highlight_widget = "tab_council"
		highlight_widget = "council_position_tasks"
		gui_transition = {
			button_id = "back"
			button_text = "tutorial_lesson_button_back"
			target = lesson_basics_council_concept
		}
		gui_transition = {
			button_id = "next"
			button_text = "tutorial_lesson_button_complete"
			target = lesson_finish
		}
	}
}

### XIV - Schemes...
lesson_basics_schemes = {
	chain = lesson_chain_basics_schemes
	delay = 0

	# Schemes...
	lesson_basics_schemes_concept = {
		text = "lesson_basics_schemes_concept_desc"
		header_info = "lesson_step_1_of_6"
		force_pause_game = yes

		highlight_widget = "tab_intrigue"
		highlight_widget = "open_scheme_tab"

		effect = {
			close_all_views = yes
		}

		gui_transition = {
			button_id = "skip"
			button_text = "tutorial_lesson_button_skip"
			target = lesson_finish
		}

		trigger_transition = { # Next
			button_id = "next"
			button_text = "tutorial_lesson_button_next"
			target = lesson_basics_schemes_concept_complete
			trigger = {
				custom_description = {
					text = "lesson_basics_intrigue_view_tt"
					is_widget_open = intrigue_window
				}
				custom_description = {
					text = "lesson_basics_schemes_tab_tt"
					is_widget_open = intrigue_window #for auto-transition to next window...
				}
			}
		}
	}
	# Schemes... (Complete - ANIM)
	lesson_basics_schemes_concept_complete = {
		text = "lesson_basics_schemes_concept_desc"
		header_info = "lesson_step_1_of_6"
		animation = center
		force_pause_game = yes
		shown_in_encyclopedia = no

		highlight_widget = "tab_intrigue"
		highlight_widget = "open_scheme_tab"

		gui_transition = {
			button_id = "skip"
			button_text = "tutorial_lesson_button_skip"
			target = lesson_finish
		}

		gui_transition = { # Next
			button_id = "next"
			button_text = "tutorial_lesson_button_next"
			target = lesson_basics_schemes_murder
			enabled = {
				custom_description = {
					text = "lesson_basics_intrigue_view_tt"
					is_widget_open = intrigue_window
				}
				custom_description = {
					text = "lesson_basics_schemes_tab_tt"
					is_widget_open = my_own_schemes
				}
			}
		}
	}

	# Scheme: MURDER!
	lesson_basics_schemes_murder = {
		text = "lesson_basics_schemes_murder_desc"
		header_info = "lesson_step_2_of_6"
		force_pause_game = yes

		highlight_widget = "tab_intrigue"
		highlight_widget = "open_scheme_tab"

		gui_transition = {
			button_id = "back"
			button_text = "tutorial_lesson_button_back"
			target = lesson_basics_schemes_concept
		}

		gui_transition = {
			button_id = "next"
			button_text = "tutorial_lesson_button_next"
			target = lesson_basics_schemes_sway
		}
	}

	# Scheme: Sway instruction...
	lesson_basics_schemes_sway = {
		header_info = "lesson_step_3_of_6"
		text = "lesson_basics_schemes_sway_desc"
		force_pause_game = yes
		animation = far_left

		highlight_widget = "tab_council"
		highlight_widget = "tutorial_court_chaplain"

		effect = {
			close_view = holding_view
			if = {
				limit = {
					NOT = { has_character_flag = tutorial_flag_began_sway }
				}
				every_scheme = {
					end_scheme = yes
				}
			}
		}

		gui_transition = { #Back button
			button_id = "back"
			button_text = "tutorial_lesson_button_back"
			target = lesson_basics_schemes_murder
		}
		gui_transition = {  # Next (not automatic, in case player backtracks)
			button_id = "next"
			button_text = "tutorial_lesson_button_next"
			target = lesson_basics_schemes_sway_complete
			enabled = {
				custom_description = {
					text = lesson_basics_council_view_tt
					is_widget_open = council_window
				}
				custom_description = {
					text = tutorial_basic_schemes_start_swaying_tt
					OR = {
						has_character_flag = tutorial_flag_began_sway
						AND = {
							exists = root.cp:councillor_court_chaplain
							any_scheme = {
								scheme_type = sway
								scheme_target = root.cp:councillor_court_chaplain
							}
						}
					}
				}
			}
		}

		trigger_transition = {  # Automatic transition
			button_id = "next"
			button_text = "tutorial_lesson_button_next"
			target = lesson_basics_schemes_sway_complete
			trigger = {
				NOT = { has_character_flag = tutorial_flag_began_sway }
				custom_description = {
					text = lesson_basics_council_view_tt
					is_widget_open = council_window
				}
				custom_description = {
					text = tutorial_basic_schemes_start_swaying_tt
					exists = root.cp:councillor_court_chaplain
					any_scheme = {
						scheme_type = sway
						scheme_target = root.cp:councillor_court_chaplain
					}
				}
			}
		}
	}

	# Began Swaying - good job...!
	lesson_basics_schemes_sway_complete = {
		text = "lesson_basics_schemes_sway_complete_desc"
		header_info = "lesson_step_4_of_6"
		force_pause_game = yes
		animation = center

		highlight_widget = "tab_intrigue"
		highlight_widget = "open_scheme_tab"
		highlight_widget = "my_own_scheme_header"

		effect = {
			add_character_flag = {
				flag = tutorial_flag_began_sway
				days = 10
			}
		}

		gui_transition = { #Back button
			button_id = "back"
			button_text = "tutorial_lesson_button_back"
			target = lesson_basics_schemes_sway
		}

		gui_transition = { # Next
			button_id = "next"
			button_text = "tutorial_lesson_button_next"
			target = lesson_basics_hooks
			enabled = {
				custom_description = {
					text = "lesson_basics_intrigue_view_tt"
					is_widget_open = intrigue_window
				}
				custom_description = {
					text = "lesson_basics_schemes_tab_tt"
					is_widget_open = my_own_schemes
				}
			}
		}
	}

	# Hooks...
	lesson_basics_hooks = {
		text = "lesson_basics_hooks_desc"
		header_info = "lesson_step_5_of_6"
		force_pause_game = yes

		highlight_widget = "tab_intrigue"
		highlight_widget = "open_hooks_and_secrets_tab"

		gui_transition = { #Back button
			button_id = "back"
			button_text = "tutorial_lesson_button_back"
			target = lesson_basics_schemes_sway_complete
		}
		gui_transition = { # Next
			button_id = "next"
			button_text = "tutorial_lesson_button_next"
			target = lesson_basics_hooks_complete
			enabled = {
				custom_description = {
					text = "lesson_basics_intrigue_view_tt"
					is_widget_open = intrigue_window
				}
				custom_description = {
					text = "lesson_basics_hooks_and_secrets_tab_tt"
					is_widget_open = hooks_and_secrets
				}
			}
		}
	}

	# Hooks - get a hook..!
	lesson_basics_hooks_complete = {
		text = "lesson_basics_hooks_complete_desc"
		header_info = "lesson_step_6_of_6"
		force_pause_game = yes

		highlight_widget = "tab_intrigue"
		highlight_widget = "open_hooks_and_secrets_tab"
		highlight_widget = "tutorial_highlight_modify_contract_hook_button"

		effect = {
			if = {
				limit = {
					any_vassal = {
						highest_held_title_tier = tier_county
					}
					NOT = { has_character_flag = tutorial_flag_received_weak_hook }
				}
				random_vassal = {
					limit = {
						highest_held_title_tier = tier_county
					}
					root = {
						add_hook = {
							target = prev
							type = favor_hook
						}
						add_character_flag = {
							flag = tutorial_flag_received_weak_hook
							days = 10
						}
					}
				}
			}
		}

		gui_transition = { #Back button
			button_id = "back"
			button_text = "tutorial_lesson_button_back"
			target = lesson_basics_hooks
		}
		gui_transition = {
			button_id = "next"
			button_text = "tutorial_lesson_button_complete"
			target = lesson_finish
		}
	}
}

### XVII - War...
lesson_basics_war = {
	chain = lesson_chain_basics_war
	delay = 0

	# War - we're gonna go easy...
	lesson_basics_warfare = {
		text = "lesson_basics_warfare_desc"
		header_info = "lesson_step_1_of_4"
		force_pause_game = yes
		animation = center

		#highlight_widget = "tab_military"
		#highlight_widget = "open_hooks_and_secrets_tab"

		effect = {
			close_all_views = yes
			remove_character_flag = tutorial_flag_began_sway
		}

		gui_transition = {
			button_id = "skip"
			button_text = "tutorial_lesson_button_skip"
			target = lesson_finish
		}
		gui_transition = { # Next
			button_id = "next"
			button_text = "tutorial_lesson_button_next"
			target = lesson_basics_levies
		}
	}

	# War - soldiers...
	lesson_basics_levies = {
		text = "lesson_basics_levies_desc"
		header_info = "lesson_step_2_of_4"
		force_pause_game = yes

		highlight_widget = "tab_military"
		#highlight_widget = "add_maa"
		#highlight_widget = "tutorial_highlight_hire_troops_button"

		gui_transition = { #Back button
			button_id = "back"
			button_text = "tutorial_lesson_button_back"
			target = lesson_basics_warfare
		}
		trigger_transition = { # Next
			button_id = "next"
			button_text = "tutorial_lesson_button_next"
			target = lesson_basics_levies_complete
			trigger = {
				custom_description = {
					text = "lesson_basics_military_view_tt"
					is_widget_open = military_view
				}
			}
		}
	}
	# War - soldiers...(Complete ---> ANIM)
	lesson_basics_levies_complete = {
		text = "lesson_basics_levies_desc"
		header_info = "lesson_step_2_of_4"
		force_pause_game = yes
		animation = center
		shown_in_encyclopedia = no

		highlight_widget = "tab_military"
		#highlight_widget = "add_maa"
		#highlight_widget = "tutorial_highlight_hire_troops_button"

		gui_transition = { #Back button
			button_id = "back"
			button_text = "tutorial_lesson_button_back"
			target = lesson_basics_warfare
		}
		gui_transition = { # Next
			button_id = "next"
			button_text = "tutorial_lesson_button_next"
			target = lesson_basics_rally_points
			enabled = {
				custom_description = {
					text = "lesson_basics_military_view_tt"
					is_widget_open = military_view
				}
			}
		}
	}


	# War - Rally Point...
	lesson_basics_rally_points = {
		text = "lesson_basics_rally_points_desc"
		header_info = "lesson_step_3_of_4"
		force_pause_game = yes
		animation = left

		highlight_widget = "banner_button"
		#highlight_widget = "tutorial_highlight_raise_troops"

		effect = {
			pan_camera_to_title = capital_barony
		}

		gui_transition = { #Back button
			button_id = "back"
			button_text = "tutorial_lesson_button_back"
			target = lesson_basics_levies
		}
		gui_transition = { # Next
			button_id = "next"
			button_text = "tutorial_lesson_button_next"
			target = lesson_basics_casus_belli
		}
	}

	# War - Casus Belli...
	lesson_basics_casus_belli = {
		text = "lesson_basics_casus_belli_desc"
		header_info = "lesson_step_4_of_4"
		force_pause_game = yes

		gui_transition = { #Back button
			button_id = "back"
			button_text = "tutorial_lesson_button_back"
			target = lesson_basics_rally_points
		}
		gui_transition = {
			button_id = "next"
			button_text = "tutorial_lesson_button_complete"
			target = lesson_finish
		}
	}
}

### XVIII - Unpause...
lesson_basics_unpause = {
	chain = lesson_chain_basics_unpause
	delay = 0

	# How to unpause + effects of that...
	lesson_basics_pausing_2 = {
		text = "lesson_basics_pausing_2_desc"
		header_info = "lesson_step_1_of_2"
		force_pause_game = yes
		animation = right

		effect = {
			close_all_views = yes
		}
		#animation = bottom_right

		#highlight_widget = "tutorial_highlight_bottom_right_bar"
		highlight_widget = "play_pause_button"

		gui_transition = {
			button_id = "skip"
			button_text = "tutorial_lesson_button_skip"
			target = lesson_finish
		}

		gui_transition = {
			button_id = "next"
			button_text = "tutorial_lesson_button_next"
			target = lesson_basics_pausing_3 # ends current lesson chain
		}
	}
	# How to unpause + effects of that...
	lesson_basics_pausing_3 = {
		text = "lesson_basics_pausing_3_desc"
		header_info = "lesson_step_2_of_2"
		force_pause_game = no
		#animation = bottom_right

		#highlight_widget = "tutorial_highlight_bottom_right_bar"
		highlight_widget = "play_pause_button"
		highlight_widget = "paused_by_player_text"

		gui_transition = {
			button_id = "back"
			button_text = "tutorial_lesson_button_back"
			target = lesson_basics_pausing_2 # ends current lesson chain
		}

		gui_transition = {
			button_id = "next"
			button_text = "tutorial_lesson_button_complete"
			target = lesson_finish # ends current lesson chain
		}
	}
}

###### END of railroad!
