order_magic_tree_1_perk_1 = {
	lifestyle = order_magic_lifestyle
	tree = order_magic_tree_1
	position = { 2 0 }
	icon = node_intrigue	

	can_be_auto_selected = {
		magic_lifestyle_is_valid_trigger  = { MAGIC = order }
	}

	auto_selection_weight = {
		value = wc_order_magic_auto_selection_value

		if = { 
			limit = { 
				has_variable = order_focus
				OR = { 
					var:order_focus = flag:fire
					var:order_focus = flag:ice
					var:order_focus = flag:conjuration
				}
			}
			multiply = wc_lifestyle_perk_auto_selection_weight_order_focus_value
		}

		if = {
			limit = { has_focus = order_magic_focus_1 }
			multiply = wc_lifestyle_perk_auto_selection_weight_multiply_from_focus_value
		}
		if = {
			limit = {
				NOT = { can_spend_perks_in_nonelemental_TYPE_lifestyle_tree_TREE_trigger = { TYPE = order_magic TREE = 1 } }
			}
			multiply = 0
		}
	}

	effect = {
		custom_tooltip = wc_arcane_dialectics_effect
		# Maintenance
		wc_nonelemental_MAGIC_magic_lifestyle_rank_up_check_effect = { MAGIC = order }
	}
}
order_magic_tree_1_perk_2 = {
	lifestyle = order_magic_lifestyle
	tree = order_magic_tree_1
	position = { 0 0.75 }
	icon = node_intrigue

	parent = order_magic_tree_1_perk_1
	effect = {
		custom_tooltip = wc_elemental_synthesis_effect
		# Maintenance
		wc_nonelemental_MAGIC_magic_lifestyle_rank_up_check_effect = { MAGIC = order }
	}

	auto_selection_weight = {
		value = wc_order_magic_auto_selection_value

		if = { 
			limit = { 
				has_variable = order_focus
				OR = { 
					var:order_focus = flag:fire
					var:order_focus = flag:ice
				}
			}
			multiply = wc_lifestyle_perk_auto_selection_weight_order_focus_value
		}

		if = {
			limit = { has_focus = order_magic_focus_1 }
			multiply = wc_lifestyle_perk_auto_selection_weight_multiply_from_focus_value
		}
		if = {
			limit = {
				NOT = { can_spend_perks_in_nonelemental_TYPE_lifestyle_tree_TREE_trigger = { TYPE = order_magic TREE = 1 } }
			}
			multiply = 0
		}
	}
}
order_magic_tree_1_perk_3 = {
	lifestyle = order_magic_lifestyle
	tree = order_magic_tree_1
	position = { 4 0.75 }
	icon = node_intrigue

	parent = order_magic_tree_1_perk_1

	character_modifier = {
		caster_siege_value_add = 1
		caster_damage_add = 2
	}

	effect = {
		# Maintenance
		wc_nonelemental_MAGIC_magic_lifestyle_rank_up_check_effect = { MAGIC = order }
	}
}
order_magic_tree_1_perk_4 = {
	lifestyle = order_magic_lifestyle
	tree = order_magic_tree_1
	position = { 2 1.5 }
	icon = node_intrigue

	parent = order_magic_tree_1_perk_2
	parent = order_magic_tree_1_perk_3

	effect = {
		custom_tooltip = wc_quickening_effect
		# Maintenance
		wc_nonelemental_MAGIC_magic_lifestyle_rank_up_check_effect = { MAGIC = order }
	}
}
order_magic_tree_1_perk_5 = {
	lifestyle = order_magic_lifestyle
	tree = order_magic_tree_1
	position = { 2 2.5 }
	icon = node_intrigue

	parent = order_magic_tree_1_perk_4

	effect = {
		custom_tooltip = wc_learn_spell_polymorph
		wc_learn_spell_effect = {
			SPELL = polymorph
		}
		# Maintenance
		wc_nonelemental_MAGIC_magic_lifestyle_rank_up_check_effect = { MAGIC = order }
	}
}
order_magic_tree_1_perk_6 = {
	lifestyle = order_magic_lifestyle
	tree = order_magic_tree_1
	position = { 4 3.25 }
	icon = node_intrigue

	parent = order_magic_tree_1_perk_5

	character_modifier = {
		caster_damage_add = 2
		caster_pursuit_add = 2
	}

	effect = {
		# Maintenance
		wc_nonelemental_MAGIC_magic_lifestyle_rank_up_check_effect = { MAGIC = order }
	}
}
order_magic_tree_1_perk_7 = {
	lifestyle = order_magic_lifestyle
	tree = order_magic_tree_1
	position = { 0 3.25 }
	icon = node_intrigue

	parent = order_magic_tree_1_perk_5

	effect = {
		custom_tooltip = wc_synergistic_alacrity_effect
		# Maintenance
		wc_nonelemental_MAGIC_magic_lifestyle_rank_up_check_effect = { MAGIC = order }
	}
}
order_magic_tree_1_perk_8 = {
	lifestyle = order_magic_lifestyle
	tree = order_magic_tree_1
	position = { 2 4 }
	icon = node_intrigue

	parent = order_magic_tree_1_perk_7
	parent = order_magic_tree_1_perk_6

	effect = {
		custom_tooltip = wc_learn_spell_conjure_refreshment
		wc_learn_spell_effect = {
			SPELL = conjure_refreshment
		}
		learn_spell_rank_effect = {
			SPELL = conjure_refreshment
			RANK = 2
		}
		learn_spell_rank_effect = {
			SPELL = conjure_refreshment
			RANK = 3
		}
		# Maintenance
		wc_nonelemental_MAGIC_magic_lifestyle_rank_up_check_effect = { MAGIC = order }
	}
}
order_magic_tree_1_perk_9 = {
	lifestyle = order_magic_lifestyle
	tree = order_magic_tree_1
	position = { 2 5 }
	icon = node_intrigue

	parent = order_magic_tree_1_perk_8

	effect = {
		custom_tooltip = wc_learn_spell_evocation
		wc_learn_spell_effect = {
			SPELL = evocation
		}
		# Maintenance
		wc_nonelemental_MAGIC_magic_lifestyle_rank_up_check_effect = { MAGIC = order }
	}
}

order_magic_tree_2_perk_1 = {
	lifestyle = order_magic_lifestyle
	tree = order_magic_tree_2
	position = { 2 0 }
	icon = node_intrigue

	can_be_auto_selected = {
		magic_lifestyle_is_valid_trigger  = { MAGIC = order }
	}

	auto_selection_weight = {
		value = wc_order_magic_auto_selection_value

		if = { 
			limit = { 
				has_variable = order_focus
				var:order_focus = flag:abjuration
			}
			multiply = wc_lifestyle_perk_auto_selection_weight_order_focus_value
		}

		if = {
			limit = { has_focus = order_magic_focus_2 }
			multiply = wc_lifestyle_perk_auto_selection_weight_multiply_from_focus_value
		}
		if = {
			limit = {
				NOT = { can_spend_perks_in_nonelemental_TYPE_lifestyle_tree_TREE_trigger = { TYPE = order_magic TREE = 2 } }
			}
			multiply = 0
		}
	}

	effect = {
		custom_tooltip = wc_aether_tap_effect
		# Maintenance
		wc_nonelemental_MAGIC_magic_lifestyle_rank_up_check_effect = { MAGIC = order }
	}
}
order_magic_tree_2_perk_2 = {
	lifestyle = order_magic_lifestyle
	tree = order_magic_tree_2
	position = { 0 1 }
	icon = node_intrigue

	parent = order_magic_tree_2_perk_1

	effect = {
		custom_tooltip = wc_learn_spell_counterspell
		wc_learn_spell_effect = {
			SPELL = counterspell
		}
		# Maintenance
		wc_nonelemental_MAGIC_magic_lifestyle_rank_up_check_effect = { MAGIC = order }
	}
}
order_magic_tree_2_perk_3 = {
	lifestyle = order_magic_lifestyle
	tree = order_magic_tree_2
	position = { 2 1 }
	icon = node_intrigue

	parent = order_magic_tree_2_perk_1

	effect = {
		custom_tooltip = wc_learn_spell_scry
		wc_learn_spell_effect = {
			SPELL = scry
		}
		# Maintenance
		wc_nonelemental_MAGIC_magic_lifestyle_rank_up_check_effect = { MAGIC = order }
	}
}
order_magic_tree_2_perk_4 = {
	lifestyle = order_magic_lifestyle
	tree = order_magic_tree_2
	position = { 4 1 }
	icon = node_intrigue

	parent = order_magic_tree_2_perk_1

	effect = {
		custom_tooltip = wc_spell_hack_effect
		set_variable = {
			name = wc_spell_hack_activated
			value = yes
		}
		# Maintenance
		wc_nonelemental_MAGIC_magic_lifestyle_rank_up_check_effect = { MAGIC = order }
	}
}
order_magic_tree_2_perk_5 = {
	lifestyle = order_magic_lifestyle
	tree = order_magic_tree_2
	position = { 0 4 }
	icon = node_intrigue

	parent = order_magic_tree_2_perk_2

	effect = {
		custom_tooltip = wc_scheme_reflect_effect

		if = {
			limit = {
				has_variable = scheme_reflect_count
			}
			change_variable = {
				name = scheme_reflect_count
				add = 1
			}
		}
		else = {
			set_variable = {
				name = scheme_reflect_count
				value = 1
			}
		}
		# Maintenance
		wc_nonelemental_MAGIC_magic_lifestyle_rank_up_check_effect = { MAGIC = order }
	}
}
order_magic_tree_2_perk_6 = {
	lifestyle = order_magic_lifestyle
	tree = order_magic_tree_2
	position = { 1 3 }
	icon = node_intrigue

	parent = order_magic_tree_2_perk_2

	character_modifier = {
		intrigue = 2
	}

	effect = {
		custom_tooltip = wc_empowered_scrying
		# Maintenance
		wc_nonelemental_MAGIC_magic_lifestyle_rank_up_check_effect = { MAGIC = order }
	}
}
order_magic_tree_2_perk_7 = {
	lifestyle = order_magic_lifestyle
	tree = order_magic_tree_2
	position = { 3 3 }
	icon = node_intrigue

	parent = order_magic_tree_2_perk_4

	effect = {
		custom_tooltip = wc_arcane_intellect_effect
		trigger_event = magic_perk.0001
		# Maintenance
		wc_nonelemental_MAGIC_magic_lifestyle_rank_up_check_effect = { MAGIC = order }
	}
}
order_magic_tree_2_perk_8 = {
	lifestyle = order_magic_lifestyle
	tree = order_magic_tree_2
	position = { 4 4 }
	icon = node_intrigue

	parent = order_magic_tree_2_perk_4

	effect = {
		custom_tooltip = wc_learn_spell_spellsteal
		wc_learn_spell_effect = {
			SPELL = spellsteal
		}
		# Maintenance
		wc_nonelemental_MAGIC_magic_lifestyle_rank_up_check_effect = { MAGIC = order }
	}
}
order_magic_tree_2_perk_9 = {
	lifestyle = order_magic_lifestyle
	tree = order_magic_tree_2
	position = { 2 5 }
	icon = node_intrigue

	parent = order_magic_tree_2_perk_3
	parent = order_magic_tree_2_perk_5
	parent = order_magic_tree_2_perk_6
	parent = order_magic_tree_2_perk_7
	parent = order_magic_tree_2_perk_8

	effect = {
		custom_tooltip = wc_learn_spell_arcane_dome
		wc_learn_spell_effect = {
			SPELL = arcane_dome
		}
		# Maintenance
		wc_nonelemental_MAGIC_magic_lifestyle_rank_up_check_effect = { MAGIC = order }
	}
}

order_magic_tree_3_perk_1 = {
	lifestyle = order_magic_lifestyle
	tree = order_magic_tree_3
	position = { 2 0 }
	icon = node_intrigue

	can_be_auto_selected = {
		magic_lifestyle_is_valid_trigger  = { MAGIC = order }
	}

	auto_selection_weight = {
		value = wc_order_magic_auto_selection_value

		if = { 
			limit = { 
				has_variable = order_focus
				var:order_focus = flag:chronomancy
			}
			multiply = wc_lifestyle_perk_auto_selection_weight_order_focus_value
		}

		if = {
			limit = { has_focus = order_magic_focus_3 }
			multiply = wc_lifestyle_perk_auto_selection_weight_multiply_from_focus_value
		}
		if = {
			limit = {
				NOT = { can_spend_perks_in_nonelemental_TYPE_lifestyle_tree_TREE_trigger = { TYPE = order_magic TREE = 3 } }
			}
			multiply = 0
		}
	}

	character_modifier = {
		character_travel_speed = 5
		movement_speed = 0.05
	}

	effect = {
		# Maintenance
		wc_nonelemental_MAGIC_magic_lifestyle_rank_up_check_effect = { MAGIC = order }

	}
}
order_magic_tree_3_perk_2 = {
	lifestyle = order_magic_lifestyle
	tree = order_magic_tree_3
	position = { 0 0.5 }
	icon = node_intrigue

	parent = order_magic_tree_3_perk_1

	character_modifier = {
		vassal_opinion = 10
		dread_decay_mult = -0.1
		stress_loss_mult = 0.1
	}

	effect = {
		# Maintenance
		wc_nonelemental_MAGIC_magic_lifestyle_rank_up_check_effect = { MAGIC = order }
	}
}
order_magic_tree_3_perk_3 = {
	lifestyle = order_magic_lifestyle
	tree = order_magic_tree_3
	position = { 4 0.5 }
	icon = node_intrigue

	parent = order_magic_tree_3_perk_1

	effect = {
		custom_tooltip = wc_learn_spell_haste
		wc_learn_spell_effect = {
			SPELL = haste
		}
		# Maintenance
		wc_nonelemental_MAGIC_magic_lifestyle_rank_up_check_effect = { MAGIC = order }
	}
}
order_magic_tree_3_perk_4 = {
	lifestyle = order_magic_lifestyle
	tree = order_magic_tree_3
	position = { 2 1 }
	icon = node_intrigue

	parent = order_magic_tree_3_perk_2
	parent = order_magic_tree_3_perk_3

	character_modifier = {
		knight_effectiveness_mult = 0.05
	}

	effect = {
		custom_tooltip = wc_mirror_image_effect
		# Maintenance
		wc_nonelemental_MAGIC_magic_lifestyle_rank_up_check_effect = { MAGIC = order }
	}
}
order_magic_tree_3_perk_5 = {
	lifestyle = order_magic_lifestyle
	tree = order_magic_tree_3
	position = { 1 2 }
	icon = node_intrigue

	parent = order_magic_tree_3_perk_2

	effect = {
		custom_tooltip = wc_learn_spell_chronomancy
		wc_learn_spell_effect = {
			SPELL = chronomancy
		}
		# Maintenance
		wc_nonelemental_MAGIC_magic_lifestyle_rank_up_check_effect = { MAGIC = order }
	}
}
order_magic_tree_3_perk_6 = {
	lifestyle = order_magic_lifestyle
	tree = order_magic_tree_3
	position = { 3 2 }
	icon = node_intrigue

	parent = order_magic_tree_3_perk_3

	effect = {
		custom_tooltip = wc_presence_of_mind_effect
		set_variable = wc_presence_of_mind_available
		# Maintenance
		wc_nonelemental_MAGIC_magic_lifestyle_rank_up_check_effect = { MAGIC = order }
	}
}
order_magic_tree_3_perk_7 = {
	lifestyle = order_magic_lifestyle
	tree = order_magic_tree_3
	position = { 0 4.25 }
	icon = node_intrigue

	parent = order_magic_tree_3_perk_6

	effect = {
		custom_tooltip = wc_time_warping_effect
		# Maintenance
		wc_nonelemental_MAGIC_magic_lifestyle_rank_up_check_effect = { MAGIC = order }
	}
}
order_magic_tree_3_perk_8 = {
	lifestyle = order_magic_lifestyle
	tree = order_magic_tree_3
	position = { 4 4.25 }
	icon = node_intrigue

	parent = order_magic_tree_3_perk_5

	effect = {
		custom_tooltip = wc_reverse_causality_effect
		set_variable = wc_reverse_causality_available
		# Maintenance
		wc_nonelemental_MAGIC_magic_lifestyle_rank_up_check_effect = { MAGIC = order }
	}
}
order_magic_tree_3_perk_9 = {
	lifestyle = order_magic_lifestyle
	tree = order_magic_tree_3
	position = { 2 5 }
	icon = node_intrigue

	parent = order_magic_tree_3_perk_4
	parent = order_magic_tree_3_perk_7
	parent = order_magic_tree_3_perk_8

	effect = {
		# Maintenance
		wc_nonelemental_MAGIC_magic_lifestyle_rank_up_check_effect = { MAGIC = order }
		custom_tooltip = wc_learn_spell_create_portal
		wc_learn_spell_effect = {
			SPELL = create_portal
		}
		learn_spell_rank_effect = {
			SPELL = create_portal
			RANK = 2
		}
		learn_spell_rank_effect = {
			SPELL = create_portal
			RANK = 3
		}
	}
}

order_magic_tree_4_perk_1 = {
	lifestyle = order_magic_lifestyle
	tree = order_magic_tree_4
	position = { 0.0 0 }
	icon = node_martial

	can_be_picked = { 
		can_take_elemental_conjuration_trigger = yes
	}

	can_be_auto_selected = {
		magic_lifestyle_is_valid_trigger  = { MAGIC = order }
	}

	auto_selection_weight = {
		value = wc_order_magic_auto_selection_value
		
		if = { 
			limit = {
				has_variable = order_focus
				var:order_focus = flag:fire
			}
			multiply = wc_lifestyle_perk_auto_selection_weight_order_focus_value
		}

		if = { # Any focus
			limit = { can_take_elemental_conjuration_trigger = yes }
			multiply = wc_lifestyle_perk_auto_selection_weight_multiply_from_focus_value
		} else = {
			multiply = 0
		}
	}

	effect = {
		custom_tooltip = wc_learn_spell_scorch
		wc_learn_spell_effect = {
			SPELL = scorch
		}
		# Maintenance
		wc_nonelemental_MAGIC_magic_lifestyle_rank_up_check_effect = { MAGIC = order }
	}
}
order_magic_tree_4_perk_2 = {
	lifestyle = order_magic_lifestyle
	tree = order_magic_tree_4
	position = { 2 0 }
	icon = node_martial

	can_be_picked = { 
		can_take_elemental_conjuration_trigger = yes
	}

	can_be_auto_selected = {
		magic_lifestyle_is_valid_trigger  = { MAGIC = order }
	}

	auto_selection_weight = {
		value = wc_order_magic_auto_selection_value
		
		if = { 
			limit = {
				has_variable = order_focus
				var:order_focus = flag:fire
			}
			multiply = wc_lifestyle_perk_auto_selection_weight_order_focus_value
		}

		if = { # Any focus
			limit = { can_take_elemental_conjuration_trigger = yes }
			multiply = wc_lifestyle_perk_auto_selection_weight_multiply_from_focus_value
		} else = {
			multiply = 0
		}
	}

	character_modifier = {
		prowess = 1
	}

	effect = {
		custom_tooltip = wc_netherburn_effect
		# Maintenance
		wc_nonelemental_MAGIC_magic_lifestyle_rank_up_check_effect = { MAGIC = order }
	}
}
order_magic_tree_4_perk_3 = {
	lifestyle = order_magic_lifestyle
	tree = order_magic_tree_4
	position = { 4 0 }
	icon = node_martial

	can_be_picked = { 
		can_take_elemental_conjuration_trigger = yes
	}

	can_be_auto_selected = {
		magic_lifestyle_is_valid_trigger  = { MAGIC = order }
	}

	auto_selection_weight = {
		value = wc_order_magic_auto_selection_value
		
		if = { 
			limit = {
				has_variable = order_focus
				var:order_focus = flag:fire
			}
			multiply = wc_lifestyle_perk_auto_selection_weight_order_focus_value
		}

		if = { # Any focus
			limit = { can_take_elemental_conjuration_trigger = yes }
			multiply = wc_lifestyle_perk_auto_selection_weight_multiply_from_focus_value
		} else = {
			multiply = 0
		}
	}

	effect = {
		custom_tooltip = wc_learn_spell_fire_shield
		wc_learn_spell_effect = {
			SPELL = fire_shield
		}
		# Maintenance
		wc_nonelemental_MAGIC_magic_lifestyle_rank_up_check_effect = { MAGIC = order }
	}
}
order_magic_tree_4_perk_4 = {
	lifestyle = order_magic_lifestyle
	tree = order_magic_tree_4
	position = { 0 1.5 }
	icon = node_martial

	parent = order_magic_tree_4_perk_1

	effect = {
		custom_tooltip = wc_learn_spell_pyroblast
		wc_learn_spell_effect = {
			SPELL = pyroblast
		}
		# Maintenance
		wc_nonelemental_MAGIC_magic_lifestyle_rank_up_check_effect = { MAGIC = order }
	}

	auto_selection_weight = {
		value = wc_order_magic_auto_selection_value
		
		if = { 
			limit = {
				has_variable = order_focus
				var:order_focus = flag:fire
			}
			multiply = wc_lifestyle_perk_auto_selection_weight_order_focus_value
		}

		if = { # Any focus
			limit = { can_take_elemental_conjuration_trigger = yes }
			multiply = wc_lifestyle_perk_auto_selection_weight_multiply_from_focus_value
		} else = {
			multiply = 0
		}
	}
}
order_magic_tree_4_perk_5 = {
	lifestyle = order_magic_lifestyle
	tree = order_magic_tree_4
	position = { 2 1.5 }
	icon = node_martial

	parent = order_magic_tree_4_perk_2

	effect = {
		if = {
			limit = {
				has_perk = order_magic_tree_5_perk_6
			}
			custom_tooltip = wc_learn_spell_frostfire_bolt
			wc_learn_spell_effect = {
				SPELL = frostfire_bolt
			}
		}
		else = {
			custom_tooltip = wc_learn_spell_frostfire_bolt_fire
		}
		custom_tooltip = wc_frost_synergy_effect
		# Maintenance
		wc_nonelemental_MAGIC_magic_lifestyle_rank_up_check_effect = { MAGIC = order }
	}

	auto_selection_weight = {
		value = wc_order_magic_auto_selection_value
		
		if = {
			limit = {
				has_variable = order_focus
				var:order_focus = flag:fire
			}
			multiply = wc_lifestyle_perk_auto_selection_weight_order_focus_value
		}

		if = { # Any focus
			limit = { can_take_elemental_conjuration_trigger = yes }
			multiply = wc_lifestyle_perk_auto_selection_weight_multiply_from_focus_value
		} else = {
			multiply = 0
		}
	}
}
order_magic_tree_4_perk_6 = {
	lifestyle = order_magic_lifestyle
	tree = order_magic_tree_4
	position = { 4 1.5 }
	icon = node_martial

	parent = order_magic_tree_4_perk_3

	effect = {
		custom_tooltip = wc_flame_armor_effect
		# Maintenance
		wc_nonelemental_MAGIC_magic_lifestyle_rank_up_check_effect = { MAGIC = order }
	}

	auto_selection_weight = {
		value = wc_order_magic_auto_selection_value
		
		if = { 
			limit = {
				has_variable = order_focus
				var:order_focus = flag:fire
			}
			multiply = wc_lifestyle_perk_auto_selection_weight_order_focus_value
		}

		if = { # Any focus
			limit = { can_take_elemental_conjuration_trigger = yes }
			multiply = wc_lifestyle_perk_auto_selection_weight_multiply_from_focus_value
		} else = {
			multiply = 0
		}
	}
}
order_magic_tree_4_perk_7 = {
	lifestyle = order_magic_lifestyle
	tree = order_magic_tree_4
	position = { 0 3.75 }
	icon = node_martial

	parent = order_magic_tree_4_perk_6

	effect = {
		custom_tooltip = wc_twin_flame_effect
		# Maintenance
		wc_nonelemental_MAGIC_magic_lifestyle_rank_up_check_effect = { MAGIC = order }
	}

	auto_selection_weight = {
		value = wc_order_magic_auto_selection_value
		
		if = { 
			limit = {
				has_variable = order_focus
				var:order_focus = flag:fire
			}
			multiply = wc_lifestyle_perk_auto_selection_weight_order_focus_value
		}

		if = { # Any focus
			limit = { can_take_elemental_conjuration_trigger = yes }
			multiply = wc_lifestyle_perk_auto_selection_weight_multiply_from_focus_value
		} else = {
			multiply = 0
		}
	}
}
order_magic_tree_4_perk_8 = {
	lifestyle = order_magic_lifestyle
	tree = order_magic_tree_4
	position = { 4 3.75 }
	icon = node_martial
	parent = order_magic_tree_4_perk_4

	effect = {
		custom_tooltip = wc_learn_spell_flamestrike
		wc_learn_spell_effect = {
			SPELL = flamestrike
		}
		# Maintenance
		wc_nonelemental_MAGIC_magic_lifestyle_rank_up_check_effect = { MAGIC = order }
	}

	auto_selection_weight = {
		value = wc_order_magic_auto_selection_value
		
		if = { 
			limit = {
				has_variable = order_focus
				var:order_focus = flag:fire
			}
			multiply = wc_lifestyle_perk_auto_selection_weight_order_focus_value
		}

		if = { # Any focus
			limit = { can_take_elemental_conjuration_trigger = yes }
			multiply = wc_lifestyle_perk_auto_selection_weight_multiply_from_focus_value
		} else = {
			multiply = 0
		}
	}
}
order_magic_tree_4_perk_9 = {
	lifestyle = order_magic_lifestyle
	tree = order_magic_tree_4
	position = { 2 5 }
	icon = node_martial

	parent = order_magic_tree_4_perk_5
	parent = order_magic_tree_4_perk_7
	parent = order_magic_tree_4_perk_8

	can_be_picked = { 
		NOT = { has_perk = order_magic_tree_5_perk_9 }
	}

	auto_selection_weight = {
		value = wc_order_magic_auto_selection_value
		
		if = { 
			limit = {
				has_variable = order_focus
				var:order_focus = flag:fire
			}
			multiply = wc_lifestyle_perk_auto_selection_weight_order_focus_value
		}

		if = { # Any focus
			limit = { can_take_elemental_conjuration_trigger = yes }
			multiply = wc_lifestyle_perk_auto_selection_weight_multiply_from_focus_value
		} else = {
			multiply = 0
		}
	}

	effect = {
		custom_description_no_bullet = {
			text = WC_ARCANE_ELEMENTAL_FINAL_PERK_EXCLUSIVE
		}
		add_trait = master_pyromancer
		# Maintenance
		wc_nonelemental_MAGIC_magic_lifestyle_rank_up_check_effect = { MAGIC = order }
	}
}


order_magic_tree_5_perk_1 = {
	lifestyle = order_magic_lifestyle
	tree = order_magic_tree_5
	position = { 0.5 0 }
	icon = node_diplomacy

	can_be_picked = { 
		can_take_elemental_conjuration_trigger = yes
	}

	can_be_auto_selected = {
		magic_lifestyle_is_valid_trigger  = { MAGIC = order }
	}

	auto_selection_weight = {
		value = wc_order_magic_auto_selection_value
		
		if = { 
			limit = {
				has_variable = order_focus
				var:order_focus = flag:ice
			}
			multiply = wc_lifestyle_perk_auto_selection_weight_order_focus_value
		}

		if = { # Any focus
			limit = { can_take_elemental_conjuration_trigger = yes }
			multiply = wc_lifestyle_perk_auto_selection_weight_multiply_from_focus_value
		} else = {
			multiply = 0
		}
	}

	effect = {
		custom_tooltip = wc_learn_spell_frostbolt
		wc_learn_spell_effect = {
			SPELL = frostbolt
		}
		# Maintenance
		wc_nonelemental_MAGIC_magic_lifestyle_rank_up_check_effect = { MAGIC = order }
	}
}

order_magic_tree_5_perk_2 = {
	lifestyle = order_magic_lifestyle
	tree = order_magic_tree_5
	position = { 2 0 }
	icon = node_diplomacy

	can_be_picked = { 
		can_take_elemental_conjuration_trigger = yes
	}

	can_be_auto_selected = {
		magic_lifestyle_is_valid_trigger  = { MAGIC = order }
	}

	auto_selection_weight = {
		value = wc_order_magic_auto_selection_value
		
		if = { 
			limit = {
				has_variable = order_focus
				var:order_focus = flag:ice
			}
			multiply = wc_lifestyle_perk_auto_selection_weight_order_focus_value
		}

		if = { # Any focus
			limit = { can_take_elemental_conjuration_trigger = yes }
			multiply = wc_lifestyle_perk_auto_selection_weight_multiply_from_focus_value
		} else = {
			multiply = 0
		}
	}

	effect = {
		custom_tooltip = wc_learn_spell_frost_armor
		wc_learn_spell_effect = {
			SPELL = frost_armor
		}
		# Maintenance
		wc_nonelemental_MAGIC_magic_lifestyle_rank_up_check_effect = { MAGIC = order }
	}
}

order_magic_tree_5_perk_3 = {
	lifestyle = order_magic_lifestyle
	tree = order_magic_tree_5
	position = { 3.5 0 }
	icon = node_diplomacy

	can_be_picked = { 
		can_take_elemental_conjuration_trigger = yes
	}

	can_be_auto_selected = {
		magic_lifestyle_is_valid_trigger  = { MAGIC = order }
	}

	auto_selection_weight = {
		value = wc_order_magic_auto_selection_value
		
		if = { 
			limit = {
				has_variable = order_focus
				var:order_focus = flag:ice
			}
			multiply = wc_lifestyle_perk_auto_selection_weight_order_focus_value
		}

		if = { # Any focus
			limit = { can_take_elemental_conjuration_trigger = yes }
			multiply = wc_lifestyle_perk_auto_selection_weight_multiply_from_focus_value
		} else = {
			multiply = 0
		}
	}

	character_modifier = {
		character_travel_speed = 5
	}

	effect = {
		custom_tooltip = wc_freeze_time_effect
		# Maintenance
		wc_nonelemental_MAGIC_magic_lifestyle_rank_up_check_effect = { MAGIC = order }
	}
}

order_magic_tree_5_perk_4 = {
	lifestyle = order_magic_lifestyle
	tree = order_magic_tree_5
	position = { 0 2 }
	icon = node_diplomacy

	parent = order_magic_tree_5_perk_1

	auto_selection_weight = {
		value = wc_order_magic_auto_selection_value
		
		if = { 
			limit = {
				has_variable = order_focus
				var:order_focus = flag:ice
			}
			multiply = wc_lifestyle_perk_auto_selection_weight_order_focus_value
		}

		if = { # Any focus
			limit = { can_take_elemental_conjuration_trigger = yes }
			multiply = wc_lifestyle_perk_auto_selection_weight_multiply_from_focus_value
		} else = {
			multiply = 0
		}
	}

	effect = {
		custom_tooltip = wc_icy_veins_effect
		# Maintenance
		wc_nonelemental_MAGIC_magic_lifestyle_rank_up_check_effect = { MAGIC = order }
	}
}

order_magic_tree_5_perk_5 = {
	lifestyle = order_magic_lifestyle
	tree = order_magic_tree_5
	position = { 2 2 }
	icon = node_diplomacy

	parent = order_magic_tree_5_perk_2

	auto_selection_weight = {
		value = wc_order_magic_auto_selection_value
		
		if = { 
			limit = {
				has_variable = order_focus
				var:order_focus = flag:ice
			}
			multiply = wc_lifestyle_perk_auto_selection_weight_order_focus_value
		}

		if = { # Any focus
			limit = { can_take_elemental_conjuration_trigger = yes }
			multiply = wc_lifestyle_perk_auto_selection_weight_multiply_from_focus_value
		} else = {
			multiply = 0
		}
	}

	effect = {
		custom_tooltip = wc_learn_spell_frost_nova
		wc_learn_spell_effect = {
			SPELL = frost_nova
		}
		# Maintenance
		wc_nonelemental_MAGIC_magic_lifestyle_rank_up_check_effect = { MAGIC = order }
	}
}

order_magic_tree_5_perk_6 = {
	lifestyle = order_magic_lifestyle
	tree = order_magic_tree_5
	position = { 4 2 }
	icon = node_diplomacy

	parent = order_magic_tree_5_perk_3

	auto_selection_weight = {
		value = wc_order_magic_auto_selection_value
		
		if = { 
			limit = {
				has_variable = order_focus
				var:order_focus = flag:ice
			}
			multiply = wc_lifestyle_perk_auto_selection_weight_order_focus_value
		}

		if = { # Any focus
			limit = { can_take_elemental_conjuration_trigger = yes }
			multiply = wc_lifestyle_perk_auto_selection_weight_multiply_from_focus_value
		} else = {
			multiply = 0
		}
	}

	effect = {
		if = {
			limit = {
				has_perk = order_magic_tree_4_perk_5
			}
			custom_tooltip = wc_learn_spell_frostfire_bolt
			wc_learn_spell_effect = {
				SPELL = frostfire_bolt
			}
		}
		else = {
			custom_tooltip = wc_learn_spell_frostfire_bolt_frost
		}
		custom_tooltip = wc_flame_synergy_effect
		# Maintenance
		wc_nonelemental_MAGIC_magic_lifestyle_rank_up_check_effect = { MAGIC = order }
	}
}

order_magic_tree_5_perk_7 = {
	lifestyle = order_magic_lifestyle
	tree = order_magic_tree_5
	position = { 0.5 4 }
	icon = node_diplomacy

	parent = order_magic_tree_5_perk_5
	parent = order_magic_tree_5_perk_4

	auto_selection_weight = {
		value = wc_order_magic_auto_selection_value
		
		if = { 
			limit = {
				has_variable = order_focus
				var:order_focus = flag:ice
			}
			multiply = wc_lifestyle_perk_auto_selection_weight_order_focus_value
		}

		if = { # Any focus
			limit = { can_take_elemental_conjuration_trigger = yes }
			multiply = wc_lifestyle_perk_auto_selection_weight_multiply_from_focus_value
		} else = {
			multiply = 0
		}
	}

	effect = {
		custom_tooltip = wc_learn_spell_blizzard
		wc_learn_spell_effect = {
			SPELL = blizzard
		}
		# Maintenance
		wc_nonelemental_MAGIC_magic_lifestyle_rank_up_check_effect = { MAGIC = order }
	}
}

order_magic_tree_5_perk_8 = {
	lifestyle = order_magic_lifestyle
	tree = order_magic_tree_5
	position = { 3.5 4 }
	icon = node_diplomacy

	parent = order_magic_tree_5_perk_5
	parent = order_magic_tree_5_perk_6

	auto_selection_weight = {
		value = wc_order_magic_auto_selection_value
		
		if = { 
			limit = {
				has_variable = order_focus
				var:order_focus = flag:ice
			}
			multiply = wc_lifestyle_perk_auto_selection_weight_order_focus_value
		}

		if = { # Any focus
			limit = { can_take_elemental_conjuration_trigger = yes }
			multiply = wc_lifestyle_perk_auto_selection_weight_multiply_from_focus_value
		} else = {
			multiply = 0
		}
	}

	effect = {
		custom_tooltip = wc_freezerburn_burned_effect
		custom_tooltip = wc_freezerburn_frostbite_effect
		# Maintenance
		wc_nonelemental_MAGIC_magic_lifestyle_rank_up_check_effect = { MAGIC = order }
	}
}

order_magic_tree_5_perk_9 = {
	lifestyle = order_magic_lifestyle
	tree = order_magic_tree_5
	position = { 2 5 }
	icon = node_diplomacy

	parent = order_magic_tree_5_perk_8
	parent = order_magic_tree_5_perk_7

	can_be_picked = {
		NOT = { has_perk = order_magic_tree_4_perk_9 }
	}

	auto_selection_weight = {
		value = wc_order_magic_auto_selection_value
		
		if = { 
			limit = {
				has_variable = order_focus
				var:order_focus = flag:ice
			}
			multiply = wc_lifestyle_perk_auto_selection_weight_order_focus_value
		}

		if = { # Any focus
			limit = { can_take_elemental_conjuration_trigger = yes }
			multiply = wc_lifestyle_perk_auto_selection_weight_multiply_from_focus_value
		} else = {
			multiply = 0
		}
	}

	effect = {
		custom_description_no_bullet = {
			text = WC_ARCANE_ELEMENTAL_FINAL_PERK_EXCLUSIVE
		}
		add_trait = master_cryomancer
		# Maintenance
		wc_nonelemental_MAGIC_magic_lifestyle_rank_up_check_effect = { MAGIC = order }
	}
}