### Inviting and joining
# All these modifiers should share the same conditions
invite_to_this_union_modifiers = {
	modifier = {
		add = 20
		
		has_crisis_on_same_continent_trigger = yes
		
		desc = WORLD_IS_IN_DANGER
	}
	
	modifier = {
		add = 20
		
		culture_prefers_union_of_trigger = { target = scope:actor }
		
		desc = CULTURE_PREFERS_UNION
	}
	modifier = {
		add = 20
		
		religion_prefers_union_of_trigger = { target = scope:actor }
		
		desc = RELIGION_PREFERS_UNION
	}
	modifier = {
		add = -50
		
		union_overcrowded_of_trigger = { target = scope:actor }
		
		desc = UNION_IS_OVERCROWDED
	}
	modifier = {
		add = -50
		scope:recipient = { is_aggressive_trigger = yes }
		desc = WARMONGER_RELIGION
	}
	modifier = {
		add = -50
		scope:recipient = {
			OR = {
				has_title = title:d_syndicate
				has_title = title:d_defias_brotherhood
				has_title = title:d_darkmoon_island
				has_character_flag = is_medivh_flag
				culture = { has_cultural_tradition = tradition_practiced_pirates }
			}
		}
		desc = NOT_INTERESTED_IN_UNIONS
	}
}

join_common_modifiers = {
	modifier = {
		factor = 2
		has_crisis_on_same_continent_trigger = yes
	}
	modifier = {
		factor = 2
		highest_held_title_tier >= tier_kingdom
	}
	
	modifier = {
		factor = 0
		OR = {
			# is_aggressive_trigger = yes
			has_title = title:d_syndicate
			has_title = title:d_defias_brotherhood
			has_title = title:d_darkmoon_island
			has_character_flag = is_medivh_flag
			culture = { has_cultural_tradition = tradition_practiced_pirates }
			religion = religion:draconism_religion
		}
	}
}

join_alliance_modifiers = {
	join_common_modifiers = yes
	
	modifier = {
		factor = 7
		has_alliance_religion_trigger = yes
	}
	modifier = {
		factor = 7
		has_alliance_culture_trigger = yes
	}
	
	modifier = {
		factor = 0
		union_overcrowded_trigger = { faction = alliance }
	}
	modifier = {
		factor = 0
		is_aggressive_trigger = yes
	}
}
	
join_horde_modifiers = {
	join_common_modifiers = yes
	
	modifier = {
		factor = 7
		has_horde_religion_trigger = yes
	}
	modifier = {
		factor = 7
		has_horde_culture_trigger = yes
	}
	
	modifier = {
		factor = 0
		union_overcrowded_trigger = { faction = horde }
	}
	modifier = {
		factor = 0
		is_aggressive_trigger = yes
	}
}

join_custom_union_modifiers = {
	join_common_modifiers = yes
	
	modifier = {
		factor = 14
		has_custom_union_religion_trigger = yes
	}
	modifier = {
		factor = 14
		has_custom_union_culture_trigger = yes
	}
	
	modifier = {
		factor = 0
		union_overcrowded_trigger = { faction = custom }
	}
}
union_leader_candidate_modifier = {
	#Age bonus *10
	modifier = {
		add = {
			value = age divide = racial_age_multiplier_value multiply = 10
			ceiling = yes
		}
	}
	#Prestige level bonus
	modifier = {
		add = {
			value = prestige_level subtract = 1 multiply = 500
		}
	}
	#Sum of attributes *10
	modifier = {
		add = {
			value = diplomacy
			add = martial
			add = stewardship
			add = intrigue
			add = learning
			multiply = 10
		}
	}
	#Ambitious
	modifier = {
		has_trait = ambitious
		add = 1000
	}
	#Campaign fund
	modifier = {
		has_variable = campaign_fund
		add = var:campaign_fund
	}
	#Preferable attribute of union *40
	modifier = {
		trigger_if = {
			limit = {
				has_variable = this_union
			}
			any_in_global_list = {
				variable = all_unions
				var:this_union = prev.var:this_union
				save_temporary_scope_as = my_union
			}
		}
		trigger_else = {
			has_variable = temp_union
			any_in_global_list = {
				variable = all_unions
				var:this_union = prev.var:temp_union
				save_temporary_scope_as = my_union
			}
		}
		add = {
			value = 0
			if = {
				limit = {
					scope:my_union.var:this_union = flag:alliance
				}
				add = {
					value = diplomacy
					subtract = 10
					multiply = 100
				}
			}
			else_if = {
				limit = {
					scope:my_union.var:this_union = flag:horde
				}
				add = {
					value = martial
					subtract = 10
					multiply = 100
				}
			}
			#Primary heir bonus/penalty
			if = {
				limit = { has_character_flag = union_leader_primary_heir }
				if = {
					limit = {
						scope:my_union.var:this_union = flag:alliance
					}
					add = 4000
				}
				else_if = {
					limit = {
						scope:my_union.var:this_union = flag:horde
					}
					add = -500
				}
				add = {
					value = scope:my_union.story_owner.primary_title.tier
					subtract = 1
					multiply = 250
				}
			}
			#Tier level bonus
			else_if = {
				limit = { is_ruler = yes }
				add = {
					value = primary_title.tier
					subtract = 1
					multiply = 250
					desc = union_tier_bonus
				}
			}
		}
	}
}